var iT=t=>{throw TypeError(t)};var nv=(t,e,n)=>e.has(t)||iT("Cannot "+n);var R=(t,e,n)=>(nv(t,e,"read from private field"),n?n.call(t):e.get(t)),se=(t,e,n)=>e.has(t)?iT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ne=(t,e,n,r)=>(nv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),me=(t,e,n)=>(nv(t,e,"access private method"),n);var xf=(t,e,n,r)=>({set _(i){ne(t,e,i,n)},get _(){return R(t,e,r)}});function I$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function We(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kA={exports:{}},Im={},TA={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=Symbol.for("react.element"),N$=Symbol.for("react.portal"),D$=Symbol.for("react.fragment"),j$=Symbol.for("react.strict_mode"),L$=Symbol.for("react.profiler"),$$=Symbol.for("react.provider"),F$=Symbol.for("react.context"),U$=Symbol.for("react.forward_ref"),B$=Symbol.for("react.suspense"),z$=Symbol.for("react.memo"),q$=Symbol.for("react.lazy"),oT=Symbol.iterator;function W$(t){return t===null||typeof t!="object"?null:(t=oT&&t[oT]||t["@@iterator"],typeof t=="function"?t:null)}var CA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_A=Object.assign,EA={};function ol(t,e,n){this.props=t,this.context=e,this.refs=EA,this.updater=n||CA}ol.prototype.isReactComponent={};ol.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ol.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PA(){}PA.prototype=ol.prototype;function iS(t,e,n){this.props=t,this.context=e,this.refs=EA,this.updater=n||CA}var oS=iS.prototype=new PA;oS.constructor=iS;_A(oS,ol.prototype);oS.isPureReactComponent=!0;var aT=Array.isArray,OA=Object.prototype.hasOwnProperty,aS={current:null},AA={key:!0,ref:!0,__self:!0,__source:!0};function RA(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)OA.call(e,r)&&!AA.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Qd,type:t,key:o,ref:a,props:i,_owner:aS.current}}function V$(t,e){return{$$typeof:Qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qd}function H$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sT=/\/+/g;function rv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H$(""+t.key):e.toString(36)}function uh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qd:case N$:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+rv(a,0):r,aT(i)?(n="",t!=null&&(n=t.replace(sT,"$&/")+"/"),uh(i,e,n,"",function(l){return l})):i!=null&&(sS(i)&&(i=V$(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(sT,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",aT(t))for(var s=0;s<t.length;s++){o=t[s];var c=r+rv(o,s);a+=uh(o,e,n,c,i)}else if(c=W$(t),typeof c=="function")for(t=c.call(t),s=0;!(o=t.next()).done;)o=o.value,c=r+rv(o,s++),a+=uh(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Tf(t,e,n){if(t==null)return t;var r=[],i=0;return uh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function K$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},dh={transition:null},G$={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:dh,ReactCurrentOwner:aS};function MA(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Tf,forEach:function(t,e,n){Tf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tf(t,function(){e++}),e},toArray:function(t){return Tf(t,function(e){return e})||[]},only:function(t){if(!sS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=ol;xe.Fragment=D$;xe.Profiler=L$;xe.PureComponent=iS;xe.StrictMode=j$;xe.Suspense=B$;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G$;xe.act=MA;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_A({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=aS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)OA.call(e,c)&&!AA.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Qd,type:t.type,key:i,ref:o,props:r,_owner:a}};xe.createContext=function(t){return t={$$typeof:F$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$$,_context:t},t.Consumer=t};xe.createElement=RA;xe.createFactory=function(t){var e=RA.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:U$,render:t}};xe.isValidElement=sS;xe.lazy=function(t){return{$$typeof:q$,_payload:{_status:-1,_result:t},_init:K$}};xe.memo=function(t,e){return{$$typeof:z$,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=dh.transition;dh.transition={};try{t()}finally{dh.transition=e}};xe.unstable_act=MA;xe.useCallback=function(t,e){return mn.current.useCallback(t,e)};xe.useContext=function(t){return mn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return mn.current.useEffect(t,e)};xe.useId=function(){return mn.current.useId()};xe.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return mn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};xe.useRef=function(t){return mn.current.useRef(t)};xe.useState=function(t){return mn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return mn.current.useTransition()};xe.version="18.3.1";TA.exports=xe;var M=TA.exports;const I=We(M),Y$=I$({__proto__:null,default:I},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X$=M,Q$=Symbol.for("react.element"),J$=Symbol.for("react.fragment"),Z$=Object.prototype.hasOwnProperty,eF=X$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tF={key:!0,ref:!0,__self:!0,__source:!0};function IA(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Z$.call(e,r)&&!tF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Q$,type:t,key:o,ref:a,props:i,_owner:eF.current}}Im.Fragment=J$;Im.jsx=IA;Im.jsxs=IA;kA.exports=Im;var k=kA.exports,Dy={},NA={exports:{}},Yn={},DA={exports:{}},jA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,B){var W=N.length;N.push(B);e:for(;0<W;){var X=W-1>>>1,G=N[X];if(0<i(G,B))N[X]=B,N[W]=G,W=X;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],W=N.pop();if(W!==B){N[0]=W;e:for(var X=0,G=N.length,ae=G>>>1;X<ae;){var pe=2*(X+1)-1,Me=N[pe],Ke=pe+1,Qn=N[Ke];if(0>i(Me,W))Ke<G&&0>i(Qn,Me)?(N[X]=Qn,N[Ke]=W,X=Ke):(N[X]=Me,N[pe]=W,X=pe);else if(Ke<G&&0>i(Qn,W))N[X]=Qn,N[Ke]=W,X=Ke;else break e}}return B}function i(N,B){var W=N.sortIndex-B.sortIndex;return W!==0?W:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=N)r(l),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(l)}}function S(N){if(p=!1,w(N),!m)if(n(c)!==null)m=!0,F(b);else{var B=n(l);B!==null&&q(S,B.startTime-N)}}function b(N,B){m=!1,p&&(p=!1,v(C),C=-1),h=!0;var W=f;try{for(w(B),d=n(c);d!==null&&(!(d.expirationTime>B)||N&&!A());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var G=X(d.expirationTime<=B);B=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(c)&&r(c),w(B)}else r(c);d=n(c)}if(d!==null)var ae=!0;else{var pe=n(l);pe!==null&&q(S,pe.startTime-B),ae=!1}return ae}finally{d=null,f=W,h=!1}}var x=!1,T=null,C=-1,_=5,E=-1;function A(){return!(t.unstable_now()-E<_)}function P(){if(T!==null){var N=t.unstable_now();E=N;var B=!0;try{B=T(!0,N)}finally{B?L():(x=!1,T=null)}}else x=!1}var L;if(typeof y=="function")L=function(){y(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=P,L=function(){$.postMessage(null)}}else L=function(){g(P,0)};function F(N){T=N,x||(x=!0,L())}function q(N,B){C=g(function(){N(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,F(b))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var W=f;f=B;try{return N()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=f;f=N;try{return B()}finally{f=W}},t.unstable_scheduleCallback=function(N,B,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=W+G,N={id:u++,callback:B,priorityLevel:N,startTime:W,expirationTime:G,sortIndex:-1},W>X?(N.sortIndex=W,e(l,N),n(c)===null&&N===n(l)&&(p?(v(C),C=-1):p=!0,q(S,W-X))):(N.sortIndex=G,e(c,N),m||h||(m=!0,F(b))),N},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(N){var B=f;return function(){var W=f;f=B;try{return N.apply(this,arguments)}finally{f=W}}}})(jA);DA.exports=jA;var nF=DA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rF=M,Kn=nF;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LA=new Set,ju={};function fs(t,e){Cc(t,e),Cc(t+"Capture",e)}function Cc(t,e){for(ju[t]=e,t=0;t<e.length;t++)LA.add(e[t])}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jy=Object.prototype.hasOwnProperty,iF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cT={},lT={};function oF(t){return jy.call(lT,t)?!0:jy.call(cT,t)?!1:iF.test(t)?lT[t]=!0:(cT[t]=!0,!1)}function aF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sF(t,e,n,r){if(e===null||typeof e>"u"||aF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var cS=/[\-:]([a-z])/g;function lS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cS,lS);Yt[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cS,lS);Yt[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cS,lS);Yt[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function uS(t,e,n,r){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sF(e,n,i,r)&&(n=null),r||i===null?oF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ji=rF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cf=Symbol.for("react.element"),Os=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),dS=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),$A=Symbol.for("react.provider"),FA=Symbol.for("react.context"),fS=Symbol.for("react.forward_ref"),$y=Symbol.for("react.suspense"),Fy=Symbol.for("react.suspense_list"),hS=Symbol.for("react.memo"),ho=Symbol.for("react.lazy"),UA=Symbol.for("react.offscreen"),uT=Symbol.iterator;function Al(t){return t===null||typeof t!="object"?null:(t=uT&&t[uT]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,iv;function su(t){if(iv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);iv=e&&e[1]||""}return`
`+iv+t}var ov=!1;function av(t,e){if(!t||ov)return"";ov=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=s);break}}}finally{ov=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?su(t):""}function cF(t){switch(t.tag){case 5:return su(t.type);case 16:return su("Lazy");case 13:return su("Suspense");case 19:return su("SuspenseList");case 0:case 2:case 15:return t=av(t.type,!1),t;case 11:return t=av(t.type.render,!1),t;case 1:return t=av(t.type,!0),t;default:return""}}function Uy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Os:return"Portal";case Ly:return"Profiler";case dS:return"StrictMode";case $y:return"Suspense";case Fy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FA:return(t.displayName||"Context")+".Consumer";case $A:return(t._context.displayName||"Context")+".Provider";case fS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hS:return e=t.displayName||null,e!==null?e:Uy(t.type)||"Memo";case ho:e=t._payload,t=t._init;try{return Uy(t(e))}catch{}}return null}function lF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uy(e);case 8:return e===dS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function BA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uF(t){var e=BA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _f(t){t._valueTracker||(t._valueTracker=uF(t))}function zA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=BA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function By(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qA(t,e){e=e.checked,e!=null&&uS(t,"checked",e,!1)}function zy(t,e){qA(t,e);var n=Qo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qy(t,e.type,n):e.hasOwnProperty("defaultValue")&&qy(t,e.type,Qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qy(t,e,n){(e!=="number"||qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cu=Array.isArray;function Ks(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(cu(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qo(n)}}function WA(t,e){var n=Qo(e.value),r=Qo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ef,HA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ef=Ef||document.createElement("div"),Ef.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ef.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dF=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(t){dF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gu[e]=gu[t]})});function KA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gu.hasOwnProperty(t)&&gu[t]?(""+e).trim():e+"px"}function GA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=KA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fF=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hy(t,e){if(e){if(fF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Ky(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gy=null;function pS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yy=null,Gs=null,Ys=null;function mT(t){if(t=ef(t)){if(typeof Yy!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=$m(e),Yy(t.stateNode,t.type,e))}}function YA(t){Gs?Ys?Ys.push(t):Ys=[t]:Gs=t}function XA(){if(Gs){var t=Gs,e=Ys;if(Ys=Gs=null,mT(t),e)for(t=0;t<e.length;t++)mT(e[t])}}function QA(t,e){return t(e)}function JA(){}var sv=!1;function ZA(t,e,n){if(sv)return t(e,n);sv=!0;try{return QA(t,e,n)}finally{sv=!1,(Gs!==null||Ys!==null)&&(JA(),XA())}}function $u(t,e){var n=t.stateNode;if(n===null)return null;var r=$m(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Xy=!1;if(qi)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Xy=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Xy=!1}function hF(t,e,n,r,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var vu=!1,Wh=null,Vh=!1,Qy=null,pF={onError:function(t){vu=!0,Wh=t}};function mF(t,e,n,r,i,o,a,s,c){vu=!1,Wh=null,hF.apply(pF,arguments)}function gF(t,e,n,r,i,o,a,s,c){if(mF.apply(this,arguments),vu){if(vu){var l=Wh;vu=!1,Wh=null}else throw Error(Q(198));Vh||(Vh=!0,Qy=l)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gT(t){if(hs(t)!==t)throw Error(Q(188))}function vF(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gT(i),t;if(o===r)return gT(i),e;o=o.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function tR(t){return t=vF(t),t!==null?nR(t):null}function nR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nR(t);if(e!==null)return e;t=t.sibling}return null}var rR=Kn.unstable_scheduleCallback,vT=Kn.unstable_cancelCallback,yF=Kn.unstable_shouldYield,bF=Kn.unstable_requestPaint,ht=Kn.unstable_now,wF=Kn.unstable_getCurrentPriorityLevel,mS=Kn.unstable_ImmediatePriority,iR=Kn.unstable_UserBlockingPriority,Hh=Kn.unstable_NormalPriority,SF=Kn.unstable_LowPriority,oR=Kn.unstable_IdlePriority,Nm=null,ii=null;function xF(t){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Nm,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:CF,kF=Math.log,TF=Math.LN2;function CF(t){return t>>>=0,t===0?32:31-(kF(t)/TF|0)|0}var Pf=64,Of=4194304;function lu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=lu(s):(o&=a,o!==0&&(r=lu(o)))}else a=n&~i,a!==0?r=lu(a):o!==0&&(r=lu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function _F(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-zr(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=_F(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}function Jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aR(){var t=Pf;return Pf<<=1,!(Pf&4194240)&&(Pf=64),t}function cv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function PF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function gS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function sR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cR,vS,lR,uR,dR,Zy=!1,Af=[],No=null,Do=null,jo=null,Fu=new Map,Uu=new Map,go=[],OF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yT(t,e){switch(t){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(e.pointerId)}}function Ml(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ef(e),e!==null&&vS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AF(t,e,n,r,i){switch(e){case"focusin":return No=Ml(No,t,e,n,r,i),!0;case"dragenter":return Do=Ml(Do,t,e,n,r,i),!0;case"mouseover":return jo=Ml(jo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Fu.set(o,Ml(Fu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Uu.set(o,Ml(Uu.get(o)||null,t,e,n,r,i)),!0}return!1}function fR(t){var e=Ca(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=eR(n),e!==null){t.blockedOn=e,dR(t.priority,function(){lR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=e0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gy=r,n.target.dispatchEvent(r),Gy=null}else return e=ef(n),e!==null&&vS(e),t.blockedOn=n,!1;e.shift()}return!0}function bT(t,e,n){fh(t)&&n.delete(e)}function RF(){Zy=!1,No!==null&&fh(No)&&(No=null),Do!==null&&fh(Do)&&(Do=null),jo!==null&&fh(jo)&&(jo=null),Fu.forEach(bT),Uu.forEach(bT)}function Il(t,e){t.blockedOn===e&&(t.blockedOn=null,Zy||(Zy=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,RF)))}function Bu(t){function e(i){return Il(i,t)}if(0<Af.length){Il(Af[0],t);for(var n=1;n<Af.length;n++){var r=Af[n];r.blockedOn===t&&(r.blockedOn=null)}}for(No!==null&&Il(No,t),Do!==null&&Il(Do,t),jo!==null&&Il(jo,t),Fu.forEach(e),Uu.forEach(e),n=0;n<go.length;n++)r=go[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<go.length&&(n=go[0],n.blockedOn===null);)fR(n),n.blockedOn===null&&go.shift()}var Xs=Ji.ReactCurrentBatchConfig,Gh=!0;function MF(t,e,n,r){var i=je,o=Xs.transition;Xs.transition=null;try{je=1,yS(t,e,n,r)}finally{je=i,Xs.transition=o}}function IF(t,e,n,r){var i=je,o=Xs.transition;Xs.transition=null;try{je=4,yS(t,e,n,r)}finally{je=i,Xs.transition=o}}function yS(t,e,n,r){if(Gh){var i=e0(t,e,n,r);if(i===null)yv(t,e,r,Yh,n),yT(t,r);else if(AF(i,t,e,n,r))r.stopPropagation();else if(yT(t,r),e&4&&-1<OF.indexOf(t)){for(;i!==null;){var o=ef(i);if(o!==null&&cR(o),o=e0(t,e,n,r),o===null&&yv(t,e,r,Yh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else yv(t,e,r,null,n)}}var Yh=null;function e0(t,e,n,r){if(Yh=null,t=pS(r),t=Ca(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yh=t,null}function hR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wF()){case mS:return 1;case iR:return 4;case Hh:case SF:return 16;case oR:return 536870912;default:return 16}default:return 16}}var Oo=null,bS=null,hh=null;function pR(){if(hh)return hh;var t,e=bS,n=e.length,r,i="value"in Oo?Oo.value:Oo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return hh=i.slice(t,1<r?1-r:void 0)}function ph(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rf(){return!0}function wT(){return!1}function Xn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Rf:wT,this.isPropagationStopped=wT,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rf)},persist:function(){},isPersistent:Rf}),e}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wS=Xn(al),Zd=it({},al,{view:0,detail:0}),NF=Xn(Zd),lv,uv,Nl,Dm=it({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nl&&(Nl&&t.type==="mousemove"?(lv=t.screenX-Nl.screenX,uv=t.screenY-Nl.screenY):uv=lv=0,Nl=t),lv)},movementY:function(t){return"movementY"in t?t.movementY:uv}}),ST=Xn(Dm),DF=it({},Dm,{dataTransfer:0}),jF=Xn(DF),LF=it({},Zd,{relatedTarget:0}),dv=Xn(LF),$F=it({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),FF=Xn($F),UF=it({},al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BF=Xn(UF),zF=it({},al,{data:0}),xT=Xn(zF),qF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VF[t])?!!e[t]:!1}function SS(){return HF}var KF=it({},Zd,{key:function(t){if(t.key){var e=qF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ph(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SS,charCode:function(t){return t.type==="keypress"?ph(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ph(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GF=Xn(KF),YF=it({},Dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kT=Xn(YF),XF=it({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SS}),QF=Xn(XF),JF=it({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZF=Xn(JF),eU=it({},Dm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tU=Xn(eU),nU=[9,13,27,32],xS=qi&&"CompositionEvent"in window,yu=null;qi&&"documentMode"in document&&(yu=document.documentMode);var rU=qi&&"TextEvent"in window&&!yu,mR=qi&&(!xS||yu&&8<yu&&11>=yu),TT=" ",CT=!1;function gR(t,e){switch(t){case"keyup":return nU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function iU(t,e){switch(t){case"compositionend":return vR(e);case"keypress":return e.which!==32?null:(CT=!0,TT);case"textInput":return t=e.data,t===TT&&CT?null:t;default:return null}}function oU(t,e){if(Rs)return t==="compositionend"||!xS&&gR(t,e)?(t=pR(),hh=bS=Oo=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mR&&e.locale!=="ko"?null:e.data;default:return null}}var aU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _T(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aU[t.type]:e==="textarea"}function yR(t,e,n,r){YA(r),e=Xh(e,"onChange"),0<e.length&&(n=new wS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bu=null,zu=null;function sU(t){OR(t,0)}function jm(t){var e=Ns(t);if(zA(e))return t}function cU(t,e){if(t==="change")return e}var bR=!1;if(qi){var fv;if(qi){var hv="oninput"in document;if(!hv){var ET=document.createElement("div");ET.setAttribute("oninput","return;"),hv=typeof ET.oninput=="function"}fv=hv}else fv=!1;bR=fv&&(!document.documentMode||9<document.documentMode)}function PT(){bu&&(bu.detachEvent("onpropertychange",wR),zu=bu=null)}function wR(t){if(t.propertyName==="value"&&jm(zu)){var e=[];yR(e,zu,t,pS(t)),ZA(sU,e)}}function lU(t,e,n){t==="focusin"?(PT(),bu=e,zu=n,bu.attachEvent("onpropertychange",wR)):t==="focusout"&&PT()}function uU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jm(zu)}function dU(t,e){if(t==="click")return jm(e)}function fU(t,e){if(t==="input"||t==="change")return jm(e)}function hU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:hU;function qu(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jy.call(e,i)||!Wr(t[i],e[i]))return!1}return!0}function OT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function AT(t,e){var n=OT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=OT(n)}}function SR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xR(){for(var t=window,e=qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qh(t.document)}return e}function kS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pU(t){var e=xR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&SR(n.ownerDocument.documentElement,n)){if(r!==null&&kS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=AT(n,o);var a=AT(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mU=qi&&"documentMode"in document&&11>=document.documentMode,Ms=null,t0=null,wu=null,n0=!1;function RT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n0||Ms==null||Ms!==qh(r)||(r=Ms,"selectionStart"in r&&kS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wu&&qu(wu,r)||(wu=r,r=Xh(t0,"onSelect"),0<r.length&&(e=new wS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ms)))}function Mf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Is={animationend:Mf("Animation","AnimationEnd"),animationiteration:Mf("Animation","AnimationIteration"),animationstart:Mf("Animation","AnimationStart"),transitionend:Mf("Transition","TransitionEnd")},pv={},kR={};qi&&(kR=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function Lm(t){if(pv[t])return pv[t];if(!Is[t])return t;var e=Is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kR)return pv[t]=e[n];return t}var TR=Lm("animationend"),CR=Lm("animationiteration"),_R=Lm("animationstart"),ER=Lm("transitionend"),PR=new Map,MT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(t,e){PR.set(t,e),fs(e,[t])}for(var mv=0;mv<MT.length;mv++){var gv=MT[mv],gU=gv.toLowerCase(),vU=gv[0].toUpperCase()+gv.slice(1);ta(gU,"on"+vU)}ta(TR,"onAnimationEnd");ta(CR,"onAnimationIteration");ta(_R,"onAnimationStart");ta("dblclick","onDoubleClick");ta("focusin","onFocus");ta("focusout","onBlur");ta(ER,"onTransitionEnd");Cc("onMouseEnter",["mouseout","mouseover"]);Cc("onMouseLeave",["mouseout","mouseover"]);Cc("onPointerEnter",["pointerout","pointerover"]);Cc("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yU=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function IT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gF(r,e,void 0,t),t.currentTarget=null}function OR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;IT(i,s,l),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;IT(i,s,l),o=c}}}if(Vh)throw t=Qy,Vh=!1,Qy=null,t}function Ye(t,e){var n=e[s0];n===void 0&&(n=e[s0]=new Set);var r=t+"__bubble";n.has(r)||(AR(e,t,2,!1),n.add(r))}function vv(t,e,n){var r=0;e&&(r|=4),AR(n,t,r,e)}var If="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[If]){t[If]=!0,LA.forEach(function(n){n!=="selectionchange"&&(yU.has(n)||vv(n,!1,t),vv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[If]||(e[If]=!0,vv("selectionchange",!1,e))}}function AR(t,e,n,r){switch(hR(e)){case 1:var i=MF;break;case 4:i=IF;break;default:i=yS}n=i.bind(null,e,n,t),i=void 0,!Xy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yv(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ca(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}ZA(function(){var l=o,u=pS(n),d=[];e:{var f=PR.get(t);if(f!==void 0){var h=wS,m=t;switch(t){case"keypress":if(ph(n)===0)break e;case"keydown":case"keyup":h=GF;break;case"focusin":m="focus",h=dv;break;case"focusout":m="blur",h=dv;break;case"beforeblur":case"afterblur":h=dv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ST;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=jF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=QF;break;case TR:case CR:case _R:h=FF;break;case ER:h=ZF;break;case"scroll":h=NF;break;case"wheel":h=tU;break;case"copy":case"cut":case"paste":h=BF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=kT}var p=(e&4)!==0,g=!p&&t==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var y=l,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=$u(y,v),S!=null&&p.push(Vu(y,S,w)))),g)break;y=y.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Gy&&(m=n.relatedTarget||n.fromElement)&&(Ca(m)||m[Wi]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=l,m=m?Ca(m):null,m!==null&&(g=hs(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=l),h!==m)){if(p=ST,S="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=kT,S="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?f:Ns(h),w=m==null?f:Ns(m),f=new p(S,y+"leave",h,n,u),f.target=g,f.relatedTarget=w,S=null,Ca(u)===l&&(p=new p(v,y+"enter",m,n,u),p.target=w,p.relatedTarget=g,S=p),g=S,h&&m)t:{for(p=h,v=m,y=0,w=p;w;w=ws(w))y++;for(w=0,S=v;S;S=ws(S))w++;for(;0<y-w;)p=ws(p),y--;for(;0<w-y;)v=ws(v),w--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=ws(p),v=ws(v)}p=null}else p=null;h!==null&&NT(d,f,h,p,!1),m!==null&&g!==null&&NT(d,g,m,p,!0)}}e:{if(f=l?Ns(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=cU;else if(_T(f))if(bR)b=fU;else{b=uU;var x=lU}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=dU);if(b&&(b=b(t,l))){yR(d,b,n,u);break e}x&&x(t,f,l),t==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&qy(f,"number",f.value)}switch(x=l?Ns(l):window,t){case"focusin":(_T(x)||x.contentEditable==="true")&&(Ms=x,t0=l,wu=null);break;case"focusout":wu=t0=Ms=null;break;case"mousedown":n0=!0;break;case"contextmenu":case"mouseup":case"dragend":n0=!1,RT(d,n,u);break;case"selectionchange":if(mU)break;case"keydown":case"keyup":RT(d,n,u)}var T;if(xS)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Rs?gR(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(mR&&n.locale!=="ko"&&(Rs||C!=="onCompositionStart"?C==="onCompositionEnd"&&Rs&&(T=pR()):(Oo=u,bS="value"in Oo?Oo.value:Oo.textContent,Rs=!0)),x=Xh(l,C),0<x.length&&(C=new xT(C,t,null,n,u),d.push({event:C,listeners:x}),T?C.data=T:(T=vR(n),T!==null&&(C.data=T)))),(T=rU?iU(t,n):oU(t,n))&&(l=Xh(l,"onBeforeInput"),0<l.length&&(u=new xT("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=T))}OR(d,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$u(t,n),o!=null&&r.unshift(Vu(t,o,i)),o=$u(t,e),o!=null&&r.push(Vu(t,o,i))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NT(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&l!==null&&(s=l,i?(c=$u(n,o),c!=null&&a.unshift(Vu(n,c,s))):i||(c=$u(n,o),c!=null&&a.push(Vu(n,c,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var bU=/\r\n?/g,wU=/\u0000|\uFFFD/g;function DT(t){return(typeof t=="string"?t:""+t).replace(bU,`
`).replace(wU,"")}function Nf(t,e,n){if(e=DT(e),DT(t)!==e&&n)throw Error(Q(425))}function Qh(){}var r0=null,i0=null;function o0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,SU=typeof clearTimeout=="function"?clearTimeout:void 0,jT=typeof Promise=="function"?Promise:void 0,xU=typeof queueMicrotask=="function"?queueMicrotask:typeof jT<"u"?function(t){return jT.resolve(null).then(t).catch(kU)}:a0;function kU(t){setTimeout(function(){throw t})}function bv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bu(e)}function Lo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function LT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sl=Math.random().toString(36).slice(2),ni="__reactFiber$"+sl,Hu="__reactProps$"+sl,Wi="__reactContainer$"+sl,s0="__reactEvents$"+sl,TU="__reactListeners$"+sl,CU="__reactHandles$"+sl;function Ca(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wi]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=LT(t);t!==null;){if(n=t[ni])return n;t=LT(t)}return e}t=n,n=t.parentNode}return null}function ef(t){return t=t[ni]||t[Wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function $m(t){return t[Hu]||null}var c0=[],Ds=-1;function na(t){return{current:t}}function Je(t){0>Ds||(t.current=c0[Ds],c0[Ds]=null,Ds--)}function He(t,e){Ds++,c0[Ds]=t.current,t.current=e}var Jo={},an=na(Jo),Pn=na(!1),Ya=Jo;function _c(t,e){var n=t.type.contextTypes;if(!n)return Jo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function On(t){return t=t.childContextTypes,t!=null}function Jh(){Je(Pn),Je(an)}function $T(t,e,n){if(an.current!==Jo)throw Error(Q(168));He(an,e),He(Pn,n)}function RR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,lF(t)||"Unknown",i));return it({},n,r)}function Zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jo,Ya=an.current,He(an,t),He(Pn,Pn.current),!0}function FT(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=RR(t,e,Ya),r.__reactInternalMemoizedMergedChildContext=t,Je(Pn),Je(an),He(an,t)):Je(Pn),He(Pn,n)}var xi=null,Fm=!1,wv=!1;function MR(t){xi===null?xi=[t]:xi.push(t)}function _U(t){Fm=!0,MR(t)}function ra(){if(!wv&&xi!==null){wv=!0;var t=0,e=je;try{var n=xi;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xi=null,Fm=!1}catch(i){throw xi!==null&&(xi=xi.slice(t+1)),rR(mS,ra),i}finally{je=e,wv=!1}}return null}var js=[],Ls=0,ep=null,tp=0,or=[],ar=0,Xa=null,Mi=1,Ii="";function ga(t,e){js[Ls++]=tp,js[Ls++]=ep,ep=t,tp=e}function IR(t,e,n){or[ar++]=Mi,or[ar++]=Ii,or[ar++]=Xa,Xa=t;var r=Mi;t=Ii;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var o=32-zr(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Mi=1<<32-zr(e)+i|n<<i|r,Ii=o+t}else Mi=1<<o|n<<i|r,Ii=t}function TS(t){t.return!==null&&(ga(t,1),IR(t,1,0))}function CS(t){for(;t===ep;)ep=js[--Ls],js[Ls]=null,tp=js[--Ls],js[Ls]=null;for(;t===Xa;)Xa=or[--ar],or[ar]=null,Ii=or[--ar],or[ar]=null,Mi=or[--ar],or[ar]=null}var Hn=null,Wn=null,Ze=!1,Ir=null;function NR(t,e){var n=lr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function UT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=Lo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xa!==null?{id:Mi,overflow:Ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Wn=null,!0):!1;default:return!1}}function l0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function u0(t){if(Ze){var e=Wn;if(e){var n=e;if(!UT(t,e)){if(l0(t))throw Error(Q(418));e=Lo(n.nextSibling);var r=Hn;e&&UT(t,e)?NR(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Hn=t)}}else{if(l0(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ze=!1,Hn=t}}}function BT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function Df(t){if(t!==Hn)return!1;if(!Ze)return BT(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o0(t.type,t.memoizedProps)),e&&(e=Wn)){if(l0(t))throw DR(),Error(Q(418));for(;e;)NR(t,e),e=Lo(e.nextSibling)}if(BT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=Lo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Hn?Lo(t.stateNode.nextSibling):null;return!0}function DR(){for(var t=Wn;t;)t=Lo(t.nextSibling)}function Ec(){Wn=Hn=null,Ze=!1}function _S(t){Ir===null?Ir=[t]:Ir.push(t)}var EU=Ji.ReactCurrentBatchConfig;function Dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function jf(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zT(t){var e=t._init;return e(t._payload)}function jR(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Bo(v,y),v.index=0,v.sibling=null,v}function o(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,y,w,S){return y===null||y.tag!==6?(y=Ev(w,v.mode,S),y.return=v,y):(y=i(y,w),y.return=v,y)}function c(v,y,w,S){var b=w.type;return b===As?u(v,y,w.props.children,S,w.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ho&&zT(b)===y.type)?(S=i(y,w.props),S.ref=Dl(v,y,w),S.return=v,S):(S=Sh(w.type,w.key,w.props,null,v.mode,S),S.ref=Dl(v,y,w),S.return=v,S)}function l(v,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Pv(w,v.mode,S),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function u(v,y,w,S,b){return y===null||y.tag!==7?(y=Wa(w,v.mode,S,b),y.return=v,y):(y=i(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ev(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cf:return w=Sh(y.type,y.key,y.props,null,v.mode,w),w.ref=Dl(v,null,y),w.return=v,w;case Os:return y=Pv(y,v.mode,w),y.return=v,y;case ho:var S=y._init;return d(v,S(y._payload),w)}if(cu(y)||Al(y))return y=Wa(y,v.mode,w,null),y.return=v,y;jf(v,y)}return null}function f(v,y,w,S){var b=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:s(v,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cf:return w.key===b?c(v,y,w,S):null;case Os:return w.key===b?l(v,y,w,S):null;case ho:return b=w._init,f(v,y,b(w._payload),S)}if(cu(w)||Al(w))return b!==null?null:u(v,y,w,S,null);jf(v,w)}return null}function h(v,y,w,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,s(y,v,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cf:return v=v.get(S.key===null?w:S.key)||null,c(y,v,S,b);case Os:return v=v.get(S.key===null?w:S.key)||null,l(y,v,S,b);case ho:var x=S._init;return h(v,y,w,x(S._payload),b)}if(cu(S)||Al(S))return v=v.get(w)||null,u(y,v,S,b,null);jf(y,S)}return null}function m(v,y,w,S){for(var b=null,x=null,T=y,C=y=0,_=null;T!==null&&C<w.length;C++){T.index>C?(_=T,T=null):_=T.sibling;var E=f(v,T,w[C],S);if(E===null){T===null&&(T=_);break}t&&T&&E.alternate===null&&e(v,T),y=o(E,y,C),x===null?b=E:x.sibling=E,x=E,T=_}if(C===w.length)return n(v,T),Ze&&ga(v,C),b;if(T===null){for(;C<w.length;C++)T=d(v,w[C],S),T!==null&&(y=o(T,y,C),x===null?b=T:x.sibling=T,x=T);return Ze&&ga(v,C),b}for(T=r(v,T);C<w.length;C++)_=h(T,v,C,w[C],S),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?C:_.key),y=o(_,y,C),x===null?b=_:x.sibling=_,x=_);return t&&T.forEach(function(A){return e(v,A)}),Ze&&ga(v,C),b}function p(v,y,w,S){var b=Al(w);if(typeof b!="function")throw Error(Q(150));if(w=b.call(w),w==null)throw Error(Q(151));for(var x=b=null,T=y,C=y=0,_=null,E=w.next();T!==null&&!E.done;C++,E=w.next()){T.index>C?(_=T,T=null):_=T.sibling;var A=f(v,T,E.value,S);if(A===null){T===null&&(T=_);break}t&&T&&A.alternate===null&&e(v,T),y=o(A,y,C),x===null?b=A:x.sibling=A,x=A,T=_}if(E.done)return n(v,T),Ze&&ga(v,C),b;if(T===null){for(;!E.done;C++,E=w.next())E=d(v,E.value,S),E!==null&&(y=o(E,y,C),x===null?b=E:x.sibling=E,x=E);return Ze&&ga(v,C),b}for(T=r(v,T);!E.done;C++,E=w.next())E=h(T,v,C,E.value,S),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?C:E.key),y=o(E,y,C),x===null?b=E:x.sibling=E,x=E);return t&&T.forEach(function(P){return e(v,P)}),Ze&&ga(v,C),b}function g(v,y,w,S){if(typeof w=="object"&&w!==null&&w.type===As&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Cf:e:{for(var b=w.key,x=y;x!==null;){if(x.key===b){if(b=w.type,b===As){if(x.tag===7){n(v,x.sibling),y=i(x,w.props.children),y.return=v,v=y;break e}}else if(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ho&&zT(b)===x.type){n(v,x.sibling),y=i(x,w.props),y.ref=Dl(v,x,w),y.return=v,v=y;break e}n(v,x);break}else e(v,x);x=x.sibling}w.type===As?(y=Wa(w.props.children,v.mode,S,w.key),y.return=v,v=y):(S=Sh(w.type,w.key,w.props,null,v.mode,S),S.ref=Dl(v,y,w),S.return=v,v=S)}return a(v);case Os:e:{for(x=w.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Pv(w,v.mode,S),y.return=v,v=y}return a(v);case ho:return x=w._init,g(v,y,x(w._payload),S)}if(cu(w))return m(v,y,w,S);if(Al(w))return p(v,y,w,S);jf(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=Ev(w,v.mode,S),y.return=v,v=y),a(v)):n(v,y)}return g}var Pc=jR(!0),LR=jR(!1),np=na(null),rp=null,$s=null,ES=null;function PS(){ES=$s=rp=null}function OS(t){var e=np.current;Je(np),t._currentValue=e}function d0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){rp=t,ES=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(ES!==t)if(t={context:t,memoizedValue:e,next:null},$s===null){if(rp===null)throw Error(Q(308));$s=t,rp.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return e}var _a=null;function AS(t){_a===null?_a=[t]:_a.push(t)}function $R(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,AS(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vi(t,r)}function Vi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var po=!1;function RS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $o(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vi(t,n)}return i=r.interleaved,i===null?(e.next=e,AS(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vi(t,n)}function mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gS(t,n)}}function qT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ip(t,e,n,r){var i=t.updateQueue;po=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var f=s.lane,h=s.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=t,p=s;switch(f=e,h=n,p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=it({},d,f);break e;case 2:po=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ja|=a,t.lanes=a,t.memoizedState=d}}function WT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var tf={},oi=na(tf),Ku=na(tf),Gu=na(tf);function Ea(t){if(t===tf)throw Error(Q(174));return t}function MS(t,e){switch(He(Gu,e),He(Ku,t),He(oi,tf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vy(e,t)}Je(oi),He(oi,e)}function Oc(){Je(oi),Je(Ku),Je(Gu)}function UR(t){Ea(Gu.current);var e=Ea(oi.current),n=Vy(e,t.type);e!==n&&(He(Ku,t),He(oi,n))}function IS(t){Ku.current===t&&(Je(oi),Je(Ku))}var nt=na(0);function op(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sv=[];function NS(){for(var t=0;t<Sv.length;t++)Sv[t]._workInProgressVersionPrimary=null;Sv.length=0}var gh=Ji.ReactCurrentDispatcher,xv=Ji.ReactCurrentBatchConfig,Qa=0,rt=null,Ot=null,Lt=null,ap=!1,Su=!1,Yu=0,PU=0;function Qt(){throw Error(Q(321))}function DS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function jS(t,e,n,r,i,o){if(Qa=o,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gh.current=t===null||t.memoizedState===null?MU:IU,t=n(r,i),Su){o=0;do{if(Su=!1,Yu=0,25<=o)throw Error(Q(301));o+=1,Lt=Ot=null,e.updateQueue=null,gh.current=NU,t=n(r,i)}while(Su)}if(gh.current=sp,e=Ot!==null&&Ot.next!==null,Qa=0,Lt=Ot=rt=null,ap=!1,e)throw Error(Q(300));return t}function LS(){var t=Yu!==0;return Yu=0,t}function Qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?rt.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function gr(){if(Ot===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Lt===null?rt.memoizedState:Lt.next;if(e!==null)Lt=e,Ot=t;else{if(t===null)throw Error(Q(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Lt===null?rt.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Xu(t,e){return typeof e=="function"?e(t):e}function kv(t){var e=gr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=Ot,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((Qa&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=r):c=c.next=d,rt.lanes|=u,Ja|=u}l=l.next}while(l!==null&&l!==o);c===null?a=r:c.next=s,Wr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,rt.lanes|=o,Ja|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tv(t){var e=gr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Wr(o,e.memoizedState)||(Tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function BR(){}function zR(t,e){var n=rt,r=gr(),i=e(),o=!Wr(r.memoizedState,i);if(o&&(r.memoizedState=i,Tn=!0),r=r.queue,$S(VR.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,Qu(9,WR.bind(null,n,r,i,e),void 0,null),Ut===null)throw Error(Q(349));Qa&30||qR(n,e,i)}return i}function qR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function WR(t,e,n,r){e.value=n,e.getSnapshot=r,HR(e)&&KR(t)}function VR(t,e,n){return n(function(){HR(e)&&KR(t)})}function HR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function KR(t){var e=Vi(t,1);e!==null&&qr(e,t,1,-1)}function VT(t){var e=Qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:t},e.queue=t,t=t.dispatch=RU.bind(null,rt,t),[e.memoizedState,t]}function Qu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GR(){return gr().memoizedState}function vh(t,e,n,r){var i=Qr();rt.flags|=t,i.memoizedState=Qu(1|e,n,void 0,r===void 0?null:r)}function Um(t,e,n,r){var i=gr();r=r===void 0?null:r;var o=void 0;if(Ot!==null){var a=Ot.memoizedState;if(o=a.destroy,r!==null&&DS(r,a.deps)){i.memoizedState=Qu(e,n,o,r);return}}rt.flags|=t,i.memoizedState=Qu(1|e,n,o,r)}function HT(t,e){return vh(8390656,8,t,e)}function $S(t,e){return Um(2048,8,t,e)}function YR(t,e){return Um(4,2,t,e)}function XR(t,e){return Um(4,4,t,e)}function QR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JR(t,e,n){return n=n!=null?n.concat([t]):null,Um(4,4,QR.bind(null,e,t),n)}function FS(){}function ZR(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eM(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tM(t,e,n){return Qa&21?(Wr(n,e)||(n=aR(),rt.lanes|=n,Ja|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function OU(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=xv.transition;xv.transition={};try{t(!1),e()}finally{je=n,xv.transition=r}}function nM(){return gr().memoizedState}function AU(t,e,n){var r=Uo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rM(t))iM(e,n);else if(n=$R(t,e,n,r),n!==null){var i=hn();qr(n,t,r,i),oM(n,e,r)}}function RU(t,e,n){var r=Uo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rM(t))iM(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wr(s,a)){var c=e.interleaved;c===null?(i.next=i,AS(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=$R(t,e,i,r),n!==null&&(i=hn(),qr(n,t,r,i),oM(n,e,r))}}function rM(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function iM(t,e){Su=ap=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gS(t,n)}}var sp={readContext:mr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},MU={readContext:mr,useCallback:function(t,e){return Qr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:HT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vh(4194308,4,QR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vh(4194308,4,t,e)},useInsertionEffect:function(t,e){return vh(4,2,t,e)},useMemo:function(t,e){var n=Qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AU.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Qr();return t={current:t},e.memoizedState=t},useState:VT,useDebugValue:FS,useDeferredValue:function(t){return Qr().memoizedState=t},useTransition:function(){var t=VT(!1),e=t[0];return t=OU.bind(null,t[1]),Qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=Qr();if(Ze){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Ut===null)throw Error(Q(349));Qa&30||qR(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,HT(VR.bind(null,r,o,t),[t]),r.flags|=2048,Qu(9,WR.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Qr(),e=Ut.identifierPrefix;if(Ze){var n=Ii,r=Mi;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IU={readContext:mr,useCallback:ZR,useContext:mr,useEffect:$S,useImperativeHandle:JR,useInsertionEffect:YR,useLayoutEffect:XR,useMemo:eM,useReducer:kv,useRef:GR,useState:function(){return kv(Xu)},useDebugValue:FS,useDeferredValue:function(t){var e=gr();return tM(e,Ot.memoizedState,t)},useTransition:function(){var t=kv(Xu)[0],e=gr().memoizedState;return[t,e]},useMutableSource:BR,useSyncExternalStore:zR,useId:nM,unstable_isNewReconciler:!1},NU={readContext:mr,useCallback:ZR,useContext:mr,useEffect:$S,useImperativeHandle:JR,useInsertionEffect:YR,useLayoutEffect:XR,useMemo:eM,useReducer:Tv,useRef:GR,useState:function(){return Tv(Xu)},useDebugValue:FS,useDeferredValue:function(t){var e=gr();return Ot===null?e.memoizedState=t:tM(e,Ot.memoizedState,t)},useTransition:function(){var t=Tv(Xu)[0],e=gr().memoizedState;return[t,e]},useMutableSource:BR,useSyncExternalStore:zR,useId:nM,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function f0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bm={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),i=Uo(t),o=$i(r,i);o.payload=e,n!=null&&(o.callback=n),e=$o(t,o,i),e!==null&&(qr(e,t,i,r),mh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),i=Uo(t),o=$i(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=$o(t,o,i),e!==null&&(qr(e,t,i,r),mh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Uo(t),i=$i(n,r);i.tag=2,e!=null&&(i.callback=e),e=$o(t,i,r),e!==null&&(qr(e,t,r,n),mh(e,t,r))}};function KT(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!qu(n,r)||!qu(i,o):!0}function aM(t,e,n){var r=!1,i=Jo,o=e.contextType;return typeof o=="object"&&o!==null?o=mr(o):(i=On(e)?Ya:an.current,r=e.contextTypes,o=(r=r!=null)?_c(t,i):Jo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function GT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bm.enqueueReplaceState(e,e.state,null)}function h0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},RS(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=mr(o):(o=On(e)?Ya:an.current,i.context=_c(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(f0(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bm.enqueueReplaceState(i,i.state,null),ip(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ac(t,e){try{var n="",r=e;do n+=cF(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Cv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function p0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DU=typeof WeakMap=="function"?WeakMap:Map;function sM(t,e,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lp||(lp=!0,T0=r),p0(t,e)},n}function cM(t,e,n){n=$i(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){p0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){p0(t,e),typeof r!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function YT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YU.bind(null,t,e,n),e.then(t,t))}function XT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$i(-1,1),e.tag=2,$o(n,e,1))),n.lanes|=1),t)}var jU=Ji.ReactCurrentOwner,Tn=!1;function cn(t,e,n,r){e.child=t===null?LR(e,null,n,r):Pc(e,t.child,n,r)}function JT(t,e,n,r,i){n=n.render;var o=e.ref;return Qs(e,i),r=jS(t,e,n,r,o,i),n=LS(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hi(t,e,i)):(Ze&&n&&TS(e),e.flags|=1,cn(t,e,r,i),e.child)}function ZT(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!KS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,lM(t,e,o,r,i)):(t=Sh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:qu,n(a,r)&&t.ref===e.ref)return Hi(t,e,i)}return e.flags|=1,t=Bo(o,r),t.ref=e.ref,t.return=e,e.child=t}function lM(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(qu(o,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Hi(t,e,i)}return m0(t,e,n,r,i)}function uM(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Us,Ln),Ln|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Us,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,He(Us,Ln),Ln|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,He(Us,Ln),Ln|=r;return cn(t,e,i,n),e.child}function dM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function m0(t,e,n,r,i){var o=On(n)?Ya:an.current;return o=_c(e,o),Qs(e,i),n=jS(t,e,n,r,o,i),r=LS(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hi(t,e,i)):(Ze&&r&&TS(e),e.flags|=1,cn(t,e,n,i),e.child)}function eC(t,e,n,r,i){if(On(n)){var o=!0;Zh(e)}else o=!1;if(Qs(e,i),e.stateNode===null)yh(t,e),aM(e,n,r),h0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=mr(l):(l=On(n)?Ya:an.current,l=_c(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==l)&&GT(e,a,r,l),po=!1;var f=e.memoizedState;a.state=f,ip(e,r,a,i),c=e.memoizedState,s!==r||f!==c||Pn.current||po?(typeof u=="function"&&(f0(e,n,u,r),c=e.memoizedState),(s=po||KT(e,n,s,r,f,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,FR(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Tr(e.type,s),a.props=l,d=e.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=mr(c):(c=On(n)?Ya:an.current,c=_c(e,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==c)&&GT(e,a,r,c),po=!1,f=e.memoizedState,a.state=f,ip(e,r,a,i);var m=e.memoizedState;s!==d||f!==m||Pn.current||po?(typeof h=="function"&&(f0(e,n,h,r),m=e.memoizedState),(l=po||KT(e,n,l,r,f,m,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),a.props=r,a.state=m,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return g0(t,e,n,r,o,i)}function g0(t,e,n,r,i,o){dM(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&FT(e,n,!1),Hi(t,e,o);r=e.stateNode,jU.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pc(e,t.child,null,o),e.child=Pc(e,null,s,o)):cn(t,e,s,o),e.memoizedState=r.state,i&&FT(e,n,!0),e.child}function fM(t){var e=t.stateNode;e.pendingContext?$T(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$T(t,e.context,!1),MS(t,e.containerInfo)}function tC(t,e,n,r,i){return Ec(),_S(i),e.flags|=256,cn(t,e,n,r),e.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function y0(t){return{baseLanes:t,cachePool:null,transitions:null}}function hM(t,e,n){var r=e.pendingProps,i=nt.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(nt,i&1),t===null)return u0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Wm(a,r,0,null),t=Wa(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=y0(n),e.memoizedState=v0,t):US(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return LU(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Bo(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Bo(s,o):(o=Wa(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?y0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=v0,r}return o=t.child,t=o.sibling,r=Bo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function US(t,e){return e=Wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lf(t,e,n,r){return r!==null&&_S(r),Pc(e,t.child,null,n),t=US(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LU(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Cv(Error(Q(422))),Lf(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Wm({mode:"visible",children:r.children},i,0,null),o=Wa(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Pc(e,t.child,null,a),e.child.memoizedState=y0(a),e.memoizedState=v0,o);if(!(e.mode&1))return Lf(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(Q(419)),r=Cv(o,r,void 0),Lf(t,e,a,r)}if(s=(a&t.childLanes)!==0,Tn||s){if(r=Ut,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Vi(t,i),qr(r,t,i,-1))}return HS(),r=Cv(Error(Q(421))),Lf(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XU.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Wn=Lo(i.nextSibling),Hn=e,Ze=!0,Ir=null,t!==null&&(or[ar++]=Mi,or[ar++]=Ii,or[ar++]=Xa,Mi=t.id,Ii=t.overflow,Xa=e),e=US(e,r.children),e.flags|=4096,e)}function nC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),d0(t.return,e,n)}function _v(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function pM(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(cn(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nC(t,n,e);else if(t.tag===19)nC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&op(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_v(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&op(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_v(e,!0,n,null,o);break;case"together":_v(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Bo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $U(t,e,n){switch(e.tag){case 3:fM(e),Ec();break;case 5:UR(e);break;case 1:On(e.type)&&Zh(e);break;case 4:MS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(np,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?hM(t,e,n):(He(nt,nt.current&1),t=Hi(t,e,n),t!==null?t.sibling:null);He(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pM(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,uM(t,e,n)}return Hi(t,e,n)}var mM,b0,gM,vM;mM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};b0=function(){};gM=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ea(oi.current);var o=null;switch(n){case"input":i=By(t,i),r=By(t,r),o=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),o=[];break;case"textarea":i=Wy(t,i),r=Wy(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qh)}Hy(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ju.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ju.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Ye("scroll",t),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};vM=function(t,e,n,r){n!==r&&(e.flags|=4)};function jl(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FU(t,e,n){var r=e.pendingProps;switch(CS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return On(e.type)&&Jh(),Jt(e),null;case 3:return r=e.stateNode,Oc(),Je(Pn),Je(an),NS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Df(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(E0(Ir),Ir=null))),b0(t,e),Jt(e),null;case 5:IS(e);var i=Ea(Gu.current);if(n=e.type,t!==null&&e.stateNode!=null)gM(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Jt(e),null}if(t=Ea(oi.current),Df(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ni]=e,r[Hu]=o,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(i=0;i<uu.length;i++)Ye(uu[i],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":dT(r,o),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ye("invalid",r);break;case"textarea":hT(r,o),Ye("invalid",r)}Hy(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Nf(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Nf(r.textContent,s,t),i=["children",""+s]):ju.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Ye("scroll",r)}switch(n){case"input":_f(r),fT(r,o,!0);break;case"textarea":_f(r),pT(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ni]=e,t[Hu]=r,mM(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ky(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),i=r;break;case"iframe":case"object":case"embed":Ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<uu.length;i++)Ye(uu[i],t);i=r;break;case"source":Ye("error",t),i=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),i=r;break;case"details":Ye("toggle",t),i=r;break;case"input":dT(t,r),i=By(t,r),Ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":hT(t,r),i=Wy(t,r),Ye("invalid",t);break;default:i=r}Hy(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?GA(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&HA(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Lu(t,c):typeof c=="number"&&Lu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ju.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ye("scroll",t):c!=null&&uS(t,o,c,a))}switch(n){case"input":_f(t),fT(t,r,!1);break;case"textarea":_f(t),pT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ks(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)vM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ea(Gu.current),Ea(oi.current),Df(e)){if(r=e.stateNode,n=e.memoizedProps,r[ni]=e,(o=r.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:Nf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nf(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ni]=e,e.stateNode=r}return Jt(e),null;case 13:if(Je(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Wn!==null&&e.mode&1&&!(e.flags&128))DR(),Ec(),e.flags|=98560,o=!1;else if(o=Df(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[ni]=e}else Ec(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),o=!1}else Ir!==null&&(E0(Ir),Ir=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Mt===0&&(Mt=3):HS())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return Oc(),b0(t,e),t===null&&Wu(e.stateNode.containerInfo),Jt(e),null;case 10:return OS(e.type._context),Jt(e),null;case 17:return On(e.type)&&Jh(),Jt(e),null;case 19:if(Je(nt),o=e.memoizedState,o===null)return Jt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)jl(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=op(t),a!==null){for(e.flags|=128,jl(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(nt,nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>Rc&&(e.flags|=128,r=!0,jl(o,!1),e.lanes=4194304)}else{if(!r)if(t=op(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ze)return Jt(e),null}else 2*ht()-o.renderingStartTime>Rc&&n!==1073741824&&(e.flags|=128,r=!0,jl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=nt.current,He(nt,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return VS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function UU(t,e){switch(CS(e),e.tag){case 1:return On(e.type)&&Jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oc(),Je(Pn),Je(an),NS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return IS(e),null;case 13:if(Je(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ec()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(nt),null;case 4:return Oc(),null;case 10:return OS(e.type._context),null;case 22:case 23:return VS(),null;case 24:return null;default:return null}}var $f=!1,tn=!1,BU=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function w0(t,e,n){try{n()}catch(r){ct(t,e,r)}}var rC=!1;function zU(t,e){if(r0=Gh,t=xR(),kS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(s=a),f===o&&++u===r&&(c=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(i0={focusedElem:t,selectionRange:n},Gh=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:Tr(e.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(S){ct(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return m=rC,rC=!1,m}function xu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&w0(e,n,o)}i=i.next}while(i!==r)}}function zm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function S0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yM(t){var e=t.alternate;e!==null&&(t.alternate=null,yM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[Hu],delete e[s0],delete e[TU],delete e[CU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bM(t){return t.tag===5||t.tag===3||t.tag===4}function iC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function x0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qh));else if(r!==4&&(t=t.child,t!==null))for(x0(t,e,n),t=t.sibling;t!==null;)x0(t,e,n),t=t.sibling}function k0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(k0(t,e,n),t=t.sibling;t!==null;)k0(t,e,n),t=t.sibling}var qt=null,Er=!1;function io(t,e,n){for(n=n.child;n!==null;)wM(t,e,n),n=n.sibling}function wM(t,e,n){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Nm,n)}catch{}switch(n.tag){case 5:tn||Fs(n,e);case 6:var r=qt,i=Er;qt=null,io(t,e,n),qt=r,Er=i,qt!==null&&(Er?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Er?(t=qt,n=n.stateNode,t.nodeType===8?bv(t.parentNode,n):t.nodeType===1&&bv(t,n),Bu(t)):bv(qt,n.stateNode));break;case 4:r=qt,i=Er,qt=n.stateNode.containerInfo,Er=!0,io(t,e,n),qt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&w0(n,e,a),i=i.next}while(i!==r)}io(t,e,n);break;case 1:if(!tn&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ct(n,e,s)}io(t,e,n);break;case 21:io(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,io(t,e,n),tn=r):io(t,e,n);break;default:io(t,e,n)}}function oC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BU),e.forEach(function(r){var i=QU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:qt=s.stateNode,Er=!1;break e;case 3:qt=s.stateNode.containerInfo,Er=!0;break e;case 4:qt=s.stateNode.containerInfo,Er=!0;break e}s=s.return}if(qt===null)throw Error(Q(160));wM(o,a,i),qt=null,Er=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){ct(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SM(e,t),e=e.sibling}function SM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(e,t),Gr(t),r&4){try{xu(3,t,t.return),zm(3,t)}catch(p){ct(t,t.return,p)}try{xu(5,t,t.return)}catch(p){ct(t,t.return,p)}}break;case 1:Sr(e,t),Gr(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Sr(e,t),Gr(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var i=t.stateNode;try{Lu(i,"")}catch(p){ct(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&qA(i,o),Ky(s,a);var l=Ky(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?GA(i,d):u==="dangerouslySetInnerHTML"?HA(i,d):u==="children"?Lu(i,d):uS(i,u,d,l)}switch(s){case"input":zy(i,o);break;case"textarea":WA(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Ks(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Ks(i,!!o.multiple,o.defaultValue,!0):Ks(i,!!o.multiple,o.multiple?[]:"",!1))}i[Hu]=o}catch(p){ct(t,t.return,p)}}break;case 6:if(Sr(e,t),Gr(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(p){ct(t,t.return,p)}}break;case 3:if(Sr(e,t),Gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bu(e.containerInfo)}catch(p){ct(t,t.return,p)}break;case 4:Sr(e,t),Gr(t);break;case 13:Sr(e,t),Gr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(qS=ht())),r&4&&oC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(l=tn)||u,Sr(e,t),tn=l):Sr(e,t),Gr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(d=ie=u;ie!==null;){switch(f=ie,h=f.child,f.tag){case 0:case 11:case 14:case 15:xu(4,f,f.return);break;case 1:Fs(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){ct(r,n,p)}}break;case 5:Fs(f,f.return);break;case 22:if(f.memoizedState!==null){sC(d);continue}}h!==null?(h.return=f,ie=h):sC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=KA("display",a))}catch(p){ct(t,t.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(p){ct(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sr(e,t),Gr(t),r&4&&oC(t);break;case 21:break;default:Sr(e,t),Gr(t)}}function Gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bM(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lu(i,""),r.flags&=-33);var o=iC(t);k0(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=iC(t);x0(t,s,a);break;default:throw Error(Q(161))}}catch(c){ct(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qU(t,e,n){ie=t,xM(t)}function xM(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||$f;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||tn;s=$f;var l=tn;if($f=a,(tn=c)&&!l)for(ie=i;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?cC(i):c!==null?(c.return=a,ie=c):cC(i);for(;o!==null;)ie=o,xM(o),o=o.sibling;ie=i,$f=s,tn=l}aC(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):aC(t)}}function aC(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||zm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&WT(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}WT(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Bu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}tn||e.flags&512&&S0(e)}catch(f){ct(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function sC(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function cC(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zm(4,e)}catch(c){ct(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ct(e,i,c)}}var o=e.return;try{S0(e)}catch(c){ct(e,o,c)}break;case 5:var a=e.return;try{S0(e)}catch(c){ct(e,a,c)}}}catch(c){ct(e,e.return,c)}if(e===t){ie=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ie=s;break}ie=e.return}}var WU=Math.ceil,cp=Ji.ReactCurrentDispatcher,BS=Ji.ReactCurrentOwner,fr=Ji.ReactCurrentBatchConfig,Oe=0,Ut=null,xt=null,Gt=0,Ln=0,Us=na(0),Mt=0,Ju=null,Ja=0,qm=0,zS=0,ku=null,xn=null,qS=0,Rc=1/0,Si=null,lp=!1,T0=null,Fo=null,Ff=!1,Ao=null,up=0,Tu=0,C0=null,bh=-1,wh=0;function hn(){return Oe&6?ht():bh!==-1?bh:bh=ht()}function Uo(t){return t.mode&1?Oe&2&&Gt!==0?Gt&-Gt:EU.transition!==null?(wh===0&&(wh=aR()),wh):(t=je,t!==0||(t=window.event,t=t===void 0?16:hR(t.type)),t):1}function qr(t,e,n,r){if(50<Tu)throw Tu=0,C0=null,Error(Q(185));Jd(t,n,r),(!(Oe&2)||t!==Ut)&&(t===Ut&&(!(Oe&2)&&(qm|=n),Mt===4&&vo(t,Gt)),An(t,r),n===1&&Oe===0&&!(e.mode&1)&&(Rc=ht()+500,Fm&&ra()))}function An(t,e){var n=t.callbackNode;EF(t,e);var r=Kh(t,t===Ut?Gt:0);if(r===0)n!==null&&vT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vT(n),e===1)t.tag===0?_U(lC.bind(null,t)):MR(lC.bind(null,t)),xU(function(){!(Oe&6)&&ra()}),n=null;else{switch(sR(r)){case 1:n=mS;break;case 4:n=iR;break;case 16:n=Hh;break;case 536870912:n=oR;break;default:n=Hh}n=AM(n,kM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kM(t,e){if(bh=-1,wh=0,Oe&6)throw Error(Q(327));var n=t.callbackNode;if(Js()&&t.callbackNode!==n)return null;var r=Kh(t,t===Ut?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dp(t,r);else{e=r;var i=Oe;Oe|=2;var o=CM();(Ut!==t||Gt!==e)&&(Si=null,Rc=ht()+500,qa(t,e));do try{KU();break}catch(s){TM(t,s)}while(!0);PS(),cp.current=o,Oe=i,xt!==null?e=0:(Ut=null,Gt=0,e=Mt)}if(e!==0){if(e===2&&(i=Jy(t),i!==0&&(r=i,e=_0(t,i))),e===1)throw n=Ju,qa(t,0),vo(t,r),An(t,ht()),n;if(e===6)vo(t,r);else{if(i=t.current.alternate,!(r&30)&&!VU(i)&&(e=dp(t,r),e===2&&(o=Jy(t),o!==0&&(r=o,e=_0(t,o))),e===1))throw n=Ju,qa(t,0),vo(t,r),An(t,ht()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:va(t,xn,Si);break;case 3:if(vo(t,r),(r&130023424)===r&&(e=qS+500-ht(),10<e)){if(Kh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=a0(va.bind(null,t,xn,Si),e);break}va(t,xn,Si);break;case 4:if(vo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-zr(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WU(r/1960))-r,10<r){t.timeoutHandle=a0(va.bind(null,t,xn,Si),r);break}va(t,xn,Si);break;case 5:va(t,xn,Si);break;default:throw Error(Q(329))}}}return An(t,ht()),t.callbackNode===n?kM.bind(null,t):null}function _0(t,e){var n=ku;return t.current.memoizedState.isDehydrated&&(qa(t,e).flags|=256),t=dp(t,e),t!==2&&(e=xn,xn=n,e!==null&&E0(e)),t}function E0(t){xn===null?xn=t:xn.push.apply(xn,t)}function VU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vo(t,e){for(e&=~zS,e&=~qm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function lC(t){if(Oe&6)throw Error(Q(327));Js();var e=Kh(t,0);if(!(e&1))return An(t,ht()),null;var n=dp(t,e);if(t.tag!==0&&n===2){var r=Jy(t);r!==0&&(e=r,n=_0(t,r))}if(n===1)throw n=Ju,qa(t,0),vo(t,e),An(t,ht()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,va(t,xn,Si),An(t,ht()),null}function WS(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Rc=ht()+500,Fm&&ra())}}function Za(t){Ao!==null&&Ao.tag===0&&!(Oe&6)&&Js();var e=Oe;Oe|=1;var n=fr.transition,r=je;try{if(fr.transition=null,je=1,t)return t()}finally{je=r,fr.transition=n,Oe=e,!(Oe&6)&&ra()}}function VS(){Ln=Us.current,Je(Us)}function qa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SU(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(CS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jh();break;case 3:Oc(),Je(Pn),Je(an),NS();break;case 5:IS(r);break;case 4:Oc();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:OS(r.type._context);break;case 22:case 23:VS()}n=n.return}if(Ut=t,xt=t=Bo(t.current,null),Gt=Ln=e,Mt=0,Ju=null,zS=qm=Ja=0,xn=ku=null,_a!==null){for(e=0;e<_a.length;e++)if(n=_a[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}_a=null}return t}function TM(t,e){do{var n=xt;try{if(PS(),gh.current=sp,ap){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ap=!1}if(Qa=0,Lt=Ot=rt=null,Su=!1,Yu=0,BS.current=null,n===null||n.return===null){Mt=1,Ju=e,xt=null;break}e:{var o=t,a=n.return,s=n,c=e;if(e=Gt,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=XT(a);if(h!==null){h.flags&=-257,QT(h,a,s,o,e),h.mode&1&&YT(o,l,e),e=h,c=l;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){YT(o,l,e),HS();break e}c=Error(Q(426))}}else if(Ze&&s.mode&1){var g=XT(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),QT(g,a,s,o,e),_S(Ac(c,s));break e}}o=c=Ac(c,s),Mt!==4&&(Mt=2),ku===null?ku=[o]:ku.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=sM(o,c,e);qT(o,v);break e;case 1:s=c;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fo===null||!Fo.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=cM(o,s,e);qT(o,S);break e}}o=o.return}while(o!==null)}EM(n)}catch(b){e=b,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function CM(){var t=cp.current;return cp.current=sp,t===null?sp:t}function HS(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Ut===null||!(Ja&268435455)&&!(qm&268435455)||vo(Ut,Gt)}function dp(t,e){var n=Oe;Oe|=2;var r=CM();(Ut!==t||Gt!==e)&&(Si=null,qa(t,e));do try{HU();break}catch(i){TM(t,i)}while(!0);if(PS(),Oe=n,cp.current=r,xt!==null)throw Error(Q(261));return Ut=null,Gt=0,Mt}function HU(){for(;xt!==null;)_M(xt)}function KU(){for(;xt!==null&&!yF();)_M(xt)}function _M(t){var e=OM(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?EM(t):xt=e,BS.current=null}function EM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UU(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,xt=null;return}}else if(n=FU(n,e,Ln),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Mt===0&&(Mt=5)}function va(t,e,n){var r=je,i=fr.transition;try{fr.transition=null,je=1,GU(t,e,n,r)}finally{fr.transition=i,je=r}return null}function GU(t,e,n,r){do Js();while(Ao!==null);if(Oe&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(PF(t,o),t===Ut&&(xt=Ut=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ff||(Ff=!0,AM(Hh,function(){return Js(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fr.transition,fr.transition=null;var a=je;je=1;var s=Oe;Oe|=4,BS.current=null,zU(t,n),SM(n,t),pU(i0),Gh=!!r0,i0=r0=null,t.current=n,qU(n),bF(),Oe=s,je=a,fr.transition=o}else t.current=n;if(Ff&&(Ff=!1,Ao=t,up=i),o=t.pendingLanes,o===0&&(Fo=null),xF(n.stateNode),An(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lp)throw lp=!1,t=T0,T0=null,t;return up&1&&t.tag!==0&&Js(),o=t.pendingLanes,o&1?t===C0?Tu++:(Tu=0,C0=t):Tu=0,ra(),null}function Js(){if(Ao!==null){var t=sR(up),e=fr.transition,n=je;try{if(fr.transition=null,je=16>t?16:t,Ao===null)var r=!1;else{if(t=Ao,Ao=null,up=0,Oe&6)throw Error(Q(331));var i=Oe;for(Oe|=4,ie=t.current;ie!==null;){var o=ie,a=o.child;if(ie.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(ie=l;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:xu(8,u,o)}var d=u.child;if(d!==null)d.return=u,ie=d;else for(;ie!==null;){u=ie;var f=u.sibling,h=u.return;if(yM(u),u===l){ie=null;break}if(f!==null){f.return=h,ie=f;break}ie=h}}}var m=o.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ie=a;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xu(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ie=v;break e}ie=o.return}}var y=t.current;for(ie=y;ie!==null;){a=ie;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ie=w;else e:for(a=y;ie!==null;){if(s=ie,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zm(9,s)}}catch(b){ct(s,s.return,b)}if(s===a){ie=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ie=S;break e}ie=s.return}}if(Oe=i,ra(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Nm,t)}catch{}r=!0}return r}finally{je=n,fr.transition=e}}return!1}function uC(t,e,n){e=Ac(n,e),e=sM(t,e,1),t=$o(t,e,1),e=hn(),t!==null&&(Jd(t,1,e),An(t,e))}function ct(t,e,n){if(t.tag===3)uC(t,t,n);else for(;e!==null;){if(e.tag===3){uC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fo===null||!Fo.has(r))){t=Ac(n,t),t=cM(e,t,1),e=$o(e,t,1),t=hn(),e!==null&&(Jd(e,1,t),An(e,t));break}}e=e.return}}function YU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Gt&n)===n&&(Mt===4||Mt===3&&(Gt&130023424)===Gt&&500>ht()-qS?qa(t,0):zS|=n),An(t,e)}function PM(t,e){e===0&&(t.mode&1?(e=Of,Of<<=1,!(Of&130023424)&&(Of=4194304)):e=1);var n=hn();t=Vi(t,e),t!==null&&(Jd(t,e,n),An(t,n))}function XU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PM(t,n)}function QU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),PM(t,n)}var OM;OM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,$U(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,Ze&&e.flags&1048576&&IR(e,tp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yh(t,e),t=e.pendingProps;var i=_c(e,an.current);Qs(e,n),i=jS(null,e,r,t,i,n);var o=LS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(r)?(o=!0,Zh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RS(e),i.updater=Bm,e.stateNode=i,i._reactInternals=e,h0(e,r,t,n),e=g0(null,e,r,!0,o,n)):(e.tag=0,Ze&&o&&TS(e),cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZU(r),t=Tr(r,t),i){case 0:e=m0(null,e,r,t,n);break e;case 1:e=eC(null,e,r,t,n);break e;case 11:e=JT(null,e,r,t,n);break e;case 14:e=ZT(null,e,r,Tr(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),m0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),eC(t,e,r,i,n);case 3:e:{if(fM(e),t===null)throw Error(Q(387));r=e.pendingProps,o=e.memoizedState,i=o.element,FR(t,e),ip(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ac(Error(Q(423)),e),e=tC(t,e,r,n,i);break e}else if(r!==i){i=Ac(Error(Q(424)),e),e=tC(t,e,r,n,i);break e}else for(Wn=Lo(e.stateNode.containerInfo.firstChild),Hn=e,Ze=!0,Ir=null,n=LR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ec(),r===i){e=Hi(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return UR(e),t===null&&u0(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,o0(r,i)?a=null:o!==null&&o0(r,o)&&(e.flags|=32),dM(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&u0(e),null;case 13:return hM(t,e,n);case 4:return MS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pc(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),JT(t,e,r,i,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,He(np,r._currentValue),r._currentValue=a,o!==null)if(Wr(o.value,a)){if(o.children===i.children&&!Pn.current){e=Hi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=$i(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),d0(o.return,n,e),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Q(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),d0(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qs(e,n),i=mr(i),r=r(i),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,i=Tr(r,e.pendingProps),i=Tr(r.type,i),ZT(t,e,r,i,n);case 15:return lM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tr(r,i),yh(t,e),e.tag=1,On(r)?(t=!0,Zh(e)):t=!1,Qs(e,n),aM(e,r,i),h0(e,r,i,n),g0(null,e,r,!0,t,n);case 19:return pM(t,e,n);case 22:return uM(t,e,n)}throw Error(Q(156,e.tag))};function AM(t,e){return rR(t,e)}function JU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(t,e,n,r){return new JU(t,e,n,r)}function KS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZU(t){if(typeof t=="function")return KS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fS)return 11;if(t===hS)return 14}return 2}function Bo(t,e){var n=t.alternate;return n===null?(n=lr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sh(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")KS(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case As:return Wa(n.children,i,o,e);case dS:a=8,i|=8;break;case Ly:return t=lr(12,n,e,i|2),t.elementType=Ly,t.lanes=o,t;case $y:return t=lr(13,n,e,i),t.elementType=$y,t.lanes=o,t;case Fy:return t=lr(19,n,e,i),t.elementType=Fy,t.lanes=o,t;case UA:return Wm(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $A:a=10;break e;case FA:a=9;break e;case fS:a=11;break e;case hS:a=14;break e;case ho:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=lr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Wa(t,e,n,r){return t=lr(7,t,r,e),t.lanes=n,t}function Wm(t,e,n,r){return t=lr(22,t,r,e),t.elementType=UA,t.lanes=n,t.stateNode={isHidden:!1},t}function Ev(t,e,n){return t=lr(6,t,null,e),t.lanes=n,t}function Pv(t,e,n){return e=lr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cv(0),this.expirationTimes=cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GS(t,e,n,r,i,o,a,s,c){return t=new e3(t,e,n,s,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=lr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},RS(o),t}function t3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RM(t){if(!t)return Jo;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(On(n))return RR(t,n,e)}return e}function MM(t,e,n,r,i,o,a,s,c){return t=GS(n,r,!0,t,i,o,a,s,c),t.context=RM(null),n=t.current,r=hn(),i=Uo(n),o=$i(r,i),o.callback=e??null,$o(n,o,i),t.current.lanes=i,Jd(t,i,r),An(t,r),t}function Vm(t,e,n,r){var i=e.current,o=hn(),a=Uo(i);return n=RM(n),e.context===null?e.context=n:e.pendingContext=n,e=$i(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$o(i,e,a),t!==null&&(qr(t,i,a,o),mh(t,i,a)),a}function fp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function YS(t,e){dC(t,e),(t=t.alternate)&&dC(t,e)}function n3(){return null}var IM=typeof reportError=="function"?reportError:function(t){console.error(t)};function XS(t){this._internalRoot=t}Hm.prototype.render=XS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Vm(t,e,null,null)};Hm.prototype.unmount=XS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Za(function(){Vm(null,t,null,null)}),e[Wi]=null}};function Hm(t){this._internalRoot=t}Hm.prototype.unstable_scheduleHydration=function(t){if(t){var e=uR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<go.length&&e!==0&&e<go[n].priority;n++);go.splice(n,0,t),n===0&&fR(t)}};function QS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fC(){}function r3(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=fp(a);o.call(l)}}var a=MM(e,r,t,0,null,!1,!1,"",fC);return t._reactRootContainer=a,t[Wi]=a.current,Wu(t.nodeType===8?t.parentNode:t),Za(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=fp(c);s.call(l)}}var c=GS(t,0,!1,null,null,!1,!1,"",fC);return t._reactRootContainer=c,t[Wi]=c.current,Wu(t.nodeType===8?t.parentNode:t),Za(function(){Vm(e,c,n,r)}),c}function Gm(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=fp(a);s.call(c)}}Vm(e,a,t,i)}else a=r3(n,e,t,i,r);return fp(a)}cR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lu(e.pendingLanes);n!==0&&(gS(e,n|1),An(e,ht()),!(Oe&6)&&(Rc=ht()+500,ra()))}break;case 13:Za(function(){var r=Vi(t,1);if(r!==null){var i=hn();qr(r,t,1,i)}}),YS(t,1)}};vS=function(t){if(t.tag===13){var e=Vi(t,134217728);if(e!==null){var n=hn();qr(e,t,134217728,n)}YS(t,134217728)}};lR=function(t){if(t.tag===13){var e=Uo(t),n=Vi(t,e);if(n!==null){var r=hn();qr(n,t,e,r)}YS(t,e)}};uR=function(){return je};dR=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};Yy=function(t,e,n){switch(e){case"input":if(zy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$m(r);if(!i)throw Error(Q(90));zA(r),zy(r,i)}}}break;case"textarea":WA(t,n);break;case"select":e=n.value,e!=null&&Ks(t,!!n.multiple,e,!1)}};QA=WS;JA=Za;var i3={usingClientEntryPoint:!1,Events:[ef,Ns,$m,YA,XA,WS]},Ll={findFiberByHostInstance:Ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o3={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tR(t),t===null?null:t.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{Nm=Uf.inject(o3),ii=Uf}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i3;Yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QS(e))throw Error(Q(200));return t3(t,e,null,n)};Yn.createRoot=function(t,e){if(!QS(t))throw Error(Q(299));var n=!1,r="",i=IM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GS(t,1,!1,null,null,n,!1,r,i),t[Wi]=e.current,Wu(t.nodeType===8?t.parentNode:t),new XS(e)};Yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=tR(e),t=t===null?null:t.stateNode,t};Yn.flushSync=function(t){return Za(t)};Yn.hydrate=function(t,e,n){if(!Km(e))throw Error(Q(200));return Gm(null,t,e,!0,n)};Yn.hydrateRoot=function(t,e,n){if(!QS(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=IM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=MM(e,null,t,1,n??null,i,!1,o,a),t[Wi]=e.current,Wu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hm(e)};Yn.render=function(t,e,n){if(!Km(e))throw Error(Q(200));return Gm(null,t,e,!1,n)};Yn.unmountComponentAtNode=function(t){if(!Km(t))throw Error(Q(40));return t._reactRootContainer?(Za(function(){Gm(null,null,t,!1,function(){t._reactRootContainer=null,t[Wi]=null})}),!0):!1};Yn.unstable_batchedUpdates=WS;Yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Km(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Gm(t,e,n,!1,r)};Yn.version="18.3.1-next-f1338f8080-20240426";function NM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NM)}catch(t){console.error(t)}}NM(),NA.exports=Yn;var a3=NA.exports,hC=a3;Dy.createRoot=hC.createRoot,Dy.hydrateRoot=hC.hydrateRoot;var cl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},s3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},wo,rS,fA,c3=(fA=class{constructor(){se(this,wo,s3);se(this,rS,!1)}setTimeoutProvider(t){ne(this,wo,t)}setTimeout(t,e){return R(this,wo).setTimeout(t,e)}clearTimeout(t){R(this,wo).clearTimeout(t)}setInterval(t,e){return R(this,wo).setInterval(t,e)}clearInterval(t){R(this,wo).clearInterval(t)}},wo=new WeakMap,rS=new WeakMap,fA),Pa=new c3;function l3(t){setTimeout(t,0)}var es=typeof window>"u"||"Deno"in globalThis;function un(){}function u3(t,e){return typeof t=="function"?t(e):t}function P0(t){return typeof t=="number"&&t>=0&&t!==1/0}function DM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function zo(t,e){return typeof t=="function"?t(e):t}function ir(t,e){return typeof t=="function"?t(e):t}function pC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=t;if(a){if(r){if(e.queryHash!==JS(a,e.options))return!1}else if(!Zu(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||o&&!o(e))}function mC(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(ts(e.options.mutationKey)!==ts(o))return!1}else if(!Zu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function JS(t,e){return((e==null?void 0:e.queryKeyHashFn)||ts)(t)}function ts(t){return JSON.stringify(t,(e,n)=>O0(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Zu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Zu(t[n],e[n])):!1}var d3=Object.prototype.hasOwnProperty;function jM(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=gC(t)&&gC(e);if(!r&&!(O0(t)&&O0(e)))return e;const o=(r?t:Object.keys(t)).length,a=r?e:Object.keys(e),s=a.length,c=r?new Array(s):{};let l=0;for(let u=0;u<s;u++){const d=r?u:a[u],f=t[d],h=e[d];if(f===h){c[d]=f,(r?u<o:d3.call(t,d))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[d]=h;continue}const m=jM(f,h,n+1);c[d]=m,m===f&&l++}return o===s&&l===o?t:c}function hp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function gC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function O0(t){if(!vC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vC(t){return Object.prototype.toString.call(t)==="[object Object]"}function f3(t){return new Promise(e=>{Pa.setTimeout(e,t)})}function A0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jM(t,e):e}function h3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function p3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ZS=Symbol();function LM(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ZS?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function ex(t,e){return typeof t=="function"?t(...e):!!t}function m3(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var Na,So,hc,hA,g3=(hA=class extends cl{constructor(){super();se(this,Na);se(this,So);se(this,hc);ne(this,hc,e=>{if(!es&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){R(this,So)||this.setEventListener(R(this,hc))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,So))==null||e.call(this),ne(this,So,void 0))}setEventListener(e){var n;ne(this,hc,e),(n=R(this,So))==null||n.call(this),ne(this,So,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){R(this,Na)!==e&&(ne(this,Na,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof R(this,Na)=="boolean"?R(this,Na):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Na=new WeakMap,So=new WeakMap,hc=new WeakMap,hA),tx=new g3;function R0(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var v3=l3;function y3(){let t=[],e=0,n=s=>{s()},r=s=>{s()},i=v3;const o=s=>{e?t.push(s):i(()=>{n(s)})},a=()=>{const s=t;t=[],s.length&&i(()=>{r(()=>{s.forEach(c=>{n(c)})})})};return{batch:s=>{let c;e++;try{c=s()}finally{e--,e||a()}return c},batchCalls:s=>(...c)=>{o(()=>{s(...c)})},schedule:o,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{i=s}}}var At=y3(),pc,xo,mc,pA,b3=(pA=class extends cl{constructor(){super();se(this,pc,!0);se(this,xo);se(this,mc);ne(this,mc,e=>{if(!es&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){R(this,xo)||this.setEventListener(R(this,mc))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,xo))==null||e.call(this),ne(this,xo,void 0))}setEventListener(e){var n;ne(this,mc,e),(n=R(this,xo))==null||n.call(this),ne(this,xo,e(this.setOnline.bind(this)))}setOnline(e){R(this,pc)!==e&&(ne(this,pc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return R(this,pc)}},pc=new WeakMap,xo=new WeakMap,mc=new WeakMap,pA),pp=new b3;function w3(t){return Math.min(1e3*2**t,3e4)}function $M(t){return(t??"online")==="online"?pp.isOnline():!0}var M0=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function FM(t){let e=!1,n=0,r;const i=R0(),o=()=>i.status!=="pending",a=p=>{var g;if(!o()){const v=new M0(p);f(v),(g=t.onCancel)==null||g.call(t,v)}},s=()=>{e=!0},c=()=>{e=!1},l=()=>tx.isFocused()&&(t.networkMode==="always"||pp.isOnline())&&t.canRun(),u=()=>$M(t.networkMode)&&t.canRun(),d=p=>{o()||(r==null||r(),i.resolve(p))},f=p=>{o()||(r==null||r(),i.reject(p))},h=()=>new Promise(p=>{var g;r=v=>{(o()||l())&&p(v)},(g=t.onPause)==null||g.call(t)}).then(()=>{var p;r=void 0,o()||(p=t.onContinue)==null||p.call(t)}),m=()=>{if(o())return;let p;const g=n===0?t.initialPromise:void 0;try{p=g??t.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(d).catch(v=>{var x;if(o())return;const y=t.retry??(es?0:3),w=t.retryDelay??w3,S=typeof w=="function"?w(n,v):w,b=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,v);if(e||!b){f(v);return}n++,(x=t.onFail)==null||x.call(t,n,v),f3(S).then(()=>l()?void 0:h()).then(()=>{e?f(v):m()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r==null||r(),i),cancelRetry:s,continueRetry:c,canStart:u,start:()=>(u()?m():h().then(m),i)}}var Da,mA,UM=(mA=class{constructor(){se(this,Da)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),P0(this.gcTime)&&ne(this,Da,Pa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(es?1/0:5*60*1e3))}clearGcTimeout(){R(this,Da)&&(Pa.clearTimeout(R(this,Da)),ne(this,Da,void 0))}},Da=new WeakMap,mA),ja,gc,rr,La,Dt,Hd,$a,Cr,bi,gA,S3=(gA=class extends UM{constructor(e){super();se(this,Cr);se(this,ja);se(this,gc);se(this,rr);se(this,La);se(this,Dt);se(this,Hd);se(this,$a);ne(this,$a,!1),ne(this,Hd,e.defaultOptions),this.setOptions(e.options),this.observers=[],ne(this,La,e.client),ne(this,rr,R(this,La).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ne(this,ja,bC(this.options)),this.state=e.state??R(this,ja),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Dt))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Hd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=bC(this.options);n.data!==void 0&&(this.setState(yC(n.data,n.dataUpdatedAt)),ne(this,ja,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,rr).remove(this)}setData(e,n){const r=A0(this.state.data,e,this.options);return me(this,Cr,bi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){me(this,Cr,bi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=R(this,Dt))==null?void 0:r.promise;return(i=R(this,Dt))==null||i.cancel(e),n?n.then(un).catch(un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,ja))}isActive(){return this.observers.some(e=>ir(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!DM(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Dt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Dt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,rr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(R(this,Dt)&&(R(this,$a)?R(this,Dt).cancel({revert:!0}):R(this,Dt).cancelRetry()),this.scheduleGc()),R(this,rr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||me(this,Cr,bi).call(this,{type:"invalidate"})}async fetch(e,n){var c,l,u,d,f,h,m,p,g,v,y,w;if(this.state.fetchStatus!=="idle"&&((c=R(this,Dt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(R(this,Dt))return R(this,Dt).continueRetry(),R(this,Dt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(b=>b.options.queryFn);S&&this.setOptions(S.options)}const r=new AbortController,i=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(ne(this,$a,!0),r.signal)})},o=()=>{const S=LM(this.options,n),x=(()=>{const T={client:R(this,La),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return ne(this,$a,!1),this.options.persister?this.options.persister(S,x,this):S(x)},s=(()=>{const S={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:R(this,La),state:this.state,fetchFn:o};return i(S),S})();(l=this.options.behavior)==null||l.onFetch(s,this),ne(this,gc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&me(this,Cr,bi).call(this,{type:"fetch",meta:(d=s.fetchOptions)==null?void 0:d.meta}),ne(this,Dt,FM({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,onCancel:S=>{S instanceof M0&&S.revert&&this.setState({...R(this,gc),fetchStatus:"idle"}),r.abort()},onFail:(S,b)=>{me(this,Cr,bi).call(this,{type:"failed",failureCount:S,error:b})},onPause:()=>{me(this,Cr,bi).call(this,{type:"pause"})},onContinue:()=>{me(this,Cr,bi).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const S=await R(this,Dt).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(h=(f=R(this,rr).config).onSuccess)==null||h.call(f,S,this),(p=(m=R(this,rr).config).onSettled)==null||p.call(m,S,this.state.error,this),S}catch(S){if(S instanceof M0){if(S.silent)return R(this,Dt).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw me(this,Cr,bi).call(this,{type:"error",error:S}),(v=(g=R(this,rr).config).onError)==null||v.call(g,S,this),(w=(y=R(this,rr).config).onSettled)==null||w.call(y,this.state.data,S,this),S}finally{this.scheduleGc()}}},ja=new WeakMap,gc=new WeakMap,rr=new WeakMap,La=new WeakMap,Dt=new WeakMap,Hd=new WeakMap,$a=new WeakMap,Cr=new WeakSet,bi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...BM(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...yC(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ne(this,gc,e.manual?i:void 0),i;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),At.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),R(this,rr).notify({query:this,type:"updated",action:e})})},gA);function BM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$M(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yC(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function bC(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wn,ke,Kd,sn,Fa,vc,Ti,ko,Gd,yc,bc,Ua,Ba,To,wc,Ne,du,I0,N0,D0,j0,L0,$0,F0,zM,vA,x3=(vA=class extends cl{constructor(e,n){super();se(this,Ne);se(this,wn);se(this,ke);se(this,Kd);se(this,sn);se(this,Fa);se(this,vc);se(this,Ti);se(this,ko);se(this,Gd);se(this,yc);se(this,bc);se(this,Ua);se(this,Ba);se(this,To);se(this,wc,new Set);this.options=n,ne(this,wn,e),ne(this,ko,null),ne(this,Ti,R0()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ke).addObserver(this),wC(R(this,ke),this.options)?me(this,Ne,du).call(this):this.updateResult(),me(this,Ne,j0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U0(R(this,ke),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U0(R(this,ke),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,me(this,Ne,L0).call(this),me(this,Ne,$0).call(this),R(this,ke).removeObserver(this)}setOptions(e){const n=this.options,r=R(this,ke);if(this.options=R(this,wn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ir(this.options.enabled,R(this,ke))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");me(this,Ne,F0).call(this),R(this,ke).setOptions(this.options),n._defaulted&&!hp(this.options,n)&&R(this,wn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ke),observer:this});const i=this.hasListeners();i&&SC(R(this,ke),r,this.options,n)&&me(this,Ne,du).call(this),this.updateResult(),i&&(R(this,ke)!==r||ir(this.options.enabled,R(this,ke))!==ir(n.enabled,R(this,ke))||zo(this.options.staleTime,R(this,ke))!==zo(n.staleTime,R(this,ke)))&&me(this,Ne,I0).call(this);const o=me(this,Ne,N0).call(this);i&&(R(this,ke)!==r||ir(this.options.enabled,R(this,ke))!==ir(n.enabled,R(this,ke))||o!==R(this,To))&&me(this,Ne,D0).call(this,o)}getOptimisticResult(e){const n=R(this,wn).getQueryCache().build(R(this,wn),e),r=this.createResult(n,e);return T3(this,r)&&(ne(this,sn,r),ne(this,vc,this.options),ne(this,Fa,R(this,ke).state)),r}getCurrentResult(){return R(this,sn)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,Ti).status==="pending"&&R(this,Ti).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){R(this,wc).add(e)}getCurrentQuery(){return R(this,ke)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=R(this,wn).defaultQueryOptions(e),r=R(this,wn).getQueryCache().build(R(this,wn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return me(this,Ne,du).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,sn)))}createResult(e,n){var _;const r=R(this,ke),i=this.options,o=R(this,sn),a=R(this,Fa),s=R(this,vc),l=e!==r?e.state:R(this,Kd),{state:u}=e;let d={...u},f=!1,h;if(n._optimisticResults){const E=this.hasListeners(),A=!E&&wC(e,n),P=E&&SC(e,r,n,i);(A||P)&&(d={...d,...BM(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:g}=d;h=d.data;let v=!1;if(n.placeholderData!==void 0&&h===void 0&&g==="pending"){let E;o!=null&&o.isPlaceholderData&&n.placeholderData===(s==null?void 0:s.placeholderData)?(E=o.data,v=!0):E=typeof n.placeholderData=="function"?n.placeholderData((_=R(this,bc))==null?void 0:_.state.data,R(this,bc)):n.placeholderData,E!==void 0&&(g="success",h=A0(o==null?void 0:o.data,E,n),f=!0)}if(n.select&&h!==void 0&&!v)if(o&&h===(a==null?void 0:a.data)&&n.select===R(this,Gd))h=R(this,yc);else try{ne(this,Gd,n.select),h=n.select(h),h=A0(o==null?void 0:o.data,h,n),ne(this,yc,h),ne(this,ko,null)}catch(E){ne(this,ko,E)}R(this,ko)&&(m=R(this,ko),h=R(this,yc),p=Date.now(),g="error");const y=d.fetchStatus==="fetching",w=g==="pending",S=g==="error",b=w&&y,x=h!==void 0,C={status:g,fetchStatus:d.fetchStatus,isPending:w,isSuccess:g==="success",isError:S,isInitialLoading:b,isLoading:b,data:h,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:S&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&x,isStale:nx(e,n),refetch:this.refetch,promise:R(this,Ti),isEnabled:ir(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=C.data!==void 0,A=C.status==="error"&&!E,P=$=>{A?$.reject(C.error):E&&$.resolve(C.data)},L=()=>{const $=ne(this,Ti,C.promise=R0());P($)},j=R(this,Ti);switch(j.status){case"pending":e.queryHash===r.queryHash&&P(j);break;case"fulfilled":(A||C.data!==j.value)&&L();break;case"rejected":(!A||C.error!==j.reason)&&L();break}}return C}updateResult(){const e=R(this,sn),n=this.createResult(R(this,ke),this.options);if(ne(this,Fa,R(this,ke).state),ne(this,vc,this.options),R(this,Fa).data!==void 0&&ne(this,bc,R(this,ke)),hp(n,e))return;ne(this,sn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!R(this,wc).size)return!0;const a=new Set(o??R(this,wc));return this.options.throwOnError&&a.add("error"),Object.keys(R(this,sn)).some(s=>{const c=s;return R(this,sn)[c]!==e[c]&&a.has(c)})};me(this,Ne,zM).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&me(this,Ne,j0).call(this)}},wn=new WeakMap,ke=new WeakMap,Kd=new WeakMap,sn=new WeakMap,Fa=new WeakMap,vc=new WeakMap,Ti=new WeakMap,ko=new WeakMap,Gd=new WeakMap,yc=new WeakMap,bc=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,To=new WeakMap,wc=new WeakMap,Ne=new WeakSet,du=function(e){me(this,Ne,F0).call(this);let n=R(this,ke).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(un)),n},I0=function(){me(this,Ne,L0).call(this);const e=zo(this.options.staleTime,R(this,ke));if(es||R(this,sn).isStale||!P0(e))return;const r=DM(R(this,sn).dataUpdatedAt,e)+1;ne(this,Ua,Pa.setTimeout(()=>{R(this,sn).isStale||this.updateResult()},r))},N0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ke)):this.options.refetchInterval)??!1},D0=function(e){me(this,Ne,$0).call(this),ne(this,To,e),!(es||ir(this.options.enabled,R(this,ke))===!1||!P0(R(this,To))||R(this,To)===0)&&ne(this,Ba,Pa.setInterval(()=>{(this.options.refetchIntervalInBackground||tx.isFocused())&&me(this,Ne,du).call(this)},R(this,To)))},j0=function(){me(this,Ne,I0).call(this),me(this,Ne,D0).call(this,me(this,Ne,N0).call(this))},L0=function(){R(this,Ua)&&(Pa.clearTimeout(R(this,Ua)),ne(this,Ua,void 0))},$0=function(){R(this,Ba)&&(Pa.clearInterval(R(this,Ba)),ne(this,Ba,void 0))},F0=function(){const e=R(this,wn).getQueryCache().build(R(this,wn),this.options);if(e===R(this,ke))return;const n=R(this,ke);ne(this,ke,e),ne(this,Kd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},zM=function(e){At.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(R(this,sn))}),R(this,wn).getQueryCache().notify({query:R(this,ke),type:"observerResultsUpdated"})})},vA);function k3(t,e){return ir(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wC(t,e){return k3(t,e)||t.state.data!==void 0&&U0(t,e,e.refetchOnMount)}function U0(t,e,n){if(ir(e.enabled,t)!==!1&&zo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&nx(t,e)}return!1}function SC(t,e,n,r){return(t!==e||ir(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&nx(t,n)}function nx(t,e){return ir(e.enabled,t)!==!1&&t.isStaleByTime(zo(e.staleTime,t))}function T3(t,e){return!hp(t.getCurrentResult(),e)}function xC(t){return{onFetch:(e,n)=>{var u,d,f,h,m;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((h=e.state.data)==null?void 0:h.pages)||[],a=((m=e.state.data)==null?void 0:m.pageParams)||[];let s={pages:[],pageParams:[]},c=0;const l=async()=>{let p=!1;const g=w=>{m3(w,()=>e.signal,()=>p=!0)},v=LM(e.options,e.fetchOptions),y=async(w,S,b)=>{if(p)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:S,direction:b?"backward":"forward",meta:e.options.meta};return g(A),A})(),C=await v(T),{maxPages:_}=e.options,E=b?p3:h3;return{pages:E(w.pages,C,_),pageParams:E(w.pageParams,S,_)}};if(i&&o.length){const w=i==="backward",S=w?C3:kC,b={pages:o,pageParams:a},x=S(r,b);s=await y(b,x,w)}else{const w=t??o.length;do{const S=c===0?a[0]??r.initialPageParam:kC(r,s);if(c>0&&S==null)break;s=await y(s,S),c++}while(c<w)}return s};e.options.persister?e.fetchFn=()=>{var p,g;return(g=(p=e.options).persister)==null?void 0:g.call(p,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function kC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function C3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Yd,Zr,Zt,za,ei,uo,yA,_3=(yA=class extends UM{constructor(e){super();se(this,ei);se(this,Yd);se(this,Zr);se(this,Zt);se(this,za);ne(this,Yd,e.client),this.mutationId=e.mutationId,ne(this,Zt,e.mutationCache),ne(this,Zr,[]),this.state=e.state||qM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Zr).includes(e)||(R(this,Zr).push(e),this.clearGcTimeout(),R(this,Zt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ne(this,Zr,R(this,Zr).filter(n=>n!==e)),this.scheduleGc(),R(this,Zt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Zr).length||(this.state.status==="pending"?this.scheduleGc():R(this,Zt).remove(this))}continue(){var e;return((e=R(this,za))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,s,c,l,u,d,f,h,m,p,g,v,y,w,S,b,x,T;const n=()=>{me(this,ei,uo).call(this,{type:"continue"})},r={client:R(this,Yd),meta:this.options.meta,mutationKey:this.options.mutationKey};ne(this,za,FM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,_)=>{me(this,ei,uo).call(this,{type:"failed",failureCount:C,error:_})},onPause:()=>{me(this,ei,uo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Zt).canRun(this)}));const i=this.state.status==="pending",o=!R(this,za).canStart();try{if(i)n();else{me(this,ei,uo).call(this,{type:"pending",variables:e,isPaused:o}),R(this,Zt).config.onMutate&&await R(this,Zt).config.onMutate(e,this,r);const _=await((s=(a=this.options).onMutate)==null?void 0:s.call(a,e,r));_!==this.state.context&&me(this,ei,uo).call(this,{type:"pending",context:_,variables:e,isPaused:o})}const C=await R(this,za).start();return await((l=(c=R(this,Zt).config).onSuccess)==null?void 0:l.call(c,C,e,this.state.context,this,r)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,C,e,this.state.context,r)),await((h=(f=R(this,Zt).config).onSettled)==null?void 0:h.call(f,C,null,this.state.variables,this.state.context,this,r)),await((p=(m=this.options).onSettled)==null?void 0:p.call(m,C,null,e,this.state.context,r)),me(this,ei,uo).call(this,{type:"success",data:C}),C}catch(C){try{await((v=(g=R(this,Zt).config).onError)==null?void 0:v.call(g,C,e,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((w=(y=this.options).onError)==null?void 0:w.call(y,C,e,this.state.context,r))}catch(_){Promise.reject(_)}try{await((b=(S=R(this,Zt).config).onSettled)==null?void 0:b.call(S,void 0,C,this.state.variables,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,C,e,this.state.context,r))}catch(_){Promise.reject(_)}throw me(this,ei,uo).call(this,{type:"error",error:C}),C}finally{R(this,Zt).runNext(this)}}},Yd=new WeakMap,Zr=new WeakMap,Zt=new WeakMap,za=new WeakMap,ei=new WeakSet,uo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),At.batch(()=>{R(this,Zr).forEach(r=>{r.onMutationUpdate(e)}),R(this,Zt).notify({mutation:this,type:"updated",action:e})})},yA);function qM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ci,_r,Xd,bA,E3=(bA=class extends cl{constructor(e={}){super();se(this,Ci);se(this,_r);se(this,Xd);this.config=e,ne(this,Ci,new Set),ne(this,_r,new Map),ne(this,Xd,0)}build(e,n,r){const i=new _3({client:e,mutationCache:this,mutationId:++xf(this,Xd)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){R(this,Ci).add(e);const n=Bf(e);if(typeof n=="string"){const r=R(this,_r).get(n);r?r.push(e):R(this,_r).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,Ci).delete(e)){const n=Bf(e);if(typeof n=="string"){const r=R(this,_r).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&R(this,_r).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Bf(e);if(typeof n=="string"){const r=R(this,_r).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Bf(e);if(typeof n=="string"){const i=(r=R(this,_r).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){At.batch(()=>{R(this,Ci).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,Ci).clear(),R(this,_r).clear()})}getAll(){return Array.from(R(this,Ci))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mC(n,r))}findAll(e={}){return this.getAll().filter(n=>mC(e,n))}notify(e){At.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return At.batch(()=>Promise.all(e.map(n=>n.continue().catch(un))))}},Ci=new WeakMap,_r=new WeakMap,Xd=new WeakMap,bA);function Bf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var _i,Co,Sn,Ei,zi,xh,B0,wA,P3=(wA=class extends cl{constructor(n,r){super();se(this,zi);se(this,_i);se(this,Co);se(this,Sn);se(this,Ei);ne(this,_i,n),this.setOptions(r),this.bindMethods(),me(this,zi,xh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=R(this,_i).defaultMutationOptions(n),hp(this.options,r)||R(this,_i).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Sn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ts(r.mutationKey)!==ts(this.options.mutationKey)?this.reset():((i=R(this,Sn))==null?void 0:i.state.status)==="pending"&&R(this,Sn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=R(this,Sn))==null||n.removeObserver(this)}onMutationUpdate(n){me(this,zi,xh).call(this),me(this,zi,B0).call(this,n)}getCurrentResult(){return R(this,Co)}reset(){var n;(n=R(this,Sn))==null||n.removeObserver(this),ne(this,Sn,void 0),me(this,zi,xh).call(this),me(this,zi,B0).call(this)}mutate(n,r){var i;return ne(this,Ei,r),(i=R(this,Sn))==null||i.removeObserver(this),ne(this,Sn,R(this,_i).getMutationCache().build(R(this,_i),this.options)),R(this,Sn).addObserver(this),R(this,Sn).execute(n)}},_i=new WeakMap,Co=new WeakMap,Sn=new WeakMap,Ei=new WeakMap,zi=new WeakSet,xh=function(){var r;const n=((r=R(this,Sn))==null?void 0:r.state)??qM();ne(this,Co,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},B0=function(n){At.batch(()=>{var r,i,o,a,s,c,l,u;if(R(this,Ei)&&this.hasListeners()){const d=R(this,Co).variables,f=R(this,Co).context,h={client:R(this,_i),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(r=R(this,Ei)).onSuccess)==null||i.call(r,n.data,d,f,h)}catch(m){Promise.reject(m)}try{(a=(o=R(this,Ei)).onSettled)==null||a.call(o,n.data,null,d,f,h)}catch(m){Promise.reject(m)}}else if((n==null?void 0:n.type)==="error"){try{(c=(s=R(this,Ei)).onError)==null||c.call(s,n.error,d,f,h)}catch(m){Promise.reject(m)}try{(u=(l=R(this,Ei)).onSettled)==null||u.call(l,void 0,n.error,d,f,h)}catch(m){Promise.reject(m)}}}this.listeners.forEach(d=>{d(R(this,Co))})})},wA),ti,SA,O3=(SA=class extends cl{constructor(e={}){super();se(this,ti);this.config=e,ne(this,ti,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??JS(i,n);let a=this.get(o);return a||(a=new S3({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){R(this,ti).has(e.queryHash)||(R(this,ti).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=R(this,ti).get(e.queryHash);n&&(e.destroy(),n===e&&R(this,ti).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){At.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,ti).get(e)}getAll(){return[...R(this,ti).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pC(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pC(e,r)):n}notify(e){At.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){At.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){At.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ti=new WeakMap,SA),at,_o,Eo,Sc,xc,Po,kc,Tc,xA,A3=(xA=class{constructor(t={}){se(this,at);se(this,_o);se(this,Eo);se(this,Sc);se(this,xc);se(this,Po);se(this,kc);se(this,Tc);ne(this,at,t.queryCache||new O3),ne(this,_o,t.mutationCache||new E3),ne(this,Eo,t.defaultOptions||{}),ne(this,Sc,new Map),ne(this,xc,new Map),ne(this,Po,0)}mount(){xf(this,Po)._++,R(this,Po)===1&&(ne(this,kc,tx.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,at).onFocus())})),ne(this,Tc,pp.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,at).onOnline())})))}unmount(){var t,e;xf(this,Po)._--,R(this,Po)===0&&((t=R(this,kc))==null||t.call(this),ne(this,kc,void 0),(e=R(this,Tc))==null||e.call(this),ne(this,Tc,void 0))}isFetching(t){return R(this,at).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,_o).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,at).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=R(this,at).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(zo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return R(this,at).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=R(this,at).get(r.queryHash),o=i==null?void 0:i.state.data,a=u3(e,o);if(a!==void 0)return R(this,at).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return At.batch(()=>R(this,at).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,at).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=R(this,at);At.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=R(this,at);return At.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=At.batch(()=>R(this,at).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(un).catch(un)}invalidateQueries(t,e={}){return At.batch(()=>(R(this,at).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=At.batch(()=>R(this,at).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(un)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(un)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=R(this,at).build(this,e);return n.isStaleByTime(zo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(un).catch(un)}fetchInfiniteQuery(t){return t.behavior=xC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(un).catch(un)}ensureInfiniteQueryData(t){return t.behavior=xC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return pp.isOnline()?R(this,_o).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,at)}getMutationCache(){return R(this,_o)}getDefaultOptions(){return R(this,Eo)}setDefaultOptions(t){ne(this,Eo,t)}setQueryDefaults(t,e){R(this,Sc).set(ts(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Sc).values()],n={};return e.forEach(r=>{Zu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){R(this,xc).set(ts(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,xc).values()],n={};return e.forEach(r=>{Zu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Eo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=JS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ZS&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Eo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,at).clear(),R(this,_o).clear()}},at=new WeakMap,_o=new WeakMap,Eo=new WeakMap,Sc=new WeakMap,xc=new WeakMap,Po=new WeakMap,kc=new WeakMap,Tc=new WeakMap,xA),WM=M.createContext(void 0),ll=t=>{const e=M.useContext(WM);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},R3=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),k.jsx(WM.Provider,{value:t,children:e})),VM=M.createContext(!1),M3=()=>M.useContext(VM);VM.Provider;function I3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var N3=M.createContext(I3()),D3=()=>M.useContext(N3),j3=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?ex(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},L3=t=>{M.useEffect(()=>{t.clearReset()},[t])},$3=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||ex(n,[t.error,r])),F3=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},U3=(t,e)=>t.isLoading&&t.isFetching&&!e,B3=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,TC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function z3(t,e,n){var f,h,m,p;const r=M3(),i=D3(),o=ll(),a=o.defaultQueryOptions(t);(h=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,a);const s=o.getQueryCache().get(a.queryHash);a._optimisticResults=r?"isRestoring":"optimistic",F3(a),j3(a,i,s),L3(i);const c=!o.getQueryCache().get(a.queryHash),[l]=M.useState(()=>new e(o,a)),u=l.getOptimisticResult(a),d=!r&&t.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(g=>{const v=d?l.subscribe(At.batchCalls(g)):un;return l.updateResult(),v},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),M.useEffect(()=>{l.setOptions(a)},[a,l]),B3(a,u))throw TC(a,l,i);if($3({result:u,errorResetBoundary:i,throwOnError:a.throwOnError,query:s,suspense:a.suspense}))throw u.error;if((p=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,a,u),a.experimental_prefetchInRender&&!es&&U3(u,r)){const g=c?TC(a,l,i):s==null?void 0:s.promise;g==null||g.catch(un).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function Fn(t,e){return z3(t,x3)}function mp(t,e){const n=ll(),[r]=M.useState(()=>new P3(n,t));M.useEffect(()=>{r.setOptions(t)},[r,t]);const i=M.useSyncExternalStore(M.useCallback(a=>r.subscribe(At.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=M.useCallback((a,s)=>{r.mutate(a,s).catch(un)},[r]);if(i.error&&ex(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(this,arguments)}var Ro;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ro||(Ro={}));const CC="popstate";function q3(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return z0("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gp(i)}return V3(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W3(){return Math.random().toString(36).substr(2,8)}function _C(t,e){return{usr:t.state,key:t.key,idx:e}}function z0(t,e,n,r){return n===void 0&&(n=null),ed({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ul(e):e,{state:n,key:e&&e.key||r||W3()})}function gp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ul(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function V3(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Ro.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(ed({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=Ro.Pop;let g=u(),v=g==null?null:g-l;l=g,c&&c({action:s,location:p.location,delta:v})}function f(g,v){s=Ro.Push;let y=z0(p.location,g,v);l=u()+1;let w=_C(y,l),S=p.createHref(y);try{a.pushState(w,"",S)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(S)}o&&c&&c({action:s,location:p.location,delta:1})}function h(g,v){s=Ro.Replace;let y=z0(p.location,g,v);l=u();let w=_C(y,l),S=p.createHref(y);a.replaceState(w,"",S),o&&c&&c({action:s,location:p.location,delta:0})}function m(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:gp(g);return y=y.replace(/ $/,"%20"),yt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let p={get action(){return s},get location(){return t(i,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(CC,d),c=g,()=>{i.removeEventListener(CC,d),c=null}},createHref(g){return e(i,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(g){return a.go(g)}};return p}var EC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(EC||(EC={}));function H3(t,e,n){return n===void 0&&(n="/"),K3(t,e,n)}function K3(t,e,n,r){let i=typeof e=="string"?ul(e):e,o=ix(i.pathname||"/",n);if(o==null)return null;let a=HM(t);G3(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=aB(o);s=rB(a[c],l)}return s}function HM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(yt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=qo([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),HM(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:tB(l,o.index),routesMeta:u})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of KM(o.path))i(o,a,c)}),e}function KM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=KM(r.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>t.startsWith("/")&&c===""?"/":c)}function G3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Y3=/^:[\w-]+$/,X3=3,Q3=2,J3=1,Z3=10,eB=-2,PC=t=>t==="*";function tB(t,e){let n=t.split("/"),r=n.length;return n.some(PC)&&(r+=eB),e&&(r+=Q3),n.filter(i=>!PC(i)).reduce((i,o)=>i+(Y3.test(o)?X3:o===""?J3:Z3),r)}function nB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rB(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=iB({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:qo([o,d.pathname]),pathnameBase:dB(qo([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=qo([o,d.pathnameBase]))}return a}function iB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oB(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let p=s[d]||"";a=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const m=s[d];return h&&!m?l[f]=void 0:l[f]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function oB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function aB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ix(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const sB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cB=t=>sB.test(t);function lB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ul(t):t,o;if(n)if(cB(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),rx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=OC(n.substring(1),"/"):o=OC(n,e)}else o=e;return{pathname:o,search:fB(r),hash:hB(i)}}function OC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ov(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ox(t,e){let n=uB(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ax(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ul(t):(i=ed({},t),yt(!i.pathname||!i.pathname.includes("?"),Ov("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),Ov("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),Ov("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}s=d>=0?e[d]:"/"}let c=lB(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const qo=t=>t.join("/").replace(/\/\/+/g,"/"),dB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const GM=["post","put","patch","delete"];new Set(GM);const mB=["get",...GM];new Set(mB);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const sx=M.createContext(null),gB=M.createContext(null),ia=M.createContext(null),Ym=M.createContext(null),Zi=M.createContext({outlet:null,matches:[],isDataRoute:!1}),YM=M.createContext(null);function vB(t,e){let{relative:n}=e===void 0?{}:e;dl()||yt(!1);let{basename:r,navigator:i}=M.useContext(ia),{hash:o,pathname:a,search:s}=JM(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:qo([r,a])),i.createHref({pathname:c,search:s,hash:o})}function dl(){return M.useContext(Ym)!=null}function fl(){return dl()||yt(!1),M.useContext(Ym).location}function XM(t){M.useContext(ia).static||M.useLayoutEffect(t)}function QM(){let{isDataRoute:t}=M.useContext(Zi);return t?RB():yB()}function yB(){dl()||yt(!1);let t=M.useContext(sx),{basename:e,future:n,navigator:r}=M.useContext(ia),{matches:i}=M.useContext(Zi),{pathname:o}=fl(),a=JSON.stringify(ox(i,n.v7_relativeSplatPath)),s=M.useRef(!1);return XM(()=>{s.current=!0}),M.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let d=ax(l,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qo([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,a,o,t])}function bB(){let{matches:t}=M.useContext(Zi),e=t[t.length-1];return e?e.params:{}}function JM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(ia),{matches:i}=M.useContext(Zi),{pathname:o}=fl(),a=JSON.stringify(ox(i,r.v7_relativeSplatPath));return M.useMemo(()=>ax(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function wB(t,e){return SB(t,e)}function SB(t,e,n,r){dl()||yt(!1);let{navigator:i}=M.useContext(ia),{matches:o}=M.useContext(Zi),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=fl(),u;if(e){var d;let g=typeof e=="string"?ul(e):e;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||yt(!1),u=g}else u=l;let f=u.pathname||"/",h=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=H3(t,{pathname:h}),p=_B(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:qo([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:qo([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r);return e&&p?M.createElement(Ym.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ro.Pop}},p):p}function xB(){let t=AB(),e=pB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const kB=M.createElement(xB,null);class TB extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Zi.Provider,{value:this.props.routeContext},M.createElement(YM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CB(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(sx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Zi.Provider,{value:e},r)}function _B(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||yt(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let h,m=!1,p=null,g=null;n&&(h=s&&d.route.id?s[d.route.id]:void 0,p=d.route.errorElement||kB,c&&(l<0&&f===0?(MB("route-fallback"),m=!0,g=null):l===f&&(m=!0,g=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),y=()=>{let w;return h?w=p:m?w=g:d.route.Component?w=M.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,M.createElement(CB,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(TB,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var ZM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZM||{}),eI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eI||{});function EB(t){let e=M.useContext(sx);return e||yt(!1),e}function PB(t){let e=M.useContext(gB);return e||yt(!1),e}function OB(t){let e=M.useContext(Zi);return e||yt(!1),e}function tI(t){let e=OB(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function AB(){var t;let e=M.useContext(YM),n=PB(),r=tI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function RB(){let{router:t}=EB(ZM.UseNavigateStable),e=tI(eI.UseNavigateStable),n=M.useRef(!1);return XM(()=>{n.current=!0}),M.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,td({fromRouteId:e},o)))},[t,e])}const AC={};function MB(t,e,n){AC[t]||(AC[t]=!0)}function IB(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function NB(t){let{to:e,replace:n,state:r,relative:i}=t;dl()||yt(!1);let{future:o,static:a}=M.useContext(ia),{matches:s}=M.useContext(Zi),{pathname:c}=fl(),l=QM(),u=ax(e,ox(s,o.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return M.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function Ps(t){yt(!1)}function DB(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ro.Pop,navigator:o,static:a=!1,future:s}=t;dl()&&yt(!1);let c=e.replace(/^\/*/,"/"),l=M.useMemo(()=>({basename:c,navigator:o,static:a,future:td({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof r=="string"&&(r=ul(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=r,p=M.useMemo(()=>{let g=ix(u,c);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:m},navigationType:i}},[c,u,d,f,h,m,i]);return p==null?null:M.createElement(ia.Provider,{value:l},M.createElement(Ym.Provider,{children:n,value:p}))}function jB(t){let{children:e,location:n}=t;return wB(q0(e),n)}new Promise(()=>{});function q0(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){n.push.apply(n,q0(r.props.children,o));return}r.type!==Ps&&yt(!1),!r.props.index||!r.props.children||yt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=q0(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W0(){return W0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W0.apply(this,arguments)}function LB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $B(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FB(t,e){return t.button===0&&(!e||e==="_self")&&!$B(t)}const UB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BB="6";try{window.__reactRouterVersion=BB}catch{}const zB="startTransition",RC=Y$[zB];function qB(t){let{basename:e,children:n,future:r,window:i}=t,o=M.useRef();o.current==null&&(o.current=q3({window:i,v5Compat:!0}));let a=o.current,[s,c]=M.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=M.useCallback(d=>{l&&RC?RC(()=>c(d)):c(d)},[c,l]);return M.useLayoutEffect(()=>a.listen(u),[a,u]),M.useEffect(()=>IB(r),[r]),M.createElement(DB,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const WB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nf=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:l,preventScrollReset:u,viewTransition:d}=e,f=LB(e,UB),{basename:h}=M.useContext(ia),m,p=!1;if(typeof l=="string"&&VB.test(l)&&(m=l,WB))try{let w=new URL(window.location.href),S=l.startsWith("//")?new URL(w.protocol+l):new URL(l),b=ix(S.pathname,h);S.origin===w.origin&&b!=null?l=b+S.search+S.hash:p=!0}catch{}let g=vB(l,{relative:i}),v=HB(l,{replace:a,state:s,target:c,preventScrollReset:u,relative:i,viewTransition:d});function y(w){r&&r(w),w.defaultPrevented||v(w)}return M.createElement("a",W0({},f,{href:m||g,onClick:p||o?r:y,ref:n,target:c}))});var MC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(MC||(MC={}));var IC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(IC||(IC={}));function HB(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=e===void 0?{}:e,c=QM(),l=fl(),u=JM(t,{relative:a});return M.useCallback(d=>{if(FB(d,n)){d.preventDefault();let f=r!==void 0?r:gp(l)===gp(u);c(t,{replace:f,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,c,u,r,i,n,t,o,a,s])}/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xt=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:c,...l},u)=>M.createElement("svg",{ref:u,...KB,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${GB(t)}`,s].join(" "),...l},[...e.map(([d,f])=>M.createElement(d,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=Xt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=Xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Xt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=Xt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Xt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=Xt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=Xt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=Xt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=Xt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=Xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Xt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=Xt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=Xt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=Xt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Xt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ui=Object.create(null);ui.open="0";ui.close="1";ui.ping="2";ui.pong="3";ui.message="4";ui.upgrade="5";ui.noop="6";const kh=Object.create(null);Object.keys(ui).forEach(t=>{kh[ui[t]]=t});const K0={type:"error",data:"parser error"},cI=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lI=typeof ArrayBuffer=="function",uI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,lx=({type:t,data:e},n,r)=>cI&&e instanceof Blob?n?r(e):DC(e,r):lI&&(e instanceof ArrayBuffer||uI(e))?n?r(e):DC(new Blob([e]),r):r(ui[t]+(e||"")),DC=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function jC(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Av;function t4(t,e){if(cI&&t.data instanceof Blob)return t.data.arrayBuffer().then(jC).then(e);if(lI&&(t.data instanceof ArrayBuffer||uI(t.data)))return e(jC(t.data));lx(t,!1,n=>{Av||(Av=new TextEncoder),e(Av.encode(n))})}const LC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<LC.length;t++)fu[LC.charCodeAt(t)]=t;const n4=t=>{let e=t.length*.75,n=t.length,r,i=0,o,a,s,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)o=fu[t.charCodeAt(r)],a=fu[t.charCodeAt(r+1)],s=fu[t.charCodeAt(r+2)],c=fu[t.charCodeAt(r+3)],u[i++]=o<<2|a>>4,u[i++]=(a&15)<<4|s>>2,u[i++]=(s&3)<<6|c&63;return l},r4=typeof ArrayBuffer=="function",ux=(t,e)=>{if(typeof t!="string")return{type:"message",data:dI(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:i4(t.substring(1),e)}:kh[n]?t.length>1?{type:kh[n],data:t.substring(1)}:{type:kh[n]}:K0},i4=(t,e)=>{if(r4){const n=n4(t);return dI(n,e)}else return{base64:!0,data:t}},dI=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},fI="",o4=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((o,a)=>{lx(o,!1,s=>{r[a]=s,++i===n&&e(r.join(fI))})})},a4=(t,e)=>{const n=t.split(fI),r=[];for(let i=0;i<n.length;i++){const o=ux(n[i],e);if(r.push(o),o.type==="error")break}return r};function s4(){return new TransformStream({transform(t,e){t4(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Rv;function zf(t){return t.reduce((e,n)=>e+n.length,0)}function qf(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function c4(t,e){Rv||(Rv=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(a,s){for(n.push(a);;){if(r===0){if(zf(n)<1)break;const c=qf(n,1);o=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(zf(n)<2)break;const c=qf(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(zf(n)<8)break;const c=qf(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){s.enqueue(K0);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(zf(n)<i)break;const c=qf(n,i);s.enqueue(ux(o?c:Rv.decode(c),e)),r=0}if(i===0||i>t){s.enqueue(K0);break}}}})}const hI=4;function kt(t){if(t)return l4(t)}function l4(t){for(var e in kt.prototype)t[e]=kt.prototype[e];return t}kt.prototype.on=kt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};kt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};kt.prototype.off=kt.prototype.removeListener=kt.prototype.removeAllListeners=kt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};kt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};kt.prototype.emitReserved=kt.prototype.emit;kt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};kt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Xm=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),sr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),u4="arraybuffer";function pI(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const d4=sr.setTimeout,f4=sr.clearTimeout;function Qm(t,e){e.useNativeTimers?(t.setTimeoutFn=d4.bind(sr),t.clearTimeoutFn=f4.bind(sr)):(t.setTimeoutFn=sr.setTimeout.bind(sr),t.clearTimeoutFn=sr.clearTimeout.bind(sr))}const h4=1.33;function p4(t){return typeof t=="string"?m4(t):Math.ceil((t.byteLength||t.size)*h4)}function m4(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function mI(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function g4(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function v4(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class y4 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class dx extends kt{constructor(e){super(),this.writable=!1,Qm(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new y4(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ux(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=g4(e);return n.length?"?"+n:""}}class b4 extends dx{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};a4(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,o4(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=mI()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let gI=!1;try{gI=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const w4=gI;function S4(){}class x4 extends b4{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class ai extends kt{constructor(e,n,r){super(),this.createRequest=e,Qm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=pI(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ai.requestsCount++,ai.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=S4,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ai.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ai.requestsCount=0;ai.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$C);else if(typeof addEventListener=="function"){const t="onpagehide"in sr?"pagehide":"unload";addEventListener(t,$C,!1)}}function $C(){for(let t in ai.requests)ai.requests.hasOwnProperty(t)&&ai.requests[t].abort()}const k4=function(){const t=vI({xdomain:!1});return t&&t.responseType!==null}();class T4 extends x4{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=k4&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ai(vI,this.uri(),e)}}function vI(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||w4))return new XMLHttpRequest}catch{}if(!e)try{return new sr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yI=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class C4 extends dx{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=yI?{}:pI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;lx(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&Xm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=mI()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Mv=sr.WebSocket||sr.MozWebSocket;class _4 extends C4{createSocket(e,n,r){return yI?new Mv(e,n,r):n?new Mv(e,n):new Mv(e)}doWrite(e,n){this.ws.send(n)}}class E4 extends dx{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=c4(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=s4();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{r.read().then(({done:s,value:c})=>{s||(this.onPacket(c),o())}).catch(s=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Xm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const P4={websocket:_4,webtransport:E4,polling:T4},O4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function G0(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=O4.exec(t||""),o={},a=14;for(;a--;)o[A4[a]]=i[a]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=R4(o,o.path),o.queryKey=M4(o,o.query),o}function R4(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function M4(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}const Y0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Th=[];Y0&&addEventListener("offline",()=>{Th.forEach(t=>t())},!1);class Wo extends kt{constructor(e,n){if(super(),this.binaryType=u4,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=G0(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=G0(n.host).host);Qm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=v4(this.opts.query)),Y0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Th.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=hI,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Wo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Wo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=p4(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Xm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Wo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Y0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Th.indexOf(this._offlineEventListener);r!==-1&&Th.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Wo.protocol=hI;class I4 extends Wo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Wo.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Wo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function o(){r||(r=!0,u(),n.close(),n=null)}const a=d=>{const f=new Error("probe error: "+d);f.transport=n.name,o(),this.emitReserved("upgradeError",f)};function s(){a("transport closed")}function c(){a("socket closed")}function l(d){n&&d.name!==n.name&&o()}const u=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",s),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",a),n.once("close",s),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let N4=class extends I4{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>P4[i]).filter(i=>!!i)),super(e,r)}};function D4(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=G0(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const j4=typeof ArrayBuffer=="function",L4=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,bI=Object.prototype.toString,$4=typeof Blob=="function"||typeof Blob<"u"&&bI.call(Blob)==="[object BlobConstructor]",F4=typeof File=="function"||typeof File<"u"&&bI.call(File)==="[object FileConstructor]";function fx(t){return j4&&(t instanceof ArrayBuffer||L4(t))||$4&&t instanceof Blob||F4&&t instanceof File}function Ch(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ch(t[n]))return!0;return!1}if(fx(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ch(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ch(t[n]))return!0;return!1}function U4(t){const e=[],n=t.data,r=t;return r.data=X0(n,e),r.attachments=e.length,{packet:r,buffers:e}}function X0(t,e){if(!t)return t;if(fx(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=X0(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=X0(t[r],e));return n}return t}function B4(t,e){return t.data=Q0(t.data,e),delete t.attachments,t}function Q0(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Q0(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Q0(t[n],e));return t}const z4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Te;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Te||(Te={}));class q4{constructor(e){this.replacer=e}encode(e){return(e.type===Te.EVENT||e.type===Te.ACK)&&Ch(e)?this.encodeAsBinary({type:e.type===Te.EVENT?Te.BINARY_EVENT:Te.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Te.BINARY_EVENT||e.type===Te.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=U4(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class hx extends kt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Te.BINARY_EVENT;r||n.type===Te.BINARY_ACK?(n.type=r?Te.EVENT:Te.ACK,this.reconstructor=new W4(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(fx(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Te[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Te.BINARY_EVENT||r.type===Te.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(o,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(hx.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Te.CONNECT:return FC(n);case Te.DISCONNECT:return n===void 0;case Te.CONNECT_ERROR:return typeof n=="string"||FC(n);case Te.EVENT:case Te.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&z4.indexOf(n[0])===-1);case Te.ACK:case Te.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class W4{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=B4(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function FC(t){return Object.prototype.toString.call(t)==="[object Object]"}const V4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hx,Encoder:q4,get PacketType(){return Te}},Symbol.toStringTag,{value:"Module"}));function Pr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const H4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wI extends kt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Pr(e,"open",this.onopen.bind(this)),Pr(e,"packet",this.onpacket.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,o;if(H4.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:Te.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),a.id=u}const s=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!s||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);n.call(this,new Error("operation has timed out"))},i),a=(...s)=>{this.io.clearTimeoutFn(o),n.apply(this,s)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,i)=>{const o=(a,s)=>a?i(a):r(s);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Te.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Te.EVENT:case Te.BINARY_EVENT:this.onevent(e);break;case Te.ACK:case Te.BINARY_ACK:this.onack(e);break;case Te.DISCONNECT:this.ondisconnect();break;case Te.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Te.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function hl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}hl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};hl.prototype.reset=function(){this.attempts=0};hl.prototype.setMin=function(t){this.ms=t};hl.prototype.setMax=function(t){this.max=t};hl.prototype.setJitter=function(t){this.jitter=t};class J0 extends kt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new hl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||V4;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new N4(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Pr(n,"open",function(){r.onopen(),e&&e()}),o=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),e?e(s):this.maybeReconnectOnOpen()},a=Pr(n,"error",o);if(this._timeout!==!1){const s=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Pr(e,"ping",this.onping.bind(this)),Pr(e,"data",this.ondata.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this)),Pr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Xm(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new wI(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $l={};function _h(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=D4(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,a=$l[i]&&o in $l[i].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return s?c=new J0(r,e):($l[i]||($l[i]=new J0(r,e)),c=$l[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(_h,{Manager:J0,Socket:wI,io:_h,connect:_h});function px(){const t=M.useRef(null),[e,n]=M.useState(!1),[r,i]=M.useState(null);return M.useEffect(()=>{const s="/aiastore";t.current=_h(s,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5});const c=t.current;return c.on("connect",()=>{console.log(" WebSocket connected"),n(!0)}),c.on("disconnect",()=>{console.log(" WebSocket disconnected"),n(!1)}),c.on("connect_error",l=>{console.error("WebSocket connection error:",l),n(!1)}),()=>{c.disconnect()}},[]),{isConnected:e,lastMessage:r,subscribe:(s,c)=>{if(t.current)return t.current.on(s,l=>{i({event:s,data:l,timestamp:new Date}),c(l)}),()=>{var l;(l=t.current)==null||l.off(s,c)}},emit:(s,c)=>{t.current&&t.current.emit(s,c)}}}function mx(t){const{subscribe:e}=px();M.useEffect(()=>{const n=e("alert:new",t),r=e("alert:acknowledged",t),i=e("alert:resolved",t);return()=>{n==null||n(),r==null||r(),i==null||i()}},[t,e])}function SI(t){const{subscribe:e}=px();M.useEffect(()=>{const n=e("kpi:updated",t);return()=>n==null?void 0:n()},[t,e])}function xI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=xI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _e(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=xI(t))&&(r&&(r+=" "),r+=e);return r}const gx="-",K4=t=>{const e=Y4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const s=a.split(gx);return s[0]===""&&s.length!==1&&s.shift(),kI(s,e)||G4(a)},getConflictingClassGroupIds:(a,s)=>{const c=n[a]||[];return s&&r[a]?[...c,...r[a]]:c}}},kI=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?kI(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(gx);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},UC=/^\[(.+)\]$/,G4=t=>{if(UC.test(t)){const e=UC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Y4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Q4(Object.entries(t.classGroups),n).forEach(([o,a])=>{Z0(a,r,o,e)}),r},Z0=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:BC(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(X4(i)){Z0(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,a])=>{Z0(a,BC(e,o),n,r)})})},BC=(t,e)=>{let n=t;return e.split(gx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},X4=t=>t.isThemeGetter,Q4=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[n,i]}):t,J4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){n.has(o)?n.set(o,a):i(o,a)}}},TI="!",Z4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,a=s=>{const c=[];let l=0,u=0,d;for(let g=0;g<s.length;g++){let v=s[g];if(l===0){if(v===i&&(r||s.slice(g,g+o)===e)){c.push(s.slice(u,g)),u=g+o;continue}if(v==="/"){d=g;continue}}v==="["?l++:v==="]"&&l--}const f=c.length===0?s:s.substring(u),h=f.startsWith(TI),m=h?f.substring(1):f,p=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}};return n?s=>n({className:s,parseClassName:a}):a},e5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},t5=t=>({cache:J4(t.cacheSize),parseClassName:Z4(t),...K4(t)}),n5=/\s+/,r5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(n5);let s="";for(let c=a.length-1;c>=0;c-=1){const l=a[c],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(l);let m=!!h,p=r(m?f.substring(0,h):f);if(!p){if(!m){s=l+(s.length>0?" "+s:s);continue}if(p=r(f),!p){s=l+(s.length>0?" "+s:s);continue}m=!1}const g=e5(u).join(":"),v=d?g+TI:g,y=v+p;if(o.includes(y))continue;o.push(y);const w=i(p,m);for(let S=0;S<w.length;++S){const b=w[S];o.push(v+b)}s=l+(s.length>0?" "+s:s)}return s};function i5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CI(e))&&(r&&(r+=" "),r+=n);return r}const CI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CI(t[r]))&&(n&&(n+=" "),n+=e);return n};function o5(t,...e){let n,r,i,o=a;function a(c){const l=e.reduce((u,d)=>d(u),t());return n=t5(l),r=n.cache.get,i=n.cache.set,o=s,s(c)}function s(c){const l=r(c);if(l)return l;const u=r5(c,n);return i(c,u),u}return function(){return o(i5.apply(null,arguments))}}const Ge=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_I=/^\[(?:([a-z-]+):)?(.+)\]$/i,a5=/^\d+\/\d+$/,s5=new Set(["px","full","screen"]),c5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,d5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vi=t=>Zs(t)||s5.has(t)||a5.test(t),oo=t=>pl(t,"length",w5),Zs=t=>!!t&&!Number.isNaN(Number(t)),Iv=t=>pl(t,"number",Zs),Fl=t=>!!t&&Number.isInteger(Number(t)),h5=t=>t.endsWith("%")&&Zs(t.slice(0,-1)),fe=t=>_I.test(t),ao=t=>c5.test(t),p5=new Set(["length","size","percentage"]),m5=t=>pl(t,p5,EI),g5=t=>pl(t,"position",EI),v5=new Set(["image","url"]),y5=t=>pl(t,v5,x5),b5=t=>pl(t,"",S5),Ul=()=>!0,pl=(t,e,n)=>{const r=_I.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},w5=t=>l5.test(t)&&!u5.test(t),EI=()=>!1,S5=t=>d5.test(t),x5=t=>f5.test(t),k5=()=>{const t=Ge("colors"),e=Ge("spacing"),n=Ge("blur"),r=Ge("brightness"),i=Ge("borderColor"),o=Ge("borderRadius"),a=Ge("borderSpacing"),s=Ge("borderWidth"),c=Ge("contrast"),l=Ge("grayscale"),u=Ge("hueRotate"),d=Ge("invert"),f=Ge("gap"),h=Ge("gradientColorStops"),m=Ge("gradientColorStopPositions"),p=Ge("inset"),g=Ge("margin"),v=Ge("opacity"),y=Ge("padding"),w=Ge("saturate"),S=Ge("scale"),b=Ge("sepia"),x=Ge("skew"),T=Ge("space"),C=Ge("translate"),_=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",fe,e],P=()=>[fe,e],L=()=>["",vi,oo],j=()=>["auto",Zs,fe],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",fe],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Zs,fe];return{cacheSize:500,separator:":",theme:{colors:[Ul],spacing:[vi,oo],blur:["none","",ao,fe],brightness:X(),borderColor:[t],borderRadius:["none","","full",ao,fe],borderSpacing:P(),borderWidth:L(),contrast:X(),grayscale:B(),hueRotate:X(),invert:B(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[h5,oo],inset:A(),margin:A(),opacity:X(),padding:P(),saturate:X(),scale:X(),sepia:B(),skew:X(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[ao]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),fe]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fl,fe]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Fl,fe]}],"grid-cols":[{"grid-cols":[Ul]}],"col-start-end":[{col:["auto",{span:["full",Fl,fe]},fe]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Ul]}],"row-start-end":[{row:["auto",{span:[Fl,fe]},fe]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[ao]},ao]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ao,oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Iv]}],"font-family":[{font:[Ul]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Zs,Iv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vi,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vi,oo]}],"underline-offset":[{"underline-offset":["auto",vi,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),g5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",m5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},y5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[vi,fe]}],"outline-w":[{outline:[vi,oo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[vi,oo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ao,b5]}],"shadow-color":[{shadow:[Ul]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ao,fe]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Fl,fe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[vi,oo,Iv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},T5=o5(k5);function Wt(...t){return T5(_e(t))}function C5(t,e=1){return`${t>=0?"+":""}${t.toFixed(e)}%`}function _5(t){return{0:"Green - Monitoring",1:"Yellow - Task Created",2:"Red - Alert Active",3:"Critical - AI Call Initiated",4:"Regional Escalation"}[t]||`Level ${t}`}function E5(t){return{green:"",yellow:"",red:"",critical:""}[t]||""}var zC={};function P5(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var O5=Object.defineProperty,A5=(t,e,n)=>e in t?O5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qC=(t,e,n)=>A5(t,typeof e!="symbol"?e+"":e,n);let pn=class{constructor(){qC(this,"_locking"),qC(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}};function ut(t,e){if(!t)throw new Error(e)}const R5=34028234663852886e22,M5=-34028234663852886e22,I5=4294967295,N5=2147483647,D5=-2147483648;function Eh(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>N5||t<D5)throw new Error("invalid int 32: "+t)}function eb(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>I5||t<0)throw new Error("invalid uint 32: "+t)}function PI(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>R5||t<M5))throw new Error("invalid float 32: "+t)}const OI=Symbol("@bufbuild/protobuf/enum-type");function j5(t){const e=t[OI];return ut(e,"missing enum type on enum object"),e}function AI(t,e,n,r){t[OI]=RI(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function RI(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const a of e){const s=MI(a);o.push(s),r[a.name]=s,i[a.no]=s}return{typeName:t,values:o,findName(a){return r[a]},findNumber(a){return i[a]}}}function L5(t,e,n){const r={};for(const i of e){const o=MI(i);r[o.localName]=o.no,r[o.no]=o.localName}return AI(r,t,e),r}function MI(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class vx{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function $5(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),a={[o]:function(s){t.util.initFields(this),t.util.initPartial(s,this)}}[o];return Object.setPrototypeOf(a.prototype,new vx),Object.assign(a,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(s,c){return new a().fromBinary(s,c)},fromJson(s,c){return new a().fromJson(s,c)},fromJsonString(s,c){return new a().fromJsonString(s,c)},equals(s,c){return t.util.equals(a,s,c)}}),a}function F5(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Nv(t,e,n){for(let o=0;o<28;o=o+7){const a=t>>>o,s=!(!(a>>>7)&&e==0),c=(s?a|128:a)&255;if(n.push(c),!s)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const a=e>>>o,s=!!(a>>>7),c=(s?a|128:a)&255;if(n.push(c),!s)return}n.push(e>>>31&1)}}const Ph=4294967296;function WC(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(a,s){const c=Number(t.slice(a,s));i*=n,r=r*n+c,r>=Ph&&(i=i+(r/Ph|0),r=r%Ph)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?NI(r,i):yx(r,i)}function U5(t,e){let n=yx(t,e);const r=n.hi&2147483648;r&&(n=NI(n.lo,n.hi));const i=II(n.lo,n.hi);return r?"-"+i:i}function II(t,e){if({lo:t,hi:e}=B5(t,e),e<=2097151)return String(Ph*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,a=r+i*8147497,s=i*2;const c=1e7;return o>=c&&(a+=Math.floor(o/c),o%=c),a>=c&&(s+=Math.floor(a/c),a%=c),s.toString()+VC(a)+VC(o)}function B5(t,e){return{lo:t>>>0,hi:e>>>0}}function yx(t,e){return{lo:t|0,hi:e|0}}function NI(t,e){return e=~e,t?t=~t+1:e+=1,yx(t,e)}const VC=t=>{const e=String(t);return"0000000".slice(e.length)+e};function HC(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function z5(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function q5(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof zC!="object"||zC.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),a=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<a)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>ut(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>ut(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),WC(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),WC(i)},dec(i,o){return U5(i,o)},uDec(i,o){return II(i,o)}}}const et=q5();var H;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(H||(H={}));var Zo;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Zo||(Zo={}));function so(t,e,n){if(e===n)return!0;if(t==H.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case H.UINT64:case H.FIXED64:case H.INT64:case H.SFIXED64:case H.SINT64:return e==n}return!1}function Ic(t,e){switch(t){case H.BOOL:return!1;case H.UINT64:case H.FIXED64:case H.INT64:case H.SFIXED64:case H.SINT64:return e==0?et.zero:"0";case H.DOUBLE:case H.FLOAT:return 0;case H.BYTES:return new Uint8Array(0);case H.STRING:return"";default:return 0}}function DI(t,e){switch(t){case H.BOOL:return e===!1;case H.STRING:return e==="";case H.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var pt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(pt||(pt={}));class W5{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(eb(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Eh(e),HC(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){PI(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){eb(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Eh(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Eh(e),e=(e<<1^e>>31)>>>0,HC(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=et.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=et.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=et.enc(e);return Nv(n.lo,n.hi,this.buf),this}sint64(e){let n=et.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return Nv(i,o,this.buf),this}uint64(e){let n=et.uEnc(e);return Nv(n.lo,n.hi,this.buf),this}}class V5{constructor(e,n){this.varint64=F5,this.uint32=z5,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case pt.Varint:for(;this.buf[this.pos++]&128;);break;case pt.Bit64:this.pos+=4;case pt.Bit32:this.pos+=4;break;case pt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case pt.StartGroup:for(;;){const[o,a]=this.tag();if(a===pt.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(a,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return et.dec(...this.varint64())}uint64(){return et.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,et.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return et.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return et.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function H5(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const o=typeof r=="function"?r():r;o.name=e.split(".").pop(),o.jsonName="[".concat(e,"]"),i=t.util.newFieldList([o]).list()[0]}return i},runtime:t}}function jI(t){const e=t.field.localName,n=Object.create(null);return n[e]=K5(t),[n,()=>n[e]]}function K5(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Ic(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function G5(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Jm=[];for(let t=0;t<Pi.length;t++)Jm[Pi[t].charCodeAt(0)]=t;Jm[45]=Pi.indexOf("+");Jm[95]=Pi.indexOf("/");const LI={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,a=0;for(let s=0;s<t.length;s++){if(o=Jm[t.charCodeAt(s)],o===void 0)switch(t[s]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=o,i=1;break;case 1:n[r++]=a<<2|(o&48)>>4,a=o,i=2;break;case 2:n[r++]=(a&15)<<4|(o&60)>>2,a=o,i=3;break;case 3:n[r++]=(a&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=Pi[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Pi[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Pi[i|r>>6],e+=Pi[r&63],n=0;break}return n&&(e+=Pi[i],e+="=",n==1&&(e+="=")),e}};function Y5(t,e,n){FI(e,t);const r=e.runtime.bin.makeReadOptions(n),i=G5(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,a]=jI(e);for(const s of i)e.runtime.bin.readField(o,r.readerFactory(s.data),e.field,s.wireType,r);return a()}function X5(t,e,n,r){FI(e,t);const i=e.runtime.bin.makeReadOptions(r),o=e.runtime.bin.makeWriteOptions(r);if($I(t,e)){const l=t.getType().runtime.bin.listUnknownFields(t).filter(u=>u.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const u of l)t.getType().runtime.bin.onUnknownField(t,u.no,u.wireType,u.data)}const a=o.writerFactory();let s=e.field;!s.opt&&!s.repeated&&(s.kind=="enum"||s.kind=="scalar")&&(s=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(s,n,a,o);const c=i.readerFactory(a.finish());for(;c.pos<c.len;){const[l,u]=c.tag(),d=c.skip(u,l);t.getType().runtime.bin.onUnknownField(t,l,u,d)}}function $I(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function FI(t,e){ut(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function UI(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!DI(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function KC(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Ic(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Oi(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(vx.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function BI(t,e){return Oi(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}H.DOUBLE,H.FLOAT,H.INT64,H.UINT64,H.INT32,H.UINT32,H.BOOL,H.STRING,H.BYTES;const GC={ignoreUnknownFields:!1},YC={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Q5(t){return t?Object.assign(Object.assign({},GC),t):GC}function J5(t){return t?Object.assign(Object.assign({},YC),t):YC}const vp=Symbol(),Oh=Symbol();function Z5(){return{makeReadOptions:Q5,makeWriteOptions:J5,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Jr(e)));r=r??new t;const i=new Map,o=n.typeRegistry;for(const[a,s]of Object.entries(e)){const c=t.fields.findJsonName(a);if(c){if(c.oneof){if(s===null&&c.kind=="scalar")continue;const l=i.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(a,'"'));i.set(c.oneof,a)}XC(r,s,c,n,t)}else{let l=!1;if(o!=null&&o.findExtension&&a.startsWith("[")&&a.endsWith("]")){const u=o.findExtension(a.substring(1,a.length-1));if(u&&u.extendee.typeName==t.typeName){l=!0;const[d,f]=jI(u);XC(d,s,u.field,n,u),X5(r,u,f(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!UI(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!t6(i))continue}const a=i.oneof?t[i.oneof.localName].value:t[i.localName],s=QC(i,a,e);s!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=s)}const o=e.typeRegistry;if(o!=null&&o.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(t)){const s=o.findExtensionFor(n.typeName,a.no);if(s&&$I(t,s)){const c=Y5(t,s,e),l=QC(s.field,c,e);l!==void 0&&(r[s.field.jsonName]=l)}}}catch(o){const a=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),s=o instanceof Error?o.message:String(o);throw new Error(a+(s.length>0?": ".concat(s):""))}return r},readScalar(t,e,n){return Cu(t,e,n??Zo.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||DI(t,e)))return Ah(t,e)},debug:Jr}}function Jr(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function XC(t,e,n,r,i){let o=n.localName;if(n.repeated){if(ut(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(e)));const a=t[o];for(const s of e){if(s===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(s)));switch(n.kind){case"message":a.push(n.T.fromJson(s,r));break;case"enum":const c=Dv(n.T,s,r.ignoreUnknownFields,!0);c!==Oh&&a.push(c);break;case"scalar":try{a.push(Cu(n.T,s,n.L,!0))}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(s));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(e)));const a=t[o];for(const[s,c]of Object.entries(e)){if(c===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=e6(n.K,s)}catch(u){let d="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(e));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":a[l]=n.V.T.fromJson(c,r);break;case"enum":const u=Dv(n.V.T,c,r.ignoreUnknownFields,!0);u!==Oh&&(a[l]=u);break;case"scalar":try{a[l]=Cu(n.V.T,c,Zo.BIGINT,!0)}catch(d){let f="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const a=n.T;if(e===null&&a.typeName!="google.protobuf.Value")return;let s=t[o];Oi(s)?s.fromJson(e,r):(t[o]=s=a.fromJson(e,r),a.fieldWrapper&&!n.oneof&&(t[o]=a.fieldWrapper.unwrapField(s)));break;case"enum":const c=Dv(n.T,e,r.ignoreUnknownFields,!1);switch(c){case vp:KC(n,t);break;case Oh:break;default:t[o]=c;break}break;case"scalar":try{const l=Cu(n.T,e,n.L,!1);switch(l){case vp:KC(n,t);break;default:t[o]=l;break}}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Jr(e));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}function e6(t,e){if(t===H.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Cu(t,e,Zo.BIGINT,!0).toString()}function Cu(t,e,n,r){if(e===null)return r?Ic(t,n):vp;switch(t){case H.DOUBLE:case H.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==H.FLOAT&&PI(i),i;case H.INT32:case H.FIXED32:case H.SFIXED32:case H.SINT32:case H.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==H.UINT32||t==H.FIXED32?eb(o):Eh(o),o;case H.INT64:case H.SFIXED64:case H.SINT64:if(typeof e!="number"&&typeof e!="string")break;const a=et.parse(e);return n?a.toString():a;case H.FIXED64:case H.UINT64:if(typeof e!="number"&&typeof e!="string")break;const s=et.uParse(e);return n?s.toString():s;case H.BOOL:if(typeof e!="boolean")break;return e;case H.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case H.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return LI.dec(e)}throw new Error}function Dv(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:vp;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return Oh;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Jr(e)))}function t6(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function QC(t,e,n){if(t.kind=="map"){ut(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[a,s]of i)r[a.toString()]=Ah(t.V.T,s);break;case"message":for(const[a,s]of i)r[a.toString()]=s.toJson(n);break;case"enum":const o=t.V.T;for(const[a,s]of i)r[a.toString()]=jv(o,s,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){ut(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Ah(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(jv(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return Ah(t.T,e);case"enum":return jv(t.T,e,n.enumAsInteger);case"message":return BI(t.T,e).toJson(n)}}function jv(t,e,n){var r;if(ut(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Ah(t,e){switch(t){case H.INT32:case H.SFIXED32:case H.SINT32:case H.FIXED32:case H.UINT32:return ut(typeof e=="number"),e;case H.FLOAT:case H.DOUBLE:return ut(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case H.STRING:return ut(typeof e=="string"),e;case H.BOOL:return ut(typeof e=="boolean"),e;case H.UINT64:case H.FIXED64:case H.INT64:case H.SFIXED64:case H.SINT64:return ut(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case H.BYTES:return ut(e instanceof Uint8Array),LI.enc(e)}}const Ss=Symbol("@bufbuild/protobuf/unknown-fields"),JC={readUnknownFields:!0,readerFactory:t=>new V5(t)},ZC={writeUnknownFields:!0,writerFactory:()=>new W5};function n6(t){return t?Object.assign(Object.assign({},JC),t):JC}function r6(t){return t?Object.assign(Object.assign({},ZC),t):ZC}function i6(){return{makeReadOptions:n6,makeWriteOptions:r6,listUnknownFields(t){var e;return(e=t[Ss])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Ss]},writeUnknownFields(t,e){const r=t[Ss];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Ss])||(i[Ss]=[]),i[Ss].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const o=t.getType(),a=i?e.len:e.pos+n;let s,c;for(;e.pos<a&&([s,c]=e.tag(),!(i===!0&&c==pt.EndGroup));){const l=o.fields.find(s);if(!l){const u=e.skip(c,s);r.readUnknownFields&&this.onUnknownField(t,s,c,u);continue}e1(t,e,l,c,r)}if(i&&(c!=pt.EndGroup||s!==n))throw new Error("invalid end group tag")},readField:e1,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!UI(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName];t1(i,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&t1(t,e,n,r)}}}function e1(t,e,n,r,i){let{repeated:o,localName:a}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=a&&delete t.value,t.case=a,a="value"),n.kind){case"scalar":case"enum":const s=n.kind=="enum"?H.INT32:n.T;let c=yp;if(n.kind=="scalar"&&n.L>0&&(c=a6),o){let f=t[a];if(r==pt.LengthDelimited&&s!=H.STRING&&s!=H.BYTES){let m=e.uint32()+e.pos;for(;e.pos<m;)f.push(c(e,s))}else f.push(c(e,s))}else t[a]=c(e,s);break;case"message":const l=n.T;o?t[a].push(Rh(e,new l,i,n)):Oi(t[a])?Rh(e,t[a],i,n):(t[a]=Rh(e,new l,i,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(t[a]=l.fieldWrapper.unwrapField(t[a])));break;case"map":let[u,d]=o6(n,e,i);t[a][u]=d;break}}function Rh(t,e,n,r){const i=e.getType().runtime.bin,o=r==null?void 0:r.delimited;return i.readMessage(e,t,o?r.no:t.uint32(),n,o),e}function o6(t,e,n){const r=e.uint32(),i=e.pos+r;let o,a;for(;e.pos<i;){const[s]=e.tag();switch(s){case 1:o=yp(e,t.K);break;case 2:switch(t.V.kind){case"scalar":a=yp(e,t.V.T);break;case"enum":a=e.int32();break;case"message":a=Rh(e,new t.V.T,n,void 0);break}break}}if(o===void 0&&(o=Ic(t.K,Zo.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),a===void 0)switch(t.V.kind){case"scalar":a=Ic(t.V.T,Zo.BIGINT);break;case"enum":a=t.V.T.values[0].no;break;case"message":a=new t.V.T;break}return[o,a]}function a6(t,e){const n=yp(t,e);return typeof n=="bigint"?n.toString():n}function yp(t,e){switch(e){case H.STRING:return t.string();case H.BOOL:return t.bool();case H.DOUBLE:return t.double();case H.FLOAT:return t.float();case H.INT32:return t.int32();case H.INT64:return t.int64();case H.UINT64:return t.uint64();case H.FIXED64:return t.fixed64();case H.BYTES:return t.bytes();case H.FIXED32:return t.fixed32();case H.SFIXED32:return t.sfixed32();case H.SFIXED64:return t.sfixed64();case H.SINT64:return t.sint64();case H.UINT32:return t.uint32();case H.SINT32:return t.sint32()}}function t1(t,e,n,r){ut(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?H.INT32:t.T;if(i)if(ut(Array.isArray(e)),t.packed)c6(n,o,t.no,e);else for(const a of e)_u(n,o,t.no,a);else _u(n,o,t.no,e);break;case"message":if(i){ut(Array.isArray(e));for(const a of e)n1(n,r,t,a)}else n1(n,r,t,e);break;case"map":ut(typeof e=="object"&&e!=null);for(const[a,s]of Object.entries(e))s6(n,r,t,a,s);break}}function s6(t,e,n,r,i){t.tag(n.no,pt.LengthDelimited),t.fork();let o=r;switch(n.K){case H.INT32:case H.FIXED32:case H.UINT32:case H.SFIXED32:case H.SINT32:o=Number.parseInt(r);break;case H.BOOL:ut(r=="true"||r=="false"),o=r=="true";break}switch(_u(t,n.K,1,o),n.V.kind){case"scalar":_u(t,n.V.T,2,i);break;case"enum":_u(t,H.INT32,2,i);break;case"message":ut(i!==void 0),t.tag(2,pt.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function n1(t,e,n,r){const i=BI(n.T,r);n.delimited?t.tag(n.no,pt.StartGroup).raw(i.toBinary(e)).tag(n.no,pt.EndGroup):t.tag(n.no,pt.LengthDelimited).bytes(i.toBinary(e))}function _u(t,e,n,r){ut(r!==void 0);let[i,o]=zI(e);t.tag(n,i)[o](r)}function c6(t,e,n,r){if(!r.length)return;t.tag(n,pt.LengthDelimited).fork();let[,i]=zI(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function zI(t){let e=pt.Varint;switch(t){case H.BYTES:case H.STRING:e=pt.LengthDelimited;break;case H.DOUBLE:case H.FIXED64:case H.SFIXED64:e=pt.Bit64;break;case H.FIXED32:case H.SFIXED32:case H.FLOAT:e=pt.Bit32;break}const n=H[t].toLowerCase();return[e,n]}function l6(){return{setEnumType:AI,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,a=t;if(a[i]!=null)switch(r.kind){case"oneof":const s=a[i].case;if(s===void 0)continue;const c=r.findField(s);let l=a[i].value;c&&c.kind=="message"&&!Oi(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===H.BYTES&&(l=Bl(l)),o[i]={case:s,value:l};break;case"scalar":case"enum":let u=a[i];r.T===H.BYTES&&(u=r.repeated?u.map(Bl):Bl(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===H.BYTES)for(const[h,m]of Object.entries(a[i]))o[i][h]=Bl(m);else Object.assign(o[i],a[i]);break;case"message":const f=r.V.T;for(const h of Object.keys(a[i])){let m=a[i][h];f.fieldWrapper||(m=new f(m)),o[i][h]=m}break}break;case"message":const d=r.T;if(r.repeated)o[i]=a[i].map(f=>Oi(f,d)?f:new d(f));else{const f=a[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=Bl(f):o[i]=f:o[i]=Oi(f,d)?f:new d(f)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((a,s)=>r.T.equals(a,o[s]));case"scalar":return i.every((a,s)=>so(r.T,a,o[s]));case"enum":return i.every((a,s)=>so(H.INT32,a,o[s]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let a=i,s=o;return r.T.fieldWrapper&&(a!==void 0&&!Oi(a)&&(a=r.T.fieldWrapper.wrapField(a)),s!==void 0&&!Oi(s)&&(s=r.T.fieldWrapper.wrapField(s))),r.T.equals(a,s);case"enum":return so(H.INT32,i,o);case"scalar":return so(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const c=r.findField(i.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(i.value,o.value);case"enum":return so(H.INT32,i.value,o.value);case"scalar":return so(c.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const l=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const u=r.V.T;return l.every(f=>u.equals(i[f],o[f]));case"enum":return l.every(f=>so(H.INT32,i[f],o[f]));case"scalar":const d=r.V.T;return l.every(f=>so(d,i[f],o[f]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let a;if(i.repeated)a=o.map(Wf);else if(i.kind=="map"){a=r[i.localName];for(const[s,c]of Object.entries(o))a[s]=Wf(c)}else i.kind=="oneof"?a=i.findField(o.case)?{case:o.case,value:Wf(o.value)}:{case:void 0}:a=Wf(o);r[i.localName]=a}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Wf(t){if(t===void 0)return t;if(Oi(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Bl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function u6(t,e,n){return{syntax:t,json:Z5(),bin:i6(),util:Object.assign(Object.assign({},l6()),{newFieldList:e,initFields:n}),makeMessageType(r,i,o){return $5(this,r,i,o)},makeEnum:L5,makeEnumType:RI,getEnumType:j5,makeExtension(r,i,o){return H5(this,r,i,o)}}}class d6{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function qI(t,e){const n=WI(t);return e?n:v6(g6(n))}function f6(t){return qI(t,!1)}const h6=WI;function WI(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const p6=new Set(["constructor","toString","toJSON","valueOf"]),m6=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),VI=t=>"".concat(t,"$"),g6=t=>m6.has(t)?VI(t):t,v6=t=>p6.has(t)?VI(t):t;class y6{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=f6(e)}addField(e){ut(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function b6(t,e){var n,r,i,o,a,s;const c=[];let l;for(const u of typeof t=="function"?t():t){const d=u;if(d.localName=qI(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:h6(u.name),d.repeated=(r=u.repeated)!==null&&r!==void 0?r:!1,u.kind=="scalar"&&(d.L=(i=u.L)!==null&&i!==void 0?i:Zo.BIGINT),d.delimited=(o=u.delimited)!==null&&o!==void 0?o:!1,d.req=(a=u.req)!==null&&a!==void 0?a:!1,d.opt=(s=u.opt)!==null&&s!==void 0?s:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=H.BYTES&&u.T!=H.STRING),u.oneof!==void 0){const f=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!l||l.name!=f)&&(l=new y6(f)),d.oneof=l,l.addField(d)}c.push(d)}return c}const D=u6("proto3",t=>new d6(t,e=>b6(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Ic(e.T,e.L);break}}});class kn extends vx{constructor(e){super(),this.seconds=et.zero,this.nanos=0,D.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(D.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=et.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return kn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new kn({seconds:et.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new kn().fromBinary(e,n)}static fromJson(e,n){return new kn().fromJson(e,n)}static fromJsonString(e,n){return new kn().fromJsonString(e,n)}static equals(e,n){return D.util.equals(kn,e,n)}}kn.runtime=D;kn.typeName="google.protobuf.Timestamp";kn.fields=D.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const w6=D.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:kn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:S6,repeated:!0},{no:5,name:"events",kind:"message",T:k6,repeated:!0}]),S6=D.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:x6,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),x6=D.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:kn},{no:3,name:"value",kind:"scalar",T:2}]),k6=D.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:kn},{no:7,name:"normalized_end_timestamp",kind:"message",T:kn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),HI=D.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Dr=D.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),St=D.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),bx=D.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),hu=D.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),nd=D.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Fr=D.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),ya=D.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),T6=D.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),$t=D.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Zm=D.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:bp,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:oN}]),bp=D.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),C6=D.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:D.getEnumType(St),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ns=D.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:D.getEnumType(ec)},{no:4,name:"tracks",kind:"message",T:Bs,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:C6},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:D.getEnumType(rd)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:D.getEnumType(Fr)},{no:18,name:"kind_details",kind:"enum",T:D.getEnumType(_6),repeated:!0}]),ec=D.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),rd=D.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),_6=D.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Rt=D.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),E6=D.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Vo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:D.getEnumType(KI)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),Bs=D.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:D.getEnumType(Dr)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:D.getEnumType(St)},{no:10,name:"layers",kind:"message",T:Vo,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:E6,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:D.getEnumType(Rt)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:oN},{no:19,name:"audio_features",kind:"enum",T:D.getEnumType($t),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:D.getEnumType(HI)}]),Vo=D.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:D.getEnumType(bx)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),KI=D.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),dn=D.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:D.getEnumType(ye)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:wx,oneof:"value"},{no:3,name:"speaker",kind:"message",T:P6,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:QI,oneof:"value"},{no:7,name:"transcription",kind:"message",T:O6,oneof:"value"},{no:8,name:"metrics",kind:"message",T:w6,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:wp,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Sx,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:xx,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:kx,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Sp,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:xp,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:kp,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:GI,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),ye=D.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),GI=D.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:D.getEnumType(Rt)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),YI=D.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:wx,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:wp,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Sx,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:xx,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:kx,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Sp,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:xp,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:kp,oneof:"value"}]),P6=D.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:XI,repeated:!0}]),XI=D.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),wx=D.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),QI=D.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),O6=D.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:A6,repeated:!0}]),A6=D.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),wp=D.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Sx=D.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),xx=D.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),kx=D.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:JI,oneof:"value"}]),JI=D.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),ZI=D.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),eN=D.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:D.getEnumType(tN)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),tN=D.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),nN=D.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:D.getEnumType(rN)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),rN=D.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),iN=D.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:r1},{no:2,name:"screen",kind:"message",T:r1},{no:3,name:"resume_connection",kind:"enum",T:D.getEnumType(nd)},{no:4,name:"disabled_codecs",kind:"message",T:R6},{no:5,name:"force_relay",kind:"enum",T:D.getEnumType(nd)}]),r1=D.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:D.getEnumType(nd)}]),R6=D.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:bp,repeated:!0},{no:2,name:"publish",kind:"message",T:bp,repeated:!0}]),oN=D.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),tb=D.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),aN=D.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:D.getEnumType(tb)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),sN=D.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Sp=D.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:D.getEnumType(Rt)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:aN,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:sN,oneof:"content_header"}],{localName:"DataStream_Header"}),xp=D.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),kp=D.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),M6=D.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),jr=D.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),nb=D.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),I6=D.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),N6=D.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:ea,oneof:"message"},{no:2,name:"answer",kind:"message",T:ea,oneof:"message"},{no:3,name:"trickle",kind:"message",T:eg,oneof:"message"},{no:4,name:"add_track",kind:"message",T:id,oneof:"message"},{no:5,name:"mute",kind:"message",T:tg,oneof:"message"},{no:6,name:"subscription",kind:"message",T:ng,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:cN,oneof:"message"},{no:8,name:"leave",kind:"message",T:rg,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:uN,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:hN,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Px,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Xr,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:_x,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:gN,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Cx,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:lN,oneof:"message"}]),i1=D.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:D6,oneof:"message"},{no:2,name:"answer",kind:"message",T:ea,oneof:"message"},{no:3,name:"offer",kind:"message",T:ea,oneof:"message"},{no:4,name:"trickle",kind:"message",T:eg,oneof:"message"},{no:5,name:"update",kind:"message",T:$6,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Tx,oneof:"message"},{no:8,name:"leave",kind:"message",T:rg,oneof:"message"},{no:9,name:"mute",kind:"message",T:tg,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:F6,oneof:"message"},{no:11,name:"room_update",kind:"message",T:U6,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:z6,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:W6,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:H6,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:G6,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:L6,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:j6,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:X6,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Z6,oneof:"message"},{no:22,name:"request_response",kind:"message",T:e8,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:t8,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Y6,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:o8,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:K6,oneof:"message"}]),rb=D.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Vo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:D.getEnumType(KI)}]),id=D.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:D.getEnumType(Dr)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:D.getEnumType(St)},{no:9,name:"layers",kind:"message",T:Vo,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:rb,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:D.getEnumType(Rt)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:D.getEnumType(HI)},{no:17,name:"audio_features",kind:"enum",T:D.getEnumType($t),repeated:!0}]),eg=D.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:D.getEnumType(jr)},{no:3,name:"final",kind:"scalar",T:8}]),tg=D.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),D6=D.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Zm},{no:2,name:"participant",kind:"message",T:ns},{no:3,name:"other_participants",kind:"message",T:ns,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:dN,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:iN},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:eN},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:bp,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),j6=D.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:dN,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:iN},{no:3,name:"server_info",kind:"message",T:eN},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Tx=D.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Bs}]),L6=D.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ea=D.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),$6=D.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ns,repeated:!0}]),ng=D.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ZI,repeated:!0}]),cN=D.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:D.getEnumType(bx)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Cx=D.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:D.getEnumType($t),repeated:!0}]),lN=D.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),rg=D.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:D.getEnumType(Fr)},{no:3,name:"action",kind:"enum",T:D.getEnumType(tc)},{no:4,name:"regions",kind:"message",T:Q6}]),tc=D.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),uN=D.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Vo,repeated:!0}]),_x=D.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),dN=D.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),F6=D.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:XI,repeated:!0}]),U6=D.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Zm}]),B6=D.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:D.getEnumType(hu)},{no:3,name:"score",kind:"scalar",T:2}]),z6=D.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:B6,repeated:!0}]),q6=D.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:D.getEnumType(nb)}]),W6=D.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:q6,repeated:!0}]),Ex=D.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:D.getEnumType(bx)},{no:2,name:"enabled",kind:"scalar",T:8}]),V6=D.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Ex,repeated:!0}]),H6=D.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Ex,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:V6,repeated:!0}]),K6=D.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:M6,repeated:!0}]),fN=D.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),hN=D.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:fN,repeated:!0}]),G6=D.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Y6=D.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Zm},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:ns},{no:4,name:"other_participants",kind:"message",T:ns,repeated:!0}]),Px=D.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:ea},{no:2,name:"subscription",kind:"message",T:ng},{no:3,name:"publish_tracks",kind:"message",T:Tx,repeated:!0},{no:4,name:"data_channels",kind:"message",T:mN,repeated:!0},{no:5,name:"offer",kind:"message",T:ea},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:pN,repeated:!0}]),pN=D.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),mN=D.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:D.getEnumType(jr)}]),Xr=D.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:D.getEnumType(I6),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),gN=D.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),X6=D.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Q6=D.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:J6,repeated:!0}]),J6=D.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),Z6=D.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:D.getEnumType(T6)}]),e8=D.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:D.getEnumType(Ox)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:eg,oneof:"request"},{no:5,name:"add_track",kind:"message",T:id,oneof:"request"},{no:6,name:"mute",kind:"message",T:tg,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:_x,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:Cx,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:lN,oneof:"request"}]),Ox=D.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),t8=D.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),vN=D.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),n8=D.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:nN},{no:2,name:"connection_settings",kind:"message",T:vN},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:id,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:ea},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:D.getEnumType(ya)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Px}]),r8=D.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:D.getEnumType(i8)},{no:2,name:"join_request",kind:"scalar",T:12}]),i8=D.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),o8=D.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function a8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mh={exports:{}},s8=Mh.exports,o1;function c8(){return o1||(o1=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(s8,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},a=null;function s(p,g){var v=p[g];if(typeof v.bind=="function")return v.bind(p);try{return Function.prototype.bind.call(v,p)}catch{return function(){return Function.prototype.apply.apply(v,[p,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(p){return p==="debug"&&(p="log"),typeof console===n?!1:p==="trace"&&r?c:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):e}function u(){for(var p=this.getLevel(),g=0;g<i.length;g++){var v=i[g];this[v]=g<p?e:this.methodFactory(v,p,this.name)}if(this.log=this.debug,typeof console===n&&p<this.levels.SILENT)return"No console available for logging"}function d(p){return function(){typeof console!==n&&(u.call(this),this[p].apply(this,arguments))}}function f(p,g,v){return l(p)||d.apply(this,arguments)}function h(p,g){var v=this,y,w,S,b="loglevel";typeof p=="string"?b+=":"+p:typeof p=="symbol"&&(b=void 0);function x(A){var P=(i[A]||"silent").toUpperCase();if(!(typeof window===n||!b)){try{window.localStorage[b]=P;return}catch{}try{window.document.cookie=encodeURIComponent(b)+"="+P+";"}catch{}}}function T(){var A;if(!(typeof window===n||!b)){try{A=window.localStorage[b]}catch{}if(typeof A===n)try{var P=window.document.cookie,L=encodeURIComponent(b),j=P.indexOf(L+"=");j!==-1&&(A=/^([^;]+)/.exec(P.slice(j+L.length+1))[1])}catch{}return v.levels[A]===void 0&&(A=void 0),A}}function C(){if(!(typeof window===n||!b)){try{window.localStorage.removeItem(b)}catch{}try{window.document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(A){var P=A;if(typeof P=="string"&&v.levels[P.toUpperCase()]!==void 0&&(P=v.levels[P.toUpperCase()]),typeof P=="number"&&P>=0&&P<=v.levels.SILENT)return P;throw new TypeError("log.setLevel() called with invalid level: "+A)}v.name=p,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=g||f,v.getLevel=function(){return S??w??y},v.setLevel=function(A,P){return S=_(A),P!==!1&&x(S),u.call(v)},v.setDefaultLevel=function(A){w=_(A),T()||v.setLevel(A,!1)},v.resetLevel=function(){S=null,C(),u.call(v)},v.enableAll=function(A){v.setLevel(v.levels.TRACE,A)},v.disableAll=function(A){v.setLevel(v.levels.SILENT,A)},v.rebuild=function(){if(a!==v&&(y=_(a.getLevel())),u.call(v),a===v)for(var A in o)o[A].rebuild()},y=_(a?a.getLevel():"WARN");var E=T();E!=null&&(S=_(E)),u.call(v)}a=new h,a.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var v=o[g];return v||(v=o[g]=new h(g,a.methodFactory)),v};var m=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=m),a},a.getLoggers=function(){return o},a.default=a,a})}(Mh)),Mh.exports}var ig=c8(),ib;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(ib||(ib={}));var Vr;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Vr||(Vr={}));let he=ig.getLogger("livekit");Object.values(Vr).map(t=>ig.getLogger(t));he.setDefaultLevel(ib.info);function Ki(t){const e=ig.getLogger(t);return e.setDefaultLevel(he.getLevel()),e}const l8=ig.getLogger("lk-e2ee"),zl=7e3,u8=[0,300,2*2*300,3*3*300,4*4*300,zl,zl,zl,zl,zl];class d8{constructor(e){this._retryDelays=e!==void 0?[...e]:u8}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function f8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function O(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})}function a1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof a1=="function"?a1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,c){a=t[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var Vf={exports:{}},s1;function h8(){if(s1)return Vf.exports;s1=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(b,x,T){return Function.prototype.apply.call(b,x,T)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:n=function(b){return Object.getOwnPropertyNames(b)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(b){return b!==b};function o(){o.init.call(this)}Vf.exports=o,Vf.exports.once=v,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");a=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||i(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function c(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(b){for(var x=[],T=1;T<arguments.length;T++)x.push(arguments[T]);var C=b==="error",_=this._events;if(_!==void 0)C=C&&_.error===void 0;else if(!C)return!1;if(C){var E;if(x.length>0&&(E=x[0]),E instanceof Error)throw E;var A=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw A.context=E,A}var P=_[b];if(P===void 0)return!1;if(typeof P=="function")e(P,this,x);else for(var L=P.length,j=m(P,L),T=0;T<L;++T)e(j[T],this,x);return!0};function l(S,b,x,T){var C,_,E;if(s(x),_=S._events,_===void 0?(_=S._events=Object.create(null),S._eventsCount=0):(_.newListener!==void 0&&(S.emit("newListener",b,x.listener?x.listener:x),_=S._events),E=_[b]),E===void 0)E=_[b]=x,++S._eventsCount;else if(typeof E=="function"?E=_[b]=T?[x,E]:[E,x]:T?E.unshift(x):E.push(x),C=c(S),C>0&&E.length>C&&!E.warned){E.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=S,A.type=b,A.count=E.length,r(A)}return S}o.prototype.addListener=function(b,x){return l(this,b,x,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(b,x){return l(this,b,x,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,b,x){var T={fired:!1,wrapFn:void 0,target:S,type:b,listener:x},C=u.bind(T);return C.listener=x,T.wrapFn=C,C}o.prototype.once=function(b,x){return s(x),this.on(b,d(this,b,x)),this},o.prototype.prependOnceListener=function(b,x){return s(x),this.prependListener(b,d(this,b,x)),this},o.prototype.removeListener=function(b,x){var T,C,_,E,A;if(s(x),C=this._events,C===void 0)return this;if(T=C[b],T===void 0)return this;if(T===x||T.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete C[b],C.removeListener&&this.emit("removeListener",b,T.listener||x));else if(typeof T!="function"){for(_=-1,E=T.length-1;E>=0;E--)if(T[E]===x||T[E].listener===x){A=T[E].listener,_=E;break}if(_<0)return this;_===0?T.shift():p(T,_),T.length===1&&(C[b]=T[0]),C.removeListener!==void 0&&this.emit("removeListener",b,A||x)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(b){var x,T,C;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[b]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[b]),this;if(arguments.length===0){var _=Object.keys(T),E;for(C=0;C<_.length;++C)E=_[C],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=T[b],typeof x=="function")this.removeListener(b,x);else if(x!==void 0)for(C=x.length-1;C>=0;C--)this.removeListener(b,x[C]);return this};function f(S,b,x){var T=S._events;if(T===void 0)return[];var C=T[b];return C===void 0?[]:typeof C=="function"?x?[C.listener||C]:[C]:x?g(C):m(C,C.length)}o.prototype.listeners=function(b){return f(this,b,!0)},o.prototype.rawListeners=function(b){return f(this,b,!1)},o.listenerCount=function(S,b){return typeof S.listenerCount=="function"?S.listenerCount(b):h.call(S,b)},o.prototype.listenerCount=h;function h(S){var b=this._events;if(b!==void 0){var x=b[S];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(S,b){for(var x=new Array(b),T=0;T<b;++T)x[T]=S[T];return x}function p(S,b){for(;b+1<S.length;b++)S[b]=S[b+1];S.pop()}function g(S){for(var b=new Array(S.length),x=0;x<b.length;++x)b[x]=S[x].listener||S[x];return b}function v(S,b){return new Promise(function(x,T){function C(E){S.removeListener(b,_),T(E)}function _(){typeof S.removeListener=="function"&&S.removeListener("error",C),x([].slice.call(arguments))}w(S,b,_,{once:!0}),b!=="error"&&y(S,C,{once:!0})})}function y(S,b,x){typeof S.on=="function"&&w(S,"error",b,x)}function w(S,b,x,T){if(typeof S.on=="function")T.once?S.once(b,x):S.on(b,x);else if(typeof S.addEventListener=="function")S.addEventListener(b,function C(_){T.once&&S.removeEventListener(b,C),x(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Vf.exports}var pi=h8();let yN=!0,bN=!0;function pu(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function ps(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,s){if(a!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(s.handleEvent?s.handleEvent(u):s(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(s,c),i.apply(this,[a,c])};const o=r.removeEventListener;r.removeEventListener=function(a,s){if(a!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(s))return o.apply(this,arguments);const c=this._eventMap[e].get(s);return this._eventMap[e].delete(s),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function p8(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(yN=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function m8(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(bN=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function wN(){if(typeof window=="object"){if(yN)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ax(t,e){bN&&console.warn(t+" is deprecated, please use "+e+" instead.")}function g8(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(pu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(pu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(pu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=pu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function c1(t){return Object.prototype.toString.call(t)==="[object Object]"}function SN(t){return c1(t)?Object.keys(t).reduce(function(e,n){const r=c1(t[n]),i=r?SN(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function ob(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?ob(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{ob(t,t.get(i),n)})}))}function l1(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&o.push(a)}),o.forEach(a=>{t.forEach(s=>{s.type===r&&s.trackId===a.id&&ob(t,s,i)})}),i}const u1=wN;function xN(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const c={};return Object.keys(s).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof s[l]=="object"?s[l]:{ideal:s[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),s.advanced&&(c.optional=(c.optional||[]).concat(s.advanced)),c},i=function(s,c){if(e.version>=61)return c(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};s=JSON.parse(JSON.stringify(s)),l(s.audio,"autoGainControl","googAutoGainControl"),l(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=r(s.audio)}if(s&&typeof s.video=="object"){let l=s.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete s.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let h=f.find(m=>d.some(p=>m.label.toLowerCase().includes(p)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(s.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),s.video=r(s.video),u1("chrome: "+JSON.stringify(s)),c(s)})}s.video=r(s.video)}return u1("chrome: "+JSON.stringify(s)),c(s)},o=function(s){return e.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(s,c,l){i(s,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>s(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function kN(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function TN(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===i.track.id):o={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===i.id):o={track:i};const a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ps(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function CN(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,c){let l=i.apply(this,arguments);return l||(l=e(this,s),this._senders.push(l)),l};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){o.apply(this,arguments);const c=this._senders.indexOf(s);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{const s=this._senders.find(c=>c.track===a);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _N(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>l1(a,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),ps(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>l1(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,a;return this.getSenders().forEach(s=>{s.track===r&&(i?a=!0:i=s)}),this.getReceivers().forEach(s=>(s.track===r&&(o?a=!0:o=s),s.track===r)),a||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function EN(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(c)===-1&&this._shimmedLocalStreams[s.id].push(c):this._shimmedLocalStreams[s.id]=[s,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>s.indexOf(l)===-1);this._shimmedLocalStreams[a.id]=[a].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const c=this._shimmedLocalStreams[s].indexOf(a);c!==-1&&this._shimmedLocalStreams[s].splice(c,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),i.apply(this,arguments)}}function PN(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return EN(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(p=>p===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[d.id];if(m)m.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new t.MediaStream([u]);this._streams[d.id]=p,this._reverseStreams[p.id]=d,this.addStream(p)}return this.getSenders().find(p=>p.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],m=l._streams[h.id];d=d.replace(new RegExp(m.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function a(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],m=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[m=>{const p=o(this,m);f[0].apply(null,[p])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):u.apply(this,arguments).then(m=>o(this,m))}};t.RTCPeerConnection.prototype[l]=d[l]});const s=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=a(this,arguments[0]),s.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(p=>u.track===p)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ab(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function ON(t,e){ps(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var d1=Object.freeze({__proto__:null,fixNegotiationNeeded:ON,shimAddTrackRemoveTrack:PN,shimAddTrackRemoveTrackWithNative:EN,shimGetSendersWithDtmf:CN,shimGetUserMedia:xN,shimMediaStream:kN,shimOnTrack:TN,shimPeerConnection:ab,shimSenderReceiverGetStats:_N});function AN(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,a){Ax("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,a)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,s,c){s in a&&!(c in a)&&(a[c]=a[s],delete a[s])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const s=a.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function v8(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function RN(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function sb(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,a,s]=arguments;return r.apply(this,[o||null]).then(c=>{if(e.version<53&&!a)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(a,s)}}function MN(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function IN(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ps(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function NN(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Ax("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function DN(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function jN(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:a}=o,s=a.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(s).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function LN(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function $N(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function FN(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var f1=Object.freeze({__proto__:null,shimAddTransceiver:jN,shimCreateAnswer:FN,shimCreateOffer:$N,shimGetDisplayMedia:v8,shimGetParameters:LN,shimGetUserMedia:AN,shimOnTrack:RN,shimPeerConnection:sb,shimRTCDataChannel:DN,shimReceiverGetStats:IN,shimRemoveStream:NN,shimSenderGetStats:MN});function UN(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function BN(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,r.dispatchEvent(a)})}),e.apply(r,arguments)}}}function zN(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let s=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=s,s=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=s,s=function(c,l,u){const d=a.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=s}function qN(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(WN(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function WN(t){return t&&t.video!==void 0?Object.assign({},t,{video:SN(t.video)}):t}function VN(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let a=0;a<r.iceServers.length;a++){let s=r.iceServers[a];s.urls===void 0&&s.url?(Ax("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,o.push(s)):o.push(r.iceServers[a])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function HN(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function KN(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function GN(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var h1=Object.freeze({__proto__:null,shimAudioContext:GN,shimCallbacksAPI:zN,shimConstraints:WN,shimCreateOfferLegacy:KN,shimGetUserMedia:qN,shimLocalStreamsAPI:UN,shimRTCIceServerUrls:VN,shimRemoteStreamsAPI:BN,shimTrackEventTransceiver:HN}),Lv={exports:{}},p1;function y8(){return p1||(p1=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?o.push(a+"="+n.parameters[a]):o.push(a)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let s=3;s<o.length;s++){const c=o[s],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(s=>{r.headerExtensions.push(e.parseExtmap(s))});const a=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(s=>{a.forEach(c=>{s.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||s.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=e.writeRtpMap(a),i+=e.writeFmtp(a),i+=e.writeRtcpFb(a)});let o=0;return r.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=e.writeExtmap(a)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=s.length>0&&s[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),o&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const a=e.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const a=e.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const s=e.matchPrefix(n,"a=sctpmap:");if(s.length>0){const c=s[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const a=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e}(Lv)),Lv.exports}var YN=y8(),nc=a8(YN),b8=P5({__proto__:null,default:nc},[YN]);function Ih(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=nc.parseCandidate(r.candidate);for(const a in o)a in i||Object.defineProperty(i,a,{value:o[a]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,ps(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function cb(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||ps(t,"icecandidate",e=>{if(e.candidate){const n=nc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Nh(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(s){if(!s||!s.sdp)return!1;const c=nc.splitSections(s.sdp);return c.shift(),c.some(l=>{const u=nc.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(s){const c=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(s){let c=65536;return e.browser==="firefox"&&(e.version<57?s===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},o=function(s,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=nc.matchPrefix(s.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return a.apply(this,arguments)}}function Dh(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const s=arguments[0],c=s.length||s.size||s.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},ps(t,"datachannel",r=>(e(r.channel,r.target),r))}function lb(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function ub(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function jh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Lh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var w8=Object.freeze({__proto__:null,removeExtmapAllowMixed:ub,shimAddIceCandidateNullOrEmpty:jh,shimConnectionState:lb,shimMaxMessageSize:Nh,shimParameterlessSetLocalDescription:Lh,shimRTCIceCandidate:Ih,shimRTCIceCandidateRelayProtocol:cb,shimSendThrowTypeError:Dh});function S8(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=wN,r=g8(t),i={browserDetails:r,commonShim:w8,extractVersion:pu,disableLog:p8,disableWarnings:m8,sdp:b8};switch(r.browser){case"chrome":if(!d1||!ab||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=d1,jh(t,r),Lh(t),xN(t,r),kN(t),ab(t,r),TN(t),PN(t,r),CN(t),_N(t),ON(t,r),Ih(t),cb(t),lb(t),Nh(t,r),Dh(t),ub(t,r);break;case"firefox":if(!f1||!sb||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=f1,jh(t,r),Lh(t),AN(t,r),sb(t,r),RN(t),NN(t),MN(t),IN(t),DN(t),jN(t),LN(t),$N(t),FN(t),Ih(t),lb(t),Nh(t,r),Dh(t);break;case"safari":if(!h1||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=h1,jh(t,r),Lh(t),VN(t),KN(t),zN(t),UN(t),BN(t),HN(t),qN(t),GN(t),Ih(t),cb(t),Nh(t,r),Dh(t),ub(t,r);break;default:n("Unsupported browser!");break}return i}S8({window:typeof window>"u"?void 0:window});class Cn extends Promise{constructor(e){super(e)}catch(e){return super.catch(e)}static reject(e){return super.reject(e)}static all(e){return super.all(e)}static race(e){return super.race(e)}}const x8=/version\/(\d+(\.?_?\d+)+)/i;let $v;function Rn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if($v===void 0||e){const r=k8.find(i=>{let{test:o}=i;return o.test(n)});$v=r==null?void 0:r.describe(n)}return $v}const k8=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:$h(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Fv(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:$h(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Fv(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:$h(x8,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Fv(t)}}}];function $h(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function Fv(t){return t.includes("mac os")?$h(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var T8="2.17.0";const C8=T8,_8=16;class mi extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var ze;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout",t[t.WebSocket=6]="WebSocket",t[t.ServiceNotFound=7]="ServiceNotFound"})(ze||(ze={}));class ce extends mi{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=ze[n]}static notAllowed(e,n,r){return new ce(e,ze.NotAllowed,n,r)}static timeout(e){return new ce(e,ze.Timeout)}static leaveRequest(e,n){return new ce(e,ze.LeaveRequest,void 0,n)}static internal(e,n){return new ce(e,ze.InternalError,void 0,n)}static cancelled(e){return new ce(e,ze.Cancelled)}static serverUnreachable(e,n){return new ce(e,ze.ServerUnreachable,n)}static websocket(e,n,r){return new ce(e,ze.WebSocket,n,r)}static serviceNotFound(e,n){return new ce(e,ze.ServiceNotFound,void 0,n)}}class Rx extends mi{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ri extends mi{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class E8 extends mi{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class ft extends mi{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class rc extends mi{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class m1 extends mi{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class g1 extends mi{constructor(e,n){super(15,e),this.name="SignalRequestError",this.reason=n,this.reasonName=typeof n=="string"?n:Ox[n]}}var ln;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(ln||(ln={}));class nr extends mi{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=ln[n]}}class xs extends mi{constructor(e){super(18,e),this.name="SignalReconnectError"}}var Tp;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Tp||(Tp={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Tp||(Tp={}));class Vt{}Vt.setTimeout=function(){return setTimeout(...arguments)};Vt.setInterval=function(){return setInterval(...arguments)};Vt.clearTimeout=function(){return clearTimeout(...arguments)};Vt.clearInterval=function(){return clearInterval(...arguments)};var K;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(K||(K={}));var te;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(te||(te={}));var Z;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Z||(Z={}));var J;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(J||(J={}));function P8(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}class Ue{constructor(e,n,r,i,o){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const O8=["vp8","h264"],A8=["vp8","h264","vp9","av1","h265"];function R8(t){return!!O8.find(e=>e===t)}const M8=R8;var v1;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(v1||(v1={}));var db;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(db||(db={}));const od={h90:new Ue(160,90,9e4,20),h180:new Ue(320,180,16e4,20),h216:new Ue(384,216,18e4,20),h360:new Ue(640,360,45e4,20),h540:new Ue(960,540,8e5,25),h720:new Ue(1280,720,17e5,30),h1080:new Ue(1920,1080,3e6,30),h1440:new Ue(2560,1440,5e6,30),h2160:new Ue(3840,2160,8e6,30)},fb={h120:new Ue(160,120,7e4,20),h180:new Ue(240,180,125e3,20),h240:new Ue(320,240,14e4,20),h360:new Ue(480,360,33e4,20),h480:new Ue(640,480,5e5,20),h540:new Ue(720,540,6e5,25),h720:new Ue(960,720,13e5,30),h1080:new Ue(1440,1080,23e5,30),h1440:new Ue(1920,1440,38e5,30)},Mx={h360fps3:new Ue(640,360,2e5,3,"medium"),h360fps15:new Ue(640,360,4e5,15,"medium"),h720fps5:new Ue(1280,720,8e5,5,"medium"),h720fps15:new Ue(1280,720,15e5,15,"medium"),h720fps30:new Ue(1280,720,2e6,30,"medium"),h1080fps15:new Ue(1920,1080,25e5,15,"medium"),h1080fps30:new Ue(1920,1080,5e6,30,"medium"),original:new Ue(0,0,7e6,30,"medium")};function XN(t,e,n){var r,i,o,a;const{optionsWithoutProcessor:s,audioProcessor:c,videoProcessor:l}=ZN(t??{}),u=e==null?void 0:e.processor,d=n==null?void 0:n.processor,f=s??{};return f.audio===!0&&(f.audio={}),f.video===!0&&(f.video={}),f.audio&&(hb(f.audio,e),(r=(o=f.audio).deviceId)!==null&&r!==void 0||(o.deviceId={ideal:"default"}),(c||u)&&(f.audio.processor=c??u)),f.video&&(hb(f.video,n),(i=(a=f.video).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(l||d)&&(f.video.processor=l??d)),f}function hb(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Ix(t){var e,n,r,i;const o={};if(t.video)if(typeof t.video=="object"){const a={},s=a,c=t.video;Object.keys(c).forEach(l=>{switch(l){case"resolution":hb(s,c.resolution);break;default:s[l]=c[l]}}),o.video=a,(e=(r=o.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else o.video=t.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return t.audio?typeof t.audio=="object"?(o.audio=t.audio,(n=(i=o.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function QN(t){return O(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=JN();if(r){const i=r.createAnalyser();i.fftSize=2048;const o=i.frequencyBinCount,a=new Uint8Array(o);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield Ht(n),i.getByteTimeDomainData(a);const c=a.some(l=>l!==128&&l!==0);return r.close(),!c}return!1}()})}function JN(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>O(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function I8(t){return t==="audioinput"?V.Source.Microphone:t==="videoinput"?V.Source.Camera:V.Source.Unknown}function pb(t){return t===V.Source.Microphone?"audioinput":t===V.Source.Camera?"videoinput":void 0}function N8(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,is()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Eu(t){return t.split("/")[1].toLowerCase()}function D8(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Tx({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function be(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?be(t.track):{})}}function j8(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function L8(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const o of r)t[o]!==e[o]&&(i[o]=(n=e[o])!==null&&n!==void 0?n:"");return i}function ZN(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:P8(e)}}function $8(t){switch(t){case St.CAMERA:return V.Source.Camera;case St.MICROPHONE:return V.Source.Microphone;case St.SCREEN_SHARE:return V.Source.ScreenShare;case St.SCREEN_SHARE_AUDIO:return V.Source.ScreenShareAudio;default:return V.Source.Unknown}}function y1(t,e){return t.width*t.height<e.width*e.height}function F8(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}const U8=5e3,ql=[];var Vn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Vn||(Vn={}));class V extends pi.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=V.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=he,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),U8):this.handleAppVisibilityChanged()},this.log=Ki((i=r.loggerName)!==null&&i!==void 0?i:Vr.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=V.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),be(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===V.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===V.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(ql.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&ql.splice(ql.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),zs(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?J.AudioPlaybackStarted:J.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?J.AudioPlaybackFailed:J.VideoPlaybackFailed,o):o.name==="AbortError"?he.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):he.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(a=>a.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(J.ElementAttached,e),e}detach(e){try{if(e){ic(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(J.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{ic(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(J.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ki(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),ql.forEach(r=>{r.parentElement||(n=!1)}),n&&ql.push(e)}}handleAppVisibilityChanged(){return O(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===V.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){_n()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){_n()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function zs(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!is()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(is()||rs())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function ic(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return Dr.AUDIO;case e.Video:return Dr.VIDEO;default:return Dr.DATA}}t.kindToProto=i;function o(l){switch(l){case Dr.AUDIO:return e.Audio;case Dr.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function a(l){switch(l){case n.Camera:return St.CAMERA;case n.Microphone:return St.MICROPHONE;case n.ScreenShare:return St.SCREEN_SHARE;case n.ScreenShareAudio:return St.SCREEN_SHARE_AUDIO;default:return St.UNKNOWN}}t.sourceToProto=a;function s(l){switch(l){case St.CAMERA:return n.Camera;case St.MICROPHONE:return n.Microphone;case St.SCREEN_SHARE:return n.ScreenShare;case St.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=s;function c(l){switch(l){case nb.ACTIVE:return r.Active;case nb.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(V||(V={}));const B8="|",b1="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function z8(t){const e=t.split(B8);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Ht(t){return new Cn(e=>Vt.setTimeout(e,t))}function mb(){return"addTransceiver"in RTCPeerConnection.prototype}function gb(){return"addTrack"in RTCPeerConnection.prototype}function q8(){if(!("getCapabilities"in RTCRtpSender)||is()||rs())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function W8(){if(!("getCapabilities"in RTCRtpSender)||rs())return!1;if(is()){const n=Rn();if(n!=null&&n.version&&fi(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&fi(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function Lr(t){return t==="av1"||t==="vp9"}function vb(t){return!document||ad()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function V8(){return typeof RTCPeerConnection>"u"?!1:mb()||gb()}function rs(){var t;return((t=Rn())===null||t===void 0?void 0:t.name)==="Firefox"}function w1(){const t=Rn();return!!t&&t.name==="Chrome"&&t.os!=="iOS"}function is(){var t;return((t=Rn())===null||t===void 0?void 0:t.name)==="Safari"}function ad(){const t=Rn();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function H8(){const t=Rn();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&fi(t.osVersion,"17")>=0}function K8(t){return t||(t=Rn()),(t==null?void 0:t.name)==="Safari"&&fi(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&fi(t.osVersion,"18.3")>0}function eD(){var t,e;return _n()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function G8(){const t=Rn(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&fi(t.osVersion,e)>=0?!0:t.name==="Safari"&&fi(t.version,e)>=0}function _n(){return typeof document<"u"}function di(){return navigator.product=="ReactNative"}function Nc(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function Uv(t){return Nc(t)?t.hostname.split(".")[0]:null}function tD(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function nD(){if(!di())return;let t=tD();if(t)return t.platform}function S1(){if(_n())return window.devicePixelRatio;if(di()){let t=tD();if(t)return t.devicePixelRatio}return 1}function fi(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const a=parseInt(n[o],10),s=parseInt(r[o],10);if(a>s)return 1;if(a<s)return-1;if(o===i-1&&a===s)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function Y8(t){for(const e of t)e.target.handleResize(e)}function X8(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Bv=null;const x1=()=>(Bv||(Bv=new ResizeObserver(Y8)),Bv);let zv=null;const k1=()=>(zv||(zv=new IntersectionObserver(X8,{root:null,rootMargin:"0px"})),zv);function Q8(){var t;const e=new nN({sdk:rN.JS,protocol:_8,version:C8});return di()&&(e.os=(t=nD())!==null&&t!==void 0?t:""),e}function T1(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const a=i.captureStream(),[s]=a.getTracks();if(!s)throw Error("Could not get empty media stream video track");return s.enabled=n,s}let Wl;function qv(){if(!Wl){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Wl]=r.stream.getAudioTracks(),!Wl)throw Error("Could not get empty media stream audio track");Wl.enabled=!1}return Wl.clone()}class ur{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>O(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function J8(t){return A8.includes(t)}function Ho(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Z8(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function sd(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function ez(t,e){return t.segments.map(n=>{let{id:r,text:i,language:o,startTime:a,endTime:s,final:c}=n;var l;const u=(l=e.get(r))!==null&&l!==void 0?l:Date.now(),d=Date.now();return c?e.delete(r):e.set(r,u),{id:r,text:i,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(s.toString()),final:c,language:o,firstReceivedTime:u,lastReceivedTime:d}})}function tz(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function C1(t){switch(t.reason){case ze.LeaveRequest:return t.context;case ze.Cancelled:return Fr.CLIENT_INITIATED;case ze.NotAllowed:return Fr.USER_REJECTED;case ze.ServerUnreachable:return Fr.JOIN_FAILURE;default:return Fr.UNKNOWN_REASON}}function Fh(t){return t!==void 0?Number(t):void 0}function ba(t){return t!==void 0?BigInt(t):void 0}function oc(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function si(t){return!!t&&t.kind==V.Kind.Audio}function oa(t){return!!t&&t.kind==V.Kind.Video}function co(t){return oc(t)&&oa(t)}function wi(t){return oc(t)&&si(t)}function yb(t){return!!t&&!t.isLocal}function nz(t){return!!t&&!t.isLocal}function Wv(t){return yb(t)&&oa(t)}function rz(t){return t.isLocal}function iz(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const o=r[i];if(o!==void 0&&(o&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function oz(t){var e;const n=t.get("Cache-Control");if(n){const r=(e=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||e===void 0?void 0:e[1];if(r)return parseInt(r,10)}}function az(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=sz(t,e);return n?r:Nx(r,"v1")}function sz(t,e){const n=new URL(Z8(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),Nx(n,"rtc")}function cz(t){const e=new URL(sd(t));return Nx(e,"validate")}function rD(t){return t.endsWith("/")?t:"".concat(t,"/")}function Nx(t,e){return t.pathname="".concat(rD(t.pathname)).concat(e),t}function _1(t){if(typeof t=="string")return i1.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return i1.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function lz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const uz=10,Vl="lk_e2ee",dz="LKFrameEncryptionKey",fz={sharedKey:!1,ratchetSalt:dz,ratchetWindowSize:8,failureTolerance:uz,keyringSize:16};var Ko;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ko||(Ko={}));var E1;(function(t){t.KeyRatcheted="keyRatcheted"})(E1||(E1={}));var Mo;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Mo||(Mo={}));var P1;(function(t){t.Error="cryptorError"})(P1||(P1={}));function hz(){return pz()||bb()}function bb(){return typeof window.RTCRtpScriptTransform<"u"}function pz(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function mz(t){var e,n,r,i,o;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((o=t.value)===null||o===void 0?void 0:o.case)!=="encryptedPacket")return new YI({value:t.value})}class a0e extends pi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{he.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},fz),e),this.on(Ko.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ko.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ko.RatchetRequest,e,n)}}var O1;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(O1||(O1={}));class gz extends pi.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,o;const{kind:a,data:s}=r.data;switch(a){case"error":if(he.error(s.error.message),s.uuid){const u=this.decryptDataRequests.get(s.uuid);if(u!=null&&u.reject){u.reject(s.error);break}const d=this.encryptDataRequests.get(s.uuid);if(d!=null&&d.reject){d.reject(s.error);break}}this.emit(Mo.EncryptionError,s.error,s.participantIdentity);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)});break;case"enable":if(s.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)}),this.encryptionEnabled!==s.enabled&&s.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Mo.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const u=(o=this.room)===null||o===void 0?void 0:o.getParticipantByIdentity(s.participantIdentity);if(!u)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Mo.ParticipantEncryptionStatusChanged,s.enabled,u)}break;case"ratchetKey":this.keyProvider.emit(Ko.KeyRatcheted,s.ratchetResult,s.participantIdentity,s.keyIndex);break;case"decryptDataResponse":const c=this.decryptDataRequests.get(s.uuid);c!=null&&c.resolve&&c.resolve(s);break;case"encryptDataResponse":const l=this.encryptDataRequests.get(s.uuid);l!=null&&l.resolve&&l.resolve(s);break}},this.onWorkerError=r=>{he.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Mo.EncryptionError,r.error,void 0)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!hz())throw new Rx("tried to setup end-to-end encryption on an unsupported browser");if(he.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:l8.getLevel()}};this.worker&&(he.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){he.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?he.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Z.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(K.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Rt.NONE,i.identity)),e.on(K.ConnectionStateChanged,r=>{r===Ae.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Rt.NONE,i.identity)})})}).on(K.TrackUnsubscribed,(r,i,o)=>{var a;const s={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(s)}).on(K.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(K.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(te.LocalSenderCreated,(r,i)=>O(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),e.localParticipant.on(te.LocalTrackPublished,r=>{if(!oa(r.track)||!ad())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:Eu(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(Ko.SetKey,r=>this.postKey(r)).on(Ko.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(e){return O(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},i=new ur;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(e,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const o=crypto.randomUUID(),a={kind:"decryptDataRequest",data:{uuid:o,payload:e,iv:n,participantIdentity:r,keyIndex:i}},s=new ur;return s.onFinally=()=>{this.decryptDataRequests.delete(o)},this.decryptDataRequests.set(o,s),this.worker.postMessage(a),s.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(a)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Eu(r.mimeType):void 0)}}setupE2EESender(e,n){if(!oc(e)||!n){n||he.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return O(this,void 0,void 0,function*(){if(this.worker){if(bb()&&!w1()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Vl in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let o=e.writableStream,a=e.readableStream;if(!o||!a){const c=e.createEncodedStreams();e.writableStream=c.writable,o=c.writable,e.readableStream=c.readable,a=c.readable}const s={kind:"decode",data:{readableStream:a,writableStream:o,trackId:n,codec:i,participantIdentity:r,isReuse:Vl in e}};this.worker.postMessage(s,[a,o])}e[Vl]=!0}})}handleSender(e,n,r){var i;if(!(Vl in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(bb()&&!w1()){he.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{he.info("initialize encoded streams");const o=e.createEncodedStreams(),a={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(a,[o.readable,o.writable])}e[Vl]=!0}}}const vz=500,yz=15e3;class ac{constructor(){this.failedConnectionAttempts=new Map,this.backOffPromises=new Map}static getInstance(){return this._instance||(this._instance=new ac),this._instance}addFailedConnectionAttempt(e){var n;const r=new URL(e),i=Uv(r);if(!i)return;let o=(n=this.failedConnectionAttempts.get(i))!==null&&n!==void 0?n:0;this.failedConnectionAttempts.set(i,o+1),this.backOffPromises.set(i,Ht(Math.min(vz*Math.pow(2,o),yz)))}getBackOffPromise(e){const n=new URL(e),r=n&&Uv(n);return r&&this.backOffPromises.get(r)||Promise.resolve()}resetFailedConnectionAttempts(e){const n=new URL(e),r=n&&Uv(n);r&&(this.failedConnectionAttempts.set(r,0),this.backOffPromises.set(r,Promise.resolve()))}resetAll(){this.backOffPromises.clear(),this.failedConnectionAttempts.clear()}}ac._instance=null;const Vv="default";class Ft{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Ft),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;if(((o=Ft.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){he.debug("awaiting getUserMedia promise");try{n?yield Ft.userMediaPromiseMap.get(n):yield Promise.all(Ft.userMediaPromiseMap.values())}catch{he.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(i&&!(is()&&r.hasDeviceInUse(n))&&(a.filter(c=>c.kind===n).length===0||a.some(c=>{const l=c.label==="",u=n?c.kind===n:!0;return l&&u}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},l=yield navigator.mediaDevices.getUserMedia(c);a=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(u=>{u.stop()})}return r._previousDevices=a,n&&(a=a.filter(s=>s.kind===n)),a}()})}normalizeDeviceId(e,n,r){return O(this,void 0,void 0,function*(){if(n!==Vv)return n;const i=yield this.getDevices(e),o=i.find(s=>s.deviceId===Vv);if(!o){he.warn("could not reliably determine default device");return}const a=i.find(s=>s.deviceId!==Vv&&s.groupId===(r??o.groupId));if(!a){he.warn("could not reliably determine default device");return}return a==null?void 0:a.deviceId})}hasDeviceInUse(e){return e?Ft.userMediaPromiseMap.has(e):Ft.userMediaPromiseMap.size>0}}Ft.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Ft.userMediaPromiseMap=new Map;var Pu;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Pu||(Pu={}));class bz{constructor(){this.pendingTasks=new Map,this.taskMutex=new pn,this.nextTaskIndex=0}run(e){return O(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Pu.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Pu.RUNNING,yield e()}finally{n.status=Pu.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return O(this,void 0,void 0,function*(){return this.run(()=>O(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class wz{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,i;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const o=new WebSocket(e,(i=n.protocols)!==null&&i!==void 0?i:[]);o.binaryType="arraybuffer",this.ws=o;const a=function(){let{closeCode:s,reason:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.close(s,c)};this.opened=new Cn((s,c)=>{const l=()=>{c(ce.websocket("Encountered websocket error during connection establishment"))};o.onopen=()=>{s({readable:new ReadableStream({start(u){o.onmessage=d=>{let{data:f}=d;return u.enqueue(f)},o.onerror=d=>u.error(d)},cancel:a}),writable:new WritableStream({write(u){o.send(u)},abort(){o.close()},close:a}),protocol:o.protocol,extensions:o.extensions}),o.removeEventListener("error",l)},o.addEventListener("error",l)}),this.closed=new Cn((s,c)=>{const l=()=>O(this,void 0,void 0,function*(){const u=new Cn(f=>{o.readyState!==WebSocket.CLOSED&&o.addEventListener("close",h=>{f(h)},{once:!0})}),d=yield Cn.race([Ht(250),u]);d?s(d):c(ce.websocket("Encountered unspecified websocket error without a timely close event"))});o.onclose=u=>{let{code:d,reason:f}=u;s({closeCode:d,reason:f}),o.removeEventListener("error",l)},o.addEventListener("error",l)}),n.signal&&(n.signal.onabort=()=>o.close()),this.close=a}}const Sz=["syncState","trickle","offer","answer","simulate","leave"];function xz(t){const e=Sz.indexOf(t.case)>=0;return he.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Be;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Be||(Be={}));const kz=250;class Dx{get currentState(){return this.state}get isDisconnected(){return this.state===Be.DISCONNECTING||this.state===Be.DISCONNECTED}get isEstablishingConnection(){return this.state===Be.CONNECTING||this.state===Be.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Be.DISCONNECTED,this.log=he,this._requestId=0,this.useV0SignalPath=!1,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ki((r=n.loggerName)!==null&&r!==void 0?r:Vr.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new bz,this.queuedRequests=[],this.closingLock=new pn,this.connectionLock=new pn,this.state=Be.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return O(this,arguments,void 0,function(o,a,s,c){var l=this;let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return function*(){return l.state=Be.CONNECTING,l.options=s,yield l.connect(o,a,s,c,u)}()})}reconnect(e,n,r,i){return O(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Be.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}),void 0,this.useV0SignalPath)})}connect(e,n,r,i){return O(this,arguments,void 0,function(o,a,s,c){var l=this;let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return function*(){const d=yield l.connectionLock.lock();l.connectOptions=s,l.useV0SignalPath=u;const f=Q8(),h=u?Tz(a,f,s):Cz(a,f,s),m=az(o,h,u).toString(),p=cz(m).toString();return new Promise((g,v)=>O(l,void 0,void 0,function*(){var y,w;try{let S=!1;const b=E=>O(this,void 0,void 0,function*(){if(S)return;S=!0;const A=E instanceof Event?E.currentTarget:E,P=lz(A,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(P)).catch(L=>{this.log.error(L),this.close()}):this.close(),x(),v(ce.cancelled(P))});c==null||c.addEventListener("abort",b);const x=()=>{clearTimeout(T),c==null||c.removeEventListener("abort",b)},T=setTimeout(()=>{b(ce.timeout("room connection has timed out (signal)"))},s.websocketTimeout),C=(E,A)=>{this.handleSignalConnected(E,T,A)},_=new URL(m);_.searchParams.has("access_token")&&_.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(_),Object.assign({reconnect:s.reconnect,reconnectReason:s.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new wz(m);try{this.ws.closed.then(F=>{var q;this.isEstablishingConnection&&v(ce.internal("Websocket got closed during a (re)connection attempt: ".concat(F.reason))),F.closeCode!==1e3&&(this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:F.reason,code:F.closeCode,wasClean:F.closeCode===1e3,state:this.state})),this.state===Be.CONNECTED&&this.handleOnClose((q=F.reason)!==null&&q!==void 0?q:"Unexpected WS error"))}).catch(F=>{this.isEstablishingConnection&&v(ce.internal("Websocket error during a (re)connection attempt: ".concat(F)))});const E=yield this.ws.opened.catch(F=>O(this,void 0,void 0,function*(){if(this.state!==Be.CONNECTED){this.state=Be.DISCONNECTED,clearTimeout(T);const q=yield this.handleConnectionError(F,p);v(q);return}this.handleWSError(F),v(F)}));if(clearTimeout(T),!E)return;const A=E.readable.getReader();this.streamWriter=E.writable.getWriter();const P=yield A.read();if(A.releaseLock(),!P.value)throw ce.internal("no message received as first message");const L=_1(P.value),j=this.validateFirstMessage(L,(y=s.reconnect)!==null&&y!==void 0?y:!1);if(!j.isValid){v(j.error);return}((w=L.message)===null||w===void 0?void 0:w.case)==="join"&&(this.pingTimeoutDuration=L.message.value.pingTimeout,this.pingIntervalDuration=L.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const $=j.shouldProcessFirstMessage?L:void 0;C(E,$),g(j.response)}catch(E){v(E)}finally{x()}}finally{d()}}))}()})}startReadingLoop(e,n){return O(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield Ht(this.signalLatency));const{done:r,value:i}=yield e.read();if(r)break;const o=_1(i);this.handleSignalResponse(o)}})}close(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return function*(){if([Be.DISCONNECTING||Be.DISCONNECTED].includes(e.state)){e.log.debug("ignoring signal close as it's already in disconnecting state");return}const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Be.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:r});const o=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([o,Ht(kz)])}}catch(o){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:o}))}finally{n&&(e.state=Be.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:qs(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:qs(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new eg({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new tg({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return O(this,arguments,void 0,function(r,i){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const s=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new _x({requestId:s,metadata:r,name:i,attributes:a})}),s}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new uN({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new hN({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:et.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new gN({timestamp:et.parse(Date.now()),rtt:et.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new Cx({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new rg({reason:Fr.CLIENT_INITIATED,action:tc.DISCONNECT})})}sendRequest(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!xz(n)&&r.state===Be.RECONNECTING){r.queuedRequests.push(()=>O(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield Ht(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const a=new N6({message:n});try{r.useJSON?yield r.streamWriter.write(a.toJsonString()):yield r.streamWriter.write(a.toBinary())}catch(s){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:s}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const a=A1(i.value);this.onAnswer&&this.onAnswer(a,i.value.id,i.value.midToTrackId)}else if(i.case==="offer"){const a=A1(i.value);this.onOffer&&this.onOffer(a,i.value.id,i.value.midToTrackId)}else if(i.case==="trickle"){const a=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(a,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):i.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(i.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return O(this,void 0,void 0,function*(){if(this.state===Be.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Vt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Vt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Vt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Vt.clearInterval(this.pingInterval)}handleSignalConnected(e,n,r){this.state=Be.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),r)}validateFirstMessage(e,n){var r,i,o,a,s;return((r=e.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:e.message.value}:this.state===Be.RECONNECTING&&((i=e.message)===null||i===void 0?void 0:i.case)!=="leave"?((o=e.message)===null||o===void 0?void 0:o.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((a=e.message)===null||a===void 0?void 0:a.case)==="leave"?{isValid:!1,error:ce.leaveRequest("Received leave request while trying to (re)connect",e.message.value.reason)}:n?{isValid:!1,error:ce.internal("Unexpected first message")}:{isValid:!1,error:ce.internal("did not receive join response, got ".concat((s=e.message)===null||s===void 0?void 0:s.case," instead"))}}handleConnectionError(e,n){return O(this,void 0,void 0,function*(){try{const r=yield fetch(n);switch(r.status){case 404:return ce.serviceNotFound("v1 RTC path not found. Consider upgrading your LiveKit server version","v0-rtc");case 401:case 403:const i=yield r.text();return ce.notAllowed(i,r.status);default:break}return e instanceof ce?e:ce.internal("Encountered unknown websocket error during connection: ".concat(e),{status:r.status,statusText:r.statusText})}catch(r){return r instanceof ce?r:ce.serverUnreachable(r instanceof Error?r.message:"server was not reachable")}})}}function A1(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function qs(t,e){return new ea({sdp:t.sdp,type:t.type,id:e})}function Tz(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",di()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}function Cz(t,e,n){const r=new URLSearchParams;r.set("access_token",t);const i=new n8({clientInfo:e,connectionSettings:new vN({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(i.reconnectReason=n.reconnectReason);const o=new r8({joinRequest:i.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(o.toBinary()))),r}class R1{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class _z{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(e,{value:n,expiresAt:i}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[i,o]of r.entries())n.push(e(o,i,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var xr={},Hv={},Kv={exports:{}},M1;function jx(){if(M1)return Kv.exports;M1=1;var t=Kv.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Kv.exports}var I1;function Ez(){return I1||(I1=1,function(t){var e=function(s){return String(Number(s))===s?Number(s):s},n=function(s,c,l,u){if(u&&!l)c[u]=e(s[1]);else for(var d=0;d<l.length;d+=1)s[d+1]!=null&&(c[l[d]]=e(s[d+1]))},r=function(s,c,l){var u=s.name&&s.names;s.push&&!c[s.push]?c[s.push]=[]:u&&!c[s.name]&&(c[s.name]={});var d=s.push?{}:u?c[s.name]:c;n(l.match(s.reg),d,s.names,s.name),s.push&&c[s.push].push(d)},i=jx(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(s){var c={},l=[],u=c;return s.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var m=0;m<(i[f]||[]).length;m+=1){var p=i[f][m];if(p.reg.test(h))return r(p,u,h)}}),c.media=l,c};var a=function(s,c){var l=c.split(/=(.+)/,2);return l.length===2?s[l[0]]=e(l[1]):l.length===1&&c.length>1&&(s[l[0]]=void 0),s};t.parseParams=function(s){return s.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(s){return s.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(s){for(var c=[],l=s.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(s){return s.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(s){return s.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}}(Hv)),Hv}var Gv,N1;function Pz(){if(N1)return Gv;N1=1;var t=jx(),e=/%[sdv%]/g,n=function(a){var s=1,c=arguments,l=c.length;return a.replace(e,function(u){if(s>=l)return u;var d=c[s];switch(s+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},r=function(a,s,c){var l=s.format instanceof Function?s.format(s.push?c:c[s.name]):s.format,u=[a+"="+l];if(s.names)for(var d=0;d<s.names.length;d+=1){var f=s.names[d];s.name?u.push(c[s.name][f]):u.push(c[s.names[d]])}else u.push(c[s.name]);return n.apply(null,u)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Gv=function(a,s){s=s||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var c=s.outerOrder||i,l=s.innerOrder||o,u=[];return c.forEach(function(d){t[d].forEach(function(f){f.name in a&&a[f.name]!=null?u.push(r(d,f,a)):f.push in a&&a[f.push]!=null&&a[f.push].forEach(function(h){u.push(r(d,f,h))})})}),a.media.forEach(function(d){u.push(r("m",t.m[0],d)),l.forEach(function(f){t[f].forEach(function(h){h.name in d&&d[h.name]!=null?u.push(r(f,h,d)):h.push in d&&d[h.push]!=null&&d[h.push].forEach(function(m){u.push(r(f,h,m))})})})}),u.join(`\r
`)+`\r
`},Gv}var D1;function Oz(){if(D1)return xr;D1=1;var t=Ez(),e=Pz(),n=jx();return xr.grammar=n,xr.write=e,xr.parse=t.parse,xr.parseParams=t.parseParams,xr.parseFmtpConfig=t.parseFmtpConfig,xr.parsePayloads=t.parsePayloads,xr.parseRemoteCandidates=t.parseRemoteCandidates,xr.parseImageAttributes=t.parseImageAttributes,xr.parseSimulcastStreamList=t.parseSimulcastStreamList,xr}var fo=Oz();function Lx(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,s=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+e>=c)return c-h}return e}var f=function(){var h=[].slice.call(arguments),m=this;return new Promise(function(p,g){var v=a&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!a){var w=t.apply(m,h);s&&s(w),u.forEach(function(S){return(0,S.resolve)(w)}),u=[]}},d()),v){var y=t.apply(m,h);return s&&s(y),p(y)}u.push({resolve:p,reject:g})})};return f.cancel=function(h){o!==void 0&&clearTimeout(o),u.forEach(function(m){return(0,m.reject)(h)}),u=[]},f}const Az=.7,Rz=20,sc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class j1 extends pi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=he,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Lx(i=>O(this,void 0,void 0,function*(){this.emit(sc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(i)i(o);else throw o}}),Rz),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ki((r=n.loggerName)!==null&&r!==void 0?r:Vr.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new pn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return O(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return O(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(e.type==="offer"){let{stereoMids:o,nackMids:a}=Mz(e);this.remoteStereoMids=o,this.remoteNackMids=a}else if(e.type==="answer"){const o=fo.parse((r=e.sdp)!==null&&r!==void 0?r:"");o.media.forEach(a=>{const s=$x(a.mid);a.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||s!=c.transceiver.mid)return!1;let l=0;if(a.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0)return!0;let u=!1;for(const d of a.fmtp)if(d.payload===l){d.config=d.config.split(";").filter(f=>!f.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(d.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),u=!0;break}return u||c.maxbr>0&&a.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),i=fo.write(o)}return yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(o=>{this.pc.addIceCandidate(o)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(sc.NegotiationComplete),e.sdp&&fo.parse(e.sdp).media.forEach(a=>{a.type==="video"&&this.emit(sc.RTPVideoPayloadTypes,a.rtp)})),!0})}createAndSendOffer(e){return O(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const s=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&s)yield this._pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const o=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:o.sdp},this.logContext));const a=fo.parse((n=o.sdp)!==null&&n!==void 0?n:"");if(a.media.forEach(s=>{$1(s),s.type==="audio"?L1(s,["all"],[]):s.type==="video"&&this.trackBitrates.some(c=>{if(!s.msid||!c.cid||!s.msid.includes(c.cid))return!1;let l=0;if(s.rtp.some(d=>d.codec.toUpperCase()===c.codec.toUpperCase()?(l=d.payload,!0):!1),l===0||(Lr(c.codec)&&!is()&&this.ensureVideoDDExtensionForSVC(s,a),!Lr(c.codec)))return!0;const u=Math.round(c.maxbr*Az);for(const d of s.fmtp)if(d.payload===l){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(o,fo.write(a)),this.onOffer(o,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=fo.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{$1(i),i.type==="audio"&&L1(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,fo.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new ft("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new ft("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return O(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(s=>{switch(s.type){case"transport":n=s.selectedCandidatePairId;break;case"candidate-pair":n===""&&s.selected&&(n=s.id),r.set(s.id,s);break;case"remote-candidate":i.set(s.id,"".concat(s.address,":").concat(s.port));break}}),n==="")return;const a=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(a!==void 0)return i.get(a)})}setMungedSDP(e,n,r){return O(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const a={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new rc(o)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(a=>a.uri===b1))){if(this.ddExtID===0){let a=0;n.media.forEach(s=>{var c;s.type==="video"&&((c=s.ext)===null||c===void 0||c.forEach(l=>{l.value>a&&(a=l.value)}))}),this.ddExtID=a+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:b1})}}}function L1(t,e,n){const r=$x(t.mid);let i=0;t.rtp.some(o=>o.codec==="opus"?(i=o.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(o=>o.payload===i&&o.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),(e.includes(r)||e.length===1&&e[0]==="all")&&t.fmtp.some(o=>o.payload===i?(o.config.includes("stereo=1")||(o.config+=";stereo=1"),!0):!1))}function Mz(t){var e;const n=[],r=[],i=fo.parse((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(a=>{var s;const c=$x(a.mid);a.type==="audio"&&(a.rtp.some(l=>l.codec==="opus"?(o=l.payload,!0):!1),!((s=a.rtcpFb)===null||s===void 0)&&s.some(l=>l.payload===o&&l.type==="nack")&&r.push(c),a.fmtp.some(l=>l.payload===o?(l.config.includes("sprop-stereo=1")&&n.push(c),!0):!1))}),{stereoMids:n,nackMids:r}}function $1(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function $x(t){return typeof t=="number"?t.toFixed(0):t}const wb="vp8",Iz={audioPreset:db.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Mx.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:wb,backupCodec:!0,preConnectBuffer:!1},iD={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},oD={deviceId:{ideal:"default"},resolution:od.h720.resolution},Nz={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new d8,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!0},Fx={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var st;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(st||(st={}));class Dz{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}get mode(){return this._mode}constructor(e,n,r){var i;this.peerConnectionTimeout=Fx.peerConnectionTimeout,this.log=he,this.updateState=()=>{var o,a;const s=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=st.CONNECTED:c.some(l=>l==="failed")?this.state=st.FAILED:c.some(l=>l==="connecting")?this.state=st.CONNECTING:c.every(l=>l==="closed")?this.state=st.CLOSED:c.some(l=>l==="closed")?this.state=st.CLOSING:c.every(l=>l==="new")&&(this.state=st.NEW),s!==this.state&&(this.log.debug("pc state change: from ".concat(st[s]," to ").concat(st[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),(a=this.subscriber)===null||a===void 0?void 0:a.getConnectionState()))},this.log=Ki((i=r.loggerName)!==null&&i!==void 0?i:Vr.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new j1(e,r),this._mode=n,n!=="publisher-only"&&(this.subscriber=new j1(e,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,jr.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,o)},this.subscriber.onTrack=o=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,o)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,jr.PUBLISHER)},this.publisher.onTrack=o=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,o)},this.publisher.onOffer=(o,a)=>{var s;(s=this.onPublisherOffer)===null||s===void 0||s.call(this,o,a)},this.state=st.NEW,this.connectionLock=new pn,this.remoteOfferLock=new pn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return O(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return O(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return O(this,void 0,void 0,function*(){var r;n===jr.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return O(this,void 0,void 0,function*(){var r,i,o;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const a=yield this.remoteOfferLock.lock();try{return(yield(i=this.subscriber)===null||i===void 0?void 0:i.setRemoteDescription(e,n))?yield(o=this.subscriber)===null||o===void 0?void 0:o.createAndSetAnswer():void 0}finally{a()}})}updateConfiguration(e,n){var r;this.publisher.setConfiguration(e),(r=this.subscriber)===null||r===void 0||r.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return O(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return O(this,void 0,void 0,function*(){return new Cn((n,r)=>O(this,void 0,void 0,function*(){const i=setTimeout(()=>{r(new rc("negotiation timed out"))},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r(new rc("negotiation aborted"))};e.signal.addEventListener("abort",o),this.publisher.once(sc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(sc.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(i),a instanceof Error?r(a):r(new Error(String(a)))})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(i=>i.receiver===e);return r==null?void 0:r.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===jr.PUBLISHER?this.publisher.getConnectedAddress():e===jr.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return O(this,arguments,void 0,function(r,i){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((c,l)=>O(o,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),Vt.clearTimeout(d),l(ce.cancelled("room connection has been cancelled"))};i!=null&&i.signal.aborted&&u(),i==null||i.signal.addEventListener("abort",u);const d=Vt.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",u),l(ce.internal("could not establish pc connection"))},a);for(;this.state!==st.CONNECTED;)if(yield Ht(50),i!=null&&i.signal.aborted){l(ce.cancelled("room connection has been cancelled"));return}Vt.clearTimeout(d),i==null||i.signal.removeEventListener("abort",u),c()}))}()})}}const aD=5e3,jz=3e4;class Pe{static fetchRegionSettings(e,n,r){return O(this,void 0,void 0,function*(){const i=yield Pe.fetchLock.lock();try{const o=yield fetch("".concat(Lz(e),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:r});if(o.ok){const a=oz(o.headers),s=a?a*1e3:aD;return{regionSettings:yield o.json(),updatedAtInMs:Date.now(),maxAgeInMs:s}}else throw o.status===401?ce.notAllowed("Could not fetch region settings: ".concat(o.statusText),o.status):ce.internal("Could not fetch region settings: ".concat(o.statusText))}catch(o){throw o instanceof ce?o:r!=null&&r.aborted?ce.cancelled("Region fetching was aborted"):ce.serverUnreachable("Could not fetch region settings, ".concat(o instanceof Error?"".concat(o.name,": ").concat(o.message):o))}finally{i()}})}static scheduleRefetch(e,n,r){return O(this,void 0,void 0,function*(){const i=Pe.settingsTimeouts.get(e.hostname);clearTimeout(i),Pe.settingsTimeouts.set(e.hostname,setTimeout(()=>O(this,void 0,void 0,function*(){try{const o=yield Pe.fetchRegionSettings(e,n);Pe.updateCachedRegionSettings(e,n,o)}catch(o){if(o instanceof ce&&o.reason===ze.NotAllowed){he.debug("token is not valid, cancelling auto region refresh");return}he.debug("auto refetching of region settings failed",{error:o}),Pe.scheduleRefetch(e,n,r)}}),r))})}static updateCachedRegionSettings(e,n,r){Pe.cache.set(e.hostname,r),Pe.scheduleRefetch(e,n,r.maxAgeInMs)}static stopRefetch(e){const n=Pe.settingsTimeouts.get(e);n&&(clearTimeout(n),Pe.settingsTimeouts.delete(e))}static scheduleCleanup(e){let n=Pe.connectionTrackers.get(e);n&&(n.cleanupTimeout&&clearTimeout(n.cleanupTimeout),n.cleanupTimeout=setTimeout(()=>{const r=Pe.connectionTrackers.get(e);r&&r.connectionCount===0&&(he.debug("stopping region refetch after disconnect delay",{hostname:e}),Pe.stopRefetch(e)),r&&(r.cleanupTimeout=void 0)},jz))}static cancelCleanup(e){const n=Pe.connectionTrackers.get(e);n!=null&&n.cleanupTimeout&&(clearTimeout(n.cleanupTimeout),n.cleanupTimeout=void 0)}notifyConnected(){const e=this.serverUrl.hostname;let n=Pe.connectionTrackers.get(e);n||(n={connectionCount:0},Pe.connectionTrackers.set(e,n)),n.connectionCount++,Pe.cancelCleanup(e)}notifyDisconnected(){const e=this.serverUrl.hostname,n=Pe.connectionTrackers.get(e);n&&(n.connectionCount=Math.max(0,n.connectionCount-1),n.connectionCount===0&&Pe.scheduleCleanup(e))}constructor(e,n){this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Nc(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(e){return O(this,void 0,void 0,function*(){return Pe.fetchRegionSettings(this.serverUrl,this.token,e)})}getNextBestRegionUrl(e){return O(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=Pe.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(e),Pe.updateCachedRegionSettings(this.serverUrl,this.token,n));const r=n.regionSettings.regions.filter(i=>!this.attemptedRegions.find(o=>o.url===i.url));if(r.length>0){const i=r[0];return this.attemptedRegions.push(i),he.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(e){Pe.updateCachedRegionSettings(this.serverUrl,this.token,e)}}Pe.cache=new Map;Pe.settingsTimeouts=new Map;Pe.connectionTrackers=new Map;Pe.fetchLock=new pn;function Lz(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class dt extends Error{constructor(e,n,r){super(n),this.code=e,this.message=F1(n,dt.MAX_MESSAGE_BYTES),this.data=r?F1(r,dt.MAX_DATA_BYTES):void 0}static fromProto(e){return new dt(e.code,e.message,e.data)}toProto(){return new JI({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new dt(dt.ErrorCode[e],dt.ErrorMessage[e],n)}}dt.MAX_MESSAGE_BYTES=256;dt.MAX_DATA_BYTES=15360;dt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};dt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const sD=15360;function Ux(t){return new TextEncoder().encode(t).length}function F1(t,e){if(Ux(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const o=Math.floor((n+r+1)/2);i.encode(t.slice(0,o)).length<=e?n=o:r=o-1}return t.slice(0,n)}const Bx=2e3;function og(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const zx=typeof MediaRecorder<"u";class $z{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const Fz=zx?MediaRecorder:$z;class Uz extends Fz{constructor(e,n){if(!zx)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const o=()=>i===void 0,a=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",s),i==null||i.close(),i=void 0},s=c=>{i==null||i.error(c),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",s),i=void 0};this.byteStream=new ReadableStream({start:c=>{i=c,r=l=>O(this,void 0,void 0,function*(){let u;if(l.data.arrayBuffer){const d=yield l.data.arrayBuffer();u=new Uint8Array(d)}else if(l.data.byteArray)u=l.data.byteArray;else throw new Error("no data available!");o()||c.enqueue(u)}),this.addEventListener("dataavailable",r)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",s)}}function Bz(){return zx}const zz=1e3,qz=1e4;class cD extends V{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Lx(()=>O(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>O(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(J.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new pn,this.pauseUpstreamLock=new pn,this.trackChangeLock=new pn,this.trackChangeLock.lock().then(a=>O(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{a()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==V.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return O(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{ic(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(zs(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{zs(i??e,o)}))})}waitForDimensions(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zz;return function*(){var r;if(e.kind===V.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=Rn())===null||r===void 0?void 0:r.os)==="iOS"&&(yield Ht(10));const i=Date.now();for(;Date.now()-i<n;){const o=e.dimensions;if(o)return o;yield Ht(50)}throw new Ri("unable to get track dimensions after timeout")}()})}setDeviceId(e){return O(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ho(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ho(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===V.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),o=e.kind===V.Kind.Audio?"audioinput":"videoinput";return n?Ft.getInstance().normalizeDeviceId(o,r,i):r}()})}mute(){return O(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return O(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return O(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ri("unable to replace an unpublished track");let i,o;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,o=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),o&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return O(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,o=f8(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const a={audio:!1,video:!1};this.kind===V.Kind.Video?a.video=r||i?{deviceId:r,facingMode:i}:!0:a.audio=r?Object.assign({deviceId:r},o):!0,this.attachedElements.forEach(l=>{ic(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return this.kind===V.Kind.Video&&(yield c.applyConstraints(o)),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=e,this.emit(J.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?J.Muted:J.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eD()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(J.UpstreamPaused,this);const r=Rn();if((r==null?void 0:r.name)==="Safari"&&fi(r.version,"12.0")<0)throw new Rx("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(J.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return O(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;const a=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const s=document.createElement(r.kind),c={kind:r.kind,track:r._mediaStreamTrack,element:s,audioContext:r.audioContext};if(yield n.init(c),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(zs(r._mediaStreamTrack,s),s.muted=!0,s.play().catch(l=>{l instanceof DOMException&&l.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:l})),setTimeout(()=>{s.play().catch(u=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:u}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:l}))}),r.processor=n,r.processorElement=s,r.processor.processedTrack){for(const l of r.attachedElements)l!==r.processorElement&&i&&(ic(r._mediaStreamTrack,l),zs(r.processor.processedTrack,l));yield(o=r.sender)===null||o===void 0?void 0:o.replaceTrack(r.processor.processedTrack)}r.emit(J.TrackProcessorUpdate,r.processor)}finally{a()}}()})}getProcessor(){return this.processor}stopProcessor(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}}()})}internalStopProcessor(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(J.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!Bz()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new Uz(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},qz)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Cp extends cD{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,V.Kind.Audio,n,r,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>O(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(s){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:s}));return}a&&this.prevStats&&(this._currentBitrate=og(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,$t.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(J.AudioTrackFeatureUpdate,this,$t.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===V.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ho(this._constraints.deviceId);return this.source===V.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return O(this,void 0,void 0,function*(){let n;if(e){const r=Ix({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return O(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){_n()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Bx)))}setProcessor(e){return O(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!di()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(J.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return O(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return O(this,void 0,void 0,function*(){const e=yield QN(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(J.AudioSilenceDetected)),e})}}function Wz(t,e,n){switch(t.kind){case"audio":return new Cp(t,e,!1,void 0,n);case"video":return new _p(t,e,!1,n);default:throw new Ri("unsupported track type: ".concat(t.kind))}}const Vz=Object.values(od),Hz=Object.values(fb),Kz=Object.values(Mx),Gz=[od.h180,od.h360],Yz=[fb.h180,fb.h360],Xz=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Ue(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),Sb=["q","h","f"];function xb(t,e,n,r){var i,o;let a=r==null?void 0:r.videoEncoding;t&&(a=r==null?void 0:r.screenShareEncoding);const s=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!a&&!s&&!c||!e||!n)return[{}];a||(a=Jz(t,e,n,l),he.debug("using video encoding",a));const u=a.maxFramerate,d=new Ue(e,n,a.maxBitrate,a.maxFramerate,a.priority);if(c&&Lr(l)){const m=new lD(c),p=[];if(m.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const g=Rn();if(ad()||di()||(g==null?void 0:g.name)==="Chrome"&&fi(g==null?void 0:g.version,"113")<0){const v=m.suffix=="h"?2:3,y=K8(g);for(let w=0;w<m.spatial;w+=1)p.push({rid:Sb[2-w],maxBitrate:a.maxBitrate/Math.pow(v,w),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:y?Math.pow(2,w):void 0});p[0].scalabilityMode=c}else p.push({maxBitrate:a.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:c});return d.encoding.priority&&(p[0].priority=d.encoding.priority,p[0].networkPriority=d.encoding.priority),he.debug("using svc encoding",{encodings:p}),p}if(!s)return[a];let f=[];t?f=(i=B1(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:U1(t,d):f=(o=B1(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:U1(t,d);let h;if(f.length>0){const m=f[0];f.length>1&&([,h]=f);const p=Math.max(e,n);if(p>=960&&h)return Yv(e,n,[m,h,d],u);if(p>=480)return Yv(e,n,[m,d],u)}return Yv(e,n,[d])}function Qz(t,e,n){var r,i,o,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&he.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const s=t.mediaStreamTrack.getSettings(),c=(r=s.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(o=s.height)!==null&&o!==void 0?o:(a=t.dimensions)===null||a===void 0?void 0:a.height;return t.source===V.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),xb(t.source===V.Source.ScreenShare,c,l,n)}function Jz(t,e,n,r){const i=Zz(t,e,n);let{encoding:o}=i[0];const a=Math.max(e,n);for(let s=0;s<i.length;s+=1){const c=i[s];if(o=c.encoding,c.width>=a)break}if(r)switch(r){case"av1":case"h265":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function Zz(t,e,n){if(t)return Kz;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Vz:Hz}function U1(t,e){if(t)return Xz(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?Gz:Yz}function Yv(t,e,n,r){const i=[];if(n.forEach((o,a)=>{if(a>=Sb.length)return;const s=Math.min(t,e),l={rid:Sb[a],scaleResolutionDownBy:Math.max(1,s/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},u=r&&o.encoding.maxFramerate?Math.min(r,o.encoding.maxFramerate):o.encoding.maxFramerate;u&&(l.maxFramerate=u);const d=rs()||a===0;o.encoding.priority&&d&&(l.priority=o.encoding.priority,l.networkPriority=o.encoding.priority),i.push(l)}),di()&&nD()==="ios"){let o;i.forEach(s=>{o?s.maxFramerate&&s.maxFramerate>o&&(o=s.maxFramerate):o=s.maxFramerate});let a=!0;i.forEach(s=>{var c;s.maxFramerate!=o&&(a&&(a=!1,he.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),he.info('Setting framerate of encoding "'.concat((c=s.rid)!==null&&c!==void 0?c:"",'" to ').concat(o)),s.maxFramerate=o)})}return i}function B1(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class lD{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function eq(t){return t.source===V.Source.ScreenShare||t.constraints.height&&Ho(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const tq=5e3;class _p extends cD{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,V.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>O(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const a=new Map(o.map(c=>[c.rid,c])),s=o.some(c=>c.qualityLimitationReason==="cpu");if(s!==this.isCpuConstrained&&(this.isCpuConstrained=s,this.isCpuConstrained&&this.emit(J.CpuConstrained)),this.prevStats){let c=0;a.forEach((l,u)=>{var d;const f=(d=this.prevStats)===null||d===void 0?void 0:d.get(u);c+=og(l,f)}),this._currentBitrate=c}this.prevStats=a}),this.senderLock=new pn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!_n())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Bx))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return O(this,void 0,void 0,function*(){var n,r,i,o,a;yield e.pauseUpstream.call(this);try{for(var s=!0,c=Ai(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;s=!0)o=l.value,s=!1,yield(a=o.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(u){r={error:u}}finally{try{!s&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return O(this,void 0,void 0,function*(){var n,r,i,o,a;yield e.resumeUpstream.call(this);try{for(var s=!0,c=Ai(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;s=!0){o=l.value,s=!1;const u=o;yield(a=u.sender)===null||a===void 0?void 0:a.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!s&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===V.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===V.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return O(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const a={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},s=r.get(i.remoteId);s&&(a.jitter=s.jitter,a.packetsLost=s.packetsLost,a.roundTripTime=s.roundTripTime),n.push(a)}}),n.sort((i,o)=>{var a,s;return((a=o.frameWidth)!==null&&a!==void 0?a:0)-((s=i.frameWidth)!==null&&s!==void 0?s:0)}),n})}setPublishingQuality(e){const n=[];for(let r=Vn.LOW;r<=Vn.HIGH;r+=1)n.push(new Ex({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Lr(this.codec),n)}restartTrack(e){return O(this,void 0,void 0,function*(){var n,r,i,o,a;let s;if(e){const d=Ix({video:e});typeof d.video!="boolean"&&(s=d.video)}yield this.restart(s),this.isCpuConstrained=!1;try{for(var c=!0,l=Ai(this.simulcastCodecs.values()),u;u=yield l.next(),n=u.done,!n;c=!0){o=u.value,c=!1;const d=o;d.sender&&((a=d.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){r={error:d}}finally{try{!c&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return O(this,arguments,void 0,function(r){var i=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a,s,c,l,u,d;if(yield n.setProcessor.call(i,r,o),!((u=i.processor)===null||u===void 0)&&u.processedTrack)try{for(var f=!0,h=Ai(i.simulcastCodecs.values()),m;m=yield h.next(),a=m.done,!a;f=!0)l=m.value,f=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(i.processor.processedTrack)}catch(p){s={error:p}}finally{try{!f&&!a&&(c=h.return)&&(yield c.call(h))}finally{if(s)throw s.error}}}()})}setDegradationPreference(e){return O(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},tq))}setPublishingCodecs(e){return O(this,void 0,void 0,function*(){var n,r,i,o,a,s,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Lr(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=Ai(e);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(Lr(u.codec),u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield z1(d.sender,d.encodings,u.qualities,this.senderLock,Lr(u.codec),this.log,this.logContext))}}}catch(u){a={error:u}}finally{try{!n&&!o&&(s=r.return)&&(yield s.call(r))}finally{if(a)throw a.error}}return l})}setPublishingLayers(e,n){return O(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield z1(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return O(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var o;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((o=this.mediaStreamTrack.getSettings().height)!==null&&o!==void 0?o:360)/360)),scalabilityMode:i===0&&Lr(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eD()&&this.isInBackground&&this.source===V.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function z1(t,e,n,r,i,o,a){return O(this,void 0,void 0,function*(){const s=yield r.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:t,qualities:n,senderEncodings:e}));try{const c=t.getParameters(),{encodings:l}=c;if(!l)return;if(l.length!==e.length){o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:l,senderEncodings:e}));return}let u=!1;!1&&l[0].scalabilityMode||(i&&n.some(h=>h.enabled)&&n.forEach(h=>h.enabled=!0),l.forEach((f,h)=>{var m;let p=(m=f.rid)!==null&&m!==void 0?m:"";p===""&&(p="q");const g=uD(p),v=n.find(y=>y.quality===g);v&&f.active!==v.enabled&&(u=!0,f.active=v.enabled,o.debug("setting layer ".concat(v.quality," to ").concat(f.active?"enabled":"disabled"),a),rs()&&(v.enabled?(f.scaleResolutionDownBy=e[h].scaleResolutionDownBy,f.maxBitrate=e[h].maxBitrate,f.maxFrameRate=e[h].maxFrameRate):(f.scaleResolutionDownBy=4,f.maxBitrate=10,f.maxFrameRate=2)))})),u&&(c.encodings=l,o.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:c.encodings})),yield t.setParameters(c))}finally{s()}})}function uD(t){switch(t){case"f":return Vn.HIGH;case"h":return Vn.MEDIUM;case"q":return Vn.LOW;default:return Vn.HIGH}}function q1(t,e,n,r){if(!n)return[new Vo({quality:Vn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new lD(i),a=[],s=o.suffix=="h"?1.5:2,c=o.suffix=="h"?2:3;for(let l=0;l<o.spatial;l+=1)a.push(new Vo({quality:Math.min(Vn.HIGH,o.spatial-1)-l,width:Math.ceil(t/Math.pow(s,l)),height:Math.ceil(e/Math.pow(s,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return a}return n.map(i=>{var o,a,s;const c=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=uD((a=i.rid)!==null&&a!==void 0?a:"");return new Vo({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(s=i.maxBitrate)!==null&&s!==void 0?s:0,ssrc:0})})}const W1="_lossy",V1="_reliable",nq=2*1e3,Xv="leave-reconnect",rq=3e4,iq=8*1024,oq=256*1024;var tr;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(tr||(tr={}));class aq extends pi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Fx.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=tr.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=he,this.reliableDataSequence=1,this.reliableMessageBuffer=new R1,this.reliableReceivedState=new _z(rq),this.lossyDataStatCurrentBytes=0,this.lossyDataStatByterate=0,this.lossyDataDropCount=0,this.midToTrackId={},this.isWaitingForNetworkReconnect=!1,this.handleDataChannel=r=>O(this,[r],void 0,function(i){var o=this;let{channel:a}=i;return function*(){if(a){if(a.label===V1)o.reliableDCSub=a;else if(a.label===W1)o.lossyDCSub=a;else return;o.log.debug("on data channel ".concat(a.id,", ").concat(a.label),o.logContext),a.onmessage=o.handleDataMessage}}()}),this.handleDataMessage=r=>O(this,void 0,void 0,function*(){var i,o,a,s,c;const l=yield this.dataProcessLock.lock();try{let u;if(r.data instanceof ArrayBuffer)u=r.data;else if(r.data instanceof Blob)u=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const d=dn.fromBinary(new Uint8Array(u));if(d.sequence>0&&d.participantSid!==""){const f=this.reliableReceivedState.get(d.participantSid);if(f&&d.sequence<=f)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}if(((i=d.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(Z.ActiveSpeakersUpdate,d.value.value.speakers);else if(((o=d.value)===null||o===void 0?void 0:o.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const f=yield(a=this.e2eeManager)===null||a===void 0?void 0:a.handleEncryptedData(d.value.value.encryptedValue,d.value.value.iv,d.participantIdentity,d.value.value.keyIndex),h=YI.fromBinary(f.payload),m=new dn({value:h.value,participantIdentity:d.participantIdentity,participantSid:d.participantSid});((s=m.value)===null||s===void 0?void 0:s.case)==="user"&&H1(m,m.value.value),this.emit(Z.DataPacketReceived,m,d.value.value.encryptionType)}else((c=d.value)===null||c===void 0?void 0:c.case)==="user"&&H1(d,d.value.value),this.emit(Z.DataPacketReceived,d,Rt.NONE)}finally{l()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:a}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?ye.LOSSY:ye.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(Z.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let s=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(s===null){o(a);return}r===Xv&&(s=0),this.log.debug("reconnecting in ".concat(s,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Vt.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),s)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===tr.Connected&&r();const o=()=>{this.off(Z.Disconnected,a),r()},a=()=>{this.off(Z.Restarted,o),i()};this.once(Z.Restarted,o),this.once(Z.Disconnected,a)}),this.updateAndEmitDCBufferStatus=r=>{if(r===ye.RELIABLE){const o=this.dataChannelForKind(r);o&&this.reliableMessageBuffer.alignBufferedAmount(o.bufferedAmount)}const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Z.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>O(this,void 0,void 0,function*(){!this.url||!(yield fetch(sd(this.url),{method:"HEAD"}).then(i=>i.ok).catch(()=>!1))||(this.log.info("detected network reconnected"),(this.client.currentState===Be.RECONNECTING||this.isWaitingForNetworkReconnect&&this.client.currentState===Be.CONNECTED)&&(this.clearReconnectTimeout(),this.attemptReconnect(ya.RR_SIGNAL_DISCONNECTED),this.isWaitingForNetworkReconnect=!1))}),this.handleBrowserOffline=()=>O(this,void 0,void 0,function*(){if(this.url)try{yield Promise.race([fetch(sd(this.url),{method:"HEAD"}),Ht(4e3).then(()=>Promise.reject())])}catch{window.navigator.onLine===!1&&(this.log.info("detected network interruption"),this.isWaitingForNetworkReconnect=!0)}}),this.log=Ki((n=e.loggerName)!==null&&n!==void 0?n:Vr.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Dx(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new pn,this.dataProcessLock=new pn,this.dcBufferStatus=new Map([[ye.LOSSY,!0],[ye.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Z.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Z.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Z.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Z.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Z.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Z.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Z.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Z.SignalRequestResponse,r)}get logContext(){var e,n,r,i,o,a;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(a=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(e,n,r,i){return O(this,arguments,void 0,function(o,a,s,c){var l=this;let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return function*(){l.url=o,l.token=a,l.signalOpts=s,l.maxJoinAttempts=s.maxRetries;try{l.joinAttempts+=1,l.setupSignalClientCallbacks();const d=yield l.client.join(o,a,s,c,u);return l._isClosed=!1,l.latestJoinResponse=d,l.subscriberPrimary=d.subscriberPrimary,l.pcManager||(yield l.configure(d,!u)),(!l.subscriberPrimary||d.fastPublish)&&l.negotiate().catch(f=>{he.error(f,l.logContext)}),l.registerOnLineListener(),l.clientConfiguration=d.clientConfiguration,l.emit(Z.SignalConnected,d),d}catch(d){if(d instanceof ce){if(d.reason===ze.ServerUnreachable){if(l.log.warn("Couldn't connect to server, attempt ".concat(l.joinAttempts," of ").concat(l.maxJoinAttempts),l.logContext),l.joinAttempts<l.maxJoinAttempts)return l.join(o,a,s,c,u)}else if(d.reason===ze.ServiceNotFound)return l.log.warn("Initial connection failed: ".concat(d.message,"  Retrying")),l.join(o,a,s,c,!0)}throw d}}()})}close(){return O(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Z.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.cleanupLossyDataStats(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return O(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new R1,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupLossyDataStats(){this.lossyDataStatByterate=0,this.lossyDataStatCurrentBytes=0,this.lossyDataStatInterval&&(clearInterval(this.lossyDataStatInterval),this.lossyDataStatInterval=void 0),this.lossyDataDropCount=0}cleanupClient(){return O(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ri("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(ce.timeout("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return O(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e,n){return O(this,void 0,void 0,function*(){var r,i;if(this.pcManager&&this.pcManager.currentState!==st.NEW)return;this.participantSid=(r=e.participant)===null||r===void 0?void 0:r.sid;const o=this.makeRTCConfiguration(e);this.pcManager=new Dz(o,n?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(Z.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,s)=>{this.client.sendIceCandidate(a,s)},this.pcManager.onPublisherOffer=(a,s)=>{this.client.sendOffer(a,s)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,s,c)=>O(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(s)&&(this.publisherConnectionPromise=void 0),a===st.CONNECTED){const d=this.pcState===tr.New;this.pcState=tr.Connected,d&&this.emit(Z.Connected,e)}else a===st.FAILED&&(this.pcState===tr.Connected||this.pcState===tr.Reconnecting)&&(this.pcState=tr.Disconnected,this.handleDisconnect("peerconnection failed",c==="failed"?ya.RR_SUBSCRIBER_FAILED:ya.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===Be.RECONNECTING,u=[st.FAILED,st.CLOSING,st.CLOSED].includes(a);l&&u&&!this._isClosed&&this.emit(Z.Offline)}),this.pcManager.onTrack=a=>{a.streams.length!==0&&this.emit(Z.MediaTrackAdded,a.track,a.streams[0],a.receiver)},sq((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,r)=>O(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,r)=>O(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Z.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Z.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{var n;this.token=e,(n=this.regionUrlProvider)===null||n===void 0||n.updateToken(e)},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Z.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Z.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Z.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,r;const i={direction:"recvonly"};for(let o=0;o<e.numAudios;o++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",i);for(let o=0;o<e.numVideos;o++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",i);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",ya.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:aD,regionSettings:e.regions})),e.action){case tc.DISCONNECT:this.emit(Z.Disconnected,e==null?void 0:e.reason),this.close();break;case tc.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Xv);break;case tc.RESUME:this.handleDisconnect(Xv)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const a={urls:o.urls};o.username&&(a.username=o.username),o.credential&&(a.credential=o.credential),i.push(a)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===nd.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(W1,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(V1,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow,this.cleanupLossyDataStats(),this.lossyDataStatInterval=setInterval(()=>{this.lossyDataStatByterate=this.lossyDataStatCurrentBytes,this.lossyDataStatCurrentBytes=0;const e=this.dataChannelForKind(ye.LOSSY);if(e){const n=this.lossyDataStatByterate/10;e.bufferedAmountLowThreshold=Math.min(Math.max(n,iq),oq)}},1e3))}createSender(e,n,r){return O(this,void 0,void 0,function*(){if(mb())return yield this.createTransceiverRTCRtpSender(e,n,r);if(gb())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new ft("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return O(this,void 0,void 0,function*(){if(mb())return this.createSimulcastTransceiverSender(e,n,r,i);if(gb())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new ft("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new ft("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),oa(e)&&(e.codec=n.videoCodec);const o={direction:"sendonly",streams:i};return r&&(o.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(e,n,r,i){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new ft("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,a.sender),a.sender})}createRTCRtpSender(e){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new ft("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return O(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){he.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===nd.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:st.NEW)===st.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let a=!0;o instanceof ft?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),a=!1):o instanceof xs||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",ya.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Z.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return O(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new ft("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Z.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new xs;o=yield this.join(e??this.url,this.token,this.signalOpts,void 0,!this.options.singlePeerConnection)}catch(a){throw a instanceof ce&&a.reason===ze.NotAllowed?new ft("could not reconnect, token might be expired"):new xs}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Z.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Be.CONNECTED)throw new xs("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Z.Restarted)}catch(o){const a=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){return O(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new ft("could not reconnect, url or token not saved");if(!this.pcManager)throw new ft("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Z.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let o="";throw i instanceof Error&&(o=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof ce&&i.reason===ze.NotAllowed?new ft("could not reconnect, token might be expired"):i instanceof ce&&i.reason===ze.LeaveRequest?i:new xs(o)}if(this.emit(Z.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Be.CONNECTED)throw new xs("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(Z.Resumed)})}waitForPCInitialConnection(e,n){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new ft("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return O(this,void 0,void 0,function*(){this.pcState=tr.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Ht(nq),!this.pcManager)throw new ft("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=tr.Connected}catch(e){throw this.pcState=tr.Disconnected,ce.internal("could not establish PC connection, ".concat(e.message))}})}publishRpcResponse(e,n,r,i){return O(this,void 0,void 0,function*(){const o=new dn({destinationIdentities:[e],kind:ye.RELIABLE,value:{case:"rpcResponse",value:new kx({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(o,ye.RELIABLE)})}publishRpcAck(e,n){return O(this,void 0,void 0,function*(){const r=new dn({destinationIdentities:[e],kind:ye.RELIABLE,value:{case:"rpcAck",value:new xx({requestId:n})}});yield this.sendDataPacket(r,ye.RELIABLE)})}sendDataPacket(e,n){return O(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const o=mz(e);if(o){const a=yield this.e2eeManager.encryptData(o.toBinary());e.value={case:"encryptedPacket",value:new GI({encryptedValue:a.payload,iv:a.iv,keyIndex:a.keyIndex})}}}n===ye.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===ye.RELIABLE)yield this.waitForBufferStatusLow(n),this.reliableMessageBuffer.push({data:r,sequence:e.sequence});else{if(!this.isBufferStatusLow(n)){this.lossyDataDropCount+=1,this.lossyDataDropCount%100===0&&this.log.warn("dropping lossy data channel messages, total dropped: ".concat(this.lossyDataDropCount),this.logContext);return}this.lossyDataStatCurrentBytes+=r.byteLength}if(this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return O(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(ye.RELIABLE);const n=this.dataChannelForKind(ye.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(ye.RELIABLE)})}waitForBufferStatusLow(e){return new Cn((n,r)=>O(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r(new ft("engine closed"));for(this.once(Z.Closing,i);!this.dcBufferStatus.get(e);)yield Ht(10);this.off(Z.Closing,i),n()}}))}ensureDataTransportConnected(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var o;if(!r.pcManager)throw new ft("PC manager is closed");const a=i?r.pcManager.subscriber:r.pcManager.publisher,s=i?"Subscriber":"Publisher";if(!a)throw ce.internal("".concat(s," connection not set"));let c=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),c=!0),!c&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&r.negotiate().catch(d=>{he.error(d,r.logContext)});const l=r.dataChannelForKind(n,i);if((l==null?void 0:l.readyState)==="open")return;const u=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<u;){if(a.isICEConnected&&((o=r.dataChannelForKind(n,i))===null||o===void 0?void 0:o.readyState)==="open")return;yield Ht(50)}throw ce.internal("could not establish ".concat(s," connection, state: ").concat(a.getICEConnectionState()))}()})}ensurePublisherConnected(e){return O(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==st.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return O(this,void 0,void 0,function*(){return new Cn((e,n)=>O(this,void 0,void 0,function*(){if(!this.pcManager){n(new rc("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n(new rc("cannot negotiate on closed engine")),this.on(Z.Closing,i),this.pcManager.publisher.once(sc.RTPVideoPayloadTypes,o=>{const a=new Map;o.forEach(s=>{const c=s.codec.toLowerCase();J8(c)&&a.set(s.payload,c)}),this.emit(Z.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof rc&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ya.RR_UNKNOWN),o instanceof Error?n(o):n(new Error(String(o)))}finally{this.off(Z.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===ye.LOSSY)return this.lossyDCSub;if(e===ye.RELIABLE)return this.reliableDCSub}else{if(e===ye.LOSSY)return this.lossyDC;if(e===ye.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i,o,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.publisher.getLocalDescription(),c=this.pcManager.publisher.getRemoteDescription(),l=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),u=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getLocalDescription(),d=(a=(o=this.signalOpts)===null||o===void 0?void 0:o.autoSubscribe)!==null&&a!==void 0?a:!0,f=new Array,h=new Array;e.forEach(m=>{m.isDesired!==d&&f.push(m.trackSid),m.isEnabled||h.push(m.trackSid)}),this.client.sendSyncState(new Px({answer:this.pcManager.mode==="publisher-only"?c?qs({sdp:c.sdp,type:c.type}):void 0:u?qs({sdp:u.sdp,type:u.type}):void 0,offer:this.pcManager.mode==="publisher-only"?s?qs({sdp:s.sdp,type:s.type}):void 0:l?qs({sdp:l.sdp,type:l.type}):void 0,subscription:new ng({trackSids:f,subscribe:!d,participantTracks:[]}),publishTracks:D8(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:h,datachannelReceiveStates:this.reliableReceivedState.map((m,p)=>new pN({publisherSid:p,lastSeq:m}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new mN({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(ye.LOSSY),jr.PUBLISHER),n(this.dataChannelForKind(ye.RELIABLE),jr.PUBLISHER),n(this.dataChannelForKind(ye.LOSSY,!0),jr.SUBSCRIBER),n(this.dataChannelForKind(ye.RELIABLE,!0),jr.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Vt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){_n()&&(window.addEventListener("online",this.handleBrowserOnLine),window.addEventListener("offline",this.handleBrowserOffline))}deregisterOnLineListener(){_n()&&(window.removeEventListener("online",this.handleBrowserOnLine),window.removeEventListener("offline",this.handleBrowserOffline))}getTrackIdForReceiver(e){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(r){const i=Object.entries(this.midToTrackId).find(o=>{let[a]=o;return a===r});if(i)return i[1]}}}function sq(t){return t!==void 0&&t>13}function H1(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class dD{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new nr("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),ln.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new nr("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),ln.LengthExceeded)}}constructor(e,n,r,i){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class cq extends dD{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new ur,r=null,i=null;if(this.signal){const a=this.signal;i=()=>{var s;(s=n.reject)===null||s===void 0||s.call(n,a.reason)},a.addEventListener("abort",i),r=a}const o=()=>{e.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>O(this,void 0,void 0,function*(){var a,s;try{const{done:c,value:l}=yield Promise.race([e.read(),n.promise,(s=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&s!==void 0?s:new Promise(()=>{})]);return c?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(l),{done:!1,value:l.content})}catch(c){throw o(),c}}),return(){return O(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,o,a;let s=new Set;const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var l=!0,u=Ai(c),d;d=yield u.next(),r=d.done,!r;l=!0){a=d.value,l=!1;const f=a;s.add(f)}}catch(f){i={error:f}}finally{try{!l&&!r&&(o=u.return)&&(yield o.call(u))}finally{if(i)throw i.error}}return Array.from(s)}()})}}class lq extends dD{constructor(e,n,r,i){super(e,n,r,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=Fh(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new ur,i=null,o=null;if(this.signal){const s=this.signal;o=()=>{var c;(c=r.reject)===null||c===void 0||c.call(r,s.reason)},s.addEventListener("abort",o),i=s}const a=()=>{e.releaseLock(),i&&o&&i.removeEventListener("abort",o),this.signal=void 0};return{next:()=>O(this,void 0,void 0,function*(){var s,c;try{const{done:l,value:u}=yield Promise.race([e.read(),r.promise,(c=(s=this.outOfBandFailureRejectingFuture)===null||s===void 0?void 0:s.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);if(l)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(u);let d;try{d=n.decode(u.content)}catch(f){throw new nr("Cannot decode datastream chunk ".concat(u.chunkIndex," as text: ").concat(f),ln.DecodeFailed)}return{done:!1,value:d}}}catch(l){throw a(),l}}),return(){return O(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,o,a;let s="";const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var l=!0,u=Ai(c),d;d=yield u.next(),r=d.done,!r;l=!0)a=d.value,l=!1,s+=a}catch(f){i={error:f}}finally{try{!l&&!r&&(o=u.return)&&(yield o.call(u))}finally{if(i)throw i.error}}return s}()})}}class uq{constructor(){this.log=he,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new nr('A text stream handler for topic "'.concat(e,'" has already been set.'),ln.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new nr('A byte stream handler for topic "'.concat(e,'" has already been set.'),ln.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,i,o;const a=Array.from(this.textStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e),s=Array.from(this.byteStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e);if(a.length>0||s.length>0){const c=new nr("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),ln.AbnormalEnd);for(const[l,u]of s)(r=(n=u.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,c),this.byteStreamControllers.delete(l);for(const[l,u]of a)(o=(i=u.outOfBandFailureRejectingFuture).reject)===null||o===void 0||o.call(i,c),this.textStreamControllers.delete(l)}}handleDataStreamPacket(e,n){return O(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return O(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const o=this.byteStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const s=new ur;s.promise.catch(u=>{this.log.error(u)});const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Fh(e.timestamp),attributes:e.attributes,encryptionType:r},l=new ReadableStream({start:u=>{if(a=u,this.textStreamControllers.has(e.streamId))throw new nr("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ln.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:s})}});o(new cq(c,l,Fh(e.totalLength),s),{identity:n})}else if(e.contentHeader.case==="textHeader"){const o=this.textStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const s=new ur;s.promise.catch(u=>{this.log.error(u)});const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},l=new ReadableStream({start:u=>{if(a=u,this.textStreamControllers.has(e.streamId))throw new nr("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ln.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:s})}});o(new lq(c,l,Fh(e.totalLength),s),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new nr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ln.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new nr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ln.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new nr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ln.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new nr("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ln.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class fD{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return O(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class dq extends fD{}class fq extends fD{}const K1=15e3;class hq{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return O(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),a=new TextEncoder().encode(e).byteLength,s=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),c=new Array(s?s.length+1:1).fill(0),l=(d,f)=>{var h;c[f]=d;const m=c.reduce((p,g)=>p+g,0);(h=n==null?void 0:n.onProgress)===null||h===void 0||h.call(n,m)},u=yield this.streamText({streamId:i,totalSize:a,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:s,attributes:n==null?void 0:n.attributes});return yield u.write(e),l(1,0),yield u.close(),n!=null&&n.attachments&&s&&(yield Promise.all(n.attachments.map((d,f)=>O(this,void 0,void 0,function*(){return this._sendFile(s[f],d,{topic:n.topic,mimeType:d.type,onProgress:h=>{l(h,f+1)}})})))),u.info})}streamText(e){return O(this,void 0,void 0,function*(){var n,r,i;const o=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:o,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?Rt.GCM:Rt.NONE},s=new Sp({streamId:o,mimeType:a.mimeType,topic:a.topic,timestamp:ba(a.timestamp),totalLength:ba(e==null?void 0:e.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new aN({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?tb.UPDATE:tb.CREATE})}}),c=e==null?void 0:e.destinationIdentities,l=new dn({destinationIdentities:c,value:{case:"streamHeader",value:s}});yield this.engine.sendDataPacket(l,ye.RELIABLE);let u=0;const d=this.engine,f=new WritableStream({write(p){return O(this,void 0,void 0,function*(){for(const g of iz(p,K1)){const v=new xp({content:g,streamId:o,chunkIndex:ba(u)}),y=new dn({destinationIdentities:c,value:{case:"streamChunk",value:v}});yield d.sendDataPacket(y,ye.RELIABLE),u+=1}})},close(){return O(this,void 0,void 0,function*(){const p=new kp({streamId:o}),g=new dn({destinationIdentities:c,value:{case:"streamTrailer",value:p}});yield d.sendDataPacket(g,ye.RELIABLE)})},abort(p){console.log("Sink error:",p)}});let h=()=>O(this,void 0,void 0,function*(){yield m.close()});d.once(Z.Closing,h);const m=new dq(f,a,()=>this.engine.off(Z.Closing,h));return m})}sendFile(e,n){return O(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return O(this,void 0,void 0,function*(){var i;const o=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:s,value:c}=yield a.read();if(s)break;yield o.write(c)}return yield o.close(),o.info})}streamBytes(e){return O(this,void 0,void 0,function*(){var n,r,i,o,a,s;const c=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l=e==null?void 0:e.destinationIdentities,u={id:c,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(o=e==null?void 0:e.name)!==null&&o!==void 0?o:"unknown",encryptionType:!((a=this.engine.e2eeManager)===null||a===void 0)&&a.isDataChannelEncryptionEnabled?Rt.GCM:Rt.NONE},d=new Sp({totalLength:ba((s=u.size)!==null&&s!==void 0?s:0),mimeType:u.mimeType,streamId:c,topic:u.topic,timestamp:ba(Date.now()),attributes:u.attributes,contentHeader:{case:"byteHeader",value:new sN({name:u.name})}}),f=new dn({destinationIdentities:l,value:{case:"streamHeader",value:d}});yield this.engine.sendDataPacket(f,ye.RELIABLE);let h=0;const m=new pn,p=this.engine,g=this.log,v=new WritableStream({write(w){return O(this,void 0,void 0,function*(){const S=yield m.lock();let b=0;try{for(;b<w.byteLength;){const x=w.slice(b,b+K1),T=new dn({destinationIdentities:l,value:{case:"streamChunk",value:new xp({content:x,streamId:c,chunkIndex:ba(h)})}});yield p.sendDataPacket(T,ye.RELIABLE),h+=1,b+=x.byteLength}}finally{S()}})},close(){return O(this,void 0,void 0,function*(){const w=new kp({streamId:c}),S=new dn({destinationIdentities:l,value:{case:"streamTrailer",value:w}});yield p.sendDataPacket(S,ye.RELIABLE)})},abort(w){g.error("Sink error:",w)}});return new fq(v,u)})}}class hD extends V{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?J.Muted:J.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(J.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return O(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Bx)),j8()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:o}=r;o&&this.rtpTimestamp!==o&&(this.emit(J.TimeSyncUpdate,{timestamp:i,rtpTimestamp:o}),this.rtpTimestamp=o)}};e()}}class pq extends hD{constructor(e,n,r,i,o,a){super(e,n,V.Kind.Audio,r,a),this.monitorReceiver=()=>O(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=og(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;di()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(di())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return O(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(vb(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&vb(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(J.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(J.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return O(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Qv=100;class mq extends hD{constructor(e,n,r,i,o){super(e,n,V.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>O(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=og(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=Lx(()=>{this.updateDimensions()},Qv),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),this.log.debug("setStreamState",e),this.isAdaptiveStream&&e===V.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?ic(this._mediaStreamTrack,n):zs(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new gq(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return O(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const i=this.elementInfos.reduce((c,l)=>Math.max(c,l.visibilityChangedAt||0),0),o=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,a=this.elementInfos.some(c=>c.pictureInPicture),s=this.elementInfos.some(c=>c.visible)&&!o||a;if(!(this.lastVisible===s&&!e)){if(!s&&Date.now()-i<Qv){Vt.setTimeout(()=>{this.updateVisibility()},Qv);return}this.lastVisible=s,this.emit(J.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const a of this.elementInfos){const s=a.width()*o,c=a.height()*o;s+c>r+i&&(r=s,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(J.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?S1():n||(S1()>2?2:1)}}class gq{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:a}=r;o===this.element&&(this.isIntersecting=a,this.isPiP=Hl(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,o;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Hl(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Hl(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??kb(e),this.isPiP=_n()&&Hl(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=kb(this.element),this.isPiP=Hl(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,k1().observe(this.element),x1().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,o;(e=k1())===null||e===void 0||e.unobserve(this.element),(n=x1())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(o=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function Hl(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?kb(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function kb(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const o=t.offsetWidth,a=t.offsetHeight,{hidden:s}=t,{display:c}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+a>n.pageYOffset&&i+o>n.pageXOffset&&!s&&c!=="none"}class ki extends pi.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=Rt.NONE,this.log=he,this.handleMuted=()=>{this.emit(J.Muted)},this.handleUnmuted=()=>{this.emit(J.Unmuted)},this.log=Ki((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:Vr.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=V.Source.Unknown}setTrack(e){this.track&&(this.track.off(J.Muted,this.handleMuted),this.track.off(J.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(J.Muted,this.handleMuted),e.on(J.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),be(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Rt.NONE}get audioTrack(){if(si(this.track))return this.track}get videoTrack(){if(oa(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=V.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===V.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(ki||(ki={}));class Tb extends ki{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(J.Ended)},this.handleCpuConstrained=()=>{this.track&&oa(this.track)&&this.emit(J.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(J.Ended,this.handleTrackEnded),this.track.off(J.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(J.Ended,this.handleTrackEnded),e.on(J.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return O(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return O(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return O(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return O(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(si(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add($t.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add($t.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add($t.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add($t.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add($t.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add($t.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function ag(t,e){return O(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:o}=ZN(t);let a=o.audio,s=o.video;if(r&&typeof o.audio=="object"&&(o.audio.processor=r),i&&typeof o.video=="object"&&(o.video.processor=i),t.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const d=o.audio.deviceId;o.audio.deviceId={exact:d},n=!0,a=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:d}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const d=o.video.deviceId;o.video.deviceId={exact:d},n=!0,s=Object.assign(Object.assign({},o.video),{deviceId:{ideal:d}})}o.audio===!0?o.audio={deviceId:"default"}:typeof o.audio=="object"&&o.audio!==null&&(o.audio=Object.assign(Object.assign({},o.audio),{deviceId:o.audio.deviceId||"default"})),o.video===!0?o.video={deviceId:"default"}:typeof o.video=="object"&&!o.video.deviceId&&(o.video.deviceId="default");const c=XN(o,iD,oD),l=Ix(c),u=navigator.mediaDevices.getUserMedia(l);o.audio&&(Ft.userMediaPromiseMap.set("audioinput",u),u.catch(()=>Ft.userMediaPromiseMap.delete("audioinput"))),o.video&&(Ft.userMediaPromiseMap.set("videoinput",u),u.catch(()=>Ft.userMediaPromiseMap.delete("videoinput")));try{const d=yield u;return yield Promise.all(d.getTracks().map(f=>O(this,void 0,void 0,function*(){const h=f.kind==="audio";let m=h?c.audio:c.video;(typeof m=="boolean"||!m)&&(m={});let p;const g=h?l.audio:l.video;typeof g!="boolean"&&(p=g);const v=f.getSettings().deviceId;p!=null&&p.deviceId&&Ho(p.deviceId)!==v?p.deviceId=v:p||(p={deviceId:v});const y=Wz(f,p,e);return y.kind===V.Kind.Video?y.source=V.Source.Camera:y.kind===V.Kind.Audio&&(y.source=V.Source.Microphone),y.mediaStream=d,si(y)&&r?yield y.setProcessor(r):oa(y)&&i&&(yield y.setProcessor(i)),y})))}catch(d){if(!n)throw d;return ag(Object.assign(Object.assign({},t),{audio:a,video:s}),e)}})}function vq(t){return O(this,void 0,void 0,function*(){return(yield ag({audio:!1,video:!0}))[0]})}function pD(t){return O(this,void 0,void 0,function*(){return(yield ag({audio:t??!0,video:!1}))[0]})}var yo;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(yo||(yo={}));function yq(t){switch(t){case hu.EXCELLENT:return yo.Excellent;case hu.GOOD:return yo.Good;case hu.POOR:return yo.Poor;case hu.LOST:return yo.Lost;default:return yo.Unknown}}class mD extends pi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===rd.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===ec.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,o,a){let s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:rd.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=yo.Unknown,this.log=he,this.log=Ki((c=a==null?void 0:a.loggerName)!==null&&c!==void 0?c:Vr.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new ur,this.once(te.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(V.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(V.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(V.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===ec.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==ec.ACTIVE&&this.emit(te.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(te.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(te.ParticipantNameChanged,e)}_setAttributes(e){const n=L8(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(te.AttributesChanged,n)}setPermissions(e){var n,r,i,o,a,s;const c=this.permissions,l=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((u,d)=>{var f;return u!==((f=this.permissions)===null||f===void 0?void 0:f.canPublishSources[d])})||e.canSubscribeMetrics!==((s=this.permissions)===null||s===void 0?void 0:s.canSubscribeMetrics);return this.permissions=e,l&&this.emit(te.ParticipantPermissionsChanged,c),l}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(te.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=yq(e),n!==this._connectionQuality&&this.emit(te.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>si(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(J.Muted,()=>{this.emit(te.TrackMuted,e)}),e.on(J.Unmuted,()=>{this.emit(te.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case V.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case V.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function bq(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new fN({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class wq extends mD{constructor(e,n,r,i,o,a){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Rt.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ur)},this.handleReconnected=()=>{var s,c;(c=(s=this.reconnectFuture)===null||s===void 0?void 0:s.resolve)===null||c===void 0||c.call(s),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var s,c,l,u,d,f;this.reconnectFuture&&(this.reconnectFuture.promise.catch(h=>this.log.warn(h.message,this.logContext)),(c=(s=this.reconnectFuture)===null||s===void 0?void 0:s.reject)===null||c===void 0||c.call(s,new Error("Got disconnected during reconnection attempt")),this.reconnectFuture=void 0),this.signalConnectedFuture&&((u=(l=this.signalConnectedFuture).reject)===null||u===void 0||u.call(l,new Error("Got disconnected without signal connected")),this.signalConnectedFuture=void 0),(f=(d=this.activeAgentFuture)===null||d===void 0?void 0:d.reject)===null||f===void 0||f.call(d,new Error("Got disconnected without active agent present")),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=s=>{var c,l;s.participant&&this.updateInfo(s.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ur),(l=(c=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(c)},this.handleSignalRequestResponse=s=>{const{requestId:c,reason:l,message:u}=s,d=this.pendingSignalRequests.get(c);d&&(l!==Ox.OK&&d.reject(new g1(u,l)),this.pendingSignalRequests.delete(c))},this.handleDataPacket=s=>{switch(s.value.case){case"rpcResponse":let c=s.value.value,l=null,u=null;c.value.case==="payload"?l=c.value.value:c.value.case==="error"&&(u=dt.fromProto(c.value.value)),this.handleIncomingRpcResponse(c.requestId,l,u);break;case"rpcAck":let d=s.value.value;this.handleIncomingRpcAck(d.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(s=>bq(s)))},this.onTrackUnmuted=s=>{this.onTrackMuted(s,s.isUpstreamPaused)},this.onTrackMuted=(s,c)=>{if(c===void 0&&(c=!0),!s.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),be(s)));return}this.engine.updateMuteStatus(s.sid,c)},this.onTrackUpstreamPaused=s=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),be(s))),this.onTrackMuted(s,!0)},this.onTrackUpstreamResumed=s=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),be(s))),this.onTrackMuted(s,s.isMuted)},this.onTrackFeatureUpdate=s=>{const c=this.audioTrackPublications.get(s.sid);if(!c){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(s.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(c.trackSid,c.getTrackFeatures())},this.onTrackCpuConstrained=(s,c)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),be(c))),this.emit(te.LocalTrackCpuConstrained,s,c)},this.handleSubscribedQualityUpdate=s=>O(this,void 0,void 0,function*(){var c,l,u,d,f;if(!(!((f=this.roomOptions)===null||f===void 0)&&f.dynacast))return;const h=this.videoTrackPublications.get(s.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}if(!h.videoTrack)return;const m=yield h.videoTrack.setPublishingCodecs(s.subscribedCodecs);try{for(var p=!0,g=Ai(m),v;v=yield g.next(),c=v.done,!c;p=!0){d=v.value,p=!1;const y=d;M8(y)&&(this.log.debug("publish ".concat(y," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),be(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,y,h.options))}}catch(y){l={error:y}}finally{try{!p&&!c&&(u=g.return)&&(yield u.call(g))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=s=>{const c=this.trackPublications.get(s.trackSid);if(!c){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}this.unpublishTrack(c.track)},this.handleTrackEnded=s=>O(this,void 0,void 0,function*(){if(s.source===V.Source.ScreenShare||s.source===V.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),be(s))),this.unpublishTrack(s);else if(s.isUserProvided)yield s.mute();else if(wi(s)||co(s))try{if(_n())try{const c=yield navigator==null?void 0:navigator.permissions.query({name:s.source===V.Source.Camera?"camera":"microphone"});if(c&&c.state==="denied")throw this.log.warn("user has revoked access to ".concat(s.source),Object.assign(Object.assign({},this.logContext),be(s))),c.onchange=()=>{c.state!=="denied"&&(s.isMuted||s.restartTrack(),c.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}s.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),be(s))),wi(s)?yield s.restartTrack({deviceId:"default"}):yield s.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),be(s))),yield s.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o,this.roomOutgoingDataStreamManager=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Rt.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(Z.RemoteMute,(r,i)=>{const o=this.trackPublications.get(r);!o||!o.track||(i?o.mute():o.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Z.Connected,this.handleReconnected).on(Z.SignalConnected,this.handleSignalConnected).on(Z.SignalRestarted,this.handleReconnected).on(Z.SignalResumed,this.handleReconnected).on(Z.Restarting,this.handleReconnecting).on(Z.Resuming,this.handleReconnecting).on(Z.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Z.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Z.Closing,this.handleClosing).on(Z.SignalRequestResponse,this.handleSignalRequestResponse).on(Z.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return O(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:o,attributes:a}=n;return function*(){return new Cn((s,c)=>O(r,void 0,void 0,function*(){var l,u;try{let d=!1;const f=yield this.engine.client.sendUpdateLocalMetadata((l=i??this.metadata)!==null&&l!==void 0?l:"",(u=o??this.name)!==null&&u!==void 0?u:"",a),h=performance.now();for(this.pendingSignalRequests.set(f,{resolve:s,reject:m=>{c(m),d=!0},values:{name:o,metadata:i,attributes:a}});performance.now()-h<5e3&&!d;){if((!o||this.name===o)&&(!i||this.metadata===i)&&(!a||Object.entries(a).every(m=>{let[p,g]=m;return this.attributes[p]===g||g===""&&!this.attributes[p]}))){this.pendingSignalRequests.delete(f),s();return}yield Ht(50)}c(new g1("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error?c(d):c(new Error(String(d)))}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(V.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(V.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(V.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return O(this,void 0,void 0,function*(){this.encryptionType=e?Rt.GCM:Rt.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return O(this,void 0,void 0,function*(){var o,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let s=this.getTrackPublication(e);if(n)if(s)yield s.unmute();else{let c;if(this.pendingPublishing.has(e)){const l=yield this.waitForPendingPublicationOfSource(e);return l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield l==null?void 0:l.unmute(),l}this.pendingPublishing.add(e);try{switch(e){case V.Source.Camera:c=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case V.Source.Microphone:c=yield this.createTracks({audio:(a=r)!==null&&a!==void 0?a:!0});break;case V.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ri(e)}}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&this.emit(te.MediaDevicesError,l,pb(e)),this.pendingPublishing.delete(e),l}for(const l of c){const u=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===V.Source.Microphone&&si(l)&&u.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),l.startPreConnectBuffer())}try{const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),be(d))),l.push(this.publishTrack(d,i));[s]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l}finally{this.pendingPublishing.delete(e)}}else if(!(s!=null&&s.track)&&this.pendingPublishing.has(e)&&(s=yield this.waitForPendingPublicationOfSource(e),s||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),s&&s.track)if(e===V.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const c=this.getTrackPublication(V.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield s.mute();return s})}enableCameraAndMicrophone(){return O(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(V.Source.Camera)||this.pendingPublishing.has(V.Source.Microphone))){this.pendingPublishing.add(V.Source.Camera),this.pendingPublishing.add(V.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(V.Source.Camera),this.pendingPublishing.delete(V.Source.Microphone)}}})}createTracks(e){return O(this,void 0,void 0,function*(){var n,r;e??(e={});const i=XN(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield ag(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(s=>(si(s)&&(this.microphoneError=void 0,s.setAudioContext(this.audioContext),s.source=V.Source.Microphone,this.emit(te.AudioStreamAcquired)),oa(s)&&(this.cameraError=void 0,s.source=V.Source.Camera),s))}catch(o){throw o instanceof Error&&(e.audio&&(this.microphoneError=o),e.video&&(this.cameraError=o)),o}})}createScreenTracks(e){return O(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new Rx("getDisplayMedia not supported");e.resolution===void 0&&!H8()&&(e.resolution=Mx.h1080fps30.resolution);const n=N8(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Ri("no video track found");const o=new _p(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=V.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const a=[o];if(r.getAudioTracks().length>0){this.emit(te.AudioStreamAcquired);const s=new Cp(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=V.Source.ScreenShareAudio,a.push(s)}return a})}publishTrack(e,n){return O(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return O(this,arguments,void 0,function(r,i){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var s,c,l,u;wi(r)&&r.setAudioContext(o.audioContext),yield(s=o.reconnectFuture)===null||s===void 0?void 0:s.promise,o.republishPromise&&!a&&(yield o.republishPromise),oc(r)&&o.pendingPublishPromises.has(r)&&(yield o.pendingPublishPromises.get(r));let d;if(r instanceof MediaStreamTrack)d=r.getConstraints();else{d=r.constraints;let v;switch(r.source){case V.Source.Microphone:v="audioinput";break;case V.Source.Camera:v="videoinput"}v&&o.activeDeviceMap.has(v)&&(d=Object.assign(Object.assign({},d),{deviceId:o.activeDeviceMap.get(v)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Cp(r,d,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":r=new _p(r,d,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new Ri("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let f;if(o.trackPublications.forEach(v=>{v.track&&v.track===r&&(f=v)}),f)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),be(f))),f;const h=Object.assign(Object.assign({},o.roomOptions.publishDefaults),i),m="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,p=(c=h.forceStereo)!==null&&c!==void 0?c:m;p&&(h.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),be(r))),h.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(l=h.dtx)!==null&&l!==void 0||(h.dtx=!1),(u=h.red)!==null&&u!==void 0||(h.red=!1)),!G8()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),h.simulcast=!1),h.source&&(r.source=h.source);const g=new Promise((v,y)=>O(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Be.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:be(r)}));let w=!1;const S=setTimeout(()=>{w=!0,r.stop(),y(new m1("publishing rejected as engine not connected within timeout",408))},15e3);if(yield this.waitUntilEngineConnected(),clearTimeout(S),w)return;const b=yield this.publish(r,h,p);v(b)}else try{const w=yield this.publish(r,h,p);v(w)}catch(w){y(w)}}catch(w){y(w)}}));o.pendingPublishPromises.set(r,g);try{return yield g}catch(v){throw v}finally{o.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ur),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),be(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>$8(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),be(e))),!1)}publish(e,n,r){return O(this,void 0,void 0,function*(){var i,o,a,s,c,l,u,d,f,h;if(!this.hasPermissionsToPublish(e))throw new m1("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(_=>oc(e)&&_.source===e.source)&&e.source!==V.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),be(e))),n.stopMicTrackOnMute&&si(e)&&(e.stopOnMute=!0),e.source===V.Source.ScreenShare&&rs()&&(n.simulcast=!1),n.videoCodec==="av1"&&!q8()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!W8()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=wb),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(_=>n.videoCodec===Eu(_.mime))||(n.videoCodec=Eu(this.enabledPublishVideoCodecs[0].mime)));const p=n.videoCodec;e.on(J.Muted,this.onTrackMuted),e.on(J.Unmuted,this.onTrackUnmuted),e.on(J.Ended,this.handleTrackEnded),e.on(J.UpstreamPaused,this.onTrackUpstreamPaused),e.on(J.UpstreamResumed,this.onTrackUpstreamResumed),e.on(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const g=[],v=!(!((i=n.dtx)!==null&&i!==void 0)||i),y=e.getSourceTrackSettings();y.autoGainControl&&g.push($t.TF_AUTO_GAIN_CONTROL),y.echoCancellation&&g.push($t.TF_ECHO_CANCELLATION),y.noiseSuppression&&g.push($t.TF_NOISE_SUPPRESSION),y.channelCount&&y.channelCount>1&&g.push($t.TF_STEREO),v&&g.push($t.TF_NO_DTX),wi(e)&&e.hasPreConnectBuffer&&g.push($t.TF_PRECONNECT_BUFFER);const w=new id({cid:e.mediaStreamTrack.id,name:n.name,type:V.kindToProto(e.kind),muted:e.isMuted,source:V.sourceToProto(e.source),disableDtx:v,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:g});let S;if(e.kind===V.Kind.Video){let _={width:0,height:0};try{_=yield e.waitForDimensions()}catch{const A=(s=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&s!==void 0?s:od.h720.resolution;_={width:A.width,height:A.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),be(e)),{dims:_}))}w.width=_.width,w.height=_.height,co(e)&&(Lr(p)&&(e.source===V.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),be(e))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),w.simulcastCodecs=[new rb({codec:p,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:wb}),n.backupCodec&&p!==n.backupCodec.codec&&w.encryption===Rt.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),w.simulcastCodecs.push(new rb({codec:n.backupCodec.codec,cid:""})))),S=xb(e.source===V.Source.ScreenShare,w.width,w.height,n),w.layers=q1(w.width,w.height,S,Lr(n.videoCodec))}else e.kind===V.Kind.Audio&&(S=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(h=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&h!==void 0?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new ft("cannot publish track when not connected");const b=()=>O(this,void 0,void 0,function*(){var _,E,A;if(!this.engine.pcManager)throw new ft("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,S),this.emit(te.LocalSenderCreated,e.sender,e),co(e)&&((_=n.degradationPreference)!==null&&_!==void 0||(n.degradationPreference=eq(e)),e.setDegradationPreference(n.degradationPreference)),S)if(rs()&&e.kind===V.Kind.Audio){let P;for(const L of this.engine.pcManager.publisher.getTransceivers())if(L.sender===e.sender){P=L;break}P&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:P,codec:"opus",maxbr:!((E=S[0])===null||E===void 0)&&E.maxBitrate?S[0].maxBitrate/1e3:0})}else e.codec&&Lr(e.codec)&&(!((A=S[0])===null||A===void 0)&&A.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:w.cid,codec:e.codec,maxbr:S[0].maxBitrate/1e3});yield this.engine.negotiate()});let x;const T=new Promise((_,E)=>O(this,void 0,void 0,function*(){var A;try{x=yield this.engine.addTrack(w),_(x)}catch(P){e.sender&&(!((A=this.engine.pcManager)===null||A===void 0)&&A.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(L=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),be(e)),{error:L}))})),E(P)}}));if(this.enabledPublishVideoCodecs.length>0)x=(yield Promise.all([T,b()]))[0];else{x=yield T;let _;if(x.codecs.forEach(E=>{_===void 0&&(_=E.mimeType)}),_&&e.kind===V.Kind.Video){const E=Eu(_);E!==p&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),be(e)),{codec:E})),n.videoCodec=E,S=xb(e.source===V.Source.ScreenShare,w.width,w.height,n))}yield b()}const C=new Tb(e.kind,x,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(C.on(J.CpuConstrained,_=>this.onTrackCpuConstrained(_,C)),C.options=n,e.sid=x.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:S,trackInfo:x})),co(e)?e.startMonitor(this.engine.client):wi(e)&&e.startMonitor(),this.addTrackPublication(C),this.emit(te.LocalTrackPublished,C),wi(e)&&x.audioFeatures.includes($t.TF_PRECONNECT_BUFFER)){const _=e.getPreConnectBuffer(),E=e.getPreConnectBufferMimeType();this.on(te.LocalTrackSubscribed,A=>{if(A.trackSid===x.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),be(e))),e.stopPreConnectBuffer()}}),_&&new Promise((P,L)=>O(this,void 0,void 0,function*(){var j,$,F,q,N,B;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),be(e)));const ae=setTimeout(()=>{L(new Error("agent not active within 10 seconds"))},1e4),pe=yield this.waitUntilActiveAgentPresent();clearTimeout(ae),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),be(e)));const Me=yield this.streamBytes({name:"preconnect-buffer",mimeType:E,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[pe.identity],attributes:{trackId:C.trackSid,sampleRate:String((N=y.sampleRate)!==null&&N!==void 0?N:"48000"),channels:String((B=y.channelCount)!==null&&B!==void 0?B:"1")}});try{for(var W=!0,X=Ai(_),G;G=yield X.next(),j=G.done,!j;W=!0){q=G.value,W=!1;const Ke=q;yield Me.write(Ke)}}catch(Ke){$={error:Ke}}finally{try{!W&&!j&&(F=X.return)&&(yield F.call(X))}finally{if($)throw $.error}}yield Me.close(),P()}catch(ae){L(ae)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),be(e)))}).catch(P=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),be(e)),{error:P}))})}return C})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return O(this,void 0,void 0,function*(){var i;if(this.encryptionType!==Rt.NONE)return;let o;if(this.trackPublications.forEach(h=>{h.track&&h.track===e&&(o=h)}),!o)throw new Ri("track is not published");if(!co(e))throw new Ri("track is not a video track");const a=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),s=Qz(e,n,a);if(!s){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),be(e)));return}const c=e.addSimulcastTrack(n,s);if(!c)return;const l=new id({cid:c.mediaStreamTrack.id,type:V.kindToProto(e.kind),muted:e.isMuted,source:V.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:a.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=q1(l.width,l.height,s),!this.engine||this.engine.isClosed)throw new ft("cannot publish track when not connected");const u=()=>O(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,c,a,s),yield this.engine.negotiate()}),f=(yield Promise.all([this.engine.addTrack(l),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:s,trackInfo:f}))})}unpublishTrack(e,n){return O(this,void 0,void 0,function*(){var r,i;if(oc(e)){const l=this.pendingPublishPromises.get(e);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),be(e))),yield l)}const o=this.getPublicationForTrack(e),a=o?be(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}e=o.track,e.off(J.Muted,this.onTrackMuted),e.off(J.Unmuted,this.onTrackUnmuted),e.off(J.Ended,this.handleTrackEnded),e.off(J.UpstreamPaused,this.onTrackUpstreamPaused),e.off(J.UpstreamResumed,this.onTrackUpstreamResumed),e.off(J.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let s=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<st.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",s=!0);if(this.engine.removeTrack(c)&&(s=!0),co(e)){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(s=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:l}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case V.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case V.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(te.LocalTrackUnpublished,o),o.setTrack(void 0),s&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return O(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Cn((o,a)=>O(r,void 0,void 0,function*(){try{const s=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),s.push(c))}),yield Promise.all(s.map(c=>O(this,void 0,void 0,function*(){const l=c.track;yield this.unpublishTrack(l,!1),i&&!l.isMuted&&l.source!==V.Source.ScreenShare&&l.source!==V.Source.ScreenShareAudio&&(wi(l)||co(l))&&!l.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield l.restartTrack()),yield this.publishOrRepublishTrack(l,c.options,!0)}))),o()}catch(s){s instanceof Error?a(s):a(new Error(String(s)))}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const o=i.reliable?ye.RELIABLE:ye.LOSSY,a=i.destinationIdentities,s=i.topic;let c=new wx({participantIdentity:r.identity,payload:n,destinationIdentities:a,topic:s});const l=new dn({kind:o,value:{case:"user",value:c}});yield r.engine.sendDataPacket(l,o)}()})}publishDtmf(e,n){return O(this,void 0,void 0,function*(){const r=new dn({kind:ye.RELIABLE,value:{case:"sipDtmf",value:new QI({code:e,digit:n})}});yield this.engine.sendDataPacket(r,ye.RELIABLE)})}sendChatMessage(e,n){return O(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new dn({value:{case:"chatMessage",value:new wp(Object.assign(Object.assign({},r),{timestamp:et.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,ye.RELIABLE),this.emit(te.ChatMessage,r),r})}editChatMessage(e,n){return O(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new dn({value:{case:"chatMessage",value:new wp(Object.assign(Object.assign({},r),{timestamp:et.parse(r.timestamp),editTimestamp:et.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,ye.RELIABLE),this.emit(te.ChatMessage,r),r})}sendText(e,n){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){let{destinationIdentity:n,method:r,payload:i,responseTimeout:o=15e3}=e;const a=7e3,s=a+1e3;return new Cn((c,l)=>O(this,void 0,void 0,function*(){var u,d,f,h;if(Ux(i)>sD){l(dt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((d=(u=this.engine.latestJoinResponse)===null||u===void 0?void 0:u.serverInfo)===null||d===void 0)&&d.version&&fi((h=(f=this.engine.latestJoinResponse)===null||f===void 0?void 0:f.serverInfo)===null||h===void 0?void 0:h.version,"1.8.0")<0){l(dt.builtIn("UNSUPPORTED_SERVER"));return}const m=Math.max(o,s),p=crypto.randomUUID();yield this.publishRpcRequest(n,p,r,i,m);const g=setTimeout(()=>{this.pendingAcks.delete(p),l(dt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(p),clearTimeout(v)},a);this.pendingAcks.set(p,{resolve:()=>{clearTimeout(g)},participantIdentity:n});const v=setTimeout(()=>{this.pendingResponses.delete(p),l(dt.builtIn("RESPONSE_TIMEOUT"))},o);this.pendingResponses.set(p,{resolve:(y,w)=>{clearTimeout(v),this.pendingAcks.has(p)&&(this.log.warn("RPC response received before ack",p),this.pendingAcks.delete(p),clearTimeout(g)),w?l(w):c(y??"")},participantIdentity:n})}))}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,o){return O(this,void 0,void 0,function*(){const a=new dn({destinationIdentities:[e],kind:ye.RELIABLE,value:{case:"rpcRequest",value:new Sx({id:n,method:r,payload:i,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(a,ye.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,dt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const o=this.trackPublications.get(n.sid);if(o){const a=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),be(o)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(e){var n,r,i,o;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(o=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||o===void 0||o.call(i,new Error("Agent disconnected")),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ur),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(wi(i)||co(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return O(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[a]=o;return a.source===e});if(i)return i[1];yield Ht(20)}})}}class Sq extends ki{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=o=>{this.setTrack(void 0),this.emit(J.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.visible=o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensionsAdaptiveStream=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new ng({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new ZI({participantSid:"",trackSids:[this.trackSid]})]});this.emit(J.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?ki.SubscriptionStatus.Unsubscribed:super.isSubscribed?ki.SubscriptionStatus.Subscribed:ki.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?ki.PermissionStatus.Allowed:ki.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(Wv(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Wv(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Vn.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(J.VisibilityChanged,this.handleVisibilityChange),i.off(J.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(J.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(J.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(J.VisibilityChanged,this.handleVisibilityChange),e.on(J.Ended,this.handleEnded),this.emit(J.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(J.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?J.Muted:J.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(J.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(J.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Wv(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new cN({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===V.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)y1(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=F8(this.trackInfo,this.requestedMaxQuality);r&&y1(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Vn.HIGH})),e.quality=Vn.HIGH)}this.emit(J.UpdateSettings,e)}}class Ep extends mD{static fromParticipantInfo(e,n,r){return new Ep(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,o,a,s){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:rd.STANDARD;super(n,r||"",i,o,a,s,c),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(J.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),be(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(J.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(J.SubscriptionPermissionChanged,n=>{this.emit(te.TrackSubscriptionPermissionChanged,e,n)}),e.on(J.SubscriptionStatusChanged,n=>{this.emit(te.TrackSubscriptionStatusChanged,e,n)}),e.on(J.Subscribed,n=>{this.emit(te.TrackSubscribed,n,e)}),e.on(J.Unsubscribed,n=>{this.emit(te.TrackUnsubscribed,n,e)}),e.on(J.SubscriptionFailed,n=>{this.emit(te.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,a){let s=this.getTrackPublicationBySid(n);if(s||n.startsWith("TR")||this.trackPublications.forEach(u=>{!s&&e.kind===u.kind.toString()&&(s=u)}),!s){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(te.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,a-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),be(s))),this.emit(te.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new mq(e,n,i,o):l=new pq(e,n,i,this.audioContext,this.audioOutput),l.source=s.source,l.isMuted=s.isMuted,l.setMediaStream(r),l.start(),s.setTrack(l),this.volumeMap.has(s.source)&&yb(l)&&si(l)&&l.setVolume(this.volumeMap.get(s.source)),s}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,a;let s=this.getTrackPublicationBySid(i.sid);if(s)s.updateInfo(i);else{const c=V.kindFromProto(i.type);if(!c)return;s=new Sq(c,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),s.updateInfo(i),r.set(i.sid,s);const l=Array.from(this.trackPublications.values()).find(u=>u.source===(s==null?void 0:s.source));l&&s.source!==V.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(s.source),Object.assign(Object.assign({},this.logContext),{oldTrack:be(l),newTrack:be(s)})),this.addTrackPublication(s)}n.set(i.sid,s)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),be(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(te.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case V.Kind.Audio:this.audioTrackPublications.delete(e);break;case V.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(te.TrackUnpublished,r)}setAudioOutput(e){return O(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;si(r.track)&&yb(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var Ae;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(Ae||(Ae={}));const xq=4*1e3;class Dc extends pi.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,i,o,a;if(super(),n=this,this.state=Ae.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=he,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(s,c,l)=>O(this,void 0,void 0,function*(){var u;if(!V8())throw di()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const d=yield this.disconnectLock.lock();if(this.state===Ae.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(Ae.Connecting),((u=this.regionUrlProvider)===null||u===void 0?void 0:u.getServerUrl().toString())!==rD(s)&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Nc(new URL(s))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Pe(s,c):this.regionUrlProvider.updateToken(c),this.regionUrlProvider.fetchRegionSettings().then(m=>{var p;(p=this.regionUrlProvider)===null||p===void 0||p.setServerReportedRegions(m)}).catch(m=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:m}))}));const f=(m,p,g)=>O(this,void 0,void 0,function*(){var v,y;this.abortController&&this.abortController.abort();const w=new AbortController;this.abortController=w,d==null||d();try{if(yield ac.getInstance().getBackOffPromise(s),w.signal.aborted)throw ce.cancelled("Connection attempt aborted");yield this.attemptConnection(g??s,c,l,w),this.abortController=void 0,m()}catch(S){if(this.regionUrlProvider&&S instanceof ce&&S.reason!==ze.Cancelled&&S.reason!==ze.NotAllowed){let b=null;try{this.log.debug("Fetching next region"),b=yield this.regionUrlProvider.getNextBestRegionUrl((v=this.abortController)===null||v===void 0?void 0:v.signal)}catch(x){if(x instanceof ce&&(x.status===401||x.reason===ze.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(x);return}}[ze.InternalError,ze.ServerUnreachable,ze.Timeout].includes(S.reason)&&(this.log.debug("Adding failed connection attempt to back off"),ac.getInstance().addFailedConnectionAttempt(s)),b&&!(!((y=this.abortController)===null||y===void 0)&&y.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(S.message,". Retrying with another region: ").concat(b),this.logContext),this.recreateEngine(),yield f(m,p,b)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,C1(S)),p(S))}else{let b=Fr.UNKNOWN_REASON;S instanceof ce&&(b=C1(S)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,b),p(S)}}}),h=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ur((m,p)=>{f(m,p,h)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(s,c,l,u,d,f)=>O(this,void 0,void 0,function*(){var h,m,p;const g=yield l.join(s,c,{autoSubscribe:u.autoSubscribe,adaptiveStream:typeof d.adaptiveStream=="object"?!0:d.adaptiveStream,maxRetries:u.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:u.websocketTimeout},f.signal,!d.singlePeerConnection);let v=g.serverInfo;if(v||(v={version:g.serverVersion,region:g.serverRegion}),this.serverInfo=v,this.log.debug("connected to Livekit Server ".concat(Object.entries(v).map(y=>{let[w,S]=y;return"".concat(w,": ").concat(S)}).join(", ")),{room:(h=g.room)===null||h===void 0?void 0:h.name,roomSid:(m=g.room)===null||m===void 0?void 0:m.sid,identity:(p=g.participant)===null||p===void 0?void 0:p.identity}),!v.version)throw new E8("unknown server version");return v.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),d.dynacast=!1),g}),this.applyJoinResponse=s=>{const c=s.participant;if(this.localParticipant.sid=c.sid,this.localParticipant.identity=c.identity,this.localParticipant.setEnabledPublishCodecs(s.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(s.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([c,...s.otherParticipants]),s.room&&this.handleRoomUpdate(s.room)},this.attemptConnection=(s,c,l,u)=>O(this,void 0,void 0,function*(){var d,f;this.state===Ae.Reconnecting||this.isResuming||!((d=this.engine)===null||d===void 0)&&d.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((f=this.regionUrlProvider)===null||f===void 0)&&f.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Fx),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(s,c,this.engine,this.connOptions,this.options,u);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(K.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const m=u.signal.aborted?ce.cancelled("Signal connection aborted"):ce.serverUnreachable("could not establish signal connection");throw h instanceof Error&&(m.message="".concat(m.message,": ").concat(h.message)),h instanceof ce&&(m.reason=h.reason,m.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),m}if(u.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),ce.cancelled("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,u)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}_n()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),_n()&&window.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Ae.Connected),this.emit(K.Connected),ac.getInstance().resetFailedConnectionAttempts(s),this.registerConnectionReconcile(),this.regionUrlProvider&&this.regionUrlProvider.notifyConnected()}),this.disconnect=function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return O(n,[...c],void 0,function(){var u=this;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var f,h,m;const p=yield u.disconnectLock.lock();try{if(u.state===Ae.Disconnected){u.log.debug("already disconnected",u.logContext);return}if(u.log.info("disconnect from room",Object.assign({},u.logContext)),u.state===Ae.Connecting||u.state===Ae.Reconnecting||u.isResuming){const g="Abort connection attempt due to user initiated disconnect";u.log.warn(g,u.logContext),(f=u.abortController)===null||f===void 0||f.abort(g),(m=(h=u.connectFuture)===null||h===void 0?void 0:h.reject)===null||m===void 0||m.call(h,ce.cancelled("Client initiated disconnect")),u.connectFuture=void 0}u.engine&&(u.engine.client.isDisconnected||(yield u.engine.client.sendLeave()),yield u.engine.close()),u.handleDisconnect(d,Fr.CLIENT_INITIATED),u.engine=void 0}finally{p()}}()})},this.onPageLeave=()=>O(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>O(this,void 0,void 0,function*(){const s=[],c=Rn();if(c&&c.os==="iOS"){const l="livekit-dummy-audio-el";let u=document.getElementById(l);if(!u){u=document.createElement("audio"),u.id=l,u.autoplay=!0,u.hidden=!0;const d=qv();d.enabled=!0;const f=new MediaStream([d]);u.srcObject=f,document.addEventListener("visibilitychange",()=>{u&&(u.srcObject=document.hidden?null:f,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(u),this.once(K.Disconnected,()=>{u==null||u.remove(),u=null})}s.push(u)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(u=>{u.track&&u.track.attachedElements.forEach(d=>{s.push(d)})})});try{yield Promise.all([this.acquireAudioContext(),...s.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>O(this,void 0,void 0,function*(){const s=[];for(const c of this.remoteParticipants.values())c.videoTrackPublications.forEach(l=>{var u;(u=l.track)===null||u===void 0||u.attachedElements.forEach(d=>{s.includes(d)||s.push(d)})});yield Promise.all(s.map(c=>c.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(c=>{c.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const s of this.remoteParticipants.values())this.handleParticipantDisconnected(s.identity,s);this.setAndEmitConnectionState(Ae.Reconnecting)&&this.emit(K.Reconnecting)},this.handleSignalRestarted=s=>O(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(s.serverRegion),Object.assign(Object.assign({},this.logContext),{region:s.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(s);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(c){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:c}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:s.serverRegion}))}catch{return}this.setAndEmitConnectionState(Ae.Connected),this.emit(K.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=s=>{s.forEach(c=>{var l;if(c.identity===this.localParticipant.identity){this.localParticipant.updateInfo(c);return}c.identity===""&&(c.identity=(l=this.sidToIdentity.get(c.sid))!==null&&l!==void 0?l:"");let u=this.remoteParticipants.get(c.identity);c.state===ec.DISCONNECTED?this.handleParticipantDisconnected(c.identity,u):u=this.getOrCreateParticipant(c.identity,c)})},this.handleActiveSpeakersUpdate=s=>{const c=[],l={};s.forEach(u=>{if(l[u.sid]=!0,u.sid===this.localParticipant.sid)this.localParticipant.audioLevel=u.level,this.localParticipant.setIsSpeaking(!0),c.push(this.localParticipant);else{const d=this.getRemoteParticipantBySid(u.sid);d&&(d.audioLevel=u.level,d.setIsSpeaking(!0),c.push(d))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(u=>{l[u.sid]||(u.audioLevel=0,u.setIsSpeaking(!1))}),this.activeSpeakers=c,this.emitWhenConnected(K.ActiveSpeakersChanged,c)},this.handleSpeakersChanged=s=>{const c=new Map;this.activeSpeakers.forEach(u=>{const d=this.remoteParticipants.get(u.identity);d&&d.sid!==u.sid||c.set(u.sid,u)}),s.forEach(u=>{let d=this.getRemoteParticipantBySid(u.sid);u.sid===this.localParticipant.sid&&(d=this.localParticipant),d&&(d.audioLevel=u.level,d.setIsSpeaking(u.active),u.active?c.set(u.sid,d):c.delete(u.sid))});const l=Array.from(c.values());l.sort((u,d)=>d.audioLevel-u.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(K.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=s=>{s.streamStates.forEach(c=>{const l=this.getRemoteParticipantBySid(c.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(c.trackSid);if(!u||!u.track)return;const d=V.streamStateFromProto(c.state);u.track.setStreamState(d),d!==u.track.streamState&&(l.emit(te.TrackStreamStateChanged,u,u.track.streamState),this.emitWhenConnected(K.TrackStreamStateChanged,u,u.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=s=>{const c=this.getRemoteParticipantBySid(s.participantSid);if(!c)return;const l=c.getTrackPublicationBySid(s.trackSid);l&&l.setAllowed(s.allowed)},this.handleSubscriptionError=s=>{const c=Array.from(this.remoteParticipants.values()).find(u=>u.trackPublications.has(s.trackSid));if(!c)return;const l=c.getTrackPublicationBySid(s.trackSid);l&&l.setSubscriptionError(s.err)},this.handleDataPacket=(s,c)=>{const l=this.remoteParticipants.get(s.participantIdentity);if(s.value.case==="user")this.handleUserPacket(l,s.value.value,s.kind,c);else if(s.value.case==="transcription")this.handleTranscription(l,s.value.value);else if(s.value.case==="sipDtmf")this.handleSipDtmf(l,s.value.value);else if(s.value.case==="chatMessage")this.handleChatMessage(l,s.value.value);else if(s.value.case==="metrics")this.handleMetrics(s.value.value,l);else if(s.value.case==="streamHeader"||s.value.case==="streamChunk"||s.value.case==="streamTrailer")this.handleDataStream(s,c);else if(s.value.case==="rpcRequest"){const u=s.value.value;this.handleIncomingRpcRequest(s.participantIdentity,u.id,u.method,u.payload,u.responseTimeoutMs,u.version)}},this.handleUserPacket=(s,c,l,u)=>{this.emit(K.DataReceived,c.payload,s,l,c.topic,u),s==null||s.emit(te.DataReceived,c.payload,l,u)},this.handleSipDtmf=(s,c)=>{this.emit(K.SipDTMFReceived,c,s),s==null||s.emit(te.SipDTMFReceived,c)},this.handleTranscription=(s,c)=>{const l=c.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(c.transcribedParticipantIdentity),u=l==null?void 0:l.trackPublications.get(c.trackId),d=ez(c,this.transcriptionReceivedTimes);u==null||u.emit(J.TranscriptionReceived,d),l==null||l.emit(te.TranscriptionReceived,d,u),this.emit(K.TranscriptionReceived,d,l,u)},this.handleChatMessage=(s,c)=>{const l=tz(c);this.emit(K.ChatMessage,l,s)},this.handleMetrics=(s,c)=>{this.emit(K.MetricsReceived,s,c)},this.handleDataStream=(s,c)=>{this.incomingDataStreamManager.handleDataStreamPacket(s,c)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(K.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=s=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:s})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(K.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(K.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(K.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>O(this,void 0,void 0,function*(){var s;((s=Rn())===null||s===void 0?void 0:s.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(K.MediaDevicesChanged)}),this.handleRoomUpdate=s=>{const c=this.roomInfo;this.roomInfo=s,c&&c.metadata!==s.metadata&&this.emitWhenConnected(K.RoomMetadataChanged,s.metadata),(c==null?void 0:c.activeRecording)!==s.activeRecording&&this.emitWhenConnected(K.RecordingStatusChanged,s.activeRecording)},this.handleConnectionQualityUpdate=s=>{s.updates.forEach(c=>{if(c.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(c.quality);return}const l=this.getRemoteParticipantBySid(c.participantSid);l&&l.setConnectionQuality(c.quality)})},this.onLocalParticipantMetadataChanged=s=>{this.emit(K.ParticipantMetadataChanged,s,this.localParticipant)},this.onLocalParticipantNameChanged=s=>{this.emit(K.ParticipantNameChanged,s,this.localParticipant)},this.onLocalAttributesChanged=s=>{this.emit(K.ParticipantAttributesChanged,s,this.localParticipant)},this.onLocalTrackMuted=s=>{this.emit(K.TrackMuted,s,this.localParticipant)},this.onLocalTrackUnmuted=s=>{this.emit(K.TrackUnmuted,s,this.localParticipant)},this.onTrackProcessorUpdate=s=>{var c;(c=s==null?void 0:s.onPublish)===null||c===void 0||c.call(s,this)},this.onLocalTrackPublished=s=>O(this,void 0,void 0,function*(){var c,l,u,d,f,h;(c=s.track)===null||c===void 0||c.on(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=s.track)===null||l===void 0||l.on(J.Restarted,this.onLocalTrackRestarted),(f=(d=(u=s.track)===null||u===void 0?void 0:u.getProcessor())===null||d===void 0?void 0:d.onPublish)===null||f===void 0||f.call(d,this),this.emit(K.LocalTrackPublished,s,this.localParticipant),wi(s.track)&&(yield s.track.checkForSilence())&&this.emit(K.LocalAudioSilenceDetected,s);const m=yield(h=s.track)===null||h===void 0?void 0:h.getDeviceId(!1),p=pb(s.source);p&&m&&m!==this.localParticipant.activeDeviceMap.get(p)&&(this.localParticipant.activeDeviceMap.set(p,m),this.emit(K.ActiveDeviceChanged,p,m))}),this.onLocalTrackUnpublished=s=>{var c,l;(c=s.track)===null||c===void 0||c.off(J.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=s.track)===null||l===void 0||l.off(J.Restarted,this.onLocalTrackRestarted),this.emit(K.LocalTrackUnpublished,s,this.localParticipant)},this.onLocalTrackRestarted=s=>O(this,void 0,void 0,function*(){const c=yield s.getDeviceId(!1),l=pb(s.source);l&&c&&c!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(c," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,c),this.emit(K.ActiveDeviceChanged,l,c))}),this.onLocalConnectionQualityChanged=s=>{this.emit(K.ConnectionQualityChanged,s,this.localParticipant)},this.onMediaDevicesError=(s,c)=>{this.emit(K.MediaDevicesError,s,c)},this.onLocalParticipantPermissionsChanged=s=>{this.emit(K.ParticipantPermissionsChanged,s,this.localParticipant)},this.onLocalChatMessageSent=s=>{this.emit(K.ChatMessage,s,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Nz),e),this.log=Ki((r=this.options.loggerName)!==null&&r!==void 0?r:Vr.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},iD),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},oD),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Iz),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new uq,this.outgoingDataStreamManager=new hq(this.engine,this.log),this.disconnectLock=new pn,this.localParticipant=new wq("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ho(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ho(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Ho(this.options.audioOutput.deviceId)).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),_n()){const s=new AbortController;(a=(o=navigator.mediaDevices)===null||o===void 0?void 0:o.addEventListener)===null||a===void 0||a.call(o,"devicechange",this.handleDeviceChange,{signal:s.signal}),Dc.cleanupRegistry&&Dc.cleanupRegistry.register(this,()=>{s.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return O(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new gz(r,n),this.e2eeManager.on(Mo.ParticipantEncryptionStatusChanged,(i,o)=>{rz(o)&&(this.isE2EEEnabled=i),this.emit(K.ParticipantEncryptionStatusChanged,i,o)}),this.e2eeManager.on(Mo.EncryptionError,(i,o)=>{const a=o?this.getParticipantByIdentity(o):void 0;this.emit(K.EncryptionError,i,a)}),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return this.state===Ae.Disconnected?Cn.resolve(""):this.roomInfo&&this.roomInfo.sid!==""?Cn.resolve(this.roomInfo.sid):new Cn((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(Z.RoomUpdate,r),e(i.sid))};this.engine.on(Z.RoomUpdate,r),this.once(K.Disconnected,()=>{this.engine.off(Z.RoomUpdate,r),n(new ft("Room disconnected before room server id was available"))})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new aq(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(Z.ParticipantUpdate,this.handleParticipantUpdates).on(Z.RoomUpdate,this.handleRoomUpdate).on(Z.SpeakersChanged,this.handleSpeakersChanged).on(Z.StreamStateChanged,this.handleStreamStateUpdate).on(Z.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Z.SubscriptionError,this.handleSubscriptionError).on(Z.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Z.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Z.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Z.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Z.DataPacketReceived,this.handleDataPacket).on(Z.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Ae.SignalReconnecting)&&this.emit(K.SignalReconnecting)}).on(Z.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Ae.Connected)&&this.emit(K.Reconnected)}).on(Z.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Ae.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Z.Restarting,this.handleRestarting).on(Z.SignalRestarted,this.handleSignalRestarted).on(Z.Offline,()=>{this.setAndEmitConnectionState(Ae.Reconnecting)&&this.emit(K.Reconnecting)}).on(Z.DCBufferStatusChanged,(e,n)=>{this.emit(K.DCBufferStatusChanged,e,n)}).on(Z.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(te.LocalTrackSubscribed,n),this.emitWhenConnected(K.LocalTrackSubscribed,n,this.localParticipant)}).on(Z.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(K.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ft.getInstance().getDevices(e,n)}prepareConnection(e,n){return O(this,void 0,void 0,function*(){if(this.state===Ae.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Nc(new URL(e))&&n){this.regionUrlProvider=new Pe(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Ae.Disconnected&&(this.regionUrl=r,yield fetch(sd(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(sd(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return O(this,void 0,void 0,function*(){let r=()=>O(this,void 0,void 0,function*(){}),i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Xr({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Xr({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Xr({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Xr({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>O(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Xr({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>O(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Xr({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Xr({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>O(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new rg({reason:Fr.CLIENT_INITIATED,action:tc.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Xr({scenario:{case:"subscriberBandwidth",value:ba(n)}});break;case"leave-full-reconnect":i=new Xr({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return O(this,arguments,void 0,function(r,i){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var s,c,l,u,d,f,h;let m=!0,p=!1;const g=a?{exact:i}:i;if(r==="audioinput"){p=o.localParticipant.audioTrackPublications.size===0;const v=(s=o.getActiveDevice(r))!==null&&s!==void 0?s:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=g;const y=Array.from(o.localParticipant.audioTrackPublications.values()).filter(S=>S.source===V.Source.Microphone);try{m=(yield Promise.all(y.map(S=>{var b;return(b=S.audioTrack)===null||b===void 0?void 0:b.setDeviceId(g)}))).every(S=>S===!0)}catch(S){throw o.options.audioCaptureDefaults.deviceId=v,S}const w=y.some(S=>{var b,x;return(x=(b=S.track)===null||b===void 0?void 0:b.isMuted)!==null&&x!==void 0?x:!1});m&&w&&(p=!0)}else if(r==="videoinput"){p=o.localParticipant.videoTrackPublications.size===0;const v=(c=o.getActiveDevice(r))!==null&&c!==void 0?c:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=g;const y=Array.from(o.localParticipant.videoTrackPublications.values()).filter(S=>S.source===V.Source.Camera);try{m=(yield Promise.all(y.map(S=>{var b;return(b=S.videoTrack)===null||b===void 0?void 0:b.setDeviceId(g)}))).every(S=>S===!0)}catch(S){throw o.options.videoCaptureDefaults.deviceId=v,S}const w=y.some(S=>{var b,x;return(x=(b=S.track)===null||b===void 0?void 0:b.isMuted)!==null&&x!==void 0?x:!1});m&&w&&(p=!0)}else if(r==="audiooutput"){if(p=!0,!vb()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");o.options.webAudioMix&&(i=(l=yield Ft.getInstance().normalizeDeviceId("audiooutput",i))!==null&&l!==void 0?l:""),(u=(h=o.options).audioOutput)!==null&&u!==void 0||(h.audioOutput={});const v=(d=o.getActiveDevice(r))!==null&&d!==void 0?d:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=i;try{o.options.webAudioMix&&((f=o.audioContext)===null||f===void 0||f.setSinkId(i)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(y=>y.setAudioOutput({deviceId:i})))}catch(y){throw o.options.audioOutput.deviceId=v,y}}return p&&(o.localParticipant.activeDeviceMap.set(r,i),o.emit(K.ActiveDeviceChanged,r,i)),m}()})}setupLocalParticipantEvents(){this.localParticipant.on(te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(te.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(te.AttributesChanged,this.onLocalAttributesChanged).on(te.TrackMuted,this.onLocalTrackMuted).on(te.TrackUnmuted,this.onLocalTrackUnmuted).on(te.LocalTrackPublished,this.onLocalTrackPublished).on(te.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(te.MediaDevicesError,this.onMediaDevicesError).on(te.AudioStreamAcquired,this.startAudio).on(te.ChatMessage,this.onLocalChatMessageSent).on(te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===Ae.Connecting||this.state===Ae.Reconnecting){const d=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(h=>h.id)}),this.onTrackAdded(e,n,r),f()},f=()=>{this.off(K.Reconnected,d),this.off(K.Connected,d),this.off(K.Disconnected,f)};this.once(K.Reconnected,d),this.once(K.Connected,d),this.once(K.Disconnected,f);return}if(this.state===Ae.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=z8(n.id),o=i[0];let a=i[1],s=e.id;if(a&&a.startsWith("TR")&&(s=a),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(d=>d.sid===o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}if(!s.startsWith("TR")){const d=this.engine.getTrackIdForReceiver(r);if(!d){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(o),this.logContext);return}s=d}s.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(o,", streamId: ").concat(a,", trackId: ").concat(s),Object.assign(Object.assign({},this.logContext),{rpID:o,streamId:a,trackId:s}));let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={});const u=c.addSubscribedMediaTrack(e,s,n,r,l);u!=null&&u.isEncrypted&&!this.e2eeManager&&this.emit(K.EncryptionError,new Error("Encrypted ".concat(u.source," track received from participant ").concat(c.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r,i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearControllers(),this.state!==Ae.Disconnected){this.regionUrl=void 0,this.regionUrlProvider&&this.regionUrlProvider.notifyDisconnected();try{this.remoteParticipants.forEach(o=>{o.trackPublications.forEach(a=>{o.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(o=>{var a,s,c;o.track&&this.localParticipant.unpublishTrack(o.track,e),e?((a=o.track)===null||a===void 0||a.detach(),(s=o.track)===null||s===void 0||s.stop()):(c=o.track)===null||c===void 0||c.stopMonitor()}),this.localParticipant.off(te.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(te.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(te.AttributesChanged,this.onLocalAttributesChanged).off(te.TrackMuted,this.onLocalTrackMuted).off(te.TrackUnmuted,this.onLocalTrackUnmuted).off(te.LocalTrackPublished,this.onLocalTrackPublished).off(te.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(te.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(te.MediaDevicesError,this.onMediaDevicesError).off(te.AudioStreamAcquired,this.startAudio).off(te.ChatMessage,this.onLocalChatMessageSent).off(te.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),_n()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=(r=navigator.mediaDevices)===null||r===void 0?void 0:r.removeEventListener)===null||i===void 0||i.call(r,"devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Ae.Disconnected),this.emit(K.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(K.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,i,o,a){return O(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),a!==1){yield this.engine.publishRpcResponse(e,n,null,dt.builtIn("UNSUPPORTED_VERSION"));return}const s=this.rpcHandlers.get(r);if(!s){yield this.engine.publishRpcResponse(e,n,null,dt.builtIn("UNSUPPORTED_METHOD"));return}let c=null,l=null;try{const u=yield s({requestId:n,callerIdentity:e,payload:i,responseTimeout:o});Ux(u)>sD?(c=dt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),this.log.warn("RPC Response payload too large for ".concat(r))):l=u}catch(u){u instanceof dt?c=u:(this.log.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),u),c=dt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,l,c)})}selectDefaultDevices(){return O(this,void 0,void 0,function*(){var e,n,r;const i=Ft.getInstance().previousDevices,o=yield Ft.getInstance().getDevices(void 0,!1),a=Rn();if((a==null?void 0:a.name)==="Chrome"&&a.os!=="iOS")for(let c of o){const l=i.find(u=>u.deviceId===c.deviceId);l&&l.label!==""&&l.kind===c.kind&&l.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(K.ActiveDeviceChanged,c.kind,c.deviceId)}const s=["audiooutput","audioinput","videoinput"];for(let c of s){const l=I8(c),u=this.localParticipant.getTrackPublication(l);if(u&&(!((e=u.track)===null||e===void 0)&&e.isUserProvided))continue;const d=o.filter(h=>h.kind===c),f=this.getActiveDevice(c);if(f===((n=i.filter(h=>h.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&d.length>0&&((r=d[0])===null||r===void 0?void 0:r.deviceId)!==f){yield this.switchActiveDevice(c,d[0].deviceId);continue}c==="audioinput"&&!ad()||c==="videoinput"||d.length>0&&!d.find(h=>h.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!ad())&&(yield this.switchActiveDevice(c,d[0].deviceId))}})}acquireAudioContext(){return O(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=JN())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Ht(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(K.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=Ep.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new Ep(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(K.ParticipantConnected,r),r.on(te.TrackPublished,i=>{this.emitWhenConnected(K.TrackPublished,i,r)}).on(te.TrackSubscribed,(i,o)=>{i.kind===V.Kind.Audio?(i.on(J.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(J.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===V.Kind.Video&&(i.on(J.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(J.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(K.TrackSubscribed,i,o,r)}).on(te.TrackUnpublished,i=>{this.emit(K.TrackUnpublished,i,r)}).on(te.TrackUnsubscribed,(i,o)=>{this.emit(K.TrackUnsubscribed,i,o,r)}).on(te.TrackMuted,i=>{this.emitWhenConnected(K.TrackMuted,i,r)}).on(te.TrackUnmuted,i=>{this.emitWhenConnected(K.TrackUnmuted,i,r)}).on(te.ParticipantMetadataChanged,i=>{this.emitWhenConnected(K.ParticipantMetadataChanged,i,r)}).on(te.ParticipantNameChanged,i=>{this.emitWhenConnected(K.ParticipantNameChanged,i,r)}).on(te.AttributesChanged,i=>{this.emitWhenConnected(K.ParticipantAttributesChanged,i,r)}).on(te.ConnectionQualityChanged,i=>{this.emitWhenConnected(K.ConnectionQualityChanged,i,r)}).on(te.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(K.ParticipantPermissionsChanged,i,r)}).on(te.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(K.TrackSubscriptionStatusChanged,i,o,r)}).on(te.TrackSubscriptionFailed,(i,o)=>{this.emit(K.TrackSubscriptionFailed,i,r,o)}).on(te.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(K.TrackSubscriptionPermissionChanged,i,o,r)}).on(te.Active,()=>{this.emitWhenConnected(K.ParticipantActive,r),r.kind===rd.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&nz(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Vt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Fr.STATE_MISMATCH))):e=0},xq)}clearConnectionReconcile(){this.connectionReconcileInterval&&Vt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(K.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===Ae.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===Ae.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return O(this,void 0,void 0,function*(){var n,r,i,o;const a=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Zm({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:et.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ns({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(K.SignalConnected),this.emit(K.Connected),this.setAndEmitConnectionState(Ae.Connected),a.video){const c=new Tb(V.Kind.Video,new Bs({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Dr.AUDIO,name:"video-dummy"}),new _p(a.useRealTracks&&(!((n=window.navigator.mediaDevices)===null||n===void 0)&&n.getUserMedia)?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:T1(160*((r=s.aspectRatios[0])!==null&&r!==void 0?r:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(te.LocalTrackPublished,c)}if(a.audio){const c=new Tb(V.Kind.Audio,new Bs({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Dr.AUDIO}),new Cp(a.useRealTracks&&(!((i=navigator.mediaDevices)===null||i===void 0)&&i.getUserMedia)?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:qv(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(te.LocalTrackPublished,c)}for(let c=0;c<s.count-1;c+=1){let l=new ns({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:ec.ACTIVE,tracks:[],joinedAt:et.parse(Date.now())});const u=this.getOrCreateParticipant(l.identity,l);if(s.video){const d=T1(160*((o=s.aspectRatios[c%s.aspectRatios.length])!==null&&o!==void 0?o:1),160,!1,!0),f=new Bs({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Dr.AUDIO});u.addSubscribedMediaTrack(d,f.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}if(s.audio){const d=qv(),f=new Bs({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Dr.AUDIO});u.addSubscribedMediaTrack(d,f.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}u.updateInfo(l)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==K.ActiveSpeakersChanged&&e!==K.TranscriptionReceived){const o=gD(r).filter(a=>a!==void 0);(e===K.TrackSubscribed||e===K.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}Dc.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function gD(t){return t.map(e=>{if(e)return Array.isArray(e)?gD(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Or;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Or||(Or={}));class aa extends pi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Or.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Dc(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return O(this,void 0,void 0,function*(){if(this.status!==Or.IDLE)throw Error("check is running already");this.setStatus(Or.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Or.SKIPPED&&this.setStatus(this.isSuccess()?Or.SUCCESS:Or.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return O(this,void 0,void 0,function*(){return this.room.state===Ae.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return O(this,void 0,void 0,function*(){this.room&&this.room.state!==Ae.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Or.SKIPPED)}switchProtocol(e){return O(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(K.Reconnecting,()=>{n=!0}),this.room.once(K.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield Ht(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class kq extends aa{get description(){return"Cloud regions"}perform(){return O(this,void 0,void 0,function*(){const e=new Pe(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let o=0;o<3;o++){const a=yield e.getNextBestRegionUrl();if(!a)break;if(r.has(a))continue;r.add(a);const s=yield this.checkCloudRegion(a);this.appendMessage("".concat(s.region," RTT: ").concat(s.rtt,"ms, duration: ").concat(s.duration,"ms")),n.push(s)}n.sort((o,a)=>(o.duration-a.duration)*.5+(o.rtt-a.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return O(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,c=1e6/a,l="A".repeat(a),u=Date.now();for(let m=0;m<c;m++)yield o.write(l);yield o.close();const d=Date.now(),f=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),h={region:i,rtt:1e4,duration:d-u};return f==null||f.forEach(m=>{m.type==="candidate-pair"&&m.nominated&&(h.rtt=m.currentRoundTripTime*1e3)}),yield this.disconnect(),h})}}const Jv=1e4;class Tq extends aa{get description(){return"Connection via UDP vs TCP"}perform(){return O(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(Jv/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(Jv/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return O(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const o=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const s=n.captureStream(30).getVideoTracks()[0],l=(yield this.room.localParticipant.publishTrack(s,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>O(this,void 0,void 0,function*(){const f=yield l.getRTCStatsReport();f==null||f.forEach(h=>{h.type==="outbound-rtp"?(u.packetsSent=h.packetsSent,u.qualityLimitationDurations=h.qualityLimitationDurations,u.bitrateTotal+=h.targetBitrate,u.count++):h.type==="remote-inbound-rtp"&&(u.packetsLost=h.packetsLost,u.rttTotal+=h.roundTripTime,u.jitterTotal+=h.jitter)})}),1e3);return yield new Promise(f=>setTimeout(f,Jv)),clearInterval(d),s.stop(),n.remove(),yield this.disconnect(),u})}}class Cq extends aa{get description(){return"Can publish audio"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield pD();if(yield QN(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const o=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!o)throw new Error("Could not get RTCStats");let a=0;if(o.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="audio"||!s.kind&&s.mediaType==="audio")&&(a=s.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class _q extends aa{get description(){return"Can publish video"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield vq();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(o+=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(e){return O(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var o,a,s,c;const l=document.createElement("canvas"),u=e.getSettings(),d=(a=(o=u.width)!==null&&o!==void 0?o:r.videoWidth)!==null&&a!==void 0?a:1280,f=(c=(s=u.height)!==null&&s!==void 0?s:r.videoHeight)!==null&&c!==void 0?c:720;l.width=d,l.height=f;const h=l.getContext("2d");h.drawImage(r,0,0);const p=h.getImageData(0,0,l.width,l.height).data;let g=!0;for(let v=0;v<p.length;v+=4)if(p[v]!==0||p[v+1]!==0||p[v+2]!==0){g=!1;break}g?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class Eq extends aa{get description(){return"Resuming connection after interruption"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,o;const a=new Promise(l=>{setTimeout(l,5e3),o=l}),s=()=>{r=!0};n.on(K.SignalReconnecting,s).on(K.Reconnecting,s).on(K.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const c=n.engine.client.onClose;if(c&&c(""),yield a,r){if(!i||n.state!==Ae.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Pq extends aa{get description(){return"Can connect via TURN"}perform(){return O(this,void 0,void 0,function*(){var e,n,r;Nc(new URL(this.url))&&(this.appendMessage("Using region specific url"),this.url=(e=yield new Pe(this.url,this.token).getNextBestRegionUrl())!==null&&e!==void 0?e:this.url);const i=new Dx,o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3},void 0,!0);let a=!1,s=!1,c=!1;for(let l of o.iceServers)for(let u of l.urls)u.startsWith("turn:")?(s=!0,c=!0):u.startsWith("turns:")&&(s=!0,c=!0,a=!0),u.startsWith("stun:")&&(c=!0);c?s&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((r=(n=this.connectOptions)===null||n===void 0?void 0:n.rtcConfig)===null||r===void 0)&&r.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class Oq extends aa{get description(){return"Establishing WebRTC connection"}perform(){return O(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(K.SignalConnected,()=>{var r;const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(o,a)=>{if(o.candidate){const s=new RTCIceCandidate(o);let c="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(Aq(s.address)?c+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,c+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(c)}i&&i(o,a)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=o=>{o instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(o.errorCode," ").concat(o.errorText," ").concat(o.url))})});try{yield this.connect(),he.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Aq(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Rq extends aa{get description(){return"Connecting to signal connection via WebSocket"}perform(){return O(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new Dx,o;try{o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3},void 0,!0)}catch(a){if(Nc(new URL(this.url))){this.appendMessage("Initial connection failed with error ".concat(a.message,". Retrying with region fallback"));const c=yield new Pe(this.url,this.token).getNextBestRegionUrl();c&&(o=yield i.join(c,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3},void 0,!0),this.appendMessage("Fallback to region worked. To avoid initial connections failing, ensure you're calling room.prepareConnection() ahead of time"))}}o?(this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===tN.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region))):this.appendError("Websocket connection could not be established"),yield i.close()})}}class s0e extends pi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Or.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Or.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return O(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=a=>{this.updateCheck(n,a)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Rq)})}checkWebRTC(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Oq)})}checkTURN(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Pq)})}checkReconnect(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Eq)})}checkPublishAudio(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Cq)})}checkPublishVideo(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(_q)})}checkConnectionProtocol(){return O(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Tq);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(kq)})}}function we(t,e,n){return(e=Iq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iq(t){var e=Mq(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class vn extends Error{constructor(e,n){var r;super(e,n),we(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}we(vn,"code","ERR_JOSE_GENERIC");class Nq extends vn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),we(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),we(this,"claim",void 0),we(this,"reason",void 0),we(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}we(Nq,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class Dq extends vn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),we(this,"code","ERR_JWT_EXPIRED"),we(this,"claim",void 0),we(this,"reason",void 0),we(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}we(Dq,"code","ERR_JWT_EXPIRED");class jq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}we(jq,"code","ERR_JOSE_ALG_NOT_ALLOWED");class Lq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JOSE_NOT_SUPPORTED")}}we(Lq,"code","ERR_JOSE_NOT_SUPPORTED");class $q extends vn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),we(this,"code","ERR_JWE_DECRYPTION_FAILED")}}we($q,"code","ERR_JWE_DECRYPTION_FAILED");class Fq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JWE_INVALID")}}we(Fq,"code","ERR_JWE_INVALID");class Uq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JWS_INVALID")}}we(Uq,"code","ERR_JWS_INVALID");class Bq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JWT_INVALID")}}we(Bq,"code","ERR_JWT_INVALID");class zq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JWK_INVALID")}}we(zq,"code","ERR_JWK_INVALID");class qq extends vn{constructor(){super(...arguments),we(this,"code","ERR_JWKS_INVALID")}}we(qq,"code","ERR_JWKS_INVALID");class Wq extends vn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),we(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}we(Wq,"code","ERR_JWKS_NO_MATCHING_KEY");class Vq extends vn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),we(this,Symbol.asyncIterator,void 0),we(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}we(Vq,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class Hq extends vn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),we(this,"code","ERR_JWKS_TIMEOUT")}}we(Hq,"code","ERR_JWKS_TIMEOUT");class Kq extends vn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),we(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}we(Kq,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function Ur(){return Ur=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ur.apply(null,arguments)}const G1=new Uint8Array(0);class cd{static getFullOptions(e){var n;const r=function(i){var o,a;const{textOnly:s}=(o=(a=i.overrides)==null?void 0:a.conversation)!=null?o:{},{textOnly:c}=i;return typeof c=="boolean"?(typeof s=="boolean"&&c!==s&&console.warn(`Conflicting textOnly options provided: ${c} via options.textOnly (will be used) and ${s} via options.overrides.conversation.textOnly (will be ignored)`),c):typeof s=="boolean"?s:void 0}(e);return Ur({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},e,{textOnly:r,overrides:Ur({},e.overrides,{conversation:Ur({},(n=e.overrides)==null?void 0:n.conversation,{textOnly:r})})})}constructor(e,n){var r=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(i){r.status!=="connected"&&r.status!=="connecting"||(r.updateStatus("disconnecting"),await r.handleEndSession(),r.updateStatus("disconnected"),r.options.onDisconnect&&r.options.onDisconnect(i))},this.onMessage=async function(i){switch(i.type){case"interruption":return void r.handleInterruption(i);case"agent_response":return void r.handleAgentResponse(i);case"user_transcript":return void r.handleUserTranscript(i);case"internal_tentative_agent_response":return void r.handleTentativeAgentResponse(i);case"client_tool_call":try{await r.handleClientToolCall(i)}catch(o){r.onError(`Unexpected error in client tool call handling: ${o instanceof Error?o.message:String(o)}`,{clientToolName:i.client_tool_call.tool_name,toolCallId:i.client_tool_call.tool_call_id})}return;case"audio":return void r.handleAudio(i);case"vad_score":return void r.handleVadScore(i);case"ping":return void r.connection.sendMessage({type:"pong",event_id:i.ping_event.event_id});case"mcp_tool_call":return void r.handleMCPToolCall(i);case"mcp_connection_status":return void r.handleMCPConnectionStatus(i);case"agent_tool_request":return void r.handleAgentToolRequest(i);case"agent_tool_response":return void r.handleAgentToolResponse(i);case"conversation_initiation_metadata":return void r.handleConversationMetadata(i);case"asr_initiation_metadata":return void r.handleAsrInitiationMetadata(i);case"agent_chat_response_part":return void r.handleAgentChatResponsePart(i);case"error":return void r.handleErrorEvent(i);default:return void(r.options.onDebug&&r.options.onDebug(i))}},this.setVolume=({volume:i})=>{this.volume=i},this.options=e,this.connection=n,this.options.onConnect&&this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(i=>this.updateMode(i)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange&&this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange&&this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:e.interruption_event.event_id}))}handleAgentResponse(e){this.options.onMessage&&this.options.onMessage({source:"ai",role:"agent",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage&&this.options.onMessage({source:"user",role:"user",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug&&this.options.onDebug({type:"tentative_agent_response",response:e.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(e){this.options.onVadScore&&this.options.onVadScore({vadScore:e.vad_score_event.vad_score})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var n;const r=(n=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))!=null?n:"Client tool execution successful.",i=typeof r=="object"?JSON.stringify(r):String(r);this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:i,is_error:!1})}catch(r){this.onError(`Client tool execution failed with following error: ${r==null?void 0:r.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${r==null?void 0:r.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}handleMCPToolCall(e){this.options.onMCPToolCall&&this.options.onMCPToolCall(e.mcp_tool_call)}handleMCPConnectionStatus(e){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(e.mcp_connection_status)}handleAgentToolRequest(e){this.options.onAgentToolRequest&&this.options.onAgentToolRequest(e.agent_tool_request)}handleAgentToolResponse(e){e.agent_tool_response.tool_name==="end_call"&&this.endSessionWithDetails({reason:"agent",context:new CloseEvent("end_call",{reason:"Agent ended the call"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(e.agent_tool_response)}handleConversationMetadata(e){this.options.onConversationMetadata&&this.options.onConversationMetadata(e.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(e){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(e.asr_initiation_metadata_event)}handleAgentChatResponsePart(e){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(e.text_response_part)}handleErrorEvent(e){const n=e.error_event.error_type,r=e.error_event.message||e.error_event.reason||"Unknown error";n!=="max_duration_exceeded"?this.onError(`Server error: ${r}`,{errorType:n,code:e.error_event.code,debugMessage:e.error_event.debug_message,details:e.error_event.details}):this.endSessionWithDetails({reason:"error",message:r,context:new Event("max_duration_exceeded")})}onError(e,n){console.error(e,n),this.options.onError&&this.options.onError(e,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(e){this.connection.setMicMuted(e)}getInputByteFrequencyData(){return G1}getOutputByteFrequencyData(){return G1}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:e?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(e){this.connection.sendMessage({type:"contextual_update",text:e})}sendUserMessage(e){this.connection.sendMessage({type:"user_message",text:e})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(e,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:e,is_approved:n})}}let vD=class{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{e(n)})}onModeChange(e){this.onModeChangeCallback=e}updateMode(e){var n;(n=this.onModeChangeCallback)==null||n.call(this,e)}disconnect(e){var n;this.disconnectionDetails||(this.disconnectionDetails=e,(n=this.onDisconnectCallback)==null||n.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}};function Pp(t){const[e,n]=t.split("_");if(!["pcm","ulaw"].includes(e))throw new Error(`Invalid format: ${t}`);const r=Number.parseInt(n);if(Number.isNaN(r))throw new Error(`Invalid sample rate: ${n}`);return{format:e,sampleRate:r}}const yD="0.14.0";function Cb(t){return!!t.type}const bD="conversation_initiation_client_data";function wD(t){var e;const n={type:bD};var r,i,o,a,s,c,l,u;return t.overrides&&(n.conversation_config_override={agent:{prompt:(r=t.overrides.agent)==null?void 0:r.prompt,first_message:(i=t.overrides.agent)==null?void 0:i.firstMessage,language:(o=t.overrides.agent)==null?void 0:o.language},tts:{voice_id:(a=t.overrides.tts)==null?void 0:a.voiceId,speed:(s=t.overrides.tts)==null?void 0:s.speed,stability:(c=t.overrides.tts)==null?void 0:c.stability,similarity_boost:(l=t.overrides.tts)==null?void 0:l.similarityBoost},conversation:{text_only:(u=t.overrides.conversation)==null?void 0:u.textOnly}}),t.customLlmExtraBody&&(n.custom_llm_extra_body=t.customLlmExtraBody),t.dynamicVariables&&(n.dynamic_variables=t.dynamicVariables),t.userId&&(n.user_id=t.userId),(e=t.overrides)!=null&&e.client&&(n.source_info={source:t.overrides.client.source,version:t.overrides.client.version}),n}let Y1=class extends Error{constructor(e,n){super(e),this.closeCode=void 0,this.closeReason=void 0,this.name="SessionConnectionError",this.closeCode=n==null?void 0:n.closeCode,this.closeReason=n==null?void 0:n.closeReason}},_b=class SD extends vD{constructor(e,n,r,i){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.socket.addEventListener("error",o=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:o}),0)}),this.socket.addEventListener("close",o=>{this.disconnect(o.code===1e3?{reason:"agent",context:o,closeCode:o.code,closeReason:o.reason||void 0}:{reason:"error",message:o.reason||"The connection was closed by the server.",context:o,closeCode:o.code,closeReason:o.reason||void 0})}),this.socket.addEventListener("message",o=>{try{const a=JSON.parse(o.data);if(!Cb(a))return void this.debug({type:"invalid_event",message:"Received invalid socket event",data:o.data});this.handleMessage(a)}catch(a){this.debug({type:"parsing_error",message:"Failed to parse socket message",error:a instanceof Error?a.message:String(a),data:o.data})}})}static async create(e){let n=null;try{var r,i,o;const s=(r=e.origin)!=null?r:"wss://api.elevenlabs.io";let c;const l=((i=e.overrides)==null||(i=i.client)==null?void 0:i.version)||yD,u=((o=e.overrides)==null||(o=o.client)==null?void 0:o.source)||"js_sdk";if(e.signedUrl){const y=e.signedUrl.includes("?")?"&":"?";c=`${e.signedUrl}${y}source=${u}&version=${l}`}else c=`${s}/v1/convai/conversation?agent_id=${e.agentId}&source=${u}&version=${l}`;const d=["convai"];e.authorization&&d.push(`bearer.${e.authorization}`),n=new WebSocket(c,d);const f=await new Promise((y,w)=>{n.addEventListener("open",()=>{var S;const b=wD(e);(S=n)==null||S.send(JSON.stringify(b))},{once:!0}),n.addEventListener("error",S=>{setTimeout(()=>w(new Y1("The connection was closed due to a socket error.")),0)}),n.addEventListener("close",S=>{w(new Y1(S.reason||(S.code===1e3?"Connection closed normally before session could be established.":"Connection closed unexpectedly before session could be established."),{closeCode:S.code,closeReason:S.reason||void 0}))}),n.addEventListener("message",S=>{const b=JSON.parse(S.data);Cb(b)&&(b.type==="conversation_initiation_metadata"?y(b.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:h,agent_output_audio_format:m,user_input_audio_format:p}=f,g=Pp(p??"pcm_16000"),v=Pp(m);return new SD(n,h,g,v)}catch(s){var a;throw(a=n)==null||a.close(),s}}close(){this.socket.close(1e3,"User ended conversation")}sendMessage(e){this.socket.send(JSON.stringify(e))}async setMicMuted(e){console.warn(`WebSocket connection setMicMuted called with ${e}, but this is handled by VoiceConversation`)}};function xD(t){const e=new Uint8Array(t);return window.btoa(String.fromCharCode(...e))}function Gq(t){const e=window.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer}const Hf=new Map;function kD(t,e){return async(n,r)=>{const i=Hf.get(t);if(i)return n.addModule(i);if(r)try{return await n.addModule(r),void Hf.set(t,r)}catch(s){throw new Error(`Failed to load the ${t} worklet module from path: ${r}. Error: ${s}`)}const o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o);try{return await n.addModule(a),void Hf.set(t,a)}catch{URL.revokeObjectURL(a)}try{const s=`data:application/javascript;base64,${btoa(e)}`;await n.addModule(s),Hf.set(t,s)}catch{throw new Error(`Failed to load the ${t} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const TD=kD("rawAudioProcessor",`/*
 * ulaw encoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 10;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("rawAudioProcessor", RawAudioProcessor);
`);let wa=class CD extends vD{constructor(e,n,r,i,o={}){super(o),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=e,this.conversationId=n,this.inputFormat=r,this.outputFormat=i,this.setupRoomEventListeners()}static async create(e){let n;if("conversationToken"in e&&e.conversationToken)n=e.conversationToken;else{if(!("agentId"in e)||!e.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var r,i,o;const l=((r=e.overrides)==null||(r=r.client)==null?void 0:r.version)||yD,u=((i=e.overrides)==null||(i=i.client)==null?void 0:i.source)||"js_sdk",d=`${a=(o=e.origin)!=null?o:"https://api.elevenlabs.io",a.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${e.agentId}&source=${u}&version=${l}`,f=await fetch(d);if(!f.ok)throw new Error(`ElevenLabs API returned ${f.status} ${f.statusText}`);if(n=(await f.json()).token,!n)throw new Error("No conversation token received from API")}catch(l){let u=l instanceof Error?l.message:String(l);throw l instanceof Error&&l.message.includes("401")&&(u="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${e.agentId}: ${u}`)}}var a;const s=new Dc;try{const l=`room_${Date.now()}`,u=Pp("pcm_48000"),d=Pp("pcm_48000"),f=new CD(s,l,u,d,e),h=e.livekitUrl||"wss://livekit.rtc.elevenlabs.io";var c;await s.connect(h,n),await new Promise(p=>{if(f.isConnected)p();else{const g=()=>{s.off(K.Connected,g),p()};s.on(K.Connected,g)}}),s.name&&(f.conversationId=((c=s.name.match(/(conv_[a-zA-Z0-9]+)/))==null?void 0:c[0])||s.name),e.textOnly||await s.localParticipant.setMicrophoneEnabled(!0);const m=wD(e);return f.debug({type:bD,message:m}),await f.sendMessage(m),f}catch(l){throw await s.disconnect(),l}}setupRoomEventListeners(){var e=this;this.room.on(K.Connected,async function(){e.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(K.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n==null?void 0:n.toString()})})}),this.room.on(K.ConnectionStateChanged,n=>{n===Ae.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(K.DataReceived,(n,r)=>{try{const i=JSON.parse(new TextDecoder().decode(n));if(i.type==="audio")return;Cb(i)?this.handleMessage(i):console.warn("Invalid socket event received:",i)}catch(i){console.warn("Failed to parse incoming data message:",i),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(K.TrackSubscribed,async function(n,r,i){if(n.kind===V.Kind.Audio&&i.identity.includes("agent")){const o=n,a=o.attach();if(a.autoplay=!0,a.controls=!1,e.outputDeviceId&&a.setSinkId)try{await a.setSinkId(e.outputDeviceId)}catch(s){console.warn("Failed to set output device for new audio element:",s)}a.style.display="none",document.body.appendChild(a),e.audioElements.push(a),e.audioElements.length===1&&(e.onDebug==null||e.onDebug({type:"audio_element_ready"})),await e.setupAudioCapture(o)}}),this.room.on(K.ActiveSpeakersChanged,async function(n){e.updateMode(n.length>0&&n[0].identity.startsWith("agent")?"speaking":"listening")}),this.room.on(K.ParticipantDisconnected,n=>{var r;(r=n.identity)!=null&&r.startsWith("agent")&&this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:"agent disconnected"})})})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(e=>{e.track&&e.track.stop()})}catch(e){console.warn("Error stopping local tracks:",e)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(e=>{console.warn("Error closing audio capture context:",e)}),this.audioCaptureContext=null),this.audioElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in e))try{const n=new TextEncoder().encode(JSON.stringify(e));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:e,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(e){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(V.Source.Microphone);if(n!=null&&n.track)try{e?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!e)}else await this.room.localParticipant.setMicrophoneEnabled(!e)}async setupAudioCapture(e){try{const n=new AudioContext;this.audioCaptureContext=n,this.outputAnalyser=n.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const r=new MediaStream([e.mediaStreamTrack]),i=n.createMediaStreamSource(r);i.connect(this.outputAnalyser),await TD(n.audioWorklet);const o=new AudioWorkletNode(n,"rawAudioProcessor");this.outputAnalyser.connect(o),o.port.postMessage({type:"setFormat",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),o.port.onmessage=a=>{const[s,c]=a.data;if(c>.01){const l=xD(s.buffer),u=this.audioEventId++;this.handleMessage({type:"audio",audio_event:{audio_base_64:l,event_id:u}})}},i.connect(o)}catch(n){console.warn("Failed to set up audio capture:",n)}}setAudioVolume(e){this.audioElements.forEach(n=>{n.volume=e})}async setAudioOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");const n=this.audioElements.map(async function(r){try{await r.setSinkId(e)}catch(i){throw console.error("Failed to set sink ID for audio element:",i),i}});await Promise.all(n),this.outputDeviceId=e}async setAudioInputDevice(e){if(!this.isConnected||!this.room.localParticipant)throw new Error("Cannot change input device: room not connected or no local participant");try{const n=this.room.localParticipant.getTrackPublication(V.Source.Microphone);n!=null&&n.track&&(await n.track.stop(),await this.room.localParticipant.unpublishTrack(n.track));const r={deviceId:{exact:e},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},i=await pD(r);await this.room.localParticipant.publishTrack(i,{name:"microphone",source:V.Source.Microphone})}catch(n){console.error("Failed to change input device:",n);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(r){console.error("Failed to recover microphone after device switch error:",r)}throw n}}getOutputByteFrequencyData(){return this.outputAnalyser?(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}};async function _D(t){const e=function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"}(t);switch(e){case"websocket":return _b.create(t);case"webrtc":return wa.create(t);default:throw new Error(`Unknown connection type: ${e}`)}}function Eb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function ED(t={default:0,android:3e3}){let e=t.default;var n;if(/android/i.test(navigator.userAgent))e=(n=t.android)!=null?n:e;else if(Eb()){var r;e=(r=t.ios)!=null?r:e}e>0&&await new Promise(i=>setTimeout(i,e))}let Yq=class PD extends cd{static async startSession(e){const n=cd.getFullOptions(e);n.onStatusChange&&n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1}),n.onModeChange&&n.onModeChange({mode:"listening"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let r=null;try{return await ED(n.connectionDelay),r=await _D(e),new PD(n,r)}catch(o){var i;throw n.onStatusChange&&n.onStatusChange({status:"disconnected"}),(i=r)==null||i.close(),o}}};const X1={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};class cc{static async create({sampleRate:e,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:o,libsampleratePath:a,onError:s}){let c=null,l=null;try{const f=Ur({sampleRate:{ideal:e}},X1);if(Eb()&&r){const w=(await window.navigator.mediaDevices.enumerateDevices()).find(S=>S.kind==="audioinput"&&["airpod","headphone","earphone"].find(b=>S.label.toLowerCase().includes(b)));w&&(f.deviceId={ideal:w.deviceId})}i&&(f.deviceId=cc.getDeviceIdConstraint(i));const h=navigator.mediaDevices.getSupportedConstraints().sampleRate;c=new window.AudioContext(h?{sampleRate:e}:{});const m=c.createAnalyser();if(!h){const w=a||"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js";await c.audioWorklet.addModule(w)}await TD(c.audioWorklet,o==null?void 0:o.rawAudioProcessor);const p=Ur({voiceIsolation:!0},f);l=await navigator.mediaDevices.getUserMedia({audio:p});const g=c.createMediaStreamSource(l),v=new AudioWorkletNode(c,"rawAudioProcessor");v.port.postMessage({type:"setFormat",format:n,sampleRate:e}),g.connect(m),m.connect(v),await c.resume();const y=await navigator.permissions.query({name:"microphone"});return new cc(c,m,v,l,g,y,s)}catch(f){var u,d;throw(u=l)==null||u.getTracks().forEach(h=>{h.stop()}),(d=c)==null||d.close(),f}}static getDeviceIdConstraint(e){if(e)return Eb()?{ideal:e}:{exact:e}}constructor(e,n,r,i,o,a,s=console.error){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.permissions=void 0,this.onError=void 0,this.settingInput=!1,this.handlePermissionsChange=()=>{if(this.permissions.state==="denied")this.onError("Microphone permission denied");else if(!this.settingInput){var c;const[l]=this.inputStream.getAudioTracks(),{deviceId:u}=(c=l==null?void 0:l.getSettings())!=null?c:{};this.setInputDevice(u).catch(d=>{this.onError("Failed to reset input device after permission change:",d)})}},this.context=e,this.analyser=n,this.worklet=r,this.inputStream=i,this.mediaStreamSource=o,this.permissions=a,this.onError=s,this.permissions.addEventListener("change",this.handlePermissionsChange)}forgetInputStreamAndSource(){for(const e of this.inputStream.getTracks())e.stop();this.mediaStreamSource.disconnect()}async close(){this.forgetInputStreamAndSource(),this.permissions.removeEventListener("change",this.handlePermissionsChange),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:"setMuted",isMuted:e})}async setInputDevice(e){try{if(this.settingInput)throw new Error("Input device is already being set");this.settingInput=!0;const n=Ur({},X1);e&&(n.deviceId=cc.getDeviceIdConstraint(e));const r=Ur({voiceIsolation:!0},n),i=await navigator.mediaDevices.getUserMedia({audio:r});this.forgetInputStreamAndSource(),this.inputStream=i,this.mediaStreamSource=this.context.createMediaStreamSource(i),this.mediaStreamSource.connect(this.analyser)}catch(n){throw this.onError("Failed to switch input device:",n),n}finally{this.settingInput=!1}}}const Xq=kD("audioConcatProcessor",`/*
 * ulaw decoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const decodeTable = [0,132,396,924,1980,4092,8316,16764];

function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audioConcatProcessor", AudioConcatProcessor);
`);class Op{static async create({sampleRate:e,format:n,outputDeviceId:r,workletPaths:i}){let o=null,a=null;try{o=new AudioContext({sampleRate:e});const l=o.createAnalyser(),u=o.createGain();a=new Audio,a.src="",a.load(),a.autoplay=!0,a.style.display="none",document.body.appendChild(a);const d=o.createMediaStreamDestination();a.srcObject=d.stream,u.connect(l),l.connect(d),await Xq(o.audioWorklet,i==null?void 0:i.audioConcatProcessor);const f=new AudioWorkletNode(o,"audioConcatProcessor");return f.port.postMessage({type:"setFormat",format:n}),f.connect(u),await o.resume(),r&&a.setSinkId&&await a.setSinkId(r),new Op(o,l,u,f,a)}catch(l){var s,c;throw(s=a)!=null&&s.parentNode&&a.parentNode.removeChild(a),(c=a)==null||c.pause(),o&&o.state!=="closed"&&await o.close(),l}}constructor(e,n,r,i,o){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=e,this.analyser=n,this.gain=r,this.worklet=i,this.audioElement=o}async setOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");await this.audioElement.setSinkId(e||"")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class Ou extends cd{static async requestWakeLock(){if("wakeLock"in navigator)try{return await navigator.wakeLock.request("screen")}catch{}return null}static async startSession(e){var n;const r=cd.getFullOptions(e);r.onStatusChange&&r.onStatusChange({status:"connecting"}),r.onCanSendFeedbackChange&&r.onCanSendFeedbackChange({canSendFeedback:!1});let i=null,o=null,a=null,s=null,c=null;((n=e.useWakeLock)==null||n)&&(c=await Ou.requestWakeLock());try{var l;return s=await navigator.mediaDevices.getUserMedia({audio:!0}),await ED(r.connectionDelay),o=await _D(e),[i,a]=await Promise.all([cc.create(Ur({},o.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices,inputDeviceId:e.inputDeviceId,workletPaths:e.workletPaths,libsampleratePath:e.libsampleratePath})),Op.create(Ur({},o.outputFormat,{outputDeviceId:e.outputDeviceId,workletPaths:e.workletPaths}))]),(l=s)==null||l.getTracks().forEach(p=>{p.stop()}),s=null,new Ou(r,o,i,a,c)}catch(p){var u,d,f,h;r.onStatusChange&&r.onStatusChange({status:"disconnected"}),(u=s)==null||u.getTracks().forEach(g=>{g.stop()}),(d=o)==null||d.close(),await((f=i)==null?void 0:f.close()),await((h=a)==null?void 0:h.close());try{var m;await((m=c)==null?void 0:m.release()),c=null}catch{}throw p}}constructor(e,n,r,i,o){super(e,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.visibilityChangeHandler=null,this.onInputWorkletMessage=a=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:xD(a.data[0].buffer)})},this.onOutputWorkletMessage=({data:a})=>{a.type==="process"&&this.updateMode(a.finished?"listening":"speaking")},this.addAudioBase64Chunk=a=>{this.output.gain.gain.cancelScheduledValues(this.output.context.currentTime),this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:Gq(a)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=a=>{if(a.length===0)return 0;let s=0;for(let c=0;c<a.length;c++)s+=a[c]/255;return s/=a.length,s<0?0:s>1?1:s},this.setVolume=({volume:a})=>{const s=Number.isFinite(a)?Math.min(1,Math.max(0,a)):1;this.volume=s,this.connection instanceof wa?this.connection.setAudioVolume(s):this.output.gain.gain.value=s},this.input=r,this.output=i,this.wakeLock=o,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage,o&&(this.visibilityChangeHandler=()=>{var a;document.visibilityState==="visible"&&(a=this.wakeLock)!=null&&a.released&&Ou.requestWakeLock().then(s=>{this.wakeLock=s})},document.addEventListener("visibilitychange",this.visibilityChangeHandler))}async handleEndSession(){await super.handleEndSession(),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler);try{var e;await((e=this.wakeLock)==null?void 0:e.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){var n,r;super.handleAudio(e),e.audio_event.alignment&&this.options.onAudioAlignment&&this.options.onAudioAlignment(e.audio_event.alignment),this.lastInterruptTimestamp<=e.audio_event.event_id&&(e.audio_event.audio_base_64&&((n=(r=this.options).onAudio)==null||n.call(r,e.audio_event.audio_base_64),this.connection instanceof wa||this.addAudioBase64Chunk(e.audio_event.audio_base_64)),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(e){this.connection instanceof wa?this.connection.setMicMuted(e):this.input.setMuted(e)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof wa?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:e,format:n,preferHeadphonesForIosDevices:r,inputDeviceId:i}){try{if(this.connection instanceof _b)try{return await this.input.setInputDevice(i),this.input}catch(a){console.warn("Failed to change device on existing input, recreating:",a)}this.connection instanceof wa&&await this.connection.setAudioInputDevice(i||""),await this.input.close();const o=await cc.create({sampleRate:e??this.connection.inputFormat.sampleRate,format:n??this.connection.inputFormat.format,preferHeadphonesForIosDevices:r,inputDeviceId:i,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath,onError:this.options.onError});return this.input=o,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(o){throw console.error("Error changing input device",o),o}}async changeOutputDevice({sampleRate:e,format:n,outputDeviceId:r}){try{if(this.connection instanceof _b)try{return await this.output.setOutputDevice(r),this.output}catch(o){console.warn("Failed to change device on existing output, recreating:",o)}this.connection instanceof wa&&await this.connection.setAudioOutputDevice(r||""),await this.output.close();const i=await Op.create({sampleRate:e??this.connection.outputFormat.sampleRate,format:n??this.connection.outputFormat.format,outputDeviceId:r,workletPaths:this.options.workletPaths});return this.output=i,this.output}catch(i){throw console.error("Error changing output device",i),i}}}var Q1;(function(t){t.SESSION_STARTED="session_started",t.PARTIAL_TRANSCRIPT="partial_transcript",t.COMMITTED_TRANSCRIPT="committed_transcript",t.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS="committed_transcript_with_timestamps",t.AUTH_ERROR="auth_error",t.ERROR="error",t.OPEN="open",t.CLOSE="close",t.QUOTA_EXCEEDED="quota_exceeded",t.COMMIT_THROTTLED="commit_throttled",t.TRANSCRIBER_ERROR="transcriber_error",t.UNACCEPTED_TERMS="unaccepted_terms",t.RATE_LIMITED="rate_limited",t.INPUT_ERROR="input_error",t.QUEUE_OVERFLOW="queue_overflow",t.RESOURCE_EXHAUSTED="resource_exhausted",t.SESSION_TIME_LIMIT_EXCEEDED="session_time_limit_exceeded",t.CHUNK_SIZE_EXCEEDED="chunk_size_exceeded",t.INSUFFICIENT_AUDIO_ACTIVITY="insufficient_audio_activity"})(Q1||(Q1={}));var J1,Z1;(function(t){t.PCM_8000="pcm_8000",t.PCM_16000="pcm_16000",t.PCM_22050="pcm_22050",t.PCM_24000="pcm_24000",t.PCM_44100="pcm_44100",t.PCM_48000="pcm_48000",t.ULAW_8000="ulaw_8000"})(J1||(J1={})),function(t){t.MANUAL="manual",t.VAD="vad"}(Z1||(Z1={}));class qx extends cd{static startSession(e){const n=qx.getFullOptions(e);return n.textOnly?Yq.startSession(n):Ou.startSession(n)}}function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(null,arguments)}const Qq=["micMuted","volume","serverLocation"];function Jq(t="us"){switch(t){case"eu-residency":case"in-residency":case"us":case"global":return t;default:return console.warn(`[ConversationalAI] Invalid server-location: ${t}. Defaulting to "us"`),"us"}}function Zq(t){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[t]}function eW(t){return{us:"wss://livekit.rtc.elevenlabs.io","eu-residency":"wss://livekit.rtc.eu.residency.elevenlabs.io","in-residency":"wss://livekit.rtc.in.residency.elevenlabs.io",global:"wss://livekit.rtc.elevenlabs.io"}[t]}function tW(t={}){const{micMuted:e,volume:n,serverLocation:r}=t,i=function(g,v){if(g==null)return{};var y={};for(var w in g)if({}.hasOwnProperty.call(g,w)){if(v.indexOf(w)!==-1)continue;y[w]=g[w]}return y}(t,Qq),o=M.useRef(null),a=M.useRef(null),s=M.useRef(!1),[c,l]=M.useState("disconnected"),[u,d]=M.useState(!1),[f,h]=M.useState("listening"),m=M.useRef(e),p=M.useRef(n);return m.current=e,p.current=n,M.useEffect(()=>{var g;e!==void 0&&(o==null||(g=o.current)==null||g.setMicMuted(e))},[e]),M.useEffect(()=>{var g;n!==void 0&&(o==null||(g=o.current)==null||g.setVolume({volume:n}))},[n]),M.useEffect(()=>()=>{var g;s.current=!0,a.current?a.current.then(v=>v.endSession()):(g=o.current)==null||g.endSession()},[]),{startSession:async g=>{var v;if((v=o.current)!=null&&v.isOpen())return o.current.getId();if(a.current)return(await a.current).getId();s.current=!1;try{var y,w,S,b,x,T,C,_,E,A;const P=Jq((g==null?void 0:g.serverLocation)||r),L=Zq(P),j=eW(P);if(a.current=qx.startSession(Au({},i??{},g??{},{origin:L,livekitUrl:(g==null?void 0:g.livekitUrl)||(i==null?void 0:i.livekitUrl)||j,overrides:Au({},(y=i==null?void 0:i.overrides)!=null?y:{},(w=g==null?void 0:g.overrides)!=null?w:{},{client:Au({},(S=i==null||(b=i.overrides)==null?void 0:b.client)!=null?S:{},(x=g==null||(T=g.overrides)==null?void 0:T.client)!=null?x:{},{source:(g==null||(C=g.overrides)==null||(C=C.client)==null?void 0:C.source)||(i==null||(_=i.overrides)==null||(_=_.client)==null?void 0:_.source)||"react_sdk",version:(g==null||(E=g.overrides)==null||(E=E.client)==null?void 0:E.version)||(i==null||(A=i.overrides)==null||(A=A.client)==null?void 0:A.version)||"0.14.0"})}),onConnect:(g==null?void 0:g.onConnect)||(i==null?void 0:i.onConnect),onDisconnect:(g==null?void 0:g.onDisconnect)||(i==null?void 0:i.onDisconnect),onError:(g==null?void 0:g.onError)||(i==null?void 0:i.onError),onMessage:(g==null?void 0:g.onMessage)||(i==null?void 0:i.onMessage),onAudio:(g==null?void 0:g.onAudio)||(i==null?void 0:i.onAudio),onDebug:(g==null?void 0:g.onDebug)||(i==null?void 0:i.onDebug),onUnhandledClientToolCall:(g==null?void 0:g.onUnhandledClientToolCall)||(i==null?void 0:i.onUnhandledClientToolCall),onVadScore:(g==null?void 0:g.onVadScore)||(i==null?void 0:i.onVadScore),onInterruption:(g==null?void 0:g.onInterruption)||(i==null?void 0:i.onInterruption),onAgentToolRequest:(g==null?void 0:g.onAgentToolRequest)||(i==null?void 0:i.onAgentToolRequest),onAgentToolResponse:(g==null?void 0:g.onAgentToolResponse)||(i==null?void 0:i.onAgentToolResponse),onConversationMetadata:(g==null?void 0:g.onConversationMetadata)||(i==null?void 0:i.onConversationMetadata),onMCPToolCall:(g==null?void 0:g.onMCPToolCall)||(i==null?void 0:i.onMCPToolCall),onMCPConnectionStatus:(g==null?void 0:g.onMCPConnectionStatus)||(i==null?void 0:i.onMCPConnectionStatus),onAsrInitiationMetadata:(g==null?void 0:g.onAsrInitiationMetadata)||(i==null?void 0:i.onAsrInitiationMetadata),onAgentChatResponsePart:(g==null?void 0:g.onAgentChatResponsePart)||(i==null?void 0:i.onAgentChatResponsePart),onAudioAlignment:(g==null?void 0:g.onAudioAlignment)||(i==null?void 0:i.onAudioAlignment),onModeChange:({mode:$})=>{var F;h($),(F=(g==null?void 0:g.onModeChange)||(i==null?void 0:i.onModeChange))==null||F({mode:$})},onStatusChange:({status:$})=>{var F;l($),(F=(g==null?void 0:g.onStatusChange)||(i==null?void 0:i.onStatusChange))==null||F({status:$})},onCanSendFeedbackChange:({canSendFeedback:$})=>{var F;d($),(F=(g==null?void 0:g.onCanSendFeedbackChange)||(i==null?void 0:i.onCanSendFeedbackChange))==null||F({canSendFeedback:$})}})),o.current=await a.current,s.current)throw await o.current.endSession(),o.current=null,a.current=null,new Error("Session cancelled during connection");return m.current!==void 0&&o.current.setMicMuted(m.current),p.current!==void 0&&o.current.setVolume({volume:p.current}),o.current.getId()}finally{a.current=null}},endSession:async()=>{s.current=!0;const g=a.current,v=o.current;o.current=null,g?await(await g).endSession():await(v==null?void 0:v.endSession())},setVolume:({volume:g})=>{var v;(v=o.current)==null||v.setVolume({volume:g})},getInputByteFrequencyData:()=>{var g;return(g=o.current)==null?void 0:g.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var g;return(g=o.current)==null?void 0:g.getOutputByteFrequencyData()},getInputVolume:()=>{var g,v;return(g=(v=o.current)==null?void 0:v.getInputVolume())!=null?g:0},getOutputVolume:()=>{var g,v;return(g=(v=o.current)==null?void 0:v.getOutputVolume())!=null?g:0},sendFeedback:g=>{var v;(v=o.current)==null||v.sendFeedback(g)},getId:()=>{var g;return(g=o.current)==null?void 0:g.getId()},sendContextualUpdate:g=>{var v;(v=o.current)==null||v.sendContextualUpdate(g)},sendUserMessage:g=>{var v;(v=o.current)==null||v.sendUserMessage(g)},sendUserActivity:()=>{var g;(g=o.current)==null||g.sendUserActivity()},sendMCPToolApprovalResult:(g,v)=>{var y;(y=o.current)==null||y.sendMCPToolApprovalResult(g,v)},changeInputDevice:async g=>{if(o.current&&"changeInputDevice"in o.current)return await o.current.changeInputDevice(g);throw new Error("Device switching is only available for voice conversations")},changeOutputDevice:async g=>{if(o.current&&"changeOutputDevice"in o.current)return await o.current.changeOutputDevice(g);throw new Error("Device switching is only available for voice conversations")},status:c,canSendFeedback:u,micMuted:e,isSpeaking:f==="speaking"}}function nW({agentId:t}){const[e,n]=M.useState(!1),[r,i]=M.useState(!1),o=tW({onConnect:()=>{i(!1)},onDisconnect:()=>{i(!1)},onError:f=>{console.error("Conversation error:",f),i(!1)}}),{status:a,isSpeaking:s}=o,c=M.useCallback(async()=>{try{i(!0),await navigator.mediaDevices.getUserMedia({audio:!0}),await o.startSession({agentId:t})}catch(f){console.error("Failed to start conversation:",f),i(!1)}},[o,t]),l=M.useCallback(async()=>{await o.endSession(),n(!1)},[o]),u=M.useCallback(()=>{a==="connected"?l():e?n(!1):(n(!0),c())},[a,e,c,l]),d=a==="connected";return k.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[d&&k.jsx("div",{className:"absolute -top-12 right-0 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-full whitespace-nowrap shadow-lg",children:s?"Speaking...":"Listening..."}),k.jsxs("button",{onClick:u,disabled:r,className:Wt("relative w-16 h-16 rounded-full shadow-xl transition-all duration-300","flex items-center justify-center","hover:scale-110 active:scale-95",d?"bg-red-500":"bg-gray-900 hover:bg-gray-800",r&&"opacity-70 cursor-wait"),title:d?"End call":"Talk to AI Agent",children:[d&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-red-400 animate-ping opacity-75"}),k.jsx("div",{className:"absolute inset-0 rounded-full border border-red-300",style:{animation:"ping 2s cubic-bezier(0, 0, 0.2, 1) infinite 0.5s"}})]}),k.jsx("div",{className:Wt("absolute inset-0 rounded-full blur-md transition-all duration-300",d?"bg-red-500 opacity-60":"bg-gradient-to-r from-red-500 via-orange-500 to-red-500 opacity-40")}),k.jsxs("div",{className:Wt("relative w-12 h-12 rounded-full transition-all duration-300",d?"bg-gradient-to-br from-red-400 to-red-600":"bg-gradient-to-br from-gray-700 to-gray-900"),style:{boxShadow:d?"inset 0 0 20px rgba(0,0,0,0.3), 0 0 20px rgba(239,68,68,0.6)":"inset 0 0 15px rgba(0,0,0,0.4), 0 0 10px rgba(0,0,0,0.3)"},children:[d&&k.jsx("div",{className:"absolute inset-1 rounded-full opacity-40",style:{background:"conic-gradient(from 0deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"spin 2s linear infinite"}}),k.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r?k.jsxs("svg",{className:"w-6 h-6 text-white animate-spin",fill:"none",viewBox:"0 0 24 24",children:[k.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),k.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?k.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):k.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),k.jsx("div",{className:"absolute top-1.5 left-2.5 w-3 h-2 rounded-full bg-white opacity-30 blur-[1px]"})]})]}),k.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes ping {
          75%, 100% {
            transform: scale(2);
            opacity: 0;
          }
        }
      `})]})}const rW=[{name:"Dashboard",href:"/",icon:QB},{name:"Alerts",href:"/alerts",icon:Mc},{name:"Tasks",href:"/tasks",icon:cx}];function iW({children:t}){const e=fl(),{isConnected:n}=px(),[r,i]=M.useState(!1);return k.jsxs("div",{className:"min-h-screen bg-gray-50",children:[k.jsx("div",{className:Wt("fixed inset-0 z-50 bg-gray-900/50 lg:hidden transition-opacity",r?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>i(!1)}),k.jsx("div",{className:Wt("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r transform transition-transform lg:translate-x-0",r?"translate-x-0":"-translate-x-full"),children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(aI,{className:"w-6 h-6 text-primary"}),k.jsx("span",{className:"text-lg font-bold",children:"Store Health AI"})]}),k.jsx("button",{onClick:()=>i(!1),className:"lg:hidden",children:k.jsx(sI,{className:"w-5 h-5"})})]}),k.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1",children:rW.map(o=>{const a=e.pathname===o.href;return k.jsxs(nf,{to:o.href,className:Wt("flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-lg transition-colors",a?"bg-primary text-primary-foreground":"text-gray-700 hover:bg-gray-100"),onClick:()=>i(!1),children:[k.jsx(o.icon,{className:"w-5 h-5"}),o.name]},o.name)})}),k.jsx("div",{className:"p-4 border-t",children:k.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[k.jsx(nI,{className:Wt("w-4 h-4",n?"text-success":"text-gray-400")}),k.jsx("span",{className:"text-muted-foreground",children:n?"Connected":"Disconnected"})]})})]})}),k.jsxs("div",{className:"lg:pl-64",children:[k.jsx("div",{className:"sticky top-0 z-40 h-16 bg-white border-b",children:k.jsxs("div",{className:"flex items-center justify-between h-full px-4 lg:px-8",children:[k.jsx("button",{onClick:()=>i(!0),className:"lg:hidden",children:k.jsx(ZB,{className:"w-6 h-6"})}),k.jsx("div",{className:"flex-1"}),k.jsx("div",{className:"flex items-center gap-4",children:k.jsx("div",{className:"hidden sm:block text-sm text-muted-foreground",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),k.jsx("main",{className:"p-4 lg:p-8",children:t})]}),k.jsx(nW,{agentId:"agent_3701kgg7d7v3e1vbjsxv0p5pn48e"})]})}function OD(t,e){return function(){return t.apply(e,arguments)}}const{toString:oW}=Object.prototype,{getPrototypeOf:Wx}=Object,{iterator:sg,toStringTag:AD}=Symbol,cg=(t=>e=>{const n=oW.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Hr=t=>(t=t.toLowerCase(),e=>cg(e)===t),lg=t=>e=>typeof e===t,{isArray:ml}=Array,jc=lg("undefined");function rf(t){return t!==null&&!jc(t)&&t.constructor!==null&&!jc(t.constructor)&&Mn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const RD=Hr("ArrayBuffer");function aW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&RD(t.buffer),e}const sW=lg("string"),Mn=lg("function"),MD=lg("number"),of=t=>t!==null&&typeof t=="object",cW=t=>t===!0||t===!1,Uh=t=>{if(cg(t)!=="object")return!1;const e=Wx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(AD in t)&&!(sg in t)},lW=t=>{if(!of(t)||rf(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},uW=Hr("Date"),dW=Hr("File"),fW=Hr("Blob"),hW=Hr("FileList"),pW=t=>of(t)&&Mn(t.pipe),mW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mn(t.append)&&((e=cg(t))==="formdata"||e==="object"&&Mn(t.toString)&&t.toString()==="[object FormData]"))},gW=Hr("URLSearchParams"),[vW,yW,bW,wW]=["ReadableStream","Request","Response","Headers"].map(Hr),SW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function af(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),ml(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(rf(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function ID(t,e){if(rf(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Oa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ND=t=>!jc(t)&&t!==Oa;function Pb(){const{caseless:t,skipUndefined:e}=ND(this)&&this||{},n={},r=(i,o)=>{const a=t&&ID(n,o)||o;Uh(n[a])&&Uh(i)?n[a]=Pb(n[a],i):Uh(i)?n[a]=Pb({},i):ml(i)?n[a]=i.slice():(!e||!jc(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&af(arguments[i],r);return n}const xW=(t,e,n,{allOwnKeys:r}={})=>(af(e,(i,o)=>{n&&Mn(i)?Object.defineProperty(t,o,{value:OD(i,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,o,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),kW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),TW=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},CW=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&Wx(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},_W=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},EW=t=>{if(!t)return null;if(ml(t))return t;let e=t.length;if(!MD(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},PW=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Wx(Uint8Array)),OW=(t,e)=>{const r=(t&&t[sg]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},AW=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},RW=Hr("HTMLFormElement"),MW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),e_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),IW=Hr("RegExp"),DD=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};af(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},NW=t=>{DD(t,(e,n)=>{if(Mn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},DW=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return ml(t)?r(t):r(String(t).split(e)),n},jW=()=>{},LW=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function $W(t){return!!(t&&Mn(t.append)&&t[AD]==="FormData"&&t[sg])}const FW=t=>{const e=new Array(10),n=(r,i)=>{if(of(r)){if(e.indexOf(r)>=0)return;if(rf(r))return r;if(!("toJSON"in r)){e[i]=r;const o=ml(r)?[]:{};return af(r,(a,s)=>{const c=n(a,i+1);!jc(c)&&(o[s]=c)}),e[i]=void 0,o}}return r};return n(t,0)},UW=Hr("AsyncFunction"),BW=t=>t&&(of(t)||Mn(t))&&Mn(t.then)&&Mn(t.catch),jD=((t,e)=>t?setImmediate:e?((n,r)=>(Oa.addEventListener("message",({source:i,data:o})=>{i===Oa&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Oa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mn(Oa.postMessage)),zW=typeof queueMicrotask<"u"?queueMicrotask.bind(Oa):typeof process<"u"&&process.nextTick||jD,qW=t=>t!=null&&Mn(t[sg]),U={isArray:ml,isArrayBuffer:RD,isBuffer:rf,isFormData:mW,isArrayBufferView:aW,isString:sW,isNumber:MD,isBoolean:cW,isObject:of,isPlainObject:Uh,isEmptyObject:lW,isReadableStream:vW,isRequest:yW,isResponse:bW,isHeaders:wW,isUndefined:jc,isDate:uW,isFile:dW,isBlob:fW,isRegExp:IW,isFunction:Mn,isStream:pW,isURLSearchParams:gW,isTypedArray:PW,isFileList:hW,forEach:af,merge:Pb,extend:xW,trim:SW,stripBOM:kW,inherits:TW,toFlatObject:CW,kindOf:cg,kindOfTest:Hr,endsWith:_W,toArray:EW,forEachEntry:OW,matchAll:AW,isHTMLForm:RW,hasOwnProperty:e_,hasOwnProp:e_,reduceDescriptors:DD,freezeMethods:NW,toObjectSet:DW,toCamelCase:MW,noop:jW,toFiniteNumber:LW,findKey:ID,global:Oa,isContextDefined:ND,isSpecCompliantForm:$W,toJSONObject:FW,isAsyncFn:UW,isThenable:BW,setImmediate:jD,asap:zW,isIterable:qW};let ue=class LD extends Error{static from(e,n,r,i,o,a){const s=new LD(e.message,n||e.code,r,i,o);return s.cause=e,s.name=e.name,a&&Object.assign(s,a),s}constructor(e,n,r,i,o){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}};ue.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ue.ERR_BAD_OPTION="ERR_BAD_OPTION";ue.ECONNABORTED="ECONNABORTED";ue.ETIMEDOUT="ETIMEDOUT";ue.ERR_NETWORK="ERR_NETWORK";ue.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ue.ERR_DEPRECATED="ERR_DEPRECATED";ue.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ue.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ue.ERR_CANCELED="ERR_CANCELED";ue.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ue.ERR_INVALID_URL="ERR_INVALID_URL";const WW=null;function Ob(t){return U.isPlainObject(t)||U.isArray(t)}function $D(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function t_(t,e,n){return t?t.concat(e).map(function(i,o){return i=$D(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function VW(t){return U.isArray(t)&&!t.some(Ob)}const HW=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function ug(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!U.isUndefined(g[p])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(i))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(U.isDate(m))return m.toISOString();if(U.isBoolean(m))return m.toString();if(!c&&U.isBlob(m))throw new ue("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(m)||U.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,p,g){let v=m;if(m&&!g&&typeof m=="object"){if(U.endsWith(p,"{}"))p=r?p:p.slice(0,-2),m=JSON.stringify(m);else if(U.isArray(m)&&VW(m)||(U.isFileList(m)||U.endsWith(p,"[]"))&&(v=U.toArray(m)))return p=$D(p),v.forEach(function(w,S){!(U.isUndefined(w)||w===null)&&e.append(a===!0?t_([p],S,o):a===null?p:p+"[]",l(w))}),!1}return Ob(m)?!0:(e.append(t_(g,p,o),l(m)),!1)}const d=[],f=Object.assign(HW,{defaultVisitor:u,convertValue:l,isVisitable:Ob});function h(m,p){if(!U.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(m),U.forEach(m,function(v,y){(!(U.isUndefined(v)||v===null)&&i.call(e,v,U.isString(y)?y.trim():y,p,f))===!0&&h(v,p?p.concat(y):[y])}),d.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return h(t),e}function n_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Vx(t,e){this._pairs=[],t&&ug(t,this,e)}const FD=Vx.prototype;FD.append=function(e,n){this._pairs.push([e,n])};FD.toString=function(e){const n=e?function(r){return e.call(this,r,n_)}:n_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function KW(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function UD(t,e,n){if(!e)return t;const r=n&&n.encode||KW,i=U.isFunction(n)?{serialize:n}:n,o=i&&i.serialize;let a;if(o?a=o(e,i):a=U.isURLSearchParams(e)?e.toString():new Vx(e,i).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class r_{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const BD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GW=typeof URLSearchParams<"u"?URLSearchParams:Vx,YW=typeof FormData<"u"?FormData:null,XW=typeof Blob<"u"?Blob:null,QW={isBrowser:!0,classes:{URLSearchParams:GW,FormData:YW,Blob:XW},protocols:["http","https","file","blob","url","data"]},Hx=typeof window<"u"&&typeof document<"u",Ab=typeof navigator=="object"&&navigator||void 0,JW=Hx&&(!Ab||["ReactNative","NativeScript","NS"].indexOf(Ab.product)<0),ZW=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eV=Hx&&window.location.href||"http://localhost",tV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hx,hasStandardBrowserEnv:JW,hasStandardBrowserWebWorkerEnv:ZW,navigator:Ab,origin:eV},Symbol.toStringTag,{value:"Module"})),on={...tV,...QW};function nV(t,e){return ug(t,new on.classes.URLSearchParams,{visitor:function(n,r,i,o){return on.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function rV(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iV(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function zD(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&U.isArray(i)?i.length:a,c?(U.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!U.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&U.isArray(i[a])&&(i[a]=iV(i[a])),!s)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,i)=>{e(rV(r),i,n,0)}),n}return null}function oV(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sf={transitional:BD,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=U.isObject(e);if(o&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return i?JSON.stringify(zD(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return nV(e,this.formSerializer).toString();if((s=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ug(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),oV(e)):e}],transformResponse:[function(e){const n=this.transitional||sf.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(a)throw s.name==="SyntaxError"?ue.from(s,ue.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:on.classes.FormData,Blob:on.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{sf.headers[t]={}});const aV=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&aV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},i_=Symbol("internals");function Kl(t){return t&&String(t).trim().toLowerCase()}function Bh(t){return t===!1||t==null?t:U.isArray(t)?t.map(Bh):String(t)}function cV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const lV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zv(t,e,n,r,i){if(U.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function uV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function dV(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}let In=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,c,l){const u=Kl(c);if(!u)throw new Error("header name must be a non-empty string");const d=U.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=Bh(s))}const a=(s,c)=>U.forEach(s,(l,u)=>o(l,u,c));if(U.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(U.isString(e)&&(e=e.trim())&&!lV(e))a(sV(e),n);else if(U.isObject(e)&&U.isIterable(e)){let s={},c,l;for(const u of e){if(!U.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?U.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=Kl(e),e){const r=U.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return cV(i);if(U.isFunction(n))return n.call(this,i,r);if(U.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Kl(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Zv(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=Kl(a),a){const s=U.findKey(r,a);s&&(!n||Zv(r,r[s],s,n))&&(delete r[s],i=!0)}}return U.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||Zv(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return U.forEach(this,(i,o)=>{const a=U.findKey(r,o);if(a){n[a]=Bh(i),delete n[o];return}const s=e?uV(o):String(o).trim();s!==o&&delete n[o],n[s]=Bh(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[i_]=this[i_]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Kl(a);r[s]||(dV(i,a),r[s]=!0)}return U.isArray(e)?e.forEach(o):o(e),this}};In.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(In.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(In);function ey(t,e){const n=this||sf,r=e||n,i=In.from(r.headers);let o=r.data;return U.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function qD(t){return!!(t&&t.__CANCEL__)}let cf=class extends ue{constructor(e,n,r){super(e??"canceled",ue.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function WD(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ue("Request failed with status code "+n.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let d=o,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-a<e)return;const h=u&&l-u;return h?Math.round(f*1e3/h):void 0}}function pV(t,e){let n=0,r=1e3/e,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t(...l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-d)))},()=>i&&a(i)]}const Ap=(t,e,n=3)=>{let r=0;const i=hV(50,250);return pV(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const d={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(d)},n)},o_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},a_=t=>(...e)=>U.asap(()=>t(...e)),mV=on.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,on.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(on.origin),on.navigator&&/(msie|trident)/i.test(on.navigator.userAgent)):()=>!0,gV=on.hasStandardBrowserEnv?{write(t,e,n,r,i,o,a){if(typeof document>"u")return;const s=[`${t}=${encodeURIComponent(e)}`];U.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),U.isString(r)&&s.push(`path=${r}`),U.isString(i)&&s.push(`domain=${i}`),o===!0&&s.push("secure"),U.isString(a)&&s.push(`SameSite=${a}`),document.cookie=s.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function vV(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yV(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function VD(t,e,n){let r=!vV(e);return t&&(r||n==!1)?yV(t,e):e}const s_=t=>t instanceof In?{...t}:t;function os(t,e){e=e||{};const n={};function r(l,u,d,f){return U.isPlainObject(l)&&U.isPlainObject(u)?U.merge.call({caseless:f},l,u):U.isPlainObject(u)?U.merge({},u):U.isArray(u)?u.slice():u}function i(l,u,d,f){if(U.isUndefined(u)){if(!U.isUndefined(l))return r(void 0,l,d,f)}else return r(l,u,d,f)}function o(l,u){if(!U.isUndefined(u))return r(void 0,u)}function a(l,u){if(U.isUndefined(u)){if(!U.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,d){if(d in e)return r(l,u);if(d in t)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,d)=>i(s_(l),s_(u),d,!0)};return U.forEach(Object.keys({...t,...e}),function(u){const d=c[u]||i,f=d(t[u],e[u],u);U.isUndefined(f)&&d!==s||(n[u]=f)}),n}const HD=t=>{const e=os({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=e;if(e.headers=a=In.from(a),e.url=UD(VD(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),U.isFormData(n)){if(on.hasStandardBrowserEnv||on.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(U.isFunction(n.getHeaders)){const c=n.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,d])=>{l.includes(u.toLowerCase())&&a.set(u,d)})}}if(on.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&mV(e.url))){const c=i&&o&&gV.read(o);c&&a.set(i,c)}return e},bV=typeof XMLHttpRequest<"u",wV=bV&&function(t){return new Promise(function(n,r){const i=HD(t);let o=i.data;const a=In.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,d,f,h,m;function p(){h&&h(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function v(){if(!g)return;const w=In.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),b={data:!s||s==="text"||s==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:w,config:t,request:g};WD(function(T){n(T),p()},function(T){r(T),p()},b),g=null}"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(v)},g.onabort=function(){g&&(r(new ue("Request aborted",ue.ECONNABORTED,t,g)),g=null)},g.onerror=function(S){const b=S&&S.message?S.message:"Network Error",x=new ue(b,ue.ERR_NETWORK,t,g);x.event=S||null,r(x),g=null},g.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||BD;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new ue(S,b.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,t,g)),g=null},o===void 0&&a.setContentType(null),"setRequestHeader"in g&&U.forEach(a.toJSON(),function(S,b){g.setRequestHeader(b,S)}),U.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),s&&s!=="json"&&(g.responseType=i.responseType),l&&([f,m]=Ap(l,!0),g.addEventListener("progress",f)),c&&g.upload&&([d,h]=Ap(c),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=w=>{g&&(r(!w||w.type?new cf(null,t,g):w),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const y=fV(i.url);if(y&&on.protocols.indexOf(y)===-1){r(new ue("Unsupported protocol "+y+":",ue.ERR_BAD_REQUEST,t));return}g.send(o||null)})},SV=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof ue?u:new cf(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,o(new ue(`timeout of ${e}ms exceeded`,ue.ETIMEDOUT))},e);const s=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),t=null)};t.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>U.asap(s),c}},xV=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},kV=async function*(t,e){for await(const n of TV(t))yield*xV(n,e)},TV=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},c_=(t,e,n,r)=>{const i=kV(t,e);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let d=u.byteLength;if(n){let f=o+=d;n(f)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},l_=64*1024,{isFunction:Kf}=U,CV=(({Request:t,Response:e})=>({Request:t,Response:e}))(U.global),{ReadableStream:u_,TextEncoder:d_}=U.global,f_=(t,...e)=>{try{return!!t(...e)}catch{return!1}},_V=t=>{t=U.merge.call({skipUndefined:!0},CV,t);const{fetch:e,Request:n,Response:r}=t,i=e?Kf(e):typeof fetch=="function",o=Kf(n),a=Kf(r);if(!i)return!1;const s=i&&Kf(u_),c=i&&(typeof d_=="function"?(m=>p=>m.encode(p))(new d_):async m=>new Uint8Array(await new n(m).arrayBuffer())),l=o&&s&&f_(()=>{let m=!1;const p=new n(on.origin,{body:new u_,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!p}),u=a&&s&&f_(()=>U.isReadableStream(new r("").body)),d={stream:u&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!d[m]&&(d[m]=(p,g)=>{let v=p&&p[m];if(v)return v.call(p);throw new ue(`Response type '${m}' is not supported`,ue.ERR_NOT_SUPPORT,g)})});const f=async m=>{if(m==null)return 0;if(U.isBlob(m))return m.size;if(U.isSpecCompliantForm(m))return(await new n(on.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(U.isArrayBufferView(m)||U.isArrayBuffer(m))return m.byteLength;if(U.isURLSearchParams(m)&&(m=m+""),U.isString(m))return(await c(m)).byteLength},h=async(m,p)=>{const g=U.toFiniteNumber(m.getContentLength());return g??f(p)};return async m=>{let{url:p,method:g,data:v,signal:y,cancelToken:w,timeout:S,onDownloadProgress:b,onUploadProgress:x,responseType:T,headers:C,withCredentials:_="same-origin",fetchOptions:E}=HD(m),A=e||fetch;T=T?(T+"").toLowerCase():"text";let P=SV([y,w&&w.toAbortSignal()],S),L=null;const j=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let $;try{if(x&&l&&g!=="get"&&g!=="head"&&($=await h(C,v))!==0){let X=new n(p,{method:"POST",body:v,duplex:"half"}),G;if(U.isFormData(v)&&(G=X.headers.get("content-type"))&&C.setContentType(G),X.body){const[ae,pe]=o_($,Ap(a_(x)));v=c_(X.body,l_,ae,pe)}}U.isString(_)||(_=_?"include":"omit");const F=o&&"credentials"in n.prototype,q={...E,signal:P,method:g.toUpperCase(),headers:C.normalize().toJSON(),body:v,duplex:"half",credentials:F?_:void 0};L=o&&new n(p,q);let N=await(o?A(L,E):A(p,q));const B=u&&(T==="stream"||T==="response");if(u&&(b||B&&j)){const X={};["status","statusText","headers"].forEach(Me=>{X[Me]=N[Me]});const G=U.toFiniteNumber(N.headers.get("content-length")),[ae,pe]=b&&o_(G,Ap(a_(b),!0))||[];N=new r(c_(N.body,l_,ae,()=>{pe&&pe(),j&&j()}),X)}T=T||"text";let W=await d[U.findKey(d,T)||"text"](N,m);return!B&&j&&j(),await new Promise((X,G)=>{WD(X,G,{data:W,headers:In.from(N.headers),status:N.status,statusText:N.statusText,config:m,request:L})})}catch(F){throw j&&j(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,m,L),{cause:F.cause||F}):ue.from(F,F&&F.code,m,L)}}},EV=new Map,KD=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,s=a,c,l,u=EV;for(;s--;)c=o[s],l=u.get(c),l===void 0&&u.set(c,l=s?new Map:_V(e)),u=l;return l};KD();const Kx={http:WW,xhr:wV,fetch:{get:KD}};U.forEach(Kx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const h_=t=>`- ${t}`,PV=t=>U.isFunction(t)||t===null||t===!1;function OV(t,e){t=U.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let s;if(i=r,!PV(r)&&(i=Kx[(s=String(r)).toLowerCase()],i===void 0))throw new ue(`Unknown adapter '${s}'`);if(i&&(U.isFunction(i)||(i=i.get(e))))break;o[s||"#"+a]=i}if(!i){const a=Object.entries(o).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(h_).join(`
`):" "+h_(a[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i}const GD={getAdapter:OV,adapters:Kx};function ty(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new cf(null,t)}function p_(t){return ty(t),t.headers=In.from(t.headers),t.data=ey.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),GD.getAdapter(t.adapter||sf.adapter,t)(t).then(function(r){return ty(t),r.data=ey.call(t,t.transformResponse,r),r.headers=In.from(r.headers),r},function(r){return qD(r)||(ty(t),r&&r.response&&(r.response.data=ey.call(t,t.transformResponse,r.response),r.response.headers=In.from(r.response.headers))),Promise.reject(r)})}const YD="1.13.4",dg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{dg[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const m_={};dg.transitional=function(e,n,r){function i(o,a){return"[Axios v"+YD+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new ue(i(a," has been removed"+(n?" in "+n:"")),ue.ERR_DEPRECATED);return n&&!m_[a]&&(m_[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};dg.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function AV(t,e,n){if(typeof t!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],c=s===void 0||a(s,o,t);if(c!==!0)throw new ue("option "+o+" must be "+c,ue.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ue("Unknown option "+o,ue.ERR_BAD_OPTION)}}const zh={assertOptions:AV,validators:dg},Yr=zh.validators;let Va=class{constructor(e){this.defaults=e||{},this.interceptors={request:new r_,response:new r_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=os(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&zh.assertOptions(r,{silentJSONParsing:Yr.transitional(Yr.boolean),forcedJSONParsing:Yr.transitional(Yr.boolean),clarifyTimeoutError:Yr.transitional(Yr.boolean)},!1),i!=null&&(U.isFunction(i)?n.paramsSerializer={serialize:i}:zh.assertOptions(i,{encode:Yr.function,serialize:Yr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),zh.assertOptions(n,{baseUrl:Yr.spelling("baseURL"),withXsrfToken:Yr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&U.merge(o.common,o[n.method]);o&&U.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),n.headers=In.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(c=c&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,d=0,f;if(!c){const m=[p_.bind(this),void 0];for(m.unshift(...s),m.push(...l),f=m.length,u=Promise.resolve(n);d<f;)u=u.then(m[d++],m[d++]);return u}f=s.length;let h=n;for(;d<f;){const m=s[d++],p=s[d++];try{h=m(h)}catch(g){p.call(this,g);break}}try{u=p_.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=os(this.defaults,e);const n=VD(e.baseURL,e.url,e.allowAbsoluteUrls);return UD(n,e.params,e.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(e){Va.prototype[e]=function(n,r){return this.request(os(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(os(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Va.prototype[e]=n(),Va.prototype[e+"Form"]=n(!0)});let RV=class XD{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new cf(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new XD(function(i){e=i}),cancel:e}}};function MV(t){return function(n){return t.apply(null,n)}}function IV(t){return U.isObject(t)&&t.isAxiosError===!0}const Rb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Rb).forEach(([t,e])=>{Rb[e]=t});function QD(t){const e=new Va(t),n=OD(Va.prototype.request,e);return U.extend(n,Va.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QD(os(t,i))},n}const bt=QD(sf);bt.Axios=Va;bt.CanceledError=cf;bt.CancelToken=RV;bt.isCancel=qD;bt.VERSION=YD;bt.toFormData=ug;bt.AxiosError=ue;bt.Cancel=bt.CanceledError;bt.all=function(e){return Promise.all(e)};bt.spread=MV;bt.isAxiosError=IV;bt.mergeConfig=os;bt.AxiosHeaders=In;bt.formToJSON=t=>zD(U.isHTMLForm(t)?new FormData(t):t);bt.getAdapter=GD.getAdapter;bt.HttpStatusCode=Rb;bt.default=bt;const{Axios:h0e,AxiosError:p0e,CanceledError:m0e,isCancel:g0e,CancelToken:v0e,VERSION:y0e,all:b0e,Cancel:w0e,isAxiosError:S0e,spread:x0e,toFormData:k0e,AxiosHeaders:T0e,HttpStatusCode:C0e,formToJSON:_0e,getAdapter:E0e,mergeConfig:P0e}=bt,$e=bt.create({baseURL:"/aiastore",timeout:3e4,headers:{"Content-Type":"application/json"}});$e.interceptors.request.use(t=>{const e=localStorage.getItem("auth_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));$e.interceptors.response.use(t=>t.data,t=>{var n,r,i;const e=((i=(r=(n=t.response)==null?void 0:n.data)==null?void 0:r.error)==null?void 0:i.message)||t.message;return console.error("API Error:",e),Promise.reject(t)});const Gf={getOverview:t=>$e.get("/api/v1/dashboard/overview",{params:{date:t}}),getStoresRequiringAction:t=>$e.get("/api/v1/dashboard/stores-requiring-action",{params:{date:t}}),getCriticalStores:(t,e)=>$e.get("/api/v1/dashboard/critical-stores",{params:{date:t,limit:e}}),getKpiTrends:(t,e)=>$e.get("/api/v1/dashboard/kpi-trends",{params:{days:t,kpi_code:e}}),getTopIssues:(t,e)=>$e.get("/api/v1/dashboard/top-issues",{params:{date:t,limit:e}})},pa={getAll:t=>$e.get("/api/v1/stores",{params:t}),getById:t=>$e.get(`/api/v1/stores/${t}`),getHealth:(t,e)=>$e.get(`/api/v1/stores/${t}/health`,{params:{date:e}}),getHealthHistory:(t,e)=>$e.get(`/api/v1/stores/${t}/health/history`,{params:{days:e}}),getKpis:(t,e)=>$e.get(`/api/v1/stores/${t}/kpis`,{params:{date:e}}),getKpiHistory:(t,e,n)=>$e.get(`/api/v1/stores/${t}/kpis/history`,{params:{kpi_code:e,days:n}}),getAlerts:(t,e)=>$e.get(`/api/v1/stores/${t}/alerts`,{params:e}),getTasks:(t,e)=>$e.get(`/api/v1/stores/${t}/tasks`,{params:e}),getEscalations:t=>$e.get(`/api/v1/stores/${t}/escalations`),getAiCalls:t=>$e.get(`/api/v1/stores/${t}/ai-calls`)},ny={getAll:t=>$e.get("/api/v1/alerts",{params:t}),getById:t=>$e.get(`/api/v1/alerts/${t}`),acknowledge:(t,e)=>$e.post(`/api/v1/alerts/${t}/acknowledge`,{acknowledged_by:e}),resolve:t=>$e.post(`/api/v1/alerts/${t}/resolve`),getOverdue:()=>$e.get("/api/v1/alerts/status/overdue")},ry={getAll:t=>$e.get("/api/v1/tasks",{params:t}),getById:t=>$e.get(`/api/v1/tasks/${t}`),complete:(t,e,n)=>$e.post(`/api/v1/tasks/${t}/complete`,{completed_by:e,outcome:n}),updateStatus:(t,e)=>$e.post(`/api/v1/tasks/${t}/update-status`,{status:e}),getPending:()=>$e.get("/api/v1/tasks/status/pending"),getOverdue:()=>$e.get("/api/v1/tasks/status/overdue")};function mt({className:t,...e}){return k.jsx("div",{className:Wt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e})}function Un({className:t,...e}){return k.jsx("div",{className:Wt("flex flex-col space-y-1.5 p-6",t),...e})}function Bn({className:t,...e}){return k.jsx("h3",{className:Wt("text-2xl font-semibold leading-none tracking-tight",t),...e})}function gt({className:t,...e}){return k.jsx("div",{className:Wt("p-6 pt-0",t),...e})}const g_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,v_=_e,JD=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return v_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=o==null?void 0:o[l];if(u===null)return null;const f=g_(u)||g_(d);return i[l][f]}),s=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(m=>{let[p,g]=m;return Array.isArray(g)?g.includes({...o,...s}[p]):{...o,...s}[p]===g})?[...l,d,f]:l},[]);return v_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},NV=JD("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground",warning:"border-transparent bg-warning text-warning-foreground",danger:"border-transparent bg-danger text-danger-foreground"}},defaultVariants:{variant:"default"}});function Go({className:t,variant:e,...n}){return k.jsx("div",{className:Wt(NV({variant:e}),t),...n})}function Ha({status:t,children:e}){const r={green:"success",yellow:"warning",red:"danger",critical:"danger",active:"default",pending:"warning",completed:"success",acknowledged:"secondary",resolved:"success",failed:"danger"}[t==null?void 0:t.toLowerCase()]||"default",i=E5(t==null?void 0:t.toLowerCase());return k.jsxs(Go,{variant:r,children:[i&&k.jsx("span",{className:"mr-1",children:i}),e||t]})}function DV({store:t,snapshot:e}){if(!e)return k.jsx(mt,{children:k.jsx(gt,{className:"p-6",children:k.jsx("p",{className:"text-muted-foreground",children:"No health data available"})})});const n=e.action_required||e.escalation_level>=2;return k.jsx(nf,{to:`/stores/${t.id}`,children:k.jsxs(mt,{className:`hover:shadow-lg transition-shadow cursor-pointer ${n?"border-l-4 border-l-danger":""}`,children:[k.jsx(Un,{className:"pb-3",children:k.jsxs("div",{className:"flex items-start justify-between",children:[k.jsxs("div",{className:"flex-1",children:[k.jsxs(Bn,{className:"text-lg font-semibold",children:[t.store_code," - ",t.name]}),k.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[t.city,", ",t.state]})]}),k.jsx(Ha,{status:e.overall_status,children:e.overall_status.toUpperCase()})]})}),k.jsx(gt,{children:k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{className:"text-sm font-medium",children:"Health Score"}),k.jsx("span",{className:"text-2xl font-bold",children:Number(e.health_score).toFixed(1)})]}),k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:k.jsx("div",{className:`h-2 rounded-full transition-all ${Number(e.health_score)>=80?"bg-success":Number(e.health_score)>=60?"bg-warning":"bg-danger"}`,style:{width:`${Number(e.health_score)}%`}})})]}),k.jsxs("div",{className:"flex items-center justify-between text-sm",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),k.jsx("span",{children:e.green_kpi_count})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 rounded-full bg-warning"}),k.jsx("span",{children:e.yellow_kpi_count})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("div",{className:"w-3 h-3 rounded-full bg-danger"}),k.jsx("span",{children:e.red_kpi_count})]})]}),e.escalation_level>0&&k.jsxs(Go,{variant:e.escalation_level>=3?"danger":"warning",children:["Level ",e.escalation_level]})]}),e.action_required&&k.jsxs("div",{className:"flex items-start gap-2 p-3 bg-danger/10 rounded-md",children:[k.jsx(Mc,{className:"w-4 h-4 text-danger mt-0.5"}),k.jsxs("div",{className:"flex-1",children:[k.jsx("p",{className:"text-sm font-medium text-danger",children:"Action Required"}),k.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.summary||"Immediate attention needed"})]})]}),e.escalation_level>=3&&k.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[k.jsx(oI,{className:"w-4 h-4"}),k.jsx("span",{children:"AI call initiated"})]})]})})]})})}function jV({dashboardData:t}){const[e,n]=M.useState({performance:0,variance:0,trend:"stable"}),[r,i]=M.useState({coverage:0,trend:"stable"}),[o,a]=M.useState({rate:0,trend:"stable"}),[s,c]=M.useState({availability:0,trend:"stable"}),[l,u]=M.useState({index:0,trend:"stable"});M.useEffect(()=>{if(!t)return;const f=parseFloat(t.average_health_score)||0,h=t.green_stores||0;t.yellow_stores,t.red_stores;const m=t.total_stores||1,p=Math.round(f*.95+Math.random()*10),g=Math.round(85+h/m*15),v=Math.round(12+f/100*15),y=Math.round(88+h/m*12),w=Math.round(70+f/100*60);n({performance:p,variance:p-100,trend:p>=95?"up":"down"}),i({coverage:g,trend:g>=95?"up":"stable"}),a({rate:v,trend:v>=22?"up":v>=18?"stable":"down"}),c({availability:y,trend:y>=95?"up":"stable"}),u({index:w,trend:w>=100?"up":w>=85?"stable":"down"})},[t]);const d=({value:f,min:h,max:m,label:p,unit:g,zones:v,trend:y,decimals:w=0})=>{const S=(f-h)/(m-h)*100;let b="#ef4444",x="bg-red-500/20",T="border-red-500";for(const E of v)if(f>=E.min&&f<E.max){E.color==="green"?(b="#10b981",x="bg-green-500/20",T="border-green-500"):E.color==="yellow"&&(b="#f59e0b",x="bg-yellow-500/20",T="border-yellow-500");break}const C=11,_=Array.from({length:C},(E,A)=>{const P=h+A/(C-1)*(m-h),L=(P-h)/(m-h)*100;return{value:P,percentage:L}});return k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsx("div",{className:"mb-2 text-center",children:k.jsx("div",{className:"text-cyan-400 text-xs font-mono tracking-wider",children:p})}),k.jsxs("div",{className:"relative w-32 h-64 bg-black rounded-lg border-2 border-gray-700 overflow-hidden",children:[v.map((E,A)=>{const P=(E.min-h)/(m-h)*100,L=(E.max-E.min)/(m-h)*100;return k.jsx("div",{className:"absolute left-0 right-0",style:{bottom:`${P}%`,height:`${L}%`,backgroundColor:E.color==="green"?"rgba(16, 185, 129, 0.15)":E.color==="yellow"?"rgba(245, 158, 11, 0.15)":"rgba(239, 68, 68, 0.15)"}},A)}),_.map((E,A)=>k.jsxs("div",{className:"absolute left-0 right-0 flex items-center",style:{bottom:`${E.percentage}%`},children:[k.jsx("div",{className:"w-3 h-px bg-gray-500"}),k.jsx("div",{className:"text-gray-400 text-[9px] font-mono ml-1",children:Math.round(E.value)})]},A)),k.jsxs("div",{className:"absolute left-0 right-0 transition-all duration-1000 ease-out",style:{bottom:`${S}%`},children:[k.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-white shadow-lg",style:{top:"-1px"}}),k.jsx("div",{className:`absolute right-0 top-1/2 -translate-y-1/2 ${x} ${T} border-2 px-2 py-1 rounded-l-lg shadow-lg`,children:k.jsxs("div",{className:"text-white text-sm font-bold font-mono whitespace-nowrap",style:{color:b},children:[w>0?f.toFixed(w):Math.round(f),g]})})]}),k.jsxs("div",{className:"absolute top-2 right-2",children:[y==="up"&&k.jsx(H0,{className:"w-3 h-3 text-green-400"}),y==="down"&&k.jsx(V0,{className:"w-3 h-3 text-red-400"}),y==="stable"&&k.jsx(NC,{className:"w-3 h-3 text-yellow-400"})]})]}),k.jsx("div",{className:"mt-1 text-gray-500 text-[10px] font-mono",children:g})]})};return k.jsx("div",{className:"mb-6",children:k.jsxs("div",{className:"bg-gradient-to-b from-gray-950 to-black p-6 rounded-xl border-2 border-gray-800 shadow-2xl",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-800",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),k.jsx("div",{className:"text-cyan-400 text-sm font-mono tracking-wider",children:"STORE HEALTH MONITOR"})]}),k.jsx("div",{className:"text-gray-500 text-xs font-mono",children:new Date().toLocaleTimeString("en-US",{hour12:!1})})]}),k.jsxs("div",{className:"flex justify-center gap-8",children:[k.jsx(d,{value:e.performance,min:0,max:150,label:"SALES",unit:"%",trend:e.trend,zones:[{min:0,max:75,color:"red"},{min:75,max:90,color:"yellow"},{min:90,max:150,color:"green"}]}),k.jsx(d,{value:r.coverage,min:50,max:100,label:"LABOR",unit:"%",trend:r.trend,zones:[{min:50,max:85,color:"red"},{min:85,max:95,color:"yellow"},{min:95,max:100,color:"green"}]}),k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsxs("div",{className:"mb-2 text-center",children:[k.jsx("div",{className:"text-cyan-400 text-sm font-mono tracking-wider",children:"CONVERSION RATE"}),k.jsx("div",{className:"text-gray-500 text-[10px] font-mono",children:"PRIMARY"})]}),k.jsxs("div",{className:"relative w-40 h-64 bg-black rounded-lg border-2 border-cyan-500/50 overflow-hidden shadow-lg shadow-cyan-500/20",children:[k.jsx("div",{className:"absolute left-0 right-0 bottom-0",style:{height:"45%",backgroundColor:"rgba(239, 68, 68, 0.15)"}}),k.jsx("div",{className:"absolute left-0 right-0",style:{bottom:"45%",height:"10%",backgroundColor:"rgba(245, 158, 11, 0.15)"}}),k.jsx("div",{className:"absolute left-0 right-0",style:{bottom:"55%",height:"45%",backgroundColor:"rgba(16, 185, 129, 0.15)"}}),[0,5,10,15,18,20,22,25,30,35,40].map(f=>{const h=f/40*100;return k.jsxs("div",{className:"absolute left-0 right-0 flex items-center",style:{bottom:`${h}%`},children:[k.jsx("div",{className:`${f%10===0?"w-4":"w-2"} h-px bg-gray-500`}),f%5===0&&k.jsx("div",{className:"text-gray-400 text-[10px] font-mono ml-1",children:f})]},f)}),k.jsxs("div",{className:"absolute left-0 right-0 transition-all duration-1000 ease-out",style:{bottom:`${o.rate/40*100}%`},children:[k.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-white shadow-lg"}),k.jsxs("div",{className:`absolute right-0 top-1/2 -translate-y-1/2 px-3 py-2 rounded-l-lg shadow-lg border-2 ${o.rate>=22?"bg-green-500/20 border-green-500":o.rate>=18?"bg-yellow-500/20 border-yellow-500":"bg-red-500/20 border-red-500"}`,children:[k.jsx("div",{className:`text-2xl font-bold font-mono ${o.rate>=22?"text-green-400":o.rate>=18?"text-yellow-400":"text-red-400"}`,children:o.rate}),k.jsx("div",{className:"text-gray-400 text-[9px] font-mono text-center",children:"%"})]})]}),k.jsxs("div",{className:"absolute top-2 right-2",children:[o.trend==="up"&&k.jsx(H0,{className:"w-4 h-4 text-green-400"}),o.trend==="down"&&k.jsx(V0,{className:"w-4 h-4 text-red-400"}),o.trend==="stable"&&k.jsx(NC,{className:"w-4 h-4 text-yellow-400"})]})]}),k.jsx("div",{className:"mt-1 text-gray-500 text-xs font-mono",children:"PERCENT"})]}),k.jsx(d,{value:s.availability,min:70,max:100,label:"INVENTORY",unit:"%",trend:s.trend,zones:[{min:70,max:90,color:"red"},{min:90,max:95,color:"yellow"},{min:95,max:100,color:"green"}]}),k.jsx(d,{value:l.index,min:0,max:150,label:"TRAFFIC",unit:"",trend:l.trend,zones:[{min:0,max:85,color:"red"},{min:85,max:100,color:"yellow"},{min:100,max:150,color:"green"}]})]}),k.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-800 flex justify-between items-center",children:[k.jsxs("div",{className:"flex gap-6 text-xs font-mono",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-3 h-3 bg-green-500/30 border border-green-500 rounded"}),k.jsx("span",{className:"text-gray-400",children:"OPTIMAL"})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-3 h-3 bg-yellow-500/30 border border-yellow-500 rounded"}),k.jsx("span",{className:"text-gray-400",children:"CAUTION"})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-3 h-3 bg-red-500/30 border border-red-500 rounded"}),k.jsx("span",{className:"text-gray-400",children:"CRITICAL"})]})]}),k.jsxs("div",{className:"text-gray-600 text-[10px] font-mono",children:[(t==null?void 0:t.total_stores)||0," STORES MONITORED"]})]})]})})}function LV({redStores:t=0,yellowStores:e=0,greenStores:n=0,totalStores:r=0}){const i=()=>t>0?"red":e>0?"yellow":"green",o=()=>{if(r===0)return 0;const c=t+e;return Math.round(c/r*100)},a=i(),s=o();return k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsxs("div",{className:"relative bg-gray-800 rounded-xl p-2 shadow-lg",children:[k.jsxs("div",{className:"flex flex-col gap-1.5",children:[k.jsx("div",{className:Wt("w-8 h-8 rounded-full border-2 border-gray-700 flex items-center justify-center transition-all duration-300",a==="red"?"bg-red-500 shadow-[0_0_15px_rgba(239,68,68,0.8)]":"bg-red-900/30"),children:a==="red"&&k.jsxs("span",{className:"text-[10px] font-bold text-white",children:[s,"%"]})}),k.jsx("div",{className:Wt("w-8 h-8 rounded-full border-2 border-gray-700 flex items-center justify-center transition-all duration-300",a==="yellow"?"bg-yellow-400 shadow-[0_0_15px_rgba(250,204,21,0.8)]":"bg-yellow-900/30"),children:a==="yellow"&&k.jsxs("span",{className:"text-[10px] font-bold text-gray-800",children:[s,"%"]})}),k.jsx("div",{className:Wt("w-8 h-8 rounded-full border-2 border-gray-700 flex items-center justify-center transition-all duration-300",a==="green"?"bg-green-500 shadow-[0_0_15px_rgba(34,197,94,0.8)]":"bg-green-900/30"),children:a==="green"&&k.jsxs("span",{className:"text-[10px] font-bold text-white",children:[s,"%"]})})]}),k.jsx("div",{className:"absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-2 h-3 bg-gray-700 rounded-b"})]}),k.jsxs("div",{className:"flex flex-col",children:[k.jsxs("span",{className:Wt("text-sm font-semibold",a==="red"&&"text-red-500",a==="yellow"&&"text-yellow-500",a==="green"&&"text-green-500"),children:[a==="red"&&"Critical",a==="yellow"&&"Warning",a==="green"&&"Healthy"]}),k.jsxs("span",{className:"text-xs text-muted-foreground",children:[s,"% at risk"]})]})]})}function ld({message:t="Loading..."}){return k.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[k.jsx(JB,{className:"w-8 h-8 animate-spin text-primary mb-4"}),k.jsx("p",{className:"text-muted-foreground",children:t})]})}const $V=JD("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});function Ni({className:t,variant:e,size:n,...r}){return k.jsx("button",{className:Wt($V({variant:e,size:n,className:t})),...r})}function fg({error:t,retry:e}){var r,i,o;const n=((o=(i=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:i.error)==null?void 0:o.message)||(t==null?void 0:t.message)||"An error occurred";return k.jsx(mt,{className:"border-danger",children:k.jsx(gt,{className:"p-6",children:k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx(YB,{className:"w-5 h-5 text-danger mt-0.5"}),k.jsxs("div",{className:"flex-1",children:[k.jsx("h3",{className:"font-semibold text-danger",children:"Error Loading Data"}),k.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n}),e&&k.jsxs(Ni,{variant:"outline",size:"sm",className:"mt-4",onClick:e,children:[k.jsx(e4,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})})})}var FV=Array.isArray,Nn=FV,UV=typeof kf=="object"&&kf&&kf.Object===Object&&kf,ZD=UV,BV=ZD,zV=typeof self=="object"&&self&&self.Object===Object&&self,qV=BV||zV||Function("return this")(),gi=qV,WV=gi,VV=WV.Symbol,lf=VV,y_=lf,ej=Object.prototype,HV=ej.hasOwnProperty,KV=ej.toString,Gl=y_?y_.toStringTag:void 0;function GV(t){var e=HV.call(t,Gl),n=t[Gl];try{t[Gl]=void 0;var r=!0}catch{}var i=KV.call(t);return r&&(e?t[Gl]=n:delete t[Gl]),i}var YV=GV,XV=Object.prototype,QV=XV.toString;function JV(t){return QV.call(t)}var ZV=JV,b_=lf,e7=YV,t7=ZV,n7="[object Null]",r7="[object Undefined]",w_=b_?b_.toStringTag:void 0;function i7(t){return t==null?t===void 0?r7:n7:w_&&w_ in Object(t)?e7(t):t7(t)}var eo=i7;function o7(t){return t!=null&&typeof t=="object"}var to=o7,a7=eo,s7=to,c7="[object Symbol]";function l7(t){return typeof t=="symbol"||s7(t)&&a7(t)==c7}var gl=l7,u7=Nn,d7=gl,f7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h7=/^\w*$/;function p7(t,e){if(u7(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||d7(t)?!0:h7.test(t)||!f7.test(t)||e!=null&&t in Object(e)}var Gx=p7;function m7(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var sa=m7;const vl=We(sa);var g7=eo,v7=sa,y7="[object AsyncFunction]",b7="[object Function]",w7="[object GeneratorFunction]",S7="[object Proxy]";function x7(t){if(!v7(t))return!1;var e=g7(t);return e==b7||e==w7||e==y7||e==S7}var Yx=x7;const ve=We(Yx);var k7=gi,T7=k7["__core-js_shared__"],C7=T7,iy=C7,S_=function(){var t=/[^.]+$/.exec(iy&&iy.keys&&iy.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _7(t){return!!S_&&S_ in t}var E7=_7,P7=Function.prototype,O7=P7.toString;function A7(t){if(t!=null){try{return O7.call(t)}catch{}try{return t+""}catch{}}return""}var tj=A7,R7=Yx,M7=E7,I7=sa,N7=tj,D7=/[\\^$.*+?()[\]{}|]/g,j7=/^\[object .+?Constructor\]$/,L7=Function.prototype,$7=Object.prototype,F7=L7.toString,U7=$7.hasOwnProperty,B7=RegExp("^"+F7.call(U7).replace(D7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z7(t){if(!I7(t)||M7(t))return!1;var e=R7(t)?B7:j7;return e.test(N7(t))}var q7=z7;function W7(t,e){return t==null?void 0:t[e]}var V7=W7,H7=q7,K7=V7;function G7(t,e){var n=K7(t,e);return H7(n)?n:void 0}var ms=G7,Y7=ms,X7=Y7(Object,"create"),hg=X7,x_=hg;function Q7(){this.__data__=x_?x_(null):{},this.size=0}var J7=Q7;function Z7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var e9=Z7,t9=hg,n9="__lodash_hash_undefined__",r9=Object.prototype,i9=r9.hasOwnProperty;function o9(t){var e=this.__data__;if(t9){var n=e[t];return n===n9?void 0:n}return i9.call(e,t)?e[t]:void 0}var a9=o9,s9=hg,c9=Object.prototype,l9=c9.hasOwnProperty;function u9(t){var e=this.__data__;return s9?e[t]!==void 0:l9.call(e,t)}var d9=u9,f9=hg,h9="__lodash_hash_undefined__";function p9(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=f9&&e===void 0?h9:e,this}var m9=p9,g9=J7,v9=e9,y9=a9,b9=d9,w9=m9;function yl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yl.prototype.clear=g9;yl.prototype.delete=v9;yl.prototype.get=y9;yl.prototype.has=b9;yl.prototype.set=w9;var S9=yl;function x9(){this.__data__=[],this.size=0}var k9=x9;function T9(t,e){return t===e||t!==t&&e!==e}var Xx=T9,C9=Xx;function _9(t,e){for(var n=t.length;n--;)if(C9(t[n][0],e))return n;return-1}var pg=_9,E9=pg,P9=Array.prototype,O9=P9.splice;function A9(t){var e=this.__data__,n=E9(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():O9.call(e,n,1),--this.size,!0}var R9=A9,M9=pg;function I9(t){var e=this.__data__,n=M9(e,t);return n<0?void 0:e[n][1]}var N9=I9,D9=pg;function j9(t){return D9(this.__data__,t)>-1}var L9=j9,$9=pg;function F9(t,e){var n=this.__data__,r=$9(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var U9=F9,B9=k9,z9=R9,q9=N9,W9=L9,V9=U9;function bl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bl.prototype.clear=B9;bl.prototype.delete=z9;bl.prototype.get=q9;bl.prototype.has=W9;bl.prototype.set=V9;var mg=bl,H9=ms,K9=gi,G9=H9(K9,"Map"),Qx=G9,k_=S9,Y9=mg,X9=Qx;function Q9(){this.size=0,this.__data__={hash:new k_,map:new(X9||Y9),string:new k_}}var J9=Q9;function Z9(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var eH=Z9,tH=eH;function nH(t,e){var n=t.__data__;return tH(e)?n[typeof e=="string"?"string":"hash"]:n.map}var gg=nH,rH=gg;function iH(t){var e=rH(this,t).delete(t);return this.size-=e?1:0,e}var oH=iH,aH=gg;function sH(t){return aH(this,t).get(t)}var cH=sH,lH=gg;function uH(t){return lH(this,t).has(t)}var dH=uH,fH=gg;function hH(t,e){var n=fH(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var pH=hH,mH=J9,gH=oH,vH=cH,yH=dH,bH=pH;function wl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}wl.prototype.clear=mH;wl.prototype.delete=gH;wl.prototype.get=vH;wl.prototype.has=yH;wl.prototype.set=bH;var Jx=wl,nj=Jx,wH="Expected a function";function Zx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(wH);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Zx.Cache||nj),n}Zx.Cache=nj;var rj=Zx;const SH=We(rj);var xH=rj,kH=500;function TH(t){var e=xH(t,function(r){return n.size===kH&&n.clear(),r}),n=e.cache;return e}var CH=TH,_H=CH,EH=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,PH=/\\(\\)?/g,OH=_H(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(EH,function(n,r,i,o){e.push(i?o.replace(PH,"$1"):r||n)}),e}),AH=OH;function RH(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var ek=RH,T_=lf,MH=ek,IH=Nn,NH=gl,C_=T_?T_.prototype:void 0,__=C_?C_.toString:void 0;function ij(t){if(typeof t=="string")return t;if(IH(t))return MH(t,ij)+"";if(NH(t))return __?__.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var DH=ij,jH=DH;function LH(t){return t==null?"":jH(t)}var oj=LH,$H=Nn,FH=Gx,UH=AH,BH=oj;function zH(t,e){return $H(t)?t:FH(t,e)?[t]:UH(BH(t))}var aj=zH,qH=gl;function WH(t){if(typeof t=="string"||qH(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var vg=WH,VH=aj,HH=vg;function KH(t,e){e=VH(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[HH(e[n++])];return n&&n==r?t:void 0}var tk=KH,GH=tk;function YH(t,e,n){var r=t==null?void 0:GH(t,e);return r===void 0?n:r}var sj=YH;const hr=We(sj);function XH(t){return t==null}var QH=XH;const Se=We(QH);var JH=eo,ZH=Nn,eK=to,tK="[object String]";function nK(t){return typeof t=="string"||!ZH(t)&&eK(t)&&JH(t)==tK}var rK=nK;const as=We(rK);var cj={exports:{}},Le={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk=Symbol.for("react.element"),rk=Symbol.for("react.portal"),yg=Symbol.for("react.fragment"),bg=Symbol.for("react.strict_mode"),wg=Symbol.for("react.profiler"),Sg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),iK=Symbol.for("react.server_context"),kg=Symbol.for("react.forward_ref"),Tg=Symbol.for("react.suspense"),Cg=Symbol.for("react.suspense_list"),_g=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),oK=Symbol.for("react.offscreen"),lj;lj=Symbol.for("react.module.reference");function yr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nk:switch(t=t.type,t){case yg:case wg:case bg:case Tg:case Cg:return t;default:switch(t=t&&t.$$typeof,t){case iK:case xg:case kg:case Eg:case _g:case Sg:return t;default:return e}}case rk:return e}}}Le.ContextConsumer=xg;Le.ContextProvider=Sg;Le.Element=nk;Le.ForwardRef=kg;Le.Fragment=yg;Le.Lazy=Eg;Le.Memo=_g;Le.Portal=rk;Le.Profiler=wg;Le.StrictMode=bg;Le.Suspense=Tg;Le.SuspenseList=Cg;Le.isAsyncMode=function(){return!1};Le.isConcurrentMode=function(){return!1};Le.isContextConsumer=function(t){return yr(t)===xg};Le.isContextProvider=function(t){return yr(t)===Sg};Le.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nk};Le.isForwardRef=function(t){return yr(t)===kg};Le.isFragment=function(t){return yr(t)===yg};Le.isLazy=function(t){return yr(t)===Eg};Le.isMemo=function(t){return yr(t)===_g};Le.isPortal=function(t){return yr(t)===rk};Le.isProfiler=function(t){return yr(t)===wg};Le.isStrictMode=function(t){return yr(t)===bg};Le.isSuspense=function(t){return yr(t)===Tg};Le.isSuspenseList=function(t){return yr(t)===Cg};Le.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yg||t===wg||t===bg||t===Tg||t===Cg||t===oK||typeof t=="object"&&t!==null&&(t.$$typeof===Eg||t.$$typeof===_g||t.$$typeof===Sg||t.$$typeof===xg||t.$$typeof===kg||t.$$typeof===lj||t.getModuleId!==void 0)};Le.typeOf=yr;cj.exports=Le;var aK=cj.exports,sK=eo,cK=to,lK="[object Number]";function uK(t){return typeof t=="number"||cK(t)&&sK(t)==lK}var uj=uK;const dK=We(uj);var fK=uj;function hK(t){return fK(t)&&t!=+t}var pK=hK;const uf=We(pK);var Br=function(e){return e===0?0:e>0?1:-1},Aa=function(e){return as(e)&&e.indexOf("%")===e.length-1},ee=function(e){return dK(e)&&!uf(e)},mK=function(e){return Se(e)},It=function(e){return ee(e)||as(e)},gK=0,df=function(e){var n=++gK;return"".concat(e||"").concat(n)},ss=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ee(e)&&!as(e))return r;var o;if(Aa(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return uf(o)&&(o=r),i&&o>n&&(o=n),o},bo=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},vK=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Nr=function(e,n){return ee(e)&&ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function Rp(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):hr(r,e))===n})}var yK=function(e,n){return ee(e)&&ee(n)?e-n:as(e)&&as(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function lc(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Mb(t){"@babel/helpers - typeof";return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(t)}var bK=["viewBox","children"],wK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],E_=["points","pathLength"],oy={svg:bK,polygon:E_,polyline:E_},ik=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Mp=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(M.isValidElement(e)&&(r=e.props),!vl(r))return null;var i={};return Object.keys(r).forEach(function(o){ik.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},SK=function(e,n,r){return function(i){return e(n,r,i),null}},Ip=function(e,n,r){if(!vl(e)||Mb(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];ik.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=SK(a,n,r))}),i},xK=["children"],kK=["children"];function P_(t,e){if(t==null)return{};var n=TK(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TK(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ib(t){"@babel/helpers - typeof";return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ib(t)}var O_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},A_=null,ay=null,ok=function t(e){if(e===A_&&Array.isArray(ay))return ay;var n=[];return M.Children.forEach(e,function(r){Se(r)||(aK.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),ay=n,A_=e,n};function pr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Fi(i)}):r=[Fi(e)],ok(t).forEach(function(i){var o=hr(i,"type.displayName")||hr(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function $n(t,e){var n=pr(t,e);return n&&n[0]}var R_=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ee(r)||r<=0||!ee(i)||i<=0)},CK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_K=function(e){return e&&e.type&&as(e.type)&&CK.indexOf(e.type)>=0},EK=function(e){return e&&Ib(e)==="object"&&"clipDot"in e},PK=function(e,n,r,i){var o,a=(o=oy==null?void 0:oy[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!ve(e)&&(i&&a.includes(n)||wK.includes(n))||r&&ik.includes(n)},Ce=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(M.isValidElement(e)&&(i=e.props),!vl(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;PK((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},Nb=function t(e,n){if(e===n)return!0;var r=M.Children.count(e);if(r!==M.Children.count(n))return!1;if(r===0)return!0;if(r===1)return M_(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!M_(o,a))return!1}return!0},M_=function(e,n){if(Se(e)&&Se(n))return!0;if(!Se(e)&&!Se(n)){var r=e.props||{},i=r.children,o=P_(r,xK),a=n.props||{},s=a.children,c=P_(a,kK);return i&&s?lc(o,c)&&Nb(i,s):!i&&!s?lc(o,c):!1}return!1},I_=function(e,n){var r=[],i={};return ok(e).forEach(function(o,a){if(_K(o))r.push(o);else if(o){var s=Fi(o.type),c=n[s]||{},l=c.handler,u=c.once;if(l&&(!u||!i[s])){var d=l(o,s,a);r.push(d),i[s]=!0}}}),r},OK=function(e){var n=e&&e.type;return n&&O_[n]?O_[n]:null},AK=function(e,n){return ok(n).indexOf(e)},RK=["children","width","height","viewBox","className","style","title","desc"];function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Db.apply(this,arguments)}function MK(t,e){if(t==null)return{};var n=IK(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IK(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jb(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,c=t.desc,l=MK(t,RK),u=i||{width:n,height:r,x:0,y:0},d=_e("recharts-surface",o);return I.createElement("svg",Db({},Ce(l,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),I.createElement("title",null,s),I.createElement("desc",null,c),e)}var NK=["children","className"];function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lb.apply(this,arguments)}function DK(t,e){if(t==null)return{};var n=jK(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jK(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vt=I.forwardRef(function(t,e){var n=t.children,r=t.className,i=DK(t,NK),o=_e("recharts-layer",r);return I.createElement("g",Lb({className:o},Ce(i,!0),{ref:e}),n)}),Ui=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function LK(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var $K=LK,FK=$K;function UK(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:FK(t,e,n)}var BK=UK,zK="\\ud800-\\udfff",qK="\\u0300-\\u036f",WK="\\ufe20-\\ufe2f",VK="\\u20d0-\\u20ff",HK=qK+WK+VK,KK="\\ufe0e\\ufe0f",GK="\\u200d",YK=RegExp("["+GK+zK+HK+KK+"]");function XK(t){return YK.test(t)}var dj=XK;function QK(t){return t.split("")}var JK=QK,fj="\\ud800-\\udfff",ZK="\\u0300-\\u036f",eG="\\ufe20-\\ufe2f",tG="\\u20d0-\\u20ff",nG=ZK+eG+tG,rG="\\ufe0e\\ufe0f",iG="["+fj+"]",$b="["+nG+"]",Fb="\\ud83c[\\udffb-\\udfff]",oG="(?:"+$b+"|"+Fb+")",hj="[^"+fj+"]",pj="(?:\\ud83c[\\udde6-\\uddff]){2}",mj="[\\ud800-\\udbff][\\udc00-\\udfff]",aG="\\u200d",gj=oG+"?",vj="["+rG+"]?",sG="(?:"+aG+"(?:"+[hj,pj,mj].join("|")+")"+vj+gj+")*",cG=vj+gj+sG,lG="(?:"+[hj+$b+"?",$b,pj,mj,iG].join("|")+")",uG=RegExp(Fb+"(?="+Fb+")|"+lG+cG,"g");function dG(t){return t.match(uG)||[]}var fG=dG,hG=JK,pG=dj,mG=fG;function gG(t){return pG(t)?mG(t):hG(t)}var vG=gG,yG=BK,bG=dj,wG=vG,SG=oj;function xG(t){return function(e){e=SG(e);var n=bG(e)?wG(e):void 0,r=n?n[0]:e.charAt(0),i=n?yG(n,1).join(""):e.slice(1);return r[t]()+i}}var kG=xG,TG=kG,CG=TG("toUpperCase"),_G=CG;const Pg=We(_G);function Ve(t){return function(){return t}}const yj=Math.cos,Np=Math.sin,Kr=Math.sqrt,Dp=Math.PI,Og=2*Dp,Ub=Math.PI,Bb=2*Ub,Sa=1e-6,EG=Bb-Sa;function bj(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function PG(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bj;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class OG{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bj:PG(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,l=i-n,u=a-e,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Sa)if(!(Math.abs(d*c-l*u)>Sa)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-a,m=i-s,p=c*c+l*l,g=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(f),w=o*Math.tan((Ub-Math.acos((p+f-g)/(2*v*y)))/2),S=w/y,b=w/v;Math.abs(S-1)>Sa&&this._append`L${e+S*u},${n+S*d}`,this._append`A${o},${o},0,0,${+(d*h>u*m)},${this._x1=e+b*c},${this._y1=n+b*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=e+s,u=n+c,d=1^a,f=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Sa||Math.abs(this._y1-u)>Sa)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Bb+Bb),f>EG?this._append`A${r},${r},0,1,${d},${e-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>Sa&&this._append`A${r},${r},0,${+(f>=Ub)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ak(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new OG(e)}function sk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wj(t){this._context=t}wj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ag(t){return new wj(t)}function Sj(t){return t[0]}function xj(t){return t[1]}function kj(t,e){var n=Ve(!0),r=null,i=Ag,o=null,a=ak(s);t=typeof t=="function"?t:t===void 0?Sj:Ve(t),e=typeof e=="function"?e:e===void 0?xj:Ve(e);function s(c){var l,u=(c=sk(c)).length,d,f=!1,h;for(r==null&&(o=i(h=a())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(d,l,c),+e(d,l,c));if(h)return o=null,h+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ve(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ve(+c),s):e},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ve(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function Yf(t,e,n){var r=null,i=Ve(!0),o=null,a=Ag,s=null,c=ak(l);t=typeof t=="function"?t:t===void 0?Sj:Ve(+t),e=typeof e=="function"?e:Ve(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?xj:Ve(+n);function l(d){var f,h,m,p=(d=sk(d)).length,g,v=!1,y,w=new Array(p),S=new Array(p);for(o==null&&(s=a(y=c())),f=0;f<=p;++f){if(!(f<p&&i(g=d[f],f,d))===v)if(v=!v)h=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=f-1;m>=h;--m)s.point(w[m],S[m]);s.lineEnd(),s.areaEnd()}v&&(w[f]=+t(g,f,d),S[f]=+e(g,f,d),s.point(r?+r(g,f,d):w[f],n?+n(g,f,d):S[f]))}if(y)return s=null,y+""||null}function u(){return kj().defined(i).curve(a).context(o)}return l.x=function(d){return arguments.length?(t=typeof d=="function"?d:Ve(+d),r=null,l):t},l.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Ve(+d),l):t},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Ve(+d),l):r},l.y=function(d){return arguments.length?(e=typeof d=="function"?d:Ve(+d),n=null,l):e},l.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Ve(+d),l):e},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Ve(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Ve(!!d),l):i},l.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),l):a},l.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),l):o},l}class Tj{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function AG(t){return new Tj(t,!0)}function RG(t){return new Tj(t,!1)}const ck={draw(t,e){const n=Kr(e/Dp);t.moveTo(n,0),t.arc(0,0,n,0,Og)}},MG={draw(t,e){const n=Kr(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Cj=Kr(1/3),IG=Cj*2,NG={draw(t,e){const n=Kr(e/IG),r=n*Cj;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},DG={draw(t,e){const n=Kr(e),r=-n/2;t.rect(r,r,n,n)}},jG=.8908130915292852,_j=Np(Dp/10)/Np(7*Dp/10),LG=Np(Og/10)*_j,$G=-yj(Og/10)*_j,FG={draw(t,e){const n=Kr(e*jG),r=LG*n,i=$G*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Og*o/5,s=yj(a),c=Np(a);t.lineTo(c*n,-s*n),t.lineTo(s*r-c*i,c*r+s*i)}t.closePath()}},sy=Kr(3),UG={draw(t,e){const n=-Kr(e/(sy*3));t.moveTo(0,n*2),t.lineTo(-sy*n,-n),t.lineTo(sy*n,-n),t.closePath()}},Jn=-.5,Zn=Kr(3)/2,zb=1/Kr(12),BG=(zb/2+1)*3,zG={draw(t,e){const n=Kr(e/BG),r=n/2,i=n*zb,o=r,a=n*zb+n,s=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,c),t.lineTo(Jn*r-Zn*i,Zn*r+Jn*i),t.lineTo(Jn*o-Zn*a,Zn*o+Jn*a),t.lineTo(Jn*s-Zn*c,Zn*s+Jn*c),t.lineTo(Jn*r+Zn*i,Jn*i-Zn*r),t.lineTo(Jn*o+Zn*a,Jn*a-Zn*o),t.lineTo(Jn*s+Zn*c,Jn*c-Zn*s),t.closePath()}};function qG(t,e){let n=null,r=ak(i);t=typeof t=="function"?t:Ve(t||ck),e=typeof e=="function"?e:Ve(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ve(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ve(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function jp(){}function Lp(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ej(t){this._context=t}Ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WG(t){return new Ej(t)}function Pj(t){this._context=t}Pj.prototype={areaStart:jp,areaEnd:jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Lp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VG(t){return new Pj(t)}function Oj(t){this._context=t}Oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Lp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HG(t){return new Oj(t)}function Aj(t){this._context=t}Aj.prototype={areaStart:jp,areaEnd:jp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function KG(t){return new Aj(t)}function N_(t){return t<0?-1:1}function D_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(N_(o)+N_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function j_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cy(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function $p(t){this._context=t}$p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cy(this,this._t0,j_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cy(this,j_(this,n=D_(this,t,e)),n);break;default:cy(this,this._t0,n=D_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Rj(t){this._context=new Mj(t)}(Rj.prototype=Object.create($p.prototype)).point=function(t,e){$p.prototype.point.call(this,e,t)};function Mj(t){this._context=t}Mj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function GG(t){return new $p(t)}function YG(t){return new Rj(t)}function Ij(t){this._context=t}Ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=L_(t),i=L_(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function L_(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function XG(t){return new Ij(t)}function Rg(t,e){this._context=t,this._t=e}Rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function QG(t){return new Rg(t,.5)}function JG(t){return new Rg(t,0)}function ZG(t){return new Rg(t,1)}function Lc(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function qb(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function eY(t,e){return t[e]}function tY(t){const e=[];return e.key=t,e}function nY(){var t=Ve([]),e=qb,n=Lc,r=eY;function i(o){var a=Array.from(t.apply(this,arguments),tY),s,c=a.length,l=-1,u;for(const d of o)for(s=0,++l;s<c;++s)(a[s][l]=[0,+r(d,a[s].key,l,o)]).data=d;for(s=0,u=sk(e(a));s<c;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ve(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ve(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?qb:typeof o=="function"?o:Ve(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Lc,i):n},i}function rY(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Lc(t,e)}}function iY(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}Lc(t,e)}}function oY(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,c=0,l=0;s<a;++s){for(var u=t[e[s]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,m=0;m<s;++m){var p=t[e[m]],g=p[r][1]||0,v=p[r-1][1]||0;h+=g-v}c+=d,l+=h*d}i[r-1][1]+=i[r-1][0]=n,c&&(n-=l/c)}i[r-1][1]+=i[r-1][0]=n,Lc(t,e)}}function ud(t){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(t)}var aY=["type","size","sizeType"];function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wb.apply(this,arguments)}function $_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$_(Object(n),!0).forEach(function(r){sY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sY(t,e,n){return e=cY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cY(t){var e=lY(t,"string");return ud(e)=="symbol"?e:e+""}function lY(t,e){if(ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uY(t,e){if(t==null)return{};var n=dY(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Nj={symbolCircle:ck,symbolCross:MG,symbolDiamond:NG,symbolSquare:DG,symbolStar:FG,symbolTriangle:UG,symbolWye:zG},fY=Math.PI/180,hY=function(e){var n="symbol".concat(Pg(e));return Nj[n]||ck},pY=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*fY;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},mY=function(e,n){Nj["symbol".concat(Pg(e))]=n},lk=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,c=uY(e,aY),l=F_(F_({},c),{},{type:r,size:o,sizeType:s}),u=function(){var g=hY(r),v=qG().type(g).size(pY(o,s,r));return v()},d=l.className,f=l.cx,h=l.cy,m=Ce(l,!0);return f===+f&&h===+h&&o===+o?I.createElement("path",Wb({},m,{className:_e("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};lk.registerSymbol=mY;function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vb.apply(this,arguments)}function U_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U_(Object(n),!0).forEach(function(r){dd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jj(r.key),r)}}function bY(t,e,n){return e&&yY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wY(t,e,n){return e=Fp(e),SY(t,Dj()?Reflect.construct(e,n||[],Fp(t).constructor):e.apply(t,n))}function SY(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xY(t)}function xY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dj=function(){return!!t})()}function Fp(t){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fp(t)}function kY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hb(t,e)}function Hb(t,e){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hb(t,e)}function dd(t,e,n){return e=jj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jj(t){var e=TY(t,"string");return $c(e)=="symbol"?e:e+""}function TY(t,e){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var er=32,uk=function(t){function e(){return vY(this,e),wY(this,e,arguments)}return kY(e,t),bY(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=er/2,a=er/6,s=er/3,c=r.inactive?i:r.color;if(r.type==="plainline")return I.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:er,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return I.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(er,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return I.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(er/8,"h").concat(er,"v").concat(er*3/4,"h").concat(-er,"z"),className:"recharts-legend-icon"});if(I.isValidElement(r.legendIcon)){var l=gY({},r);return delete l.legendIcon,I.cloneElement(r.legendIcon,l)}return I.createElement(lk,{fill:c,cx:o,cy:o,size:er,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,c=i.formatter,l=i.inactiveColor,u={x:0,y:0,width:er,height:er},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,m){var p=h.formatter||c,g=_e(dd(dd({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=ve(h.value)?null:h.value;Ui(!ve(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=h.inactive?l:h.color;return I.createElement("li",Vb({className:g,style:d,key:"legend-item-".concat(m)},Ip(r.props,h,m)),I.createElement(jb,{width:a,height:a,viewBox:u,style:f},r.renderIcon(h)),I.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(v,h,m):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return I.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(M.PureComponent);dd(uk,"displayName","Legend");dd(uk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var CY=mg;function _Y(){this.__data__=new CY,this.size=0}var EY=_Y;function PY(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var OY=PY;function AY(t){return this.__data__.get(t)}var RY=AY;function MY(t){return this.__data__.has(t)}var IY=MY,NY=mg,DY=Qx,jY=Jx,LY=200;function $Y(t,e){var n=this.__data__;if(n instanceof NY){var r=n.__data__;if(!DY||r.length<LY-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new jY(r)}return n.set(t,e),this.size=n.size,this}var FY=$Y,UY=mg,BY=EY,zY=OY,qY=RY,WY=IY,VY=FY;function Sl(t){var e=this.__data__=new UY(t);this.size=e.size}Sl.prototype.clear=BY;Sl.prototype.delete=zY;Sl.prototype.get=qY;Sl.prototype.has=WY;Sl.prototype.set=VY;var Lj=Sl,HY="__lodash_hash_undefined__";function KY(t){return this.__data__.set(t,HY),this}var GY=KY;function YY(t){return this.__data__.has(t)}var XY=YY,QY=Jx,JY=GY,ZY=XY;function Up(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new QY;++e<n;)this.add(t[e])}Up.prototype.add=Up.prototype.push=JY;Up.prototype.has=ZY;var $j=Up;function eX(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fj=eX;function tX(t,e){return t.has(e)}var Uj=tX,nX=$j,rX=Fj,iX=Uj,oX=1,aX=2;function sX(t,e,n,r,i,o){var a=n&oX,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var d=-1,f=!0,h=n&aX?new nX:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var m=t[d],p=e[d];if(r)var g=a?r(p,m,d,e,t,o):r(m,p,d,t,e,o);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!rX(e,function(v,y){if(!iX(h,y)&&(m===v||i(m,v,n,r,o)))return h.push(y)})){f=!1;break}}else if(!(m===p||i(m,p,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var Bj=sX,cX=gi,lX=cX.Uint8Array,uX=lX;function dX(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var fX=dX;function hX(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var dk=hX,B_=lf,z_=uX,pX=Xx,mX=Bj,gX=fX,vX=dk,yX=1,bX=2,wX="[object Boolean]",SX="[object Date]",xX="[object Error]",kX="[object Map]",TX="[object Number]",CX="[object RegExp]",_X="[object Set]",EX="[object String]",PX="[object Symbol]",OX="[object ArrayBuffer]",AX="[object DataView]",q_=B_?B_.prototype:void 0,ly=q_?q_.valueOf:void 0;function RX(t,e,n,r,i,o,a){switch(n){case AX:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case OX:return!(t.byteLength!=e.byteLength||!o(new z_(t),new z_(e)));case wX:case SX:case TX:return pX(+t,+e);case xX:return t.name==e.name&&t.message==e.message;case CX:case EX:return t==e+"";case kX:var s=gX;case _X:var c=r&yX;if(s||(s=vX),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=bX,a.set(t,e);var u=mX(s(t),s(e),r,i,o,a);return a.delete(t),u;case PX:if(ly)return ly.call(t)==ly.call(e)}return!1}var MX=RX;function IX(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var zj=IX,NX=zj,DX=Nn;function jX(t,e,n){var r=e(t);return DX(t)?r:NX(r,n(t))}var LX=jX;function $X(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var FX=$X;function UX(){return[]}var BX=UX,zX=FX,qX=BX,WX=Object.prototype,VX=WX.propertyIsEnumerable,W_=Object.getOwnPropertySymbols,HX=W_?function(t){return t==null?[]:(t=Object(t),zX(W_(t),function(e){return VX.call(t,e)}))}:qX,KX=HX;function GX(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var YX=GX,XX=eo,QX=to,JX="[object Arguments]";function ZX(t){return QX(t)&&XX(t)==JX}var eQ=ZX,V_=eQ,tQ=to,qj=Object.prototype,nQ=qj.hasOwnProperty,rQ=qj.propertyIsEnumerable,iQ=V_(function(){return arguments}())?V_:function(t){return tQ(t)&&nQ.call(t,"callee")&&!rQ.call(t,"callee")},fk=iQ,Bp={exports:{}};function oQ(){return!1}var aQ=oQ;Bp.exports;(function(t,e){var n=gi,r=aQ,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;t.exports=l})(Bp,Bp.exports);var Wj=Bp.exports,sQ=9007199254740991,cQ=/^(?:0|[1-9]\d*)$/;function lQ(t,e){var n=typeof t;return e=e??sQ,!!e&&(n=="number"||n!="symbol"&&cQ.test(t))&&t>-1&&t%1==0&&t<e}var hk=lQ,uQ=9007199254740991;function dQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=uQ}var pk=dQ,fQ=eo,hQ=pk,pQ=to,mQ="[object Arguments]",gQ="[object Array]",vQ="[object Boolean]",yQ="[object Date]",bQ="[object Error]",wQ="[object Function]",SQ="[object Map]",xQ="[object Number]",kQ="[object Object]",TQ="[object RegExp]",CQ="[object Set]",_Q="[object String]",EQ="[object WeakMap]",PQ="[object ArrayBuffer]",OQ="[object DataView]",AQ="[object Float32Array]",RQ="[object Float64Array]",MQ="[object Int8Array]",IQ="[object Int16Array]",NQ="[object Int32Array]",DQ="[object Uint8Array]",jQ="[object Uint8ClampedArray]",LQ="[object Uint16Array]",$Q="[object Uint32Array]",Xe={};Xe[AQ]=Xe[RQ]=Xe[MQ]=Xe[IQ]=Xe[NQ]=Xe[DQ]=Xe[jQ]=Xe[LQ]=Xe[$Q]=!0;Xe[mQ]=Xe[gQ]=Xe[PQ]=Xe[vQ]=Xe[OQ]=Xe[yQ]=Xe[bQ]=Xe[wQ]=Xe[SQ]=Xe[xQ]=Xe[kQ]=Xe[TQ]=Xe[CQ]=Xe[_Q]=Xe[EQ]=!1;function FQ(t){return pQ(t)&&hQ(t.length)&&!!Xe[fQ(t)]}var UQ=FQ;function BQ(t){return function(e){return t(e)}}var Vj=BQ,zp={exports:{}};zp.exports;(function(t,e){var n=ZD,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(zp,zp.exports);var zQ=zp.exports,qQ=UQ,WQ=Vj,H_=zQ,K_=H_&&H_.isTypedArray,VQ=K_?WQ(K_):qQ,Hj=VQ,HQ=YX,KQ=fk,GQ=Nn,YQ=Wj,XQ=hk,QQ=Hj,JQ=Object.prototype,ZQ=JQ.hasOwnProperty;function eJ(t,e){var n=GQ(t),r=!n&&KQ(t),i=!n&&!r&&YQ(t),o=!n&&!r&&!i&&QQ(t),a=n||r||i||o,s=a?HQ(t.length,String):[],c=s.length;for(var l in t)(e||ZQ.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||XQ(l,c)))&&s.push(l);return s}var tJ=eJ,nJ=Object.prototype;function rJ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||nJ;return t===n}var iJ=rJ;function oJ(t,e){return function(n){return t(e(n))}}var Kj=oJ,aJ=Kj,sJ=aJ(Object.keys,Object),cJ=sJ,lJ=iJ,uJ=cJ,dJ=Object.prototype,fJ=dJ.hasOwnProperty;function hJ(t){if(!lJ(t))return uJ(t);var e=[];for(var n in Object(t))fJ.call(t,n)&&n!="constructor"&&e.push(n);return e}var pJ=hJ,mJ=Yx,gJ=pk;function vJ(t){return t!=null&&gJ(t.length)&&!mJ(t)}var ff=vJ,yJ=tJ,bJ=pJ,wJ=ff;function SJ(t){return wJ(t)?yJ(t):bJ(t)}var Mg=SJ,xJ=LX,kJ=KX,TJ=Mg;function CJ(t){return xJ(t,TJ,kJ)}var _J=CJ,G_=_J,EJ=1,PJ=Object.prototype,OJ=PJ.hasOwnProperty;function AJ(t,e,n,r,i,o){var a=n&EJ,s=G_(t),c=s.length,l=G_(e),u=l.length;if(c!=u&&!a)return!1;for(var d=c;d--;){var f=s[d];if(!(a?f in e:OJ.call(e,f)))return!1}var h=o.get(t),m=o.get(e);if(h&&m)return h==e&&m==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++d<c;){f=s[d];var v=t[f],y=e[f];if(r)var w=a?r(y,v,f,e,t,o):r(v,y,f,t,e,o);if(!(w===void 0?v===y||i(v,y,n,r,o):w)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var S=t.constructor,b=e.constructor;S!=b&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof b=="function"&&b instanceof b)&&(p=!1)}return o.delete(t),o.delete(e),p}var RJ=AJ,MJ=ms,IJ=gi,NJ=MJ(IJ,"DataView"),DJ=NJ,jJ=ms,LJ=gi,$J=jJ(LJ,"Promise"),FJ=$J,UJ=ms,BJ=gi,zJ=UJ(BJ,"Set"),Gj=zJ,qJ=ms,WJ=gi,VJ=qJ(WJ,"WeakMap"),HJ=VJ,Kb=DJ,Gb=Qx,Yb=FJ,Xb=Gj,Qb=HJ,Yj=eo,xl=tj,Y_="[object Map]",KJ="[object Object]",X_="[object Promise]",Q_="[object Set]",J_="[object WeakMap]",Z_="[object DataView]",GJ=xl(Kb),YJ=xl(Gb),XJ=xl(Yb),QJ=xl(Xb),JJ=xl(Qb),xa=Yj;(Kb&&xa(new Kb(new ArrayBuffer(1)))!=Z_||Gb&&xa(new Gb)!=Y_||Yb&&xa(Yb.resolve())!=X_||Xb&&xa(new Xb)!=Q_||Qb&&xa(new Qb)!=J_)&&(xa=function(t){var e=Yj(t),n=e==KJ?t.constructor:void 0,r=n?xl(n):"";if(r)switch(r){case GJ:return Z_;case YJ:return Y_;case XJ:return X_;case QJ:return Q_;case JJ:return J_}return e});var ZJ=xa,uy=Lj,eZ=Bj,tZ=MX,nZ=RJ,eE=ZJ,tE=Nn,nE=Wj,rZ=Hj,iZ=1,rE="[object Arguments]",iE="[object Array]",Xf="[object Object]",oZ=Object.prototype,oE=oZ.hasOwnProperty;function aZ(t,e,n,r,i,o){var a=tE(t),s=tE(e),c=a?iE:eE(t),l=s?iE:eE(e);c=c==rE?Xf:c,l=l==rE?Xf:l;var u=c==Xf,d=l==Xf,f=c==l;if(f&&nE(t)){if(!nE(e))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new uy),a||rZ(t)?eZ(t,e,n,r,i,o):tZ(t,e,c,n,r,i,o);if(!(n&iZ)){var h=u&&oE.call(t,"__wrapped__"),m=d&&oE.call(e,"__wrapped__");if(h||m){var p=h?t.value():t,g=m?e.value():e;return o||(o=new uy),i(p,g,n,r,o)}}return f?(o||(o=new uy),nZ(t,e,n,r,i,o)):!1}var sZ=aZ,cZ=sZ,aE=to;function Xj(t,e,n,r,i){return t===e?!0:t==null||e==null||!aE(t)&&!aE(e)?t!==t&&e!==e:cZ(t,e,n,r,Xj,i)}var mk=Xj,lZ=Lj,uZ=mk,dZ=1,fZ=2;function hZ(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var c=s[0],l=t[c],u=s[1];if(a&&s[2]){if(l===void 0&&!(c in t))return!1}else{var d=new lZ;if(r)var f=r(l,u,c,t,e,d);if(!(f===void 0?uZ(u,l,dZ|fZ,r,d):f))return!1}}return!0}var pZ=hZ,mZ=sa;function gZ(t){return t===t&&!mZ(t)}var Qj=gZ,vZ=Qj,yZ=Mg;function bZ(t){for(var e=yZ(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,vZ(i)]}return e}var wZ=bZ;function SZ(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Jj=SZ,xZ=pZ,kZ=wZ,TZ=Jj;function CZ(t){var e=kZ(t);return e.length==1&&e[0][2]?TZ(e[0][0],e[0][1]):function(n){return n===t||xZ(n,t,e)}}var _Z=CZ;function EZ(t,e){return t!=null&&e in Object(t)}var PZ=EZ,OZ=aj,AZ=fk,RZ=Nn,MZ=hk,IZ=pk,NZ=vg;function DZ(t,e,n){e=OZ(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=NZ(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&IZ(i)&&MZ(a,i)&&(RZ(t)||AZ(t)))}var jZ=DZ,LZ=PZ,$Z=jZ;function FZ(t,e){return t!=null&&$Z(t,e,LZ)}var UZ=FZ,BZ=mk,zZ=sj,qZ=UZ,WZ=Gx,VZ=Qj,HZ=Jj,KZ=vg,GZ=1,YZ=2;function XZ(t,e){return WZ(t)&&VZ(e)?HZ(KZ(t),e):function(n){var r=zZ(n,t);return r===void 0&&r===e?qZ(n,t):BZ(e,r,GZ|YZ)}}var QZ=XZ;function JZ(t){return t}var kl=JZ;function ZZ(t){return function(e){return e==null?void 0:e[t]}}var eee=ZZ,tee=tk;function nee(t){return function(e){return tee(e,t)}}var ree=nee,iee=eee,oee=ree,aee=Gx,see=vg;function cee(t){return aee(t)?iee(see(t)):oee(t)}var lee=cee,uee=_Z,dee=QZ,fee=kl,hee=Nn,pee=lee;function mee(t){return typeof t=="function"?t:t==null?fee:typeof t=="object"?hee(t)?dee(t[0],t[1]):uee(t):pee(t)}var ca=mee;function gee(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Zj=gee;function vee(t){return t!==t}var yee=vee;function bee(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var wee=bee,See=Zj,xee=yee,kee=wee;function Tee(t,e,n){return e===e?kee(t,e,n):See(t,xee,n)}var Cee=Tee,_ee=Cee;function Eee(t,e){var n=t==null?0:t.length;return!!n&&_ee(t,e,0)>-1}var Pee=Eee;function Oee(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Aee=Oee;function Ree(){}var Mee=Ree,dy=Gj,Iee=Mee,Nee=dk,Dee=1/0,jee=dy&&1/Nee(new dy([,-0]))[1]==Dee?function(t){return new dy(t)}:Iee,Lee=jee,$ee=$j,Fee=Pee,Uee=Aee,Bee=Uj,zee=Lee,qee=dk,Wee=200;function Vee(t,e,n){var r=-1,i=Fee,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=Uee;else if(o>=Wee){var l=e?null:zee(t);if(l)return qee(l);a=!1,i=Bee,c=new $ee}else c=e?[]:s;e:for(;++r<o;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,a&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue e;e&&c.push(d),s.push(u)}else i(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}var Hee=Vee,Kee=ca,Gee=Hee;function Yee(t,e){return t&&t.length?Gee(t,Kee(e)):[]}var Xee=Yee;const sE=We(Xee);function eL(t,e,n){return e===!0?sE(t,n):ve(e)?sE(t,e):t}function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}var Qee=["ref"];function cE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(n),!0).forEach(function(r){Ig(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nL(r.key),r)}}function Zee(t,e,n){return e&&lE(t.prototype,e),n&&lE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ete(t,e,n){return e=qp(e),tte(t,tL()?Reflect.construct(e,n||[],qp(t).constructor):e.apply(t,n))}function tte(t,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nte(t)}function nte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tL=function(){return!!t})()}function qp(t){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qp(t)}function rte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jb(t,e)}function Jb(t,e){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jb(t,e)}function Ig(t,e,n){return e=nL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nL(t){var e=ite(t,"string");return Fc(e)=="symbol"?e:e+""}function ite(t,e){if(Fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ote(t,e){if(t==null)return{};var n=ate(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ate(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ste(t){return t.value}function cte(t,e){if(I.isValidElement(t))return I.cloneElement(t,e);if(typeof t=="function")return I.createElement(t,e);e.ref;var n=ote(e,Qee);return I.createElement(uk,n)}var uE=1,uc=function(t){function e(){var n;Jee(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=ete(this,e,[].concat(i)),Ig(n,"lastBoundingBox",{width:-1,height:-1}),n}return rte(e,t),Zee(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>uE||Math.abs(i.height-this.lastBoundingBox.height)>uE)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,c=i.margin,l=i.chartWidth,u=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();d={left:((l||0)-h.width)/2}}else d=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();f={top:((u||0)-m.height)/2}}else f=s==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return yi(yi({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,c=i.wrapperStyle,l=i.payloadUniqBy,u=i.payload,d=yi(yi({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(c)),c);return I.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},cte(o,yi(yi({},this.props),{},{payload:eL(u,l,ste)})))}}],[{key:"getWithHeight",value:function(r,i){var o=yi(yi({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&ee(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(M.PureComponent);Ig(uc,"displayName","Legend");Ig(uc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dE=lf,lte=fk,ute=Nn,fE=dE?dE.isConcatSpreadable:void 0;function dte(t){return ute(t)||lte(t)||!!(fE&&t&&t[fE])}var fte=dte,hte=zj,pte=fte;function rL(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=pte),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?rL(s,e-1,n,r,i):hte(i,s):r||(i[i.length]=s)}return i}var iL=rL;function mte(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(n(o[c],c,o)===!1)break}return e}}var gte=mte,vte=gte,yte=vte(),bte=yte,wte=bte,Ste=Mg;function xte(t,e){return t&&wte(t,e,Ste)}var oL=xte,kte=ff;function Tte(t,e){return function(n,r){if(n==null)return n;if(!kte(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var Cte=Tte,_te=oL,Ete=Cte,Pte=Ete(_te),gk=Pte,Ote=gk,Ate=ff;function Rte(t,e){var n=-1,r=Ate(t)?Array(t.length):[];return Ote(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var aL=Rte;function Mte(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Ite=Mte,hE=gl;function Nte(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=hE(t),a=e!==void 0,s=e===null,c=e===e,l=hE(e);if(!s&&!l&&!o&&t>e||o&&a&&c&&!s&&!l||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0}var Dte=Nte,jte=Dte;function Lte(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var c=jte(i[r],o[r]);if(c){if(r>=s)return c;var l=n[r];return c*(l=="desc"?-1:1)}}return t.index-e.index}var $te=Lte,fy=ek,Fte=tk,Ute=ca,Bte=aL,zte=Ite,qte=Vj,Wte=$te,Vte=kl,Hte=Nn;function Kte(t,e,n){e.length?e=fy(e,function(o){return Hte(o)?function(a){return Fte(a,o.length===1?o[0]:o)}:o}):e=[Vte];var r=-1;e=fy(e,qte(Ute));var i=Bte(t,function(o,a,s){var c=fy(e,function(l){return l(o)});return{criteria:c,index:++r,value:o}});return zte(i,function(o,a){return Wte(o,a,n)})}var Gte=Kte;function Yte(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Xte=Yte,Qte=Xte,pE=Math.max;function Jte(t,e,n){return e=pE(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=pE(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Qte(t,this,s)}}var Zte=Jte;function ene(t){return function(){return t}}var tne=ene,nne=ms,rne=function(){try{var t=nne(Object,"defineProperty");return t({},"",{}),t}catch{}}(),sL=rne,ine=tne,mE=sL,one=kl,ane=mE?function(t,e){return mE(t,"toString",{configurable:!0,enumerable:!1,value:ine(e),writable:!0})}:one,sne=ane,cne=800,lne=16,une=Date.now;function dne(t){var e=0,n=0;return function(){var r=une(),i=lne-(r-n);if(n=r,i>0){if(++e>=cne)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var fne=dne,hne=sne,pne=fne,mne=pne(hne),gne=mne,vne=kl,yne=Zte,bne=gne;function wne(t,e){return bne(yne(t,e,vne),t+"")}var Sne=wne,xne=Xx,kne=ff,Tne=hk,Cne=sa;function _ne(t,e,n){if(!Cne(n))return!1;var r=typeof e;return(r=="number"?kne(n)&&Tne(e,n.length):r=="string"&&e in n)?xne(n[e],t):!1}var Ng=_ne,Ene=iL,Pne=Gte,One=Sne,gE=Ng,Ane=One(function(t,e){if(t==null)return[];var n=e.length;return n>1&&gE(t,e[0],e[1])?e=[]:n>2&&gE(e[0],e[1],e[2])&&(e=[e[0]]),Pne(t,Ene(e,1),[])}),Rne=Ane;const vk=We(Rne);function fd(t){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd(t)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zb.apply(this,arguments)}function Mne(t,e){return jne(t)||Dne(t,e)||Nne(t,e)||Ine()}function Ine(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nne(t,e){if(t){if(typeof t=="string")return vE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vE(t,e)}}function vE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function jne(t){if(Array.isArray(t))return t}function yE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yE(Object(n),!0).forEach(function(r){Lne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lne(t,e,n){return e=$ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ne(t){var e=Fne(t,"string");return fd(e)=="symbol"?e:e+""}function Fne(t,e){if(fd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Une(t){return Array.isArray(t)&&It(t[0])&&It(t[1])?t.join(" ~ "):t}var Bne=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,c=e.labelStyle,l=c===void 0?{}:c,u=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,p=e.label,g=e.labelFormatter,v=e.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(u&&u.length){var P={padding:0,margin:0},L=(f?vk(u,f):u).map(function(j,$){if(j.type==="none")return null;var F=hy({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},s),q=j.formatter||d||Une,N=j.value,B=j.name,W=N,X=B;if(q&&W!=null&&X!=null){var G=q(N,B,j,$,u);if(Array.isArray(G)){var ae=Mne(G,2);W=ae[0],X=ae[1]}else W=G}return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:F},It(X)?I.createElement("span",{className:"recharts-tooltip-item-name"},X):null,It(X)?I.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,I.createElement("span",{className:"recharts-tooltip-item-value"},W),I.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:P},L)}return null},S=hy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=hy({margin:0},l),x=!Se(p),T=x?p:"",C=_e("recharts-default-tooltip",h),_=_e("recharts-tooltip-label",m);x&&g&&u!==void 0&&u!==null&&(T=g(p,u));var E=y?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",Zb({className:C,style:S},E),I.createElement("p",{className:_,style:b},I.isValidElement(T)?T:"".concat(T)),w())};function hd(t){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(t)}function Qf(t,e,n){return e=zne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zne(t){var e=qne(t,"string");return hd(e)=="symbol"?e:e+""}function qne(t,e){if(hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yl="recharts-tooltip-wrapper",Wne={visibility:"hidden"};function Vne(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _e(Yl,Qf(Qf(Qf(Qf({},"".concat(Yl,"-right"),ee(n)&&e&&ee(e.x)&&n>=e.x),"".concat(Yl,"-left"),ee(n)&&e&&ee(e.x)&&n<e.x),"".concat(Yl,"-bottom"),ee(r)&&e&&ee(e.y)&&r>=e.y),"".concat(Yl,"-top"),ee(r)&&e&&ee(e.y)&&r<e.y))}function bE(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,c=t.viewBox,l=t.viewBoxDimension;if(o&&ee(o[r]))return o[r];var u=n[r]-s-i,d=n[r]+i;if(e[r])return a[r]?u:d;if(a[r]){var f=u,h=c[r];return f<h?Math.max(d,c[r]):Math.max(u,c[r])}var m=d+s,p=c[r]+l;return m>p?Math.max(u,c[r]):Math.max(d,c[r])}function Hne(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Kne(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,c=t.viewBox,l,u,d;return a.height>0&&a.width>0&&n?(u=bE({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),d=bE({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),l=Hne({translateX:u,translateY:d,useTranslate3d:s})):l=Wne,{cssProperties:l,cssClasses:Vne({translateX:u,translateY:d,coordinate:n})}}function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function wE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wE(Object(n),!0).forEach(function(r){tw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lL(r.key),r)}}function Xne(t,e,n){return e&&Yne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qne(t,e,n){return e=Wp(e),Jne(t,cL()?Reflect.construct(e,n||[],Wp(t).constructor):e.apply(t,n))}function Jne(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zne(t)}function Zne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!t})()}function Wp(t){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wp(t)}function ere(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ew(t,e)}function ew(t,e){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ew(t,e)}function tw(t,e,n){return e=lL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lL(t){var e=tre(t,"string");return Uc(e)=="symbol"?e:e+""}function tre(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xE=1,nre=function(t){function e(){var n;Gne(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Qne(this,e,[].concat(i)),tw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),tw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return ere(e,t),Xne(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>xE||Math.abs(r.height-this.state.lastBoundingBox.height)>xE)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,c=i.animationEasing,l=i.children,u=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,h=i.offset,m=i.position,p=i.reverseDirection,g=i.useTranslate3d,v=i.viewBox,y=i.wrapperStyle,w=Kne({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:v}),S=w.cssClasses,b=w.cssProperties,x=SE(SE({transition:f&&o?"transform ".concat(s,"ms ").concat(c):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return I.createElement("div",{tabIndex:-1,className:S,style:x,ref:function(C){r.wrapperNode=C}},l)}}])}(M.PureComponent),rre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Tl={isSsr:rre()};function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function kE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(n),!0).forEach(function(r){yk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ire(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ore(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dL(r.key),r)}}function are(t,e,n){return e&&ore(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sre(t,e,n){return e=Vp(e),cre(t,uL()?Reflect.construct(e,n||[],Vp(t).constructor):e.apply(t,n))}function cre(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lre(t)}function lre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uL=function(){return!!t})()}function Vp(t){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vp(t)}function ure(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nw(t,e)}function nw(t,e){return nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nw(t,e)}function yk(t,e,n){return e=dL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dL(t){var e=dre(t,"string");return Bc(e)=="symbol"?e:e+""}function dre(t,e){if(Bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fre(t){return t.dataKey}function hre(t,e){return I.isValidElement(t)?I.cloneElement(t,e):typeof t=="function"?I.createElement(t,e):I.createElement(Bne,e)}var Ar=function(t){function e(){return ire(this,e),sre(this,e,arguments)}return ure(e,t),are(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,c=i.animationEasing,l=i.content,u=i.coordinate,d=i.filterNull,f=i.isAnimationActive,h=i.offset,m=i.payload,p=i.payloadUniqBy,g=i.position,v=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,b=m??[];d&&b.length&&(b=eL(m.filter(function(T){return T.value!=null&&(T.hide!==!0||r.props.includeHidden)}),p,fre));var x=b.length>0;return I.createElement(nre,{allowEscapeViewBox:a,animationDuration:s,animationEasing:c,isAnimationActive:f,active:o,coordinate:u,hasPayload:x,offset:h,position:g,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:S},hre(l,TE(TE({},this.props),{},{payload:b})))}}])}(M.PureComponent);yk(Ar,"displayName","Tooltip");yk(Ar,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Tl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var pre=gi,mre=function(){return pre.Date.now()},gre=mre,vre=/\s/;function yre(t){for(var e=t.length;e--&&vre.test(t.charAt(e)););return e}var bre=yre,wre=bre,Sre=/^\s+/;function xre(t){return t&&t.slice(0,wre(t)+1).replace(Sre,"")}var kre=xre,Tre=kre,CE=sa,Cre=gl,_E=NaN,_re=/^[-+]0x[0-9a-f]+$/i,Ere=/^0b[01]+$/i,Pre=/^0o[0-7]+$/i,Ore=parseInt;function Are(t){if(typeof t=="number")return t;if(Cre(t))return _E;if(CE(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=CE(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Tre(t);var n=Ere.test(t);return n||Pre.test(t)?Ore(t.slice(2),n?2:8):_re.test(t)?_E:+t}var fL=Are,Rre=sa,py=gre,EE=fL,Mre="Expected a function",Ire=Math.max,Nre=Math.min;function Dre(t,e,n){var r,i,o,a,s,c,l=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Mre);e=EE(e)||0,Rre(n)&&(u=!!n.leading,d="maxWait"in n,o=d?Ire(EE(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function h(x){var T=r,C=i;return r=i=void 0,l=x,a=t.apply(C,T),a}function m(x){return l=x,s=setTimeout(v,e),u?h(x):a}function p(x){var T=x-c,C=x-l,_=e-T;return d?Nre(_,o-C):_}function g(x){var T=x-c,C=x-l;return c===void 0||T>=e||T<0||d&&C>=o}function v(){var x=py();if(g(x))return y(x);s=setTimeout(v,p(x))}function y(x){return s=void 0,f&&r?h(x):(r=i=void 0,a)}function w(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function S(){return s===void 0?a:y(py())}function b(){var x=py(),T=g(x);if(r=arguments,i=this,c=x,T){if(s===void 0)return m(c);if(d)return clearTimeout(s),s=setTimeout(v,e),h(c)}return s===void 0&&(s=setTimeout(v,e)),a}return b.cancel=w,b.flush=S,b}var jre=Dre,Lre=jre,$re=sa,Fre="Expected a function";function Ure(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Fre);return $re(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lre(t,e,{leading:r,maxWait:e,trailing:i})}var Bre=Ure;const hL=We(Bre);function pd(t){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(t)}function PE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(n),!0).forEach(function(r){zre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zre(t,e,n){return e=qre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qre(t){var e=Wre(t,"string");return pd(e)=="symbol"?e:e+""}function Wre(t,e){if(pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vre(t,e){return Yre(t)||Gre(t,e)||Kre(t,e)||Hre()}function Hre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kre(t,e){if(t){if(typeof t=="string")return OE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OE(t,e)}}function OE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Yre(t){if(Array.isArray(t))return t}var pL=M.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,c=s===void 0?"100%":s,l=t.minWidth,u=l===void 0?0:l,d=t.minHeight,f=t.maxHeight,h=t.children,m=t.debounce,p=m===void 0?0:m,g=t.id,v=t.className,y=t.onResize,w=t.style,S=w===void 0?{}:w,b=M.useRef(null),x=M.useRef();x.current=y,M.useImperativeHandle(e,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var T=M.useState({containerWidth:i.width,containerHeight:i.height}),C=Vre(T,2),_=C[0],E=C[1],A=M.useCallback(function(L,j){E(function($){var F=Math.round(L),q=Math.round(j);return $.containerWidth===F&&$.containerHeight===q?$:{containerWidth:F,containerHeight:q}})},[]);M.useEffect(function(){var L=function(B){var W,X=B[0].contentRect,G=X.width,ae=X.height;A(G,ae),(W=x.current)===null||W===void 0||W.call(x,G,ae)};p>0&&(L=hL(L,p,{trailing:!0,leading:!1}));var j=new ResizeObserver(L),$=b.current.getBoundingClientRect(),F=$.width,q=$.height;return A(F,q),j.observe(b.current),function(){j.disconnect()}},[A,p]);var P=M.useMemo(function(){var L=_.containerWidth,j=_.containerHeight;if(L<0||j<0)return null;Ui(Aa(a)||Aa(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),Ui(!n||n>0,"The aspect(%s) must be greater than zero.",n);var $=Aa(a)?L:a,F=Aa(c)?j:c;n&&n>0&&($?F=$/n:F&&($=F*n),f&&F>f&&(F=f)),Ui($>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,F,a,c,u,d,n);var q=!Array.isArray(h)&&Fi(h.type).endsWith("Chart");return I.Children.map(h,function(N){return I.isValidElement(N)?M.cloneElement(N,Jf({width:$,height:F},q?{style:Jf({height:"100%",width:"100%",maxHeight:F,maxWidth:$},N.props.style)}:{})):N})},[n,h,c,f,d,u,_,a]);return I.createElement("div",{id:g?"".concat(g):void 0,className:_e("recharts-responsive-container",v),style:Jf(Jf({},S),{},{width:a,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:b},P)}),mL=function(e){return null};mL.displayName="Cell";function md(t){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(t)}function AE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AE(Object(n),!0).forEach(function(r){Xre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xre(t,e,n){return e=Qre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qre(t){var e=Jre(t,"string");return md(e)=="symbol"?e:e+""}function Jre(t,e){if(md(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ks={widthCache:{},cacheCount:0},Zre=2e3,eie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RE="recharts_measurement_span";function tie(t){var e=rw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Ru=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Tl.isSsr)return{width:0,height:0};var r=tie(n),i=JSON.stringify({text:e,copyStyle:r});if(ks.widthCache[i])return ks.widthCache[i];try{var o=document.getElementById(RE);o||(o=document.createElement("span"),o.setAttribute("id",RE),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=rw(rw({},eie),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),c={width:s.width,height:s.height};return ks.widthCache[i]=c,++ks.cacheCount>Zre&&(ks.cacheCount=0,ks.widthCache={}),c}catch{return{width:0,height:0}}},nie=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function Hp(t,e){return aie(t)||oie(t,e)||iie(t,e)||rie()}function rie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iie(t,e){if(t){if(typeof t=="string")return ME(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ME(t,e)}}function ME(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function aie(t){if(Array.isArray(t))return t}function sie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lie(r.key),r)}}function cie(t,e,n){return e&&IE(t.prototype,e),n&&IE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lie(t){var e=uie(t,"string");return gd(e)=="symbol"?e:e+""}function uie(t,e){if(gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,die=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hie=Object.keys(gL),Ws="NaN";function pie(t,e){return t*gL[e]}var Zf=function(){function t(e,n){sie(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!die.test(n)&&(this.num=NaN,this.unit=""),hie.includes(n)&&(this.num=pie(e,n),this.unit="px")}return cie(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=fie.exec(n))!==null&&r!==void 0?r:[],o=Hp(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function vL(t){if(t.includes(Ws))return Ws;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=NE.exec(e))!==null&&n!==void 0?n:[],i=Hp(r,4),o=i[1],a=i[2],s=i[3],c=Zf.parse(o??""),l=Zf.parse(s??""),u=a==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return Ws;e=e.replace(NE,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=DE.exec(e))!==null&&d!==void 0?d:[],h=Hp(f,4),m=h[1],p=h[2],g=h[3],v=Zf.parse(m??""),y=Zf.parse(g??""),w=p==="+"?v.add(y):v.subtract(y);if(w.isNaN())return Ws;e=e.replace(DE,w.toString())}return e}var jE=/\(([^()]*)\)/;function mie(t){for(var e=t;e.includes("(");){var n=jE.exec(e),r=Hp(n,2),i=r[1];e=e.replace(jE,vL(i))}return e}function gie(t){var e=t.replace(/\s+/g,"");return e=mie(e),e=vL(e),e}function vie(t){try{return gie(t)}catch{return Ws}}function my(t){var e=vie(t.slice(5,-1));return e===Ws?"":e}var yie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bie=["dx","dy","angle","className","breakAll"];function iw(){return iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iw.apply(this,arguments)}function LE(t,e){if(t==null)return{};var n=wie(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $E(t,e){return Tie(t)||kie(t,e)||xie(t,e)||Sie()}function Sie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xie(t,e){if(t){if(typeof t=="string")return FE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FE(t,e)}}function FE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function Tie(t){if(Array.isArray(t))return t}var yL=/[ \f\n\r\t\v\u2028\u2029]+/,bL=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Se(n)||(r?o=n.toString().split(""):o=n.toString().split(yL));var a=o.map(function(c){return{word:c,width:Ru(c,i).width}}),s=r?0:Ru("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},Cie=function(e,n,r,i,o){var a=e.maxLines,s=e.children,c=e.style,l=e.breakAll,u=ee(a),d=s,f=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce(function(F,q){var N=q.word,B=q.width,W=F[F.length-1];if(W&&(i==null||o||W.width+B+r<Number(i)))W.words.push(N),W.width+=B+r;else{var X={words:[N],width:B};F.push(X)}return F},[])},h=f(n),m=function($){return $.reduce(function(F,q){return F.width>q.width?F:q})};if(!u)return h;for(var p="",g=function($){var F=d.slice(0,$),q=bL({breakAll:l,style:c,children:F+p}).wordsWithComputedWidth,N=f(q),B=N.length>a||m(N).width>Number(i);return[B,N]},v=0,y=d.length-1,w=0,S;v<=y&&w<=d.length-1;){var b=Math.floor((v+y)/2),x=b-1,T=g(x),C=$E(T,2),_=C[0],E=C[1],A=g(b),P=$E(A,1),L=P[0];if(!_&&!L&&(v=b+1),_&&L&&(y=b-1),!_&&L){S=E;break}w++}return S||h},UE=function(e){var n=Se(e)?[]:e.toString().split(yL);return[{words:n}]},_ie=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!Tl.isSsr){var c,l,u=bL({breakAll:a,children:i,style:o});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;c=d,l=f}else return UE(i);return Cie({breakAll:a,children:i,maxLines:s,style:o},c,l,n,r)}return UE(i)},BE="#808080",Kp=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,c=e.capHeight,l=c===void 0?"0.71em":c,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,h=f===void 0?"start":f,m=e.verticalAnchor,p=m===void 0?"end":m,g=e.fill,v=g===void 0?BE:g,y=LE(e,yie),w=M.useMemo(function(){return _ie({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),S=y.dx,b=y.dy,x=y.angle,T=y.className,C=y.breakAll,_=LE(y,bie);if(!It(r)||!It(o))return null;var E=r+(ee(S)?S:0),A=o+(ee(b)?b:0),P;switch(p){case"start":P=my("calc(".concat(l,")"));break;case"middle":P=my("calc(".concat((w.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:P=my("calc(".concat(w.length-1," * -").concat(s,")"));break}var L=[];if(d){var j=w[0].width,$=y.width;L.push("scale(".concat((ee($)?$/j:1)/j,")"))}return x&&L.push("rotate(".concat(x,", ").concat(E,", ").concat(A,")")),L.length&&(_.transform=L.join(" ")),I.createElement("text",iw({},Ce(_,!0),{x:E,y:A,className:_e("recharts-text",T),textAnchor:h,fill:v.includes("url")?BE:v}),w.map(function(F,q){var N=F.words.join(C?"":" ");return I.createElement("tspan",{x:E,dy:q===0?P:s,key:"".concat(N,"-").concat(q)},N)}))};function Yo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bk(t){let e,n,r;t.length!==2?(e=Yo,n=(s,c)=>Yo(t(s),c),r=(s,c)=>t(s)-c):(e=t===Yo||t===Eie?t:Pie,n=t,r=t);function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){const d=i(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:i,center:a,right:o}}function Pie(){return 0}function wL(t){return t===null?NaN:+t}function*Oie(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Aie=bk(Yo),hf=Aie.right;bk(wL).center;class zE extends Map{constructor(e,n=Iie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(qE(this,e))}has(e){return super.has(qE(this,e))}set(e,n){return super.set(Rie(this,e),n)}delete(e){return super.delete(Mie(this,e))}}function qE({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Rie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Mie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Iie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nie(t=Yo){if(t===Yo)return SL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function SL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Die=Math.sqrt(50),jie=Math.sqrt(10),Lie=Math.sqrt(2);function Gp(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Die?10:o>=jie?5:o>=Lie?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?Gp(t,e,n*2):[s,c,l]}function ow(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Gp(e,t,n):Gp(t,e,n);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function aw(t,e,n){return e=+e,t=+t,n=+n,Gp(t,e,n)[2]}function sw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?aw(e,t,n):aw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function WE(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function VE(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function xL(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?SL:Nie(i);r>n;){if(r-n>600){const c=r-n+1,l=e-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),h=Math.max(n,Math.floor(e-l*d/c+f)),m=Math.min(r,Math.floor(e+(c-l)*d/c+f));xL(t,e,h,m,i)}const o=t[e];let a=n,s=r;for(Xl(t,n,e),i(t[r],o)>0&&Xl(t,n,r);a<s;){for(Xl(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Xl(t,n,s):(++s,Xl(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Xl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $ie(t,e,n){if(t=Float64Array.from(Oie(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return VE(t);if(e>=1)return WE(t);var r,i=(r-1)*e,o=Math.floor(i),a=WE(xL(t,o).subarray(0,o+1)),s=VE(t.subarray(o+1));return a+(s-a)*(i-o)}}function Fie(t,e,n=wL){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function Uie(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function br(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function no(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const cw=Symbol("implicit");function wk(){var t=new zE,e=[],n=[],r=cw;function i(o){let a=t.get(o);if(a===void 0){if(r!==cw)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new zE;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return wk(e,n).unknown(r)},br.apply(i,arguments),i}function vd(){var t=wk().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,c=0,l=0,u=.5;delete t.unknown;function d(){var f=e().length,h=i<r,m=h?i:r,p=h?r:i;o=(p-m)/Math.max(1,f-c+l*2),s&&(o=Math.floor(o)),m+=(p-m-o*(f-c))*u,a=o*(1-c),s&&(m=Math.round(m),a=Math.round(a));var g=Uie(f).map(function(v){return m+o*v});return n(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(f){return arguments.length?(s=!!f,d()):s},t.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},t.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return vd(e(),[r,i]).round(s).paddingInner(c).paddingOuter(l).align(u)},br.apply(d(),arguments)}function kL(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return kL(e())},t}function Mu(){return kL(vd.apply(null,arguments).paddingInner(1))}function Sk(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function TL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function pf(){}var yd=.7,Yp=1/yd,dc="\\s*([+-]?\\d+)\\s*",bd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bie=/^#([0-9a-f]{3,8})$/,zie=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),qie=new RegExp(`^rgb\\(${ci},${ci},${ci}\\)$`),Wie=new RegExp(`^rgba\\(${dc},${dc},${dc},${bd}\\)$`),Vie=new RegExp(`^rgba\\(${ci},${ci},${ci},${bd}\\)$`),Hie=new RegExp(`^hsl\\(${bd},${ci},${ci}\\)$`),Kie=new RegExp(`^hsla\\(${bd},${ci},${ci},${bd}\\)$`),HE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sk(pf,wd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KE,formatHex:KE,formatHex8:Gie,formatHsl:Yie,formatRgb:GE,toString:GE});function KE(){return this.rgb().formatHex()}function Gie(){return this.rgb().formatHex8()}function Yie(){return CL(this).formatHsl()}function GE(){return this.rgb().formatRgb()}function wd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Bie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YE(e):n===3?new En(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?eh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?eh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zie.exec(t))?new En(e[1],e[2],e[3],1):(e=qie.exec(t))?new En(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wie.exec(t))?eh(e[1],e[2],e[3],e[4]):(e=Vie.exec(t))?eh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Hie.exec(t))?JE(e[1],e[2]/100,e[3]/100,1):(e=Kie.exec(t))?JE(e[1],e[2]/100,e[3]/100,e[4]):HE.hasOwnProperty(t)?YE(HE[t]):t==="transparent"?new En(NaN,NaN,NaN,0):null}function YE(t){return new En(t>>16&255,t>>8&255,t&255,1)}function eh(t,e,n,r){return r<=0&&(t=e=n=NaN),new En(t,e,n,r)}function Xie(t){return t instanceof pf||(t=wd(t)),t?(t=t.rgb(),new En(t.r,t.g,t.b,t.opacity)):new En}function lw(t,e,n,r){return arguments.length===1?Xie(t):new En(t,e,n,r??1)}function En(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Sk(En,lw,TL(pf,{brighter(t){return t=t==null?Yp:Math.pow(Yp,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yd:Math.pow(yd,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new En(Ka(this.r),Ka(this.g),Ka(this.b),Xp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XE,formatHex:XE,formatHex8:Qie,formatRgb:QE,toString:QE}));function XE(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function Qie(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function QE(){const t=Xp(this.opacity);return`${t===1?"rgb(":"rgba("}${Ka(this.r)}, ${Ka(this.g)}, ${Ka(this.b)}${t===1?")":`, ${t})`}`}function Xp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ka(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ra(t){return t=Ka(t),(t<16?"0":"")+t.toString(16)}function JE(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $r(t,e,n,r)}function CL(t){if(t instanceof $r)return new $r(t.h,t.s,t.l,t.opacity);if(t instanceof pf||(t=wd(t)),!t)return new $r;if(t instanceof $r)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new $r(a,s,c,t.opacity)}function Jie(t,e,n,r){return arguments.length===1?CL(t):new $r(t,e,n,r??1)}function $r(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Sk($r,Jie,TL(pf,{brighter(t){return t=t==null?Yp:Math.pow(Yp,t),new $r(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yd:Math.pow(yd,t),new $r(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new En(gy(t>=240?t-240:t+120,i,r),gy(t,i,r),gy(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $r(ZE(this.h),th(this.s),th(this.l),Xp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xp(this.opacity);return`${t===1?"hsl(":"hsla("}${ZE(this.h)}, ${th(this.s)*100}%, ${th(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZE(t){return t=(t||0)%360,t<0?t+360:t}function th(t){return Math.max(0,Math.min(1,t||0))}function gy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xk=t=>()=>t;function Zie(t,e){return function(n){return t+n*e}}function eoe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function toe(t){return(t=+t)==1?_L:function(e,n){return n-e?eoe(e,n,t):xk(isNaN(e)?n:e)}}function _L(t,e){var n=e-t;return n?Zie(t,n):xk(isNaN(t)?e:t)}const eP=function t(e){var n=toe(e);function r(i,o){var a=n((i=lw(i)).r,(o=lw(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=_L(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function noe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function roe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ioe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Cl(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ooe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Qp(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function aoe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Cl(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var uw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vy=new RegExp(uw.source,"g");function soe(t){return function(){return t}}function coe(t){return function(e){return t(e)+""}}function loe(t,e){var n=uw.lastIndex=vy.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=uw.exec(t))&&(i=vy.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Qp(r,i)})),n=vy.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?coe(c[0].x):soe(e):(e=c.length,function(l){for(var u=0,d;u<e;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function Cl(t,e){var n=typeof e,r;return e==null||n==="boolean"?xk(e):(n==="number"?Qp:n==="string"?(r=wd(e))?(e=r,eP):loe:e instanceof wd?eP:e instanceof Date?ooe:roe(e)?noe:Array.isArray(e)?ioe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aoe:Qp)(t,e)}function kk(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function uoe(t,e){e===void 0&&(e=t,t=Cl);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function doe(t){return function(){return t}}function Jp(t){return+t}var tP=[0,1];function fn(t){return t}function dw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:doe(isNaN(e)?NaN:.5)}function foe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function hoe(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=dw(i,r),o=n(a,o)):(r=dw(r,i),o=n(o,a)),function(s){return o(r(s))}}function poe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=dw(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var c=hf(t,s,1,r)-1;return o[c](i[c](s))}}function mf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Dg(){var t=tP,e=tP,n=Cl,r,i,o,a=fn,s,c,l;function u(){var f=Math.min(t.length,e.length);return a!==fn&&(a=foe(t[0],t[f-1])),s=f>2?poe:hoe,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?o:(c||(c=s(t.map(r),e,n)))(r(a(f)))}return d.invert=function(f){return a(i((l||(l=s(e,t.map(r),Qp)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,Jp),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=kk,u()},d.clamp=function(f){return arguments.length?(a=f?!0:fn,u()):a!==fn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return r=f,i=h,u()}}function Tk(){return Dg()(fn,fn)}function moe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zp(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function zc(t){return t=Zp(Math.abs(t)),t?t[1]:NaN}function goe(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function voe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var yoe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sd(t){if(!(e=yoe.exec(t)))throw new Error("invalid format: "+t);var e;return new Ck({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Sd.prototype=Ck.prototype;function Ck(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ck.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function boe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var em;function woe(t,e){var n=Zp(t,e);if(!n)return em=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(em=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Zp(t,Math.max(0,e+o-1))[0]}function nP(t,e){var n=Zp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const rP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:moe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nP(t*100,e),r:nP,s:woe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iP(t){return t}var oP=Array.prototype.map,aP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Soe(t){var e=t.grouping===void 0||t.thousands===void 0?iP:goe(oP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?iP:voe(oP.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(d,f){d=Sd(d);var h=d.fill,m=d.align,p=d.sign,g=d.symbol,v=d.zero,y=d.width,w=d.comma,S=d.precision,b=d.trim,x=d.type;x==="n"?(w=!0,x="g"):rP[x]||(S===void 0&&(S=12),b=!0,x="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var T=(f&&f.prefix!==void 0?f.prefix:"")+(g==="$"?n:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():""),C=(g==="$"?r:/[%p]/.test(x)?a:"")+(f&&f.suffix!==void 0?f.suffix:""),_=rP[x],E=/[defgprs%]/.test(x);S=S===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function A(P){var L=T,j=C,$,F,q;if(x==="c")j=_(P)+j,P="";else{P=+P;var N=P<0||1/P<0;if(P=isNaN(P)?c:_(Math.abs(P),S),b&&(P=boe(P)),N&&+P==0&&p!=="+"&&(N=!1),L=(N?p==="("?p:s:p==="-"||p==="("?"":p)+L,j=(x==="s"&&!isNaN(P)&&em!==void 0?aP[8+em/3]:"")+j+(N&&p==="("?")":""),E){for($=-1,F=P.length;++$<F;)if(q=P.charCodeAt($),48>q||q>57){j=(q===46?i+P.slice($+1):P.slice($))+j,P=P.slice(0,$);break}}}w&&!v&&(P=e(P,1/0));var B=L.length+P.length+j.length,W=B<y?new Array(y-B+1).join(h):"";switch(w&&v&&(P=e(W+P,W.length?y-j.length:1/0),W=""),m){case"<":P=L+P+j+W;break;case"=":P=L+W+P+j;break;case"^":P=W.slice(0,B=W.length>>1)+L+P+j+W.slice(B);break;default:P=W+L+P+j;break}return o(P)}return A.toString=function(){return d+""},A}function u(d,f){var h=Math.max(-8,Math.min(8,Math.floor(zc(f)/3)))*3,m=Math.pow(10,-h),p=l((d=Sd(d),d.type="f",d),{suffix:aP[8+h/3]});return function(g){return p(m*g)}}return{format:l,formatPrefix:u}}var nh,_k,EL;xoe({thousands:",",grouping:[3],currency:["$",""]});function xoe(t){return nh=Soe(t),_k=nh.format,EL=nh.formatPrefix,nh}function koe(t){return Math.max(0,-zc(Math.abs(t)))}function Toe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zc(e)/3)))*3-zc(Math.abs(t)))}function Coe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zc(e)-zc(t))+1}function PL(t,e,n,r){var i=sw(t,e,n),o;switch(r=Sd(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Toe(i,a))&&(r.precision=o),EL(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Coe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=koe(i))&&(r.precision=o-(r.type==="%")*2);break}}return _k(r)}function la(t){var e=t.domain;return t.ticks=function(n){var r=e();return ow(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return PL(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=aw(a,s,n),l===c)return r[i]=a,r[o]=s,e(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return t},t}function tm(){var t=Tk();return t.copy=function(){return mf(t,tm())},br.apply(t,arguments),la(t)}function OL(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Jp),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return OL(t).unknown(e)},t=arguments.length?Array.from(t,Jp):[0,1],la(n)}function AL(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function sP(t){return Math.log(t)}function cP(t){return Math.exp(t)}function _oe(t){return-Math.log(-t)}function Eoe(t){return-Math.exp(-t)}function Poe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ooe(t){return t===10?Poe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Aoe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lP(t){return(e,n)=>-t(-e,n)}function Ek(t){const e=t(sP,cP),n=e.domain;let r=10,i,o;function a(){return i=Aoe(r),o=Ooe(r),n()[0]<0?(i=lP(i),o=lP(o),t(_oe,Eoe)):t(sP,cP),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=i(l),h=i(u),m,p;const g=s==null?10:+s;let v=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),l>0){for(;f<=h;++f)for(m=1;m<r;++m)if(p=f<0?m/o(-f):m*o(f),!(p<l)){if(p>u)break;v.push(p)}}else for(;f<=h;++f)for(m=r-1;m>=1;--m)if(p=f>0?m/o(-f):m*o(f),!(p<l)){if(p>u)break;v.push(p)}v.length*2<g&&(v=ow(l,u,g))}else v=ow(f,h,Math.min(h-f,g)).map(o);return d?v.reverse():v},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Sd(c)).precision==null&&(c.trim=!0),c=_k(c)),s===1/0)return c;const l=Math.max(1,r*s/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},e.nice=()=>n(AL(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function RL(){const t=Ek(Dg()).domain([1,10]);return t.copy=()=>mf(t,RL()).base(t.base()),br.apply(t,arguments),t}function uP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Pk(t){var e=1,n=t(uP(e),dP(e));return n.constant=function(r){return arguments.length?t(uP(e=+r),dP(e)):e},la(n)}function ML(){var t=Pk(Dg());return t.copy=function(){return mf(t,ML()).constant(t.constant())},br.apply(t,arguments)}function fP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Roe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Moe(t){return t<0?-t*t:t*t}function Ok(t){var e=t(fn,fn),n=1;function r(){return n===1?t(fn,fn):n===.5?t(Roe,Moe):t(fP(n),fP(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},la(e)}function Ak(){var t=Ok(Dg());return t.copy=function(){return mf(t,Ak()).exponent(t.exponent())},br.apply(t,arguments),t}function Ioe(){return Ak.apply(null,arguments).exponent(.5)}function hP(t){return Math.sign(t)*t*t}function Noe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function IL(){var t=Tk(),e=[0,1],n=!1,r;function i(o){var a=Noe(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(hP(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Jp)).map(hP)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return IL(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},br.apply(i,arguments),la(i)}function NL(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=Fie(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[hf(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Yo),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return NL().domain(t).range(e).unknown(r)},br.apply(o,arguments)}function DL(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[hf(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,s()):[t,e]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return DL().domain([t,e]).range(i).unknown(o)},br.apply(la(a),arguments)}function jL(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[hf(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return jL().domain(t).range(e).unknown(n)},br.apply(i,arguments)}const yy=new Date,by=new Date;function Nt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<a);return c},i.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(yy.setTime(+o),by.setTime(+a),t(yy),t(by),Math.floor(n(yy,by))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const nm=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);nm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):nm);nm.range;const Di=1e3,dr=Di*60,ji=dr*60,Gi=ji*24,Rk=Gi*7,pP=Gi*30,wy=Gi*365,Ma=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Di)},(t,e)=>(e-t)/Di,t=>t.getUTCSeconds());Ma.range;const Mk=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Di)},(t,e)=>{t.setTime(+t+e*dr)},(t,e)=>(e-t)/dr,t=>t.getMinutes());Mk.range;const Ik=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*dr)},(t,e)=>(e-t)/dr,t=>t.getUTCMinutes());Ik.range;const Nk=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Di-t.getMinutes()*dr)},(t,e)=>{t.setTime(+t+e*ji)},(t,e)=>(e-t)/ji,t=>t.getHours());Nk.range;const Dk=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ji)},(t,e)=>(e-t)/ji,t=>t.getUTCHours());Dk.range;const gf=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dr)/Gi,t=>t.getDate()-1);gf.range;const jg=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Gi,t=>t.getUTCDate()-1);jg.range;const LL=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Gi,t=>Math.floor(t/Gi));LL.range;function gs(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*dr)/Rk)}const Lg=gs(0),rm=gs(1),Doe=gs(2),joe=gs(3),qc=gs(4),Loe=gs(5),$oe=gs(6);Lg.range;rm.range;Doe.range;joe.range;qc.range;Loe.range;$oe.range;function vs(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Rk)}const $g=vs(0),im=vs(1),Foe=vs(2),Uoe=vs(3),Wc=vs(4),Boe=vs(5),zoe=vs(6);$g.range;im.range;Foe.range;Uoe.range;Wc.range;Boe.range;zoe.range;const jk=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());jk.range;const Lk=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Lk.range;const Yi=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Yi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Yi.range;const Xi=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Xi.range;function $L(t,e,n,r,i,o){const a=[[Ma,1,Di],[Ma,5,5*Di],[Ma,15,15*Di],[Ma,30,30*Di],[o,1,dr],[o,5,5*dr],[o,15,15*dr],[o,30,30*dr],[i,1,ji],[i,3,3*ji],[i,6,6*ji],[i,12,12*ji],[r,1,Gi],[r,2,2*Gi],[n,1,Rk],[e,1,pP],[e,3,3*pP],[t,1,wy]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const h=d&&typeof d.range=="function"?d:c(l,u,d),m=h?h.range(l,+u+1):[];return f?m.reverse():m}function c(l,u,d){const f=Math.abs(u-l)/d,h=bk(([,,g])=>g).right(a,f);if(h===a.length)return t.every(sw(l/wy,u/wy,d));if(h===0)return nm.every(Math.max(sw(l,u,d),1));const[m,p]=a[f/a[h-1][2]<a[h][2]/f?h-1:h];return m.every(p)}return[s,c]}const[qoe,Woe]=$L(Xi,Lk,$g,LL,Dk,Ik),[Voe,Hoe]=$L(Yi,jk,Lg,gf,Nk,Mk);function Sy(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xy(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ql(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Koe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,l=Jl(i),u=Zl(i),d=Jl(o),f=Zl(o),h=Jl(a),m=Zl(a),p=Jl(s),g=Zl(s),v=Jl(c),y=Zl(c),w={a:q,A:N,b:B,B:W,c:null,d:wP,e:wP,f:gae,g:_ae,G:Pae,H:hae,I:pae,j:mae,L:FL,m:vae,M:yae,p:X,q:G,Q:kP,s:TP,S:bae,u:wae,U:Sae,V:xae,w:kae,W:Tae,x:null,X:null,y:Cae,Y:Eae,Z:Oae,"%":xP},S={a:ae,A:pe,b:Me,B:Ke,c:null,d:SP,e:SP,f:Iae,g:qae,G:Vae,H:Aae,I:Rae,j:Mae,L:BL,m:Nae,M:Dae,p:Qn,q:yn,Q:kP,s:TP,S:jae,u:Lae,U:$ae,V:Fae,w:Uae,W:Bae,x:null,X:null,y:zae,Y:Wae,Z:Hae,"%":xP},b={a:E,A,b:P,B:L,c:j,d:yP,e:yP,f:lae,g:vP,G:gP,H:bP,I:bP,j:oae,L:cae,m:iae,M:aae,p:_,q:rae,Q:dae,s:fae,S:sae,u:Joe,U:Zoe,V:eae,w:Qoe,W:tae,x:$,X:F,y:vP,Y:gP,Z:nae,"%":uae};w.x=x(n,w),w.X=x(r,w),w.c=x(e,w),S.x=x(n,S),S.X=x(r,S),S.c=x(e,S);function x(re,de){return function(ge){var Y=[],ot=-1,Ee=0,Ct=re.length,_t,bn,ro;for(ge instanceof Date||(ge=new Date(+ge));++ot<Ct;)re.charCodeAt(ot)===37&&(Y.push(re.slice(Ee,ot)),(bn=mP[_t=re.charAt(++ot)])!=null?_t=re.charAt(++ot):bn=_t==="e"?" ":"0",(ro=de[_t])&&(_t=ro(ge,bn)),Y.push(_t),Ee=ot+1);return Y.push(re.slice(Ee,ot)),Y.join("")}}function T(re,de){return function(ge){var Y=Ql(1900,void 0,1),ot=C(Y,re,ge+="",0),Ee,Ct;if(ot!=ge.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(de&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Ee=xy(Ql(Y.y,0,1)),Ct=Ee.getUTCDay(),Ee=Ct>4||Ct===0?im.ceil(Ee):im(Ee),Ee=jg.offset(Ee,(Y.V-1)*7),Y.y=Ee.getUTCFullYear(),Y.m=Ee.getUTCMonth(),Y.d=Ee.getUTCDate()+(Y.w+6)%7):(Ee=Sy(Ql(Y.y,0,1)),Ct=Ee.getDay(),Ee=Ct>4||Ct===0?rm.ceil(Ee):rm(Ee),Ee=gf.offset(Ee,(Y.V-1)*7),Y.y=Ee.getFullYear(),Y.m=Ee.getMonth(),Y.d=Ee.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),Ct="Z"in Y?xy(Ql(Y.y,0,1)).getUTCDay():Sy(Ql(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(Ct+5)%7:Y.w+Y.U*7-(Ct+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,xy(Y)):Sy(Y)}}function C(re,de,ge,Y){for(var ot=0,Ee=de.length,Ct=ge.length,_t,bn;ot<Ee;){if(Y>=Ct)return-1;if(_t=de.charCodeAt(ot++),_t===37){if(_t=de.charAt(ot++),bn=b[_t in mP?de.charAt(ot++):_t],!bn||(Y=bn(re,ge,Y))<0)return-1}else if(_t!=ge.charCodeAt(Y++))return-1}return Y}function _(re,de,ge){var Y=l.exec(de.slice(ge));return Y?(re.p=u.get(Y[0].toLowerCase()),ge+Y[0].length):-1}function E(re,de,ge){var Y=h.exec(de.slice(ge));return Y?(re.w=m.get(Y[0].toLowerCase()),ge+Y[0].length):-1}function A(re,de,ge){var Y=d.exec(de.slice(ge));return Y?(re.w=f.get(Y[0].toLowerCase()),ge+Y[0].length):-1}function P(re,de,ge){var Y=v.exec(de.slice(ge));return Y?(re.m=y.get(Y[0].toLowerCase()),ge+Y[0].length):-1}function L(re,de,ge){var Y=p.exec(de.slice(ge));return Y?(re.m=g.get(Y[0].toLowerCase()),ge+Y[0].length):-1}function j(re,de,ge){return C(re,e,de,ge)}function $(re,de,ge){return C(re,n,de,ge)}function F(re,de,ge){return C(re,r,de,ge)}function q(re){return a[re.getDay()]}function N(re){return o[re.getDay()]}function B(re){return c[re.getMonth()]}function W(re){return s[re.getMonth()]}function X(re){return i[+(re.getHours()>=12)]}function G(re){return 1+~~(re.getMonth()/3)}function ae(re){return a[re.getUTCDay()]}function pe(re){return o[re.getUTCDay()]}function Me(re){return c[re.getUTCMonth()]}function Ke(re){return s[re.getUTCMonth()]}function Qn(re){return i[+(re.getUTCHours()>=12)]}function yn(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var de=x(re+="",w);return de.toString=function(){return re},de},parse:function(re){var de=T(re+="",!1);return de.toString=function(){return re},de},utcFormat:function(re){var de=x(re+="",S);return de.toString=function(){return re},de},utcParse:function(re){var de=T(re+="",!0);return de.toString=function(){return re},de}}}var mP={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,Goe=/^%/,Yoe=/[\\^$*+?|[\]().{}]/g;function Re(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Xoe(t){return t.replace(Yoe,"\\$&")}function Jl(t){return new RegExp("^(?:"+t.map(Xoe).join("|")+")","i")}function Zl(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Qoe(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Joe(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Zoe(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function eae(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function tae(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gP(t,e,n){var r=Bt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vP(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nae(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rae(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function iae(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yP(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oae(t,e,n){var r=Bt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bP(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function aae(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sae(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cae(t,e,n){var r=Bt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function lae(t,e,n){var r=Bt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function uae(t,e,n){var r=Goe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function dae(t,e,n){var r=Bt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function fae(t,e,n){var r=Bt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function wP(t,e){return Re(t.getDate(),e,2)}function hae(t,e){return Re(t.getHours(),e,2)}function pae(t,e){return Re(t.getHours()%12||12,e,2)}function mae(t,e){return Re(1+gf.count(Yi(t),t),e,3)}function FL(t,e){return Re(t.getMilliseconds(),e,3)}function gae(t,e){return FL(t,e)+"000"}function vae(t,e){return Re(t.getMonth()+1,e,2)}function yae(t,e){return Re(t.getMinutes(),e,2)}function bae(t,e){return Re(t.getSeconds(),e,2)}function wae(t){var e=t.getDay();return e===0?7:e}function Sae(t,e){return Re(Lg.count(Yi(t)-1,t),e,2)}function UL(t){var e=t.getDay();return e>=4||e===0?qc(t):qc.ceil(t)}function xae(t,e){return t=UL(t),Re(qc.count(Yi(t),t)+(Yi(t).getDay()===4),e,2)}function kae(t){return t.getDay()}function Tae(t,e){return Re(rm.count(Yi(t)-1,t),e,2)}function Cae(t,e){return Re(t.getFullYear()%100,e,2)}function _ae(t,e){return t=UL(t),Re(t.getFullYear()%100,e,2)}function Eae(t,e){return Re(t.getFullYear()%1e4,e,4)}function Pae(t,e){var n=t.getDay();return t=n>=4||n===0?qc(t):qc.ceil(t),Re(t.getFullYear()%1e4,e,4)}function Oae(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Re(e/60|0,"0",2)+Re(e%60,"0",2)}function SP(t,e){return Re(t.getUTCDate(),e,2)}function Aae(t,e){return Re(t.getUTCHours(),e,2)}function Rae(t,e){return Re(t.getUTCHours()%12||12,e,2)}function Mae(t,e){return Re(1+jg.count(Xi(t),t),e,3)}function BL(t,e){return Re(t.getUTCMilliseconds(),e,3)}function Iae(t,e){return BL(t,e)+"000"}function Nae(t,e){return Re(t.getUTCMonth()+1,e,2)}function Dae(t,e){return Re(t.getUTCMinutes(),e,2)}function jae(t,e){return Re(t.getUTCSeconds(),e,2)}function Lae(t){var e=t.getUTCDay();return e===0?7:e}function $ae(t,e){return Re($g.count(Xi(t)-1,t),e,2)}function zL(t){var e=t.getUTCDay();return e>=4||e===0?Wc(t):Wc.ceil(t)}function Fae(t,e){return t=zL(t),Re(Wc.count(Xi(t),t)+(Xi(t).getUTCDay()===4),e,2)}function Uae(t){return t.getUTCDay()}function Bae(t,e){return Re(im.count(Xi(t)-1,t),e,2)}function zae(t,e){return Re(t.getUTCFullYear()%100,e,2)}function qae(t,e){return t=zL(t),Re(t.getUTCFullYear()%100,e,2)}function Wae(t,e){return Re(t.getUTCFullYear()%1e4,e,4)}function Vae(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Wc(t):Wc.ceil(t),Re(t.getUTCFullYear()%1e4,e,4)}function Hae(){return"+0000"}function xP(){return"%"}function kP(t){return+t}function TP(t){return Math.floor(+t/1e3)}var Ts,qL,WL;Kae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kae(t){return Ts=Koe(t),qL=Ts.format,Ts.parse,WL=Ts.utcFormat,Ts.utcParse,Ts}function Gae(t){return new Date(t)}function Yae(t){return t instanceof Date?+t:+new Date(+t)}function $k(t,e,n,r,i,o,a,s,c,l){var u=Tk(),d=u.invert,f=u.domain,h=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),w=l("%B"),S=l("%Y");function b(x){return(c(x)<x?h:s(x)<x?m:a(x)<x?p:o(x)<x?g:r(x)<x?i(x)<x?v:y:n(x)<x?w:S)(x)}return u.invert=function(x){return new Date(d(x))},u.domain=function(x){return arguments.length?f(Array.from(x,Yae)):f().map(Gae)},u.ticks=function(x){var T=f();return t(T[0],T[T.length-1],x??10)},u.tickFormat=function(x,T){return T==null?b:l(T)},u.nice=function(x){var T=f();return(!x||typeof x.range!="function")&&(x=e(T[0],T[T.length-1],x??10)),x?f(AL(T,x)):u},u.copy=function(){return mf(u,$k(t,e,n,r,i,o,a,s,c,l))},u}function Xae(){return br.apply($k(Voe,Hoe,Yi,jk,Lg,gf,Nk,Mk,Ma,qL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qae(){return br.apply($k(qoe,Woe,Xi,Lk,$g,jg,Dk,Ik,Ma,WL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fg(){var t=0,e=1,n,r,i,o,a=fn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:a(i===0?.5:(d=(o(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([t,e]=d,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(a=d,l):a};function u(d){return function(f){var h,m;return arguments.length?([h,m]=f,a=d(h,m),l):[a(0),a(1)]}}return l.range=u(Cl),l.rangeRound=u(kk),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return o=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),l}}function ua(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function VL(){var t=la(Fg()(fn));return t.copy=function(){return ua(t,VL())},no.apply(t,arguments)}function HL(){var t=Ek(Fg()).domain([1,10]);return t.copy=function(){return ua(t,HL()).base(t.base())},no.apply(t,arguments)}function KL(){var t=Pk(Fg());return t.copy=function(){return ua(t,KL()).constant(t.constant())},no.apply(t,arguments)}function Fk(){var t=Ok(Fg());return t.copy=function(){return ua(t,Fk()).exponent(t.exponent())},no.apply(t,arguments)}function Jae(){return Fk.apply(null,arguments).exponent(.5)}function GL(){var t=[],e=fn;function n(r){if(r!=null&&!isNaN(r=+r))return e((hf(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Yo),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>$ie(t,o/r))},n.copy=function(){return GL(e).domain(t)},no.apply(n,arguments)}function Ug(){var t=0,e=.5,n=1,r=1,i,o,a,s,c,l=fn,u,d=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-o)*(r*p<r*o?s:c),l(d?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,n]=p,i=u(t=+t),o=u(e=+e),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,h):[t,e,n]},h.clamp=function(p){return arguments.length?(d=!!p,h):d},h.interpolator=function(p){return arguments.length?(l=p,h):l};function m(p){return function(g){var v,y,w;return arguments.length?([v,y,w]=g,l=uoe(p,[v,y,w]),h):[l(0),l(.5),l(1)]}}return h.range=m(Cl),h.rangeRound=m(kk),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return u=p,i=p(t),o=p(e),a=p(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function YL(){var t=la(Ug()(fn));return t.copy=function(){return ua(t,YL())},no.apply(t,arguments)}function XL(){var t=Ek(Ug()).domain([.1,1,10]);return t.copy=function(){return ua(t,XL()).base(t.base())},no.apply(t,arguments)}function QL(){var t=Pk(Ug());return t.copy=function(){return ua(t,QL()).constant(t.constant())},no.apply(t,arguments)}function Uk(){var t=Ok(Ug());return t.copy=function(){return ua(t,Uk()).exponent(t.exponent())},no.apply(t,arguments)}function Zae(){return Uk.apply(null,arguments).exponent(.5)}const CP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vd,scaleDiverging:YL,scaleDivergingLog:XL,scaleDivergingPow:Uk,scaleDivergingSqrt:Zae,scaleDivergingSymlog:QL,scaleIdentity:OL,scaleImplicit:cw,scaleLinear:tm,scaleLog:RL,scaleOrdinal:wk,scalePoint:Mu,scalePow:Ak,scaleQuantile:NL,scaleQuantize:DL,scaleRadial:IL,scaleSequential:VL,scaleSequentialLog:HL,scaleSequentialPow:Fk,scaleSequentialQuantile:GL,scaleSequentialSqrt:Jae,scaleSequentialSymlog:KL,scaleSqrt:Ioe,scaleSymlog:ML,scaleThreshold:jL,scaleTime:Xae,scaleUtc:Qae,tickFormat:PL},Symbol.toStringTag,{value:"Module"}));var ese=gl;function tse(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!ese(a):n(a,s)))var s=a,c=o}return c}var JL=tse;function nse(t,e){return t>e}var rse=nse,ise=JL,ose=rse,ase=kl;function sse(t){return t&&t.length?ise(t,ase,ose):void 0}var cse=sse;const Bg=We(cse);function lse(t,e){return t<e}var use=lse,dse=JL,fse=use,hse=kl;function pse(t){return t&&t.length?dse(t,hse,fse):void 0}var mse=pse;const zg=We(mse);var gse=ek,vse=ca,yse=aL,bse=Nn;function wse(t,e){var n=bse(t)?gse:yse;return n(t,vse(e))}var Sse=wse,xse=iL,kse=Sse;function Tse(t,e){return xse(kse(t,e),1)}var Cse=Tse;const _se=We(Cse);var Ese=mk;function Pse(t,e){return Ese(t,e)}var Ose=Pse;const qg=We(Ose);var _l=1e9,Ase={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zk,tt=!0,vr="[DecimalError] ",Ga=vr+"Invalid argument: ",Bk=vr+"Exponent out of range: ",El=Math.floor,ka=Math.pow,Rse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zn,jt=1e7,Qe=7,ZL=9007199254740991,om=El(ZL/Qe),oe={};oe.absoluteValue=oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};oe.comparedTo=oe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};oe.decimalPlaces=oe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Qe;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};oe.dividedBy=oe.div=function(t){return Bi(this,new this.constructor(t))};oe.dividedToIntegerBy=oe.idiv=function(t){var e=this,n=e.constructor;return qe(Bi(e,new n(t),0,1),n.precision)};oe.equals=oe.eq=function(t){return!this.cmp(t)};oe.exponent=function(){return Tt(this)};oe.greaterThan=oe.gt=function(t){return this.cmp(t)>0};oe.greaterThanOrEqualTo=oe.gte=function(t){return this.cmp(t)>=0};oe.isInteger=oe.isint=function(){return this.e>this.d.length-2};oe.isNegative=oe.isneg=function(){return this.s<0};oe.isPositive=oe.ispos=function(){return this.s>0};oe.isZero=function(){return this.s===0};oe.lessThan=oe.lt=function(t){return this.cmp(t)<0};oe.lessThanOrEqualTo=oe.lte=function(t){return this.cmp(t)<1};oe.logarithm=oe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(zn))throw Error(vr+"NaN");if(n.s<1)throw Error(vr+(n.s?"NaN":"-Infinity"));return n.eq(zn)?new r(0):(tt=!1,e=Bi(xd(n,o),xd(t,o),o),tt=!0,qe(e,i))};oe.minus=oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?n2(e,t):e2(e,(t.s=-t.s,t))};oe.modulo=oe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(vr+"NaN");return n.s?(tt=!1,e=Bi(n,t,0,1).times(t),tt=!0,n.minus(e)):qe(new r(n),i)};oe.naturalExponential=oe.exp=function(){return t2(this)};oe.naturalLogarithm=oe.ln=function(){return xd(this)};oe.negated=oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};oe.plus=oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?e2(e,t):n2(e,(t.s=-t.s,t))};oe.precision=oe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ga+t);if(e=Tt(i)+1,r=i.d.length-1,n=r*Qe+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};oe.squareRoot=oe.sqrt=function(){var t,e,n,r,i,o,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(vr+"NaN")}for(t=Tt(s),tt=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=ri(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=El((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(o=r,r=o.plus(Bi(s,o,a+2)).times(.5),ri(o.d).slice(0,a)===(e=ri(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qe(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return tt=!0,qe(r,n)};oe.times=oe.mul=function(t){var e,n,r,i,o,a,s,c,l,u=this,d=u.constructor,f=u.d,h=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,c=f.length,l=h.length,c<l&&(o=f,f=h,h=o,a=c,c=l,l=a),o=[],a=c+l,r=a;r--;)o.push(0);for(r=l;--r>=0;){for(e=0,i=c+r;i>r;)s=o[i]+h[r]*f[i-r-1]+e,o[i--]=s%jt|0,e=s/jt|0;o[i]=(o[i]+e)%jt|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,tt?qe(t,d.precision):t};oe.toDecimalPlaces=oe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(hi(t,0,_l),e===void 0?e=r.rounding:hi(e,0,8),qe(n,t+Tt(n)+1,e))};oe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=cs(r,!0):(hi(t,0,_l),e===void 0?e=i.rounding:hi(e,0,8),r=qe(new i(r),t+1,e),n=cs(r,!0,t+1)),n};oe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?cs(i):(hi(t,0,_l),e===void 0?e=o.rounding:hi(e,0,8),r=qe(new o(i),t+Tt(i)+1,e),n=cs(r.abs(),!1,t+Tt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};oe.toInteger=oe.toint=function(){var t=this,e=t.constructor;return qe(new e(t),Tt(t)+1,e.rounding)};oe.toNumber=function(){return+this};oe.toPower=oe.pow=function(t){var e,n,r,i,o,a,s=this,c=s.constructor,l=12,u=+(t=new c(t));if(!t.s)return new c(zn);if(s=new c(s),!s.s){if(t.s<1)throw Error(vr+"Infinity");return s}if(s.eq(zn))return s;if(r=c.precision,t.eq(zn))return qe(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=u<0?-u:u)<=ZL){for(i=new c(zn),e=Math.ceil(r/Qe+4),tt=!1;n%2&&(i=i.times(s),EP(i.d,e)),n=El(n/2),n!==0;)s=s.times(s),EP(s.d,e);return tt=!0,t.s<0?new c(zn).div(i):qe(i,r)}}else if(o<0)throw Error(vr+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,tt=!1,i=t.times(xd(s,r+l)),tt=!0,i=t2(i),i.s=o,i};oe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Tt(i),r=cs(i,n<=o.toExpNeg||n>=o.toExpPos)):(hi(t,1,_l),e===void 0?e=o.rounding:hi(e,0,8),i=qe(new o(i),t,e),n=Tt(i),r=cs(i,t<=n||n<=o.toExpNeg,t)),r};oe.toSignificantDigits=oe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(hi(t,1,_l),e===void 0?e=r.rounding:hi(e,0,8)),qe(new r(n),t,e)};oe.toString=oe.valueOf=oe.val=oe.toJSON=oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Tt(t),n=t.constructor;return cs(t,e<=n.toExpNeg||e>=n.toExpPos)};function e2(t,e){var n,r,i,o,a,s,c,l,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),tt?qe(e,d):e;if(c=t.d,l=e.d,a=t.e,i=e.e,c=c.slice(),o=a-i,o){for(o<0?(r=c,o=-o,s=l.length):(r=l,i=a,s=c.length),a=Math.ceil(d/Qe),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=c.length,o=l.length,s-o<0&&(o=s,r=l,l=c,c=r),n=0;o;)n=(c[--o]=c[o]+l[o]+n)/jt|0,c[o]%=jt;for(n&&(c.unshift(n),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=i,tt?qe(e,d):e}function hi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ga+t)}function ri(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Qe-r.length,n&&(o+=mo(n)),o+=r;a=t[e],r=a+"",n=Qe-r.length,n&&(o+=mo(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Bi=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%jt|0,a=o/jt|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,c;if(o!=a)c=o>a?1:-1;else for(s=c=0;s<o;s++)if(r[s]!=i[s]){c=r[s]>i[s]?1:-1;break}return c}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*jt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,c,l,u,d,f,h,m,p,g,v,y,w,S,b,x,T,C,_=r.constructor,E=r.s==i.s?1:-1,A=r.d,P=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(vr+"Division by zero");for(c=r.e-i.e,T=P.length,b=A.length,h=new _(E),m=h.d=[],l=0;P[l]==(A[l]||0);)++l;if(P[l]>(A[l]||0)&&--c,o==null?y=o=_.precision:a?y=o+(Tt(r)-Tt(i))+1:y=o,y<0)return new _(0);if(y=y/Qe+2|0,l=0,T==1)for(u=0,P=P[0],y++;(l<b||u)&&y--;l++)w=u*jt+(A[l]||0),m[l]=w/P|0,u=w%P|0;else{for(u=jt/(P[0]+1)|0,u>1&&(P=t(P,u),A=t(A,u),T=P.length,b=A.length),S=T,p=A.slice(0,T),g=p.length;g<T;)p[g++]=0;C=P.slice(),C.unshift(0),x=P[0],P[1]>=jt/2&&++x;do u=0,s=e(P,p,T,g),s<0?(v=p[0],T!=g&&(v=v*jt+(p[1]||0)),u=v/x|0,u>1?(u>=jt&&(u=jt-1),d=t(P,u),f=d.length,g=p.length,s=e(d,p,f,g),s==1&&(u--,n(d,T<f?C:P,f))):(u==0&&(s=u=1),d=P.slice()),f=d.length,f<g&&d.unshift(0),n(p,d,g),s==-1&&(g=p.length,s=e(P,p,T,g),s<1&&(u++,n(p,T<g?C:P,g))),g=p.length):s===0&&(u++,p=[0]),m[l++]=u,s&&p[0]?p[g++]=A[S]||0:(p=[A[S]],g=1);while((S++<b||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,qe(h,a?o+Tt(h)+1:o)}}();function t2(t,e){var n,r,i,o,a,s,c=0,l=0,u=t.constructor,d=u.precision;if(Tt(t)>16)throw Error(Bk+Tt(t));if(!t.s)return new u(zn);for(tt=!1,s=d,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),l+=5;for(r=Math.log(ka(2,l))/Math.LN10*2+5|0,s+=r,n=i=o=new u(zn),u.precision=s;;){if(i=qe(i.times(t),s),n=n.times(++c),a=o.plus(Bi(i,n,s)),ri(a.d).slice(0,s)===ri(o.d).slice(0,s)){for(;l--;)o=qe(o.times(o),s);return u.precision=d,e==null?(tt=!0,qe(o,d)):o}o=a}}function Tt(t){for(var e=t.e*Qe,n=t.d[0];n>=10;n/=10)e++;return e}function ky(t,e,n){if(e>t.LN10.sd())throw tt=!0,n&&(t.precision=n),Error(vr+"LN10 precision limit exceeded");return qe(new t(t.LN10),e)}function mo(t){for(var e="";t--;)e+="0";return e}function xd(t,e){var n,r,i,o,a,s,c,l,u,d=1,f=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(vr+(h.s?"NaN":"-Infinity"));if(h.eq(zn))return new p(0);if(e==null?(tt=!1,l=g):l=e,h.eq(10))return e==null&&(tt=!0),ky(p,l);if(l+=f,p.precision=l,n=ri(m),r=n.charAt(0),o=Tt(h),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=ri(h.d),r=n.charAt(0),d++;o=Tt(h),r>1?(h=new p("0."+n),o++):h=new p(r+"."+n.slice(1))}else return c=ky(p,l+2,g).times(o+""),h=xd(new p(r+"."+n.slice(1)),l-f).plus(c),p.precision=g,e==null?(tt=!0,qe(h,g)):h;for(s=a=h=Bi(h.minus(zn),h.plus(zn),l),u=qe(h.times(h),l),i=3;;){if(a=qe(a.times(u),l),c=s.plus(Bi(a,new p(i),l)),ri(c.d).slice(0,l)===ri(s.d).slice(0,l))return s=s.times(2),o!==0&&(s=s.plus(ky(p,l+2,g).times(o+""))),s=Bi(s,new p(d),l),p.precision=g,e==null?(tt=!0,qe(s,g)):s;s=c,i+=2}}function _P(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=El(n/Qe),t.d=[],r=(n+1)%Qe,n<0&&(r+=Qe),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qe;r<i;)t.d.push(+e.slice(r,r+=Qe));e=e.slice(r),r=Qe-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),tt&&(t.e>om||t.e<-om))throw Error(Bk+n)}else t.s=0,t.e=0,t.d=[0];return t}function qe(t,e,n){var r,i,o,a,s,c,l,u,d=t.d;for(a=1,o=d[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Qe,i=e,l=d[u=0];else{if(u=Math.ceil((r+1)/Qe),o=d.length,u>=o)return t;for(l=o=d[u],a=1;o>=10;o/=10)a++;r%=Qe,i=r-Qe+a}if(n!==void 0&&(o=ka(10,a-i-1),s=l/o%10|0,c=e<0||d[u+1]!==void 0||l%o,c=n<4?(s||c)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?i>0?l/ka(10,a-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return c?(o=Tt(t),d.length=1,e=e-o-1,d[0]=ka(10,(Qe-e%Qe)%Qe),t.e=El(-e/Qe)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,o=1,u--):(d.length=u+1,o=ka(10,Qe-r),d[u]=i>0?(l/ka(10,a-i)%ka(10,i)|0)*o:0),c)for(;;)if(u==0){(d[0]+=o)==jt&&(d[0]=1,++t.e);break}else{if(d[u]+=o,d[u]!=jt)break;d[u--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(tt&&(t.e>om||t.e<-om))throw Error(Bk+Tt(t));return t}function n2(t,e){var n,r,i,o,a,s,c,l,u,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),tt?qe(e,h):e;if(c=t.d,d=e.d,r=e.e,l=t.e,c=c.slice(),a=l-r,a){for(u=a<0,u?(n=c,a=-a,s=d.length):(n=d,r=l,s=c.length),i=Math.max(Math.ceil(h/Qe),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,s=d.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){u=c[i]<d[i];break}a=0}for(u&&(n=c,c=d,d=n,e.s=-e.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&c[--o]===0;)c[o]=jt-1;--c[o],c[i]+=jt}c[i]-=d[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,tt?qe(e,h):e):new f(0)}function cs(t,e,n){var r,i=Tt(t),o=ri(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+mo(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+mo(-i-1)+o,n&&(r=n-a)>0&&(o+=mo(r))):i>=a?(o+=mo(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+mo(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=mo(r))),t.s<0?"-"+o:o}function EP(t,e){if(t.length>e)return t.length=e,!0}function r2(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ga+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return _P(a,o.toString())}else if(typeof o!="string")throw Error(Ga+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Rse.test(o))_P(a,o);else throw Error(Ga+o)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=r2,i.config=i.set=Mse,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Mse(t){if(!t||typeof t!="object")throw Error(vr+"Object expected");var e,n,r,i=["precision",1,_l,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(El(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ga+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ga+n+": "+r);return this}var zk=r2(Ase);zn=new zk(1);const Fe=zk;function Ise(t){return Lse(t)||jse(t)||Dse(t)||Nse()}function Nse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dse(t,e){if(t){if(typeof t=="string")return fw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fw(t,e)}}function jse(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Lse(t){if(Array.isArray(t))return fw(t)}function fw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $se=function(e){return e},i2={},o2=function(e){return e===i2},PP=function(e){return function n(){return arguments.length===0||arguments.length===1&&o2(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Fse=function t(e,n){return e===1?n:PP(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==i2}).length;return a>=e?n.apply(void 0,i):t(e-a,PP(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=i.map(function(d){return o2(d)?c.shift():d});return n.apply(void 0,Ise(u).concat(c))}))})},Wg=function(e){return Fse(e.length,e)},hw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Use=Wg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Bse=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return $se;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,c){return c(s)},o.apply(void 0,arguments))}},pw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},a2=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,c){return s===n[c]})||(n=o,r=e.apply(void 0,o)),r}};function zse(t){var e;return t===0?e=1:e=Math.floor(new Fe(t).abs().log(10).toNumber())+1,e}function qse(t,e,n){for(var r=new Fe(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var Wse=Wg(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Vse=Wg(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Hse=Wg(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Vg={rangeStep:qse,getDigitCount:zse,interpolateNumber:Wse,uninterpolateNumber:Vse,uninterpolateTruncation:Hse};function mw(t){return Yse(t)||Gse(t)||s2(t)||Kse()}function Kse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gse(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Yse(t){if(Array.isArray(t))return gw(t)}function kd(t,e){return Jse(t)||Qse(t,e)||s2(t,e)||Xse()}function Xse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2(t,e){if(t){if(typeof t=="string")return gw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gw(t,e)}}function gw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qse(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function Jse(t){if(Array.isArray(t))return t}function c2(t){var e=kd(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function l2(t,e,n){if(t.lte(0))return new Fe(0);var r=Vg.getDigitCount(t.toNumber()),i=new Fe(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Fe(Math.ceil(o.div(a).toNumber())).add(n).mul(a),c=s.mul(i);return e?c:new Fe(Math.ceil(c))}function Zse(t,e,n){var r=1,i=new Fe(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Fe(10).pow(Vg.getDigitCount(t)-1),i=new Fe(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Fe(Math.floor(t)))}else t===0?i=new Fe(Math.floor((e-1)/2)):n||(i=new Fe(Math.floor(t)));var a=Math.floor((e-1)/2),s=Bse(Use(function(c){return i.add(new Fe(c-a).mul(r)).toNumber()}),hw);return s(0,e)}function u2(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Fe(0),tickMin:new Fe(0),tickMax:new Fe(0)};var o=l2(new Fe(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Fe(0):(a=new Fe(t).add(e).div(2),a=a.sub(new Fe(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),c=Math.ceil(new Fe(e).sub(a).div(o).toNumber()),l=s+c+1;return l>n?u2(t,e,n,r,i+1):(l<n&&(c=e>0?c+(n-l):c,s=e>0?s:s+(n-l)),{step:o,tickMin:a.sub(new Fe(s).mul(o)),tickMax:a.add(new Fe(c).mul(o))})}function ece(t){var e=kd(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=c2([n,r]),c=kd(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(mw(hw(0,i-1).map(function(){return 1/0}))):[].concat(mw(hw(0,i-1).map(function(){return-1/0})),[u]);return n>r?pw(d):d}if(l===u)return Zse(l,i,o);var f=u2(l,u,a,o),h=f.step,m=f.tickMin,p=f.tickMax,g=Vg.rangeStep(m,p.add(new Fe(.1).mul(h)),h);return n>r?pw(g):g}function tce(t,e){var n=kd(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=c2([r,i]),s=kd(a,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,i];if(c===l)return[c];var u=Math.max(e,2),d=l2(new Fe(l).sub(c).div(u-1),o,0),f=[].concat(mw(Vg.rangeStep(new Fe(c),new Fe(l).sub(new Fe(.99).mul(d)),d)),[l]);return r>i?pw(f):f}var nce=a2(ece),rce=a2(tce),ice="Invariant failed";function ls(t,e){throw new Error(ice)}var oce=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},am.apply(this,arguments)}function ace(t,e){return uce(t)||lce(t,e)||cce(t,e)||sce()}function sce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cce(t,e){if(t){if(typeof t=="string")return OP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(t,e)}}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function uce(t){if(Array.isArray(t))return t}function dce(t,e){if(t==null)return{};var n=fce(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h2(r.key),r)}}function mce(t,e,n){return e&&pce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gce(t,e,n){return e=sm(e),vce(t,d2()?Reflect.construct(e,n||[],sm(t).constructor):e.apply(t,n))}function vce(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yce(t)}function yce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d2=function(){return!!t})()}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sm(t)}function bce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vw(t,e)}function vw(t,e){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vw(t,e)}function f2(t,e,n){return e=h2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h2(t){var e=wce(t,"string");return Vc(e)=="symbol"?e:e+""}function wce(t,e){if(Vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vf=function(t){function e(){return hce(this,e),gce(this,e,arguments)}return bce(e,t),mce(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,c=r.data,l=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=dce(r,oce),h=Ce(f,!1);this.props.direction==="x"&&u.type!=="number"&&ls();var m=c.map(function(p){var g=l(p,s),v=g.x,y=g.y,w=g.value,S=g.errorVal;if(!S)return null;var b=[],x,T;if(Array.isArray(S)){var C=ace(S,2);x=C[0],T=C[1]}else x=T=S;if(o==="vertical"){var _=u.scale,E=y+i,A=E+a,P=E-a,L=_(w-x),j=_(w+T);b.push({x1:j,y1:A,x2:j,y2:P}),b.push({x1:L,y1:E,x2:j,y2:E}),b.push({x1:L,y1:A,x2:L,y2:P})}else if(o==="horizontal"){var $=d.scale,F=v+i,q=F-a,N=F+a,B=$(w-x),W=$(w+T);b.push({x1:q,y1:W,x2:N,y2:W}),b.push({x1:F,y1:B,x2:F,y2:W}),b.push({x1:q,y1:B,x2:N,y2:B})}return I.createElement(vt,am({className:"recharts-errorBar",key:"bar-".concat(b.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},h),b.map(function(X){return I.createElement("line",am({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return I.createElement(vt,{className:"recharts-errorBars"},m)}}])}(I.Component);f2(vf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});f2(vf,"displayName","ErrorBar");function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(t)}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){Sce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sce(t,e,n){return e=xce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xce(t){var e=kce(t,"string");return Td(e)=="symbol"?e:e+""}function kce(t,e){if(Td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p2=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=$n(n,uc);if(!a)return null;var s=uc.defaultProps,c=s!==void 0?ma(ma({},s),a.props):{},l;return a.props&&a.props.payload?l=a.props&&a.props.payload:o==="children"?l=(r||[]).reduce(function(u,d){var f=d.item,h=d.props,m=h.sectors||h.data||[];return u.concat(m.map(function(p){return{type:a.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):l=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,h=f!==void 0?ma(ma({},f),d.props):{},m=h.dataKey,p=h.name,g=h.legendType,v=h.hide;return{inactive:v,dataKey:m,type:c.iconType||g||"square",color:qk(d),value:p||m,payload:h}}),ma(ma(ma({},c),uc.getWithHeight(a,i)),{},{payload:l,item:a})};function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function RP(t){return Ece(t)||_ce(t)||Cce(t)||Tce()}function Tce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cce(t,e){if(t){if(typeof t=="string")return yw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yw(t,e)}}function _ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ece(t){if(Array.isArray(t))return yw(t)}function yw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){fc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fc(t,e,n){return e=Pce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pce(t){var e=Oce(t,"string");return Cd(e)=="symbol"?e:e+""}function Oce(t,e){if(Cd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gn(t,e,n){return Se(t)||Se(e)?n:It(e)?hr(t,e,n):ve(e)?e(t):n}function Iu(t,e,n,r){var i=_se(t,function(s){return Gn(s,e)});if(n==="number"){var o=i.filter(function(s){return ee(s)||parseFloat(s)});return o.length?[zg(o),Bg(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!Se(s)}):i;return a.map(function(s){return It(s)||s instanceof Date?s:""})}var Ace=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,l=0;l<s;l++){var u=l>0?i[l-1].coordinate:i[s-1].coordinate,d=i[l].coordinate,f=l>=s-1?i[0].coordinate:i[l+1].coordinate,h=void 0;if(Br(d-u)!==Br(f-d)){var m=[];if(Br(f-d)===Br(c[1]-c[0])){h=f;var p=d+c[1]-c[0];m[0]=Math.min(p,(p+u)/2),m[1]=Math.max(p,(p+u)/2)}else{h=u;var g=f+c[1]-c[0];m[0]=Math.min(d,(g+d)/2),m[1]=Math.max(d,(g+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){a=i[l].index;break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){a=i[l].index;break}}}else for(var S=0;S<s;S++)if(S===0&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S>0&&S<s-1&&e>(r[S].coordinate+r[S-1].coordinate)/2&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S===s-1&&e>(r[S].coordinate+r[S-1].coordinate)/2){a=r[S].index;break}return a},qk=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?lt(lt({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:s;break;default:c=s;break}return c},Rce=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),c=0,l=s.length;c<l;c++)for(var u=o[s[c]].stackGroups,d=Object.keys(u),f=0,h=d.length;f<h;f++){var m=u[d[f]],p=m.items,g=m.cateAxisId,v=p.filter(function(T){return Fi(T.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?lt(lt({},y),v[0].props):v[0].props,S=w.barSize,b=w[g];a[b]||(a[b]=[]);var x=Se(S)?n:S;a[b].push({item:v[0],stackList:v.slice(1),barSize:Se(x)?void 0:ss(x,r,0)})}}return a},Mce=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,c=a.length;if(c<1)return null;var l=ss(n,i,0,!0),u,d=[];if(a[0].barSize===+a[0].barSize){var f=!1,h=i/c,m=a.reduce(function(S,b){return S+b.barSize||0},0);m+=(c-1)*l,m>=i&&(m-=(c-1)*l,l=0),m>=i&&h>0&&(f=!0,h*=.9,m=c*h);var p=(i-m)/2>>0,g={offset:p-l,size:0};u=a.reduce(function(S,b){var x={item:b.item,position:{offset:g.offset+g.size+l,size:f?h:b.barSize}},T=[].concat(RP(S),[x]);return g=T[T.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){T.push({item:C,position:g})}),T},d)}else{var v=ss(r,i,0,!0);i-2*v-(c-1)*l<=0&&(l=0);var y=(i-2*v-(c-1)*l)/c;y>1&&(y>>=0);var w=s===+s?Math.min(y,s):y;u=a.reduce(function(S,b,x){var T=[].concat(RP(S),[{item:b.item,position:{offset:v+(y+l)*x+(y-w)/2,size:w}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){T.push({item:C,position:T[T.length-1].position})}),T},d)}return u},Ice=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,c=a-(s.left||0)-(s.right||0),l=p2({children:o,legendWidth:c});if(l){var u=i||{},d=u.width,f=u.height,h=l.align,m=l.verticalAlign,p=l.layout;if((p==="vertical"||p==="horizontal"&&m==="middle")&&h!=="center"&&ee(e[h]))return lt(lt({},e),{},fc({},h,e[h]+(d||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&m!=="middle"&&ee(e[m]))return lt(lt({},e),{},fc({},m,e[m]+(f||0)))}return e},Nce=function(e,n,r){return Se(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},m2=function(e,n,r,i,o){var a=n.props.children,s=pr(a,vf).filter(function(l){return Nce(i,o,l.props.direction)});if(s&&s.length){var c=s.map(function(l){return l.props.dataKey});return e.reduce(function(l,u){var d=Gn(u,r);if(Se(d))return l;var f=Array.isArray(d)?[zg(d),Bg(d)]:[d,d],h=c.reduce(function(m,p){var g=Gn(u,p,0),v=f[0]-Math.abs(Array.isArray(g)?g[0]:g),y=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(v,m[0]),Math.max(y,m[1])]},[1/0,-1/0]);return[Math.min(h[0],l[0]),Math.max(h[1],l[1])]},[1/0,-1/0])}return null},Dce=function(e,n,r,i,o){var a=n.map(function(s){return m2(e,s,r,o,i)}).filter(function(s){return!Se(s)});return a&&a.length?a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]):null},g2=function(e,n,r,i,o){var a=n.map(function(c){var l=c.props.dataKey;return r==="number"&&l&&m2(e,c,l,i)||Iu(e,l,r,o)});if(r==="number")return a.reduce(function(c,l){return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]);var s={};return a.reduce(function(c,l){for(var u=0,d=l.length;u<d;u++)s[l[u]]||(s[l[u]]=!0,c.push(l[u]));return c},[])},v2=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},y2=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var o,a,s=e.map(function(c){return c.coordinate===n&&(o=!0),c.coordinate===r&&(a=!0),c.coordinate});return o||s.push(n),a||s.push(r),s},Li=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,l=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(l=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Br(s[0]-s[1])*2*l:l,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=o?o.indexOf(d):d;return{coordinate:i(f)+l,value:d,offset:l}});return u.filter(function(d){return!uf(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+l,value:d,index:f,offset:l}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+l,value:d,offset:l}}):i.domain().map(function(d,f){return{coordinate:i(d)+l,value:o?o[d]:d,index:f,offset:l}})},Ty=new WeakMap,rh=function(e,n){if(typeof n!="function")return e;Ty.has(e)||Ty.set(e,new WeakMap);var r=Ty.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},jce=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:vd(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:tm(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Mu(),realScaleType:"point"}:o==="category"?{scale:vd(),realScaleType:"band"}:{scale:tm(),realScaleType:"linear"};if(as(i)){var c="scale".concat(Pg(i));return{scale:(CP[c]||Mu)(),realScaleType:CP[c]?c:"point"}}return ve(i)?{scale:i}:{scale:Mu(),realScaleType:"point"}},IP=1e-4,Lce=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-IP,a=Math.max(i[0],i[1])+IP,s=e(n[0]),c=e(n[r-1]);(s<o||s>a||c<o||c>a)&&e.domain([n[0],n[r-1]])}},$ce=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Fce=function(e,n){if(!n||n.length!==2||!ee(n[0])||!ee(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!ee(e[0])||e[0]<r)&&(o[0]=r),(!ee(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Uce=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var c=uf(e[s][r][1])?e[s][r][0]:e[s][r][1];c>=0?(e[s][r][0]=o,e[s][r][1]=o+c,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+c,a=e[s][r][1])}},Bce=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=uf(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},zce={sign:Uce,expand:rY,none:Lc,silhouette:iY,wiggle:oY,positive:Bce},qce=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=zce[r],a=nY().keys(i).value(function(s,c){return+Gn(s,c,0)}).order(qb).offset(o);return a(e)},Wce=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,c={},l=s.reduce(function(d,f){var h,m=(h=f.type)!==null&&h!==void 0&&h.defaultProps?lt(lt({},f.type.defaultProps),f.props):f.props,p=m.stackId,g=m.hide;if(g)return d;var v=m[r],y=d[v]||{hasStack:!1,stackGroups:{}};if(It(p)){var w=y.stackGroups[p]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(f),y.hasStack=!0,y.stackGroups[p]=w}else y.stackGroups[df("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return lt(lt({},d),{},fc({},v,y))},c),u={};return Object.keys(l).reduce(function(d,f){var h=l[f];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,g){var v=h.stackGroups[g];return lt(lt({},p),{},fc({},g,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:qce(e,v.items,o)}))},m)}return lt(lt({},d),{},fc({},f,h))},u)},Vce=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var l=e.domain();if(!l.length)return null;var u=nce(l,o,s);return e.domain([zg(u),Bg(u)]),{niceTicks:u}}if(o&&i==="number"){var d=e.domain(),f=rce(d,o,s);return{niceTicks:f}}return null};function NP(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Se(i[e.dataKey])){var s=Rp(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var c=Gn(i,Se(a)?e.dataKey:a);return Se(c)?null:e.scale(c)}var DP=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var c=Gn(a,n.dataKey,n.domain[s]);return Se(c)?null:n.scale(c)-o/2+i},Hce=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},Kce=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?lt(lt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(It(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},Gce=function(e){return e.reduce(function(n,r){return[zg(r.concat([n[0]]).filter(ee)),Bg(r.concat([n[1]]).filter(ee))]},[1/0,-1/0])},b2=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,c=s.reduce(function(l,u){var d=Gce(u.slice(n,r+1));return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},jP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bw=function(e,n,r){if(ve(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ee(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(jP.test(e[0])){var o=+jP.exec(e[0])[1];i[0]=n[0]-o}else ve(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ee(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(LP.test(e[1])){var a=+LP.exec(e[1])[1];i[1]=n[1]+a}else ve(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},cm=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=vk(n,function(d){return d.coordinate}),a=1/0,s=1,c=o.length;s<c;s++){var l=o[s],u=o[s-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},$P=function(e,n,r){return!e||!e.length||qg(e,hr(r,"type.defaultProps.domain"))?n:e},w2=function(e,n){var r=e.type.defaultProps?lt(lt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,c=r.tooltipType,l=r.chartType,u=r.hide;return lt(lt({},Ce(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:qk(e),value:Gn(n,i),type:c,payload:n,chartType:l,hide:u})};function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){Yce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yce(t,e,n){return e=Xce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xce(t){var e=Qce(t,"string");return _d(e)=="symbol"?e:e+""}function Qce(t,e){if(_d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lm=Math.PI/180,Jce=function(e){return e*180/Math.PI},Kt=function(e,n,r,i){return{x:e+Math.cos(-lm*i)*r,y:n+Math.sin(-lm*i)*r}},Zce=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},ele=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=Zce({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var c=(r-o)/s,l=Math.acos(c);return i>a&&(l=2*Math.PI-l),{radius:s,angle:Jce(l),angleInRadian:l}},tle=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},nle=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},BP=function(e,n){var r=e.x,i=e.y,o=ele({x:r,y:i},n),a=o.radius,s=o.angle,c=n.innerRadius,l=n.outerRadius;if(a<c||a>l)return!1;if(a===0)return!0;var u=tle(n),d=u.startAngle,f=u.endAngle,h=s,m;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}return m?UP(UP({},n),{},{radius:a,angle:nle(h,n)}):null};function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}var rle=["offset"];function ile(t){return cle(t)||sle(t)||ale(t)||ole()}function ole(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ale(t,e){if(t){if(typeof t=="string")return ww(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ww(t,e)}}function sle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cle(t){if(Array.isArray(t))return ww(t)}function ww(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lle(t,e){if(t==null)return{};var n=ule(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ule(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(r){dle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dle(t,e,n){return e=fle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fle(t){var e=hle(t,"string");return Ed(e)=="symbol"?e:e+""}function hle(t,e){if(Ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pd.apply(this,arguments)}var ple=function(e){var n=e.value,r=e.formatter,i=Se(e.children)?n:e.children;return ve(r)?r(i):i},mle=function(e,n){var r=Br(n-e),i=Math.min(Math.abs(n-e),360);return r*i},gle=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,c=o,l=c.cx,u=c.cy,d=c.innerRadius,f=c.outerRadius,h=c.startAngle,m=c.endAngle,p=c.clockWise,g=(d+f)/2,v=mle(h,m),y=v>=0?1:-1,w,S;i==="insideStart"?(w=h+y*a,S=p):i==="insideEnd"?(w=m-y*a,S=!p):i==="end"&&(w=m+y*a,S=p),S=v<=0?S:!S;var b=Kt(l,u,g,w),x=Kt(l,u,g,w+(S?1:-1)*359),T="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(x.x,",").concat(x.y),C=Se(e.id)?df("recharts-radial-line-"):e.id;return I.createElement("text",Pd({},r,{dominantBaseline:"central",className:_e("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:C,d:T})),I.createElement("textPath",{xlinkHref:"#".concat(C)},n))},vle=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,c=o.innerRadius,l=o.outerRadius,u=o.startAngle,d=o.endAngle,f=(u+d)/2;if(i==="outside"){var h=Kt(a,s,l+r,f),m=h.x,p=h.y;return{x:m,y:p,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(c+l)/2,v=Kt(a,s,g,f),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},yle=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,c=a.y,l=a.width,u=a.height,d=u>=0?1:-1,f=d*i,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,g=p*i,v=p>0?"end":"start",y=p>0?"start":"end";if(o==="top"){var w={x:s+l/2,y:c-d*i,textAnchor:"middle",verticalAnchor:h};return Pt(Pt({},w),r?{height:Math.max(c-r.y,0),width:l}:{})}if(o==="bottom"){var S={x:s+l/2,y:c+u+f,textAnchor:"middle",verticalAnchor:m};return Pt(Pt({},S),r?{height:Math.max(r.y+r.height-(c+u),0),width:l}:{})}if(o==="left"){var b={x:s-g,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Pt(Pt({},b),r?{width:Math.max(b.x-r.x,0),height:u}:{})}if(o==="right"){var x={x:s+l+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Pt(Pt({},x),r?{width:Math.max(r.x+r.width-x.x,0),height:u}:{})}var T=r?{width:l,height:u}:{};return o==="insideLeft"?Pt({x:s+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},T):o==="insideRight"?Pt({x:s+l-g,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},T):o==="insideTop"?Pt({x:s+l/2,y:c+f,textAnchor:"middle",verticalAnchor:m},T):o==="insideBottom"?Pt({x:s+l/2,y:c+u-f,textAnchor:"middle",verticalAnchor:h},T):o==="insideTopLeft"?Pt({x:s+g,y:c+f,textAnchor:y,verticalAnchor:m},T):o==="insideTopRight"?Pt({x:s+l-g,y:c+f,textAnchor:v,verticalAnchor:m},T):o==="insideBottomLeft"?Pt({x:s+g,y:c+u-f,textAnchor:y,verticalAnchor:h},T):o==="insideBottomRight"?Pt({x:s+l-g,y:c+u-f,textAnchor:v,verticalAnchor:h},T):vl(o)&&(ee(o.x)||Aa(o.x))&&(ee(o.y)||Aa(o.y))?Pt({x:s+ss(o.x,l),y:c+ss(o.y,u),textAnchor:"end",verticalAnchor:"end"},T):Pt({x:s+l/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},ble=function(e){return"cx"in e&&ee(e.cx)};function nn(t){var e=t.offset,n=e===void 0?5:e,r=lle(t,rle),i=Pt({offset:n},r),o=i.viewBox,a=i.position,s=i.value,c=i.children,l=i.content,u=i.className,d=u===void 0?"":u,f=i.textBreakAll;if(!o||Se(s)&&Se(c)&&!M.isValidElement(l)&&!ve(l))return null;if(M.isValidElement(l))return M.cloneElement(l,i);var h;if(ve(l)){if(h=M.createElement(l,i),M.isValidElement(h))return h}else h=ple(i);var m=ble(o),p=Ce(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return gle(i,h,p);var g=m?vle(i):yle(i);return I.createElement(Kp,Pd({className:_e("recharts-label",d)},p,g,{breakAll:f}),h)}nn.displayName="Label";var S2=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,c=e.radius,l=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,h=e.top,m=e.left,p=e.width,g=e.height,v=e.clockWise,y=e.labelViewBox;if(y)return y;if(ee(p)&&ee(g)){if(ee(d)&&ee(f))return{x:d,y:f,width:p,height:g};if(ee(h)&&ee(m))return{x:h,y:m,width:p,height:g}}return ee(d)&&ee(f)?{x:d,y:f,width:0,height:0}:ee(n)&&ee(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:l||0,outerRadius:u||c||s||0,clockWise:v}:e.viewBox?e.viewBox:{}},wle=function(e,n){return e?e===!0?I.createElement(nn,{key:"label-implicit",viewBox:n}):It(e)?I.createElement(nn,{key:"label-implicit",viewBox:n,value:e}):M.isValidElement(e)?e.type===nn?M.cloneElement(e,{key:"label-implicit",viewBox:n}):I.createElement(nn,{key:"label-implicit",content:e,viewBox:n}):ve(e)?I.createElement(nn,{key:"label-implicit",content:e,viewBox:n}):vl(e)?I.createElement(nn,Pd({viewBox:n},e,{key:"label-implicit"})):null:null},Sle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=S2(e),a=pr(i,nn).map(function(c,l){return M.cloneElement(c,{viewBox:n||o,key:"label-".concat(l)})});if(!r)return a;var s=wle(e.label,n||o);return[s].concat(ile(a))};nn.parseViewBox=S2;nn.renderCallByParent=Sle;function xle(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var kle=xle;const Tle=We(kle);function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}var Cle=["valueAccessor"],_le=["data","dataKey","clockWise","id","textBreakAll"];function Ele(t){return Rle(t)||Ale(t)||Ole(t)||Ple()}function Ple(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ole(t,e){if(t){if(typeof t=="string")return Sw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sw(t,e)}}function Ale(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rle(t){if(Array.isArray(t))return Sw(t)}function Sw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(this,arguments)}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){Mle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mle(t,e,n){return e=Ile(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ile(t){var e=Nle(t,"string");return Od(e)=="symbol"?e:e+""}function Nle(t,e){if(Od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VP(t,e){if(t==null)return{};var n=Dle(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var jle=function(e){return Array.isArray(e.value)?Tle(e.value):e.value};function Xo(t){var e=t.valueAccessor,n=e===void 0?jle:e,r=VP(t,Cle),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,c=r.textBreakAll,l=VP(r,_le);return!i||!i.length?null:I.createElement(vt,{className:"recharts-label-list"},i.map(function(u,d){var f=Se(o)?n(u,d):Gn(u&&u.payload,o),h=Se(s)?{}:{id:"".concat(s,"-").concat(d)};return I.createElement(nn,um({},Ce(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:nn.parseViewBox(Se(a)?u:WP(WP({},u),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}Xo.displayName="LabelList";function Lle(t,e){return t?t===!0?I.createElement(Xo,{key:"labelList-implicit",data:e}):I.isValidElement(t)||ve(t)?I.createElement(Xo,{key:"labelList-implicit",data:e,content:t}):vl(t)?I.createElement(Xo,um({data:e},t,{key:"labelList-implicit"})):null:null}function $le(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=pr(r,Xo).map(function(a,s){return M.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=Lle(t.label,e);return[o].concat(Ele(i))}Xo.renderCallByParent=$le;function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(this,arguments)}function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){Fle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fle(t,e,n){return e=Ule(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ule(t){var e=Ble(t,"string");return Ad(e)=="symbol"?e:e+""}function Ble(t,e){if(Ad(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zle=function(e,n){var r=Br(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},ih=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,c=e.cornerRadius,l=e.cornerIsExternal,u=c*(s?1:-1)+i,d=Math.asin(c/u)/lm,f=l?o:o+a*d,h=Kt(n,r,u,f),m=Kt(n,r,i,f),p=l?o-a*d:o,g=Kt(n,r,u*Math.cos(d*lm),p);return{center:h,circleTangency:m,lineTangency:g,theta:d}},x2=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,c=zle(a,s),l=a+c,u=Kt(n,r,o,a),d=Kt(n,r,o,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var h=Kt(n,r,i,a),m=Kt(n,r,i,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},qle=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,c=e.cornerIsExternal,l=e.startAngle,u=e.endAngle,d=Br(u-l),f=ih({cx:n,cy:r,radius:o,angle:l,sign:d,cornerRadius:a,cornerIsExternal:c}),h=f.circleTangency,m=f.lineTangency,p=f.theta,g=ih({cx:n,cy:r,radius:o,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:c}),v=g.circleTangency,y=g.lineTangency,w=g.theta,S=c?Math.abs(l-u):Math.abs(l-u)-p-w;if(S<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):x2({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:u});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var x=ih({cx:n,cy:r,radius:i,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),T=x.circleTangency,C=x.lineTangency,_=x.theta,E=ih({cx:n,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),A=E.circleTangency,P=E.lineTangency,L=E.theta,j=c?Math.abs(l-u):Math.abs(l-u)-_-L;if(j<0&&a===0)return"".concat(b,"L").concat(n,",").concat(r,"Z");b+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else b+="L".concat(n,",").concat(r,"Z");return b},Wle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k2=function(e){var n=KP(KP({},Wle),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,c=n.forceCornerRadius,l=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(a<o||u===d)return null;var h=_e("recharts-sector",f),m=a-o,p=ss(s,m,0,!0),g;return p>0&&Math.abs(u-d)<360?g=qle({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(p,m/2),forceCornerRadius:c,cornerIsExternal:l,startAngle:u,endAngle:d}):g=x2({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:d}),I.createElement("path",xw({},Ce(n,!0),{className:h,d:g,role:"img"}))};function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(t)}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){Vle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vle(t,e,n){return e=Hle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hle(t){var e=Kle(t,"string");return Rd(e)=="symbol"?e:e+""}function Kle(t,e){if(Rd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XP={curveBasisClosed:VG,curveBasisOpen:HG,curveBasis:WG,curveBumpX:AG,curveBumpY:RG,curveLinearClosed:KG,curveLinear:Ag,curveMonotoneX:GG,curveMonotoneY:YG,curveNatural:XG,curveStep:QG,curveStepAfter:ZG,curveStepBefore:JG},oh=function(e){return e.x===+e.x&&e.y===+e.y},eu=function(e){return e.x},tu=function(e){return e.y},Gle=function(e,n){if(ve(e))return e;var r="curve".concat(Pg(e));return(r==="curveMonotone"||r==="curveBump")&&n?XP["".concat(r).concat(n==="vertical"?"Y":"X")]:XP[r]||Ag},Yle=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,c=e.connectNulls,l=c===void 0?!1:c,u=Gle(r,s),d=l?o.filter(function(p){return oh(p)}):o,f;if(Array.isArray(a)){var h=l?a.filter(function(p){return oh(p)}):a,m=d.map(function(p,g){return YP(YP({},p),{},{base:h[g]})});return s==="vertical"?f=Yf().y(tu).x1(eu).x0(function(p){return p.base.x}):f=Yf().x(eu).y1(tu).y0(function(p){return p.base.y}),f.defined(oh).curve(u),f(m)}return s==="vertical"&&ee(a)?f=Yf().y(tu).x1(eu).x0(a):ee(a)?f=Yf().x(eu).y1(tu).y0(a):f=kj().x(eu).y(tu),f.defined(oh).curve(u),f(d)},Tw=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?Yle(e):i;return M.createElement("path",kw({},Ce(e,!1),Mp(e),{className:_e("recharts-curve",n),d:a,ref:o}))},T2={exports:{}},Xle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qle=Xle,Jle=Qle;function C2(){}function _2(){}_2.resetWarningCache=C2;var Zle=function(){function t(r,i,o,a,s,c){if(c!==Jle){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_2,resetWarningCache:C2};return n.PropTypes=n,n};T2.exports=Zle();var eue=T2.exports;const Ie=We(eue),{getOwnPropertyNames:tue,getOwnPropertySymbols:nue}=Object,{hasOwnProperty:rue}=Object.prototype;function Cy(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function ah(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);const c=t(n,r,i);return o.delete(n),o.delete(r),c}}function iue(t){return t!=null?t[Symbol.toStringTag]:void 0}function QP(t){return tue(t).concat(nue(t))}const oue=Object.hasOwn||((t,e)=>rue.call(t,e));function ys(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const aue="__v",sue="__o",cue="_owner",{getOwnPropertyDescriptor:JP,keys:ZP}=Object;function lue(t,e){return t.byteLength===e.byteLength&&dm(new Uint8Array(t),new Uint8Array(e))}function uue(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function due(t,e){return t.byteLength===e.byteLength&&dm(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function fue(t,e){return ys(t.getTime(),e.getTime())}function hue(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function pue(t,e){return t===e}function eO(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let a,s,c=0;for(;(a=o.next())&&!a.done;){const l=e.entries();let u=!1,d=0;for(;(s=l.next())&&!s.done;){if(i[d]){d++;continue}const f=a.value,h=s.value;if(n.equals(f[0],h[0],c,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1;c++}return!0}const mue=ys;function gue(t,e,n){const r=ZP(t);let i=r.length;if(ZP(e).length!==i)return!1;for(;i-- >0;)if(!E2(t,e,n,r[i]))return!1;return!0}function nu(t,e,n){const r=QP(t);let i=r.length;if(QP(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=r[i],!E2(t,e,n,o)||(a=JP(t,o),s=JP(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function vue(t,e){return ys(t.valueOf(),e.valueOf())}function yue(t,e){return t.source===e.source&&t.flags===e.flags}function tO(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let a,s;for(;(a=o.next())&&!a.done;){const c=e.values();let l=!1,u=0;for(;(s=c.next())&&!s.done;){if(!i[u]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){l=i[u]=!0;break}u++}if(!l)return!1}return!0}function dm(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function bue(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function E2(t,e,n,r){return(r===cue||r===sue||r===aue)&&(t.$$typeof||e.$$typeof)?!0:oue(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const wue="[object ArrayBuffer]",Sue="[object Arguments]",xue="[object Boolean]",kue="[object DataView]",Tue="[object Date]",Cue="[object Error]",_ue="[object Map]",Eue="[object Number]",Pue="[object Object]",Oue="[object RegExp]",Aue="[object Set]",Rue="[object String]",Mue={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Iue="[object URL]",Nue=Object.prototype.toString;function Due({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:c,arePrimitiveWrappersEqual:l,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:h,unknownTagComparators:m}){return function(g,v,y){if(g===v)return!0;if(g==null||v==null)return!1;const w=typeof g;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?s(g,v,y):w==="function"?o(g,v,y):!1;const S=g.constructor;if(S!==v.constructor)return!1;if(S===Object)return c(g,v,y);if(Array.isArray(g))return e(g,v,y);if(S===Date)return r(g,v,y);if(S===RegExp)return u(g,v,y);if(S===Map)return a(g,v,y);if(S===Set)return d(g,v,y);const b=Nue.call(g);if(b===Tue)return r(g,v,y);if(b===Oue)return u(g,v,y);if(b===_ue)return a(g,v,y);if(b===Aue)return d(g,v,y);if(b===Pue)return typeof g.then!="function"&&typeof v.then!="function"&&c(g,v,y);if(b===Iue)return h(g,v,y);if(b===Cue)return i(g,v,y);if(b===Sue)return c(g,v,y);if(Mue[b])return f(g,v,y);if(b===wue)return t(g,v,y);if(b===kue)return n(g,v,y);if(b===xue||b===Eue||b===Rue)return l(g,v,y);if(m){let x=m[b];if(!x){const T=iue(g);T&&(x=m[T])}if(x)return x(g,v,y)}return!1}}function jue({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:lue,areArraysEqual:n?nu:uue,areDataViewsEqual:due,areDatesEqual:fue,areErrorsEqual:hue,areFunctionsEqual:pue,areMapsEqual:n?Cy(eO,nu):eO,areNumbersEqual:mue,areObjectsEqual:n?nu:gue,arePrimitiveWrappersEqual:vue,areRegExpsEqual:yue,areSetsEqual:n?Cy(tO,nu):tO,areTypedArraysEqual:n?Cy(dm,nu):dm,areUrlsEqual:bue,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=ah(r.areArraysEqual),o=ah(r.areMapsEqual),a=ah(r.areObjectsEqual),s=ah(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return r}function Lue(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function $ue({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(s,c){const{cache:l=t?new WeakMap:void 0,meta:u}=n();return e(s,c,{cache:l,equals:r,meta:u,strict:i})};if(t)return function(s,c){return e(s,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(s,c){return e(s,c,o)}}const Fue=da();da({strict:!0});da({circular:!0});da({circular:!0,strict:!0});da({createInternalComparator:()=>ys});da({strict:!0,createInternalComparator:()=>ys});da({circular:!0,createInternalComparator:()=>ys});da({circular:!0,createInternalComparator:()=>ys,strict:!0});function da(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=jue(t),a=Due(o),s=n?n(a):Lue(a);return $ue({circular:e,comparator:a,createState:r,equals:s,strict:i})}function Uue(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function nO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):Uue(i)};requestAnimationFrame(r)}function Cw(t){"@babel/helpers - typeof";return Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(t)}function Bue(t){return Vue(t)||Wue(t)||que(t)||zue()}function zue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function que(t,e){if(t){if(typeof t=="string")return rO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(t,e)}}function rO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vue(t){if(Array.isArray(t))return t}function Hue(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=Bue(a),c=s[0],l=s.slice(1);if(typeof c=="number"){nO(i.bind(null,l),c);return}i(c),nO(i.bind(null,l));return}Cw(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Md(t){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Md(t)}function iO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iO(Object(n),!0).forEach(function(r){P2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P2(t,e,n){return e=Kue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kue(t){var e=Gue(t,"string");return Md(e)==="symbol"?e:String(e)}function Gue(t,e){if(Md(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Md(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yue=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},Xue=function(e){return e},Que=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Nu=function(e,n){return Object.keys(n).reduce(function(r,i){return oO(oO({},r),{},P2({},i,e(i,n[i])))},{})},aO=function(e,n,r){return e.map(function(i){return"".concat(Que(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Jue(t,e){return tde(t)||ede(t,e)||O2(t,e)||Zue()}function Zue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ede(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function tde(t){if(Array.isArray(t))return t}function nde(t){return ode(t)||ide(t)||O2(t)||rde()}function rde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O2(t,e){if(t){if(typeof t=="string")return _w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(t,e)}}function ide(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ode(t){if(Array.isArray(t))return _w(t)}function _w(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fm=1e-4,A2=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},R2=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},sO=function(e,n){return function(r){var i=A2(e,n);return R2(i,r)}},ade=function(e,n){return function(r){var i=A2(e,n),o=[].concat(nde(i.map(function(a,s){return a*s}).slice(1)),[0]);return R2(o,r)}},cO=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var l=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Jue(l,4);i=u[0],o=u[1],a=u[2],s=u[3]}}}var d=sO(i,a),f=sO(o,s),h=ade(i,a),m=function(v){return v>1?1:v<0?0:v},p=function(v){for(var y=v>1?1:v,w=y,S=0;S<8;++S){var b=d(w)-y,x=h(w);if(Math.abs(b-y)<fm||x<fm)return f(w);w=m(w-b/x)}return f(w)};return p.isStepper=!1,p},sde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,c=function(u,d,f){var h=-(u-d)*r,m=f*o,p=f+(h-m)*s/1e3,g=f*s/1e3+u;return Math.abs(g-d)<fm&&Math.abs(p)<fm?[d,0]:[g,p]};return c.isStepper=!0,c.dt=s,c},cde=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cO(i);case"spring":return sde();default:if(i.split("(")[0]==="cubic-bezier")return cO(i)}return typeof i=="function"?i:null};function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}function lO(t){return dde(t)||ude(t)||M2(t)||lde()}function lde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ude(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dde(t){if(Array.isArray(t))return Pw(t)}function uO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uO(Object(n),!0).forEach(function(r){Ew(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ew(t,e,n){return e=fde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fde(t){var e=hde(t,"string");return Id(e)==="symbol"?e:String(e)}function hde(t,e){if(Id(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Id(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pde(t,e){return vde(t)||gde(t,e)||M2(t,e)||mde()}function mde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M2(t,e){if(t){if(typeof t=="string")return Pw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pw(t,e)}}function Pw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function vde(t){if(Array.isArray(t))return t}var hm=function(e,n,r){return e+(n-e)*r},Ow=function(e){var n=e.from,r=e.to;return n!==r},yde=function t(e,n,r){var i=Nu(function(o,a){if(Ow(a)){var s=e(a.from,a.to,a.velocity),c=pde(s,2),l=c[0],u=c[1];return zt(zt({},a),{},{from:l,velocity:u})}return a},n);return r<1?Nu(function(o,a){return Ow(a)?zt(zt({},a),{},{velocity:hm(a.velocity,i[o].velocity,r),from:hm(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const bde=function(t,e,n,r,i){var o=Yue(t,e),a=o.reduce(function(g,v){return zt(zt({},g),{},Ew({},v,[t[v],e[v]]))},{}),s=o.reduce(function(g,v){return zt(zt({},g),{},Ew({},v,{from:t[v],velocity:0,to:e[v]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return Nu(function(v,y){return y.from},s)},h=function(){return!Object.values(s).filter(Ow).length},m=function(v){l||(l=v);var y=v-l,w=y/n.dt;s=yde(n,s,w),i(zt(zt(zt({},t),e),f())),l=v,h()||(c=requestAnimationFrame(d))},p=function(v){u||(u=v);var y=(v-u)/r,w=Nu(function(b,x){return hm.apply(void 0,lO(x).concat([n(y)]))},a);if(i(zt(zt(zt({},t),e),w)),y<1)c=requestAnimationFrame(d);else{var S=Nu(function(b,x){return hm.apply(void 0,lO(x).concat([n(1)]))},a);i(zt(zt(zt({},t),e),S))}};return d=n.isStepper?m:p,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}var wde=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Sde(t,e){if(t==null)return{};var n=xde(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _y(t){return _de(t)||Cde(t)||Tde(t)||kde()}function kde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tde(t,e){if(t){if(typeof t=="string")return Aw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aw(t,e)}}function Cde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _de(t){if(Array.isArray(t))return Aw(t)}function Aw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(n),!0).forEach(function(r){mu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mu(t,e,n){return e=I2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ede(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I2(r.key),r)}}function Ode(t,e,n){return e&&Pde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function I2(t){var e=Ade(t,"string");return Hc(e)==="symbol"?e:String(e)}function Ade(t,e){if(Hc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rw(t,e)}function Rw(t,e){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Rw(t,e)}function Mde(t){var e=Ide();return function(){var r=pm(t),i;if(e){var o=pm(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Mw(this,i)}}function Mw(t,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iw(t)}function Iw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ide(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pm(t){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pm(t)}var Qi=function(t){Rde(n,t);var e=Mde(n);function n(r,i){var o;Ede(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,c=a.attributeName,l=a.from,u=a.to,d=a.steps,f=a.children,h=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Iw(o)),o.changeStyle=o.changeStyle.bind(Iw(o)),!s||h<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:u}),Mw(o);if(d&&d.length)o.state={style:d[0].style};else if(l){if(typeof f=="function")return o.state={style:l},Mw(o);o.state={style:c?mu({},c,l):l}}else o.state={style:{}};return o}return Ode(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,c=o.attributeName,l=o.shouldReAnimate,u=o.to,d=o.from,f=this.state.style;if(s){if(!a){var h={style:c?mu({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(h);return}if(!(Fue(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||l?d:i.to;if(this.state&&f){var g={style:c?mu({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(g)}this.runAnimation(kr(kr({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,c=i.duration,l=i.easing,u=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,h=bde(a,s,cde(l),c,this.changeStyle),m=function(){o.stopJSAnimation=h()};this.manager.start([f,u,m,c,d])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,c=i.onAnimationStart,l=a[0],u=l.style,d=l.duration,f=d===void 0?0:d,h=function(p,g,v){if(v===0)return p;var y=g.duration,w=g.easing,S=w===void 0?"ease":w,b=g.style,x=g.properties,T=g.onAnimationEnd,C=v>0?a[v-1]:g,_=x||Object.keys(b);if(typeof S=="function"||S==="spring")return[].concat(_y(p),[o.runJSAnimation.bind(o,{from:C.style,to:b,duration:y,easing:S}),y]);var E=aO(_,y,S),A=kr(kr(kr({},C.style),b),{},{transition:E});return[].concat(_y(p),[A,y,T]).filter(Xue)};return this.manager.start([c].concat(_y(a.reduce(h,[u,Math.max(f,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Hue());var o=i.begin,a=i.duration,s=i.attributeName,c=i.to,l=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof l=="function"||typeof h=="function"||l==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=s?mu({},s,c):c,g=aO(Object.keys(p),a,l);m.start([u,o,kr(kr({},p),{},{transition:g}),a,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Sde(i,wde),l=M.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!s||l===0||a<=0)return o;var d=function(h){var m=h.props,p=m.style,g=p===void 0?{}:p,v=m.className,y=M.cloneElement(h,kr(kr({},c),{},{style:kr(kr({},g),u),className:v}));return y};return l===1?d(M.Children.only(o)):I.createElement("div",null,M.Children.map(o,function(f){return d(f)}))}}]),n}(M.PureComponent);Qi.displayName="Animate";Qi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Qi.propTypes={from:Ie.oneOfType([Ie.object,Ie.string]),to:Ie.oneOfType([Ie.object,Ie.string]),attributeName:Ie.string,duration:Ie.number,begin:Ie.number,easing:Ie.oneOfType([Ie.string,Ie.func]),steps:Ie.arrayOf(Ie.shape({duration:Ie.number.isRequired,style:Ie.object.isRequired,easing:Ie.oneOfType([Ie.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ie.func]),properties:Ie.arrayOf("string"),onAnimationEnd:Ie.func})),children:Ie.oneOfType([Ie.node,Ie.func]),isActive:Ie.bool,canBegin:Ie.bool,onAnimationEnd:Ie.func,shouldReAnimate:Ie.bool,onAnimationStart:Ie.func,onAnimationReStart:Ie.func};function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mm.apply(this,arguments)}function Nde(t,e){return $de(t)||Lde(t,e)||jde(t,e)||Dde()}function Dde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jde(t,e){if(t){if(typeof t=="string")return fO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fO(t,e)}}function fO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function $de(t){if(Array.isArray(t))return t}function hO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hO(Object(n),!0).forEach(function(r){Fde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fde(t,e,n){return e=Ude(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ude(t){var e=Bde(t,"string");return Nd(e)=="symbol"?e:e+""}function Bde(t,e){if(Nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mO=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,c=r>=0?1:-1,l=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&o instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=o[f]>a?a:o[f];u="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+c*d[0],",").concat(n)),u+="L ".concat(e+r-c*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(n+s*d[1])),u+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-c*d[2],",").concat(n+i)),u+="L ".concat(e+c*d[3],",").concat(n+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(n+i-s*d[3])),u+="Z"}else if(a>0&&o===+o&&o>0){var m=Math.min(a,o);u="M ".concat(e,",").concat(n+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+c*m,",").concat(n,`
            L `).concat(e+r-c*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r,",").concat(n+s*m,`
            L `).concat(e+r,",").concat(n+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r-c*m,",").concat(n+i,`
            L `).concat(e+c*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(n+i-s*m," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},zde=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,c=n.height;if(Math.abs(s)>0&&Math.abs(c)>0){var l=Math.min(o,o+s),u=Math.max(o,o+s),d=Math.min(a,a+c),f=Math.max(a,a+c);return r>=l&&r<=u&&i>=d&&i<=f}return!1},qde={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Wk=function(e){var n=pO(pO({},qde),e),r=M.useRef(),i=M.useState(-1),o=Nde(i,2),a=o[0],s=o[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&s(S)}catch{}},[]);var c=n.x,l=n.y,u=n.width,d=n.height,f=n.radius,h=n.className,m=n.animationEasing,p=n.animationDuration,g=n.animationBegin,v=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var w=_e("recharts-rectangle",h);return y?I.createElement(Qi,{canBegin:a>0,from:{width:u,height:d,x:c,y:l},to:{width:u,height:d,x:c,y:l},duration:p,animationEasing:m,isActive:y},function(S){var b=S.width,x=S.height,T=S.x,C=S.y;return I.createElement(Qi,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:v,easing:m},I.createElement("path",mm({},Ce(n,!0),{className:w,d:mO(T,C,b,x,f),ref:r})))}):I.createElement("path",mm({},Ce(n,!0),{className:w,d:mO(c,l,u,d,f)}))};function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nw.apply(this,arguments)}var Vk=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=_e("recharts-dot",o);return n===+n&&r===+r&&i===+i?M.createElement("circle",Nw({},Ce(e,!1),Mp(e),{className:a,cx:n,cy:r,r:i})):null};function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(t)}var Wde=["x","y","top","left","width","height","className"];function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dw.apply(this,arguments)}function gO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(n),!0).forEach(function(r){Hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hde(t,e,n){return e=Kde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kde(t){var e=Gde(t,"string");return Dd(e)=="symbol"?e:e+""}function Gde(t,e){if(Dd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yde(t,e){if(t==null)return{};var n=Xde(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Qde=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},Jde=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,c=e.left,l=c===void 0?0:c,u=e.width,d=u===void 0?0:u,f=e.height,h=f===void 0?0:f,m=e.className,p=Yde(e,Wde),g=Vde({x:r,y:o,top:s,left:l,width:d,height:h},p);return!ee(r)||!ee(o)||!ee(d)||!ee(h)||!ee(s)||!ee(l)?null:I.createElement("path",Dw({},Ce(g,!0),{className:_e("recharts-cross",m),d:Qde(r,o,d,h,s,l)}))},Zde=Kj,efe=Zde(Object.getPrototypeOf,Object),tfe=efe,nfe=eo,rfe=tfe,ife=to,ofe="[object Object]",afe=Function.prototype,sfe=Object.prototype,N2=afe.toString,cfe=sfe.hasOwnProperty,lfe=N2.call(Object);function ufe(t){if(!ife(t)||nfe(t)!=ofe)return!1;var e=rfe(t);if(e===null)return!0;var n=cfe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&N2.call(n)==lfe}var dfe=ufe;const ffe=We(dfe);var hfe=eo,pfe=to,mfe="[object Boolean]";function gfe(t){return t===!0||t===!1||pfe(t)&&hfe(t)==mfe}var vfe=gfe;const yfe=We(vfe);function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function gm(){return gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gm.apply(this,arguments)}function bfe(t,e){return kfe(t)||xfe(t,e)||Sfe(t,e)||wfe()}function wfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sfe(t,e){if(t){if(typeof t=="string")return vO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vO(t,e)}}function vO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function kfe(t){if(Array.isArray(t))return t}function yO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yO(Object(n),!0).forEach(function(r){Tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tfe(t,e,n){return e=Cfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cfe(t){var e=_fe(t,"string");return jd(e)=="symbol"?e:e+""}function _fe(t,e){if(jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wO=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},Efe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pfe=function(e){var n=bO(bO({},Efe),e),r=M.useRef(),i=M.useState(-1),o=bfe(i,2),a=o[0],s=o[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&s(w)}catch{}},[]);var c=n.x,l=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,m=n.animationEasing,p=n.animationDuration,g=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||l!==+l||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var y=_e("recharts-trapezoid",h);return v?I.createElement(Qi,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:l},to:{upperWidth:u,lowerWidth:d,height:f,x:c,y:l},duration:p,animationEasing:m,isActive:v},function(w){var S=w.upperWidth,b=w.lowerWidth,x=w.height,T=w.x,C=w.y;return I.createElement(Qi,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:m},I.createElement("path",gm({},Ce(n,!0),{className:y,d:wO(T,C,S,b,x),ref:r})))}):I.createElement("g",null,I.createElement("path",gm({},Ce(n,!0),{className:y,d:wO(c,l,u,d,f)})))},Ofe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(t)}function Afe(t,e){if(t==null)return{};var n=Rfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SO(Object(n),!0).forEach(function(r){Mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mfe(t,e,n){return e=Ife(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ife(t){var e=Nfe(t,"string");return Ld(e)=="symbol"?e:e+""}function Nfe(t,e){if(Ld(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dfe(t,e){return vm(vm({},e),t)}function jfe(t,e){return t==="symbols"}function xO(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return I.createElement(Wk,n);case"trapezoid":return I.createElement(Pfe,n);case"sector":return I.createElement(k2,n);case"symbols":if(jfe(e))return I.createElement(lk,n);break;default:return null}}function Lfe(t){return M.isValidElement(t)?t.props:t}function $fe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Dfe:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,c=Afe(t,Ofe),l;if(M.isValidElement(e))l=M.cloneElement(e,vm(vm({},c),Lfe(e)));else if(ve(e))l=e(c);else if(ffe(e)&&!yfe(e)){var u=i(e,c);l=I.createElement(xO,{shapeType:n,elementProps:u})}else{var d=c;l=I.createElement(xO,{shapeType:n,elementProps:d})}return s?I.createElement(vt,{className:a},l):l}function Hg(t,e){return e!=null&&"trapezoids"in t.props}function Kg(t,e){return e!=null&&"sectors"in t.props}function $d(t,e){return e!=null&&"points"in t.props}function Ffe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function Ufe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Bfe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function zfe(t,e){var n;return Hg(t,e)?n=Ffe:Kg(t,e)?n=Ufe:$d(t,e)&&(n=Bfe),n}function qfe(t,e){var n;return Hg(t,e)?n="trapezoids":Kg(t,e)?n="sectors":$d(t,e)&&(n="points"),n}function Wfe(t,e){if(Hg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Kg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return $d(t,e)?e.payload:{}}function Vfe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=qfe(n,e),o=Wfe(n,e),a=r.filter(function(c,l){var u=qg(o,c),d=n.props[i].filter(function(m){var p=zfe(n,e);return p(m,e)}),f=n.props[i].indexOf(d[d.length-1]),h=l===f;return u&&h}),s=r.indexOf(a[a.length-1]);return s}var Hfe=Math.ceil,Kfe=Math.max;function Gfe(t,e,n,r){for(var i=-1,o=Kfe(Hfe((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var Yfe=Gfe,Xfe=fL,kO=1/0,Qfe=17976931348623157e292;function Jfe(t){if(!t)return t===0?t:0;if(t=Xfe(t),t===kO||t===-kO){var e=t<0?-1:1;return e*Qfe}return t===t?t:0}var D2=Jfe,Zfe=Yfe,ehe=Ng,Ey=D2;function the(t){return function(e,n,r){return r&&typeof r!="number"&&ehe(e,n,r)&&(n=r=void 0),e=Ey(e),n===void 0?(n=e,e=0):n=Ey(n),r=r===void 0?e<n?1:-1:Ey(r),Zfe(e,n,r,t)}}var nhe=the,rhe=nhe,ihe=rhe(),ohe=ihe;const ym=We(ohe);function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(t)}function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TO(Object(n),!0).forEach(function(r){j2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j2(t,e,n){return e=ahe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ahe(t){var e=she(t,"string");return Fd(e)=="symbol"?e:e+""}function she(t,e){if(Fd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var che=["Webkit","Moz","O","ms"],lhe=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=che.reduce(function(o,a){return CO(CO({},o),{},j2({},a+r,n))},{});return i[e]=n,i};function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bm.apply(this,arguments)}function _O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Py(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_O(Object(n),!0).forEach(function(r){jn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$2(r.key),r)}}function dhe(t,e,n){return e&&EO(t.prototype,e),n&&EO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fhe(t,e,n){return e=wm(e),hhe(t,L2()?Reflect.construct(e,n||[],wm(t).constructor):e.apply(t,n))}function hhe(t,e){if(e&&(Kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return phe(t)}function phe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L2=function(){return!!t})()}function wm(t){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wm(t)}function mhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jw(t,e)}function jw(t,e){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jw(t,e)}function jn(t,e,n){return e=$2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2(t){var e=ghe(t,"string");return Kc(e)=="symbol"?e:e+""}function ghe(t,e){if(Kc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vhe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,l=Mu().domain(ym(0,c)).range([o,o+a-s]),u=l.domain().map(function(d){return l(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(i),scale:l,scaleValues:u}},PO=function(e){return e.changedTouches&&!!e.changedTouches.length},Gc=function(t){function e(n){var r;return uhe(this,e),r=fhe(this,e,[n]),jn(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),jn(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),jn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),jn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),jn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),jn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),jn(r,"handleSlideDragStart",function(i){var o=PO(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return mhe(e,t),dhe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,c=s.gap,l=s.data,u=l.length-1,d=Math.min(i,o),f=Math.max(i,o),h=e.getIndexInRange(a,d),m=e.getIndexInRange(a,f);return{startIndex:h-h%c,endIndex:m===u?u:m-m%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,c=Gn(o[r],s,r);return ve(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,c=this.props,l=c.x,u=c.width,d=c.travellerWidth,f=c.startIndex,h=c.endIndex,m=c.onChange,p=r.pageX-o;p>0?p=Math.min(p,l+u-d-s,l+u-d-a):p<0&&(p=Math.max(p,l-a,l-s));var g=this.getIndex({startX:a+p,endX:s+p});(g.startIndex!==f||g.endIndex!==h)&&m&&m(g),this.setState({startX:a+p,endX:s+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=PO(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,c=i.startX,l=this.state[a],u=this.props,d=u.x,f=u.width,h=u.travellerWidth,m=u.onChange,p=u.gap,g=u.data,v={startX:this.state.startX,endX:this.state.endX},y=r.pageX-o;y>0?y=Math.min(y,d+f-h-l):y<0&&(y=Math.max(y,d-l)),v[a]=l+y;var w=this.getIndex(v),S=w.startIndex,b=w.endIndex,x=function(){var C=g.length-1;return a==="startX"&&(s>c?S%p===0:b%p===0)||s<c&&b===C||a==="endX"&&(s>c?b%p===0:S%p===0)||s>c&&b===C};this.setState(jn(jn({},a,l+y),"brushMoveStartX",r.pageX),function(){m&&x()&&m(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,c=a.startX,l=a.endX,u=this.state[i],d=s.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=s.length)){var h=s[f];i==="startX"&&h>=l||i==="endX"&&h<=c||this.setState(jn({},i,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,c=r.fill,l=r.stroke;return I.createElement("rect",{stroke:l,fill:c,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,c=r.data,l=r.children,u=r.padding,d=M.Children.only(l);return d?I.cloneElement(d,{x:i,y:o,width:a,height:s,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,c=this.props,l=c.y,u=c.travellerWidth,d=c.height,f=c.traveller,h=c.ariaLabel,m=c.data,p=c.startIndex,g=c.endIndex,v=Math.max(r,this.props.x),y=Py(Py({},Ce(this.props,!1)),{},{x:v,y:l,width:u,height:d}),w=h||"Min value: ".concat((o=m[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=m[g])===null||a===void 0?void 0:a.name);return I.createElement(vt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),s.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,c=o.stroke,l=o.travellerWidth,u=Math.min(r,i)+l,d=Math.max(Math.abs(i-r)-l,0);return I.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:a,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,c=r.travellerWidth,l=r.stroke,u=this.state,d=u.startX,f=u.endX,h=5,m={pointerEvents:"none",fill:l};return I.createElement(vt,{className:"recharts-brush-texts"},I.createElement(Kp,bm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:a+s/2},m),this.getTextOfTick(i)),I.createElement(Kp,bm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+c+h,y:a+s/2},m),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,c=r.y,l=r.width,u=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,m=f.endX,p=f.isTextActive,g=f.isSlideMoving,v=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!ee(s)||!ee(c)||!ee(l)||!ee(u)||l<=0||u<=0)return null;var w=_e("recharts-brush",o),S=I.Children.count(a)===1,b=lhe("userSelect","none");return I.createElement(vt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(p||g||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,c=r.stroke,l=Math.floor(o+s/2)-1;return I.createElement(I.Fragment,null,I.createElement("rect",{x:i,y:o,width:a,height:s,fill:c,stroke:"none"}),I.createElement("line",{x1:i+1,y1:l,x2:i+a-1,y2:l,fill:"none",stroke:"#fff"}),I.createElement("line",{x1:i+1,y1:l+2,x2:i+a-1,y2:l+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return I.isValidElement(r)?o=I.cloneElement(r,i):ve(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,c=r.travellerWidth,l=r.updateId,u=r.startIndex,d=r.endIndex;if(o!==i.prevData||l!==i.prevUpdateId)return Py({prevData:o,prevTravellerWidth:c,prevUpdateId:l,prevX:s,prevWidth:a},o&&o.length?vhe({data:o,width:a,x:s,travellerWidth:c,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([s,s+a-c]);var f=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:l,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var c=Math.floor((a+s)/2);r[c]>i?s=c:a=c}return i>=r[s]?s:a}}])}(M.PureComponent);jn(Gc,"displayName","Brush");jn(Gc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yhe=gk;function bhe(t,e){var n;return yhe(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var whe=bhe,She=Fj,xhe=ca,khe=whe,The=Nn,Che=Ng;function _he(t,e,n){var r=The(t)?She:khe;return n&&Che(t,e,n)&&(e=void 0),r(t,xhe(e))}var Ehe=_he;const Phe=We(Ehe);var li=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},OO=sL;function Ohe(t,e,n){e=="__proto__"&&OO?OO(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Ahe=Ohe,Rhe=Ahe,Mhe=oL,Ihe=ca;function Nhe(t,e){var n={};return e=Ihe(e),Mhe(t,function(r,i,o){Rhe(n,i,e(r,i,o))}),n}var Dhe=Nhe;const jhe=We(Dhe);function Lhe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var $he=Lhe,Fhe=gk;function Uhe(t,e){var n=!0;return Fhe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Bhe=Uhe,zhe=$he,qhe=Bhe,Whe=ca,Vhe=Nn,Hhe=Ng;function Khe(t,e,n){var r=Vhe(t)?zhe:qhe;return n&&Hhe(t,e,n)&&(e=void 0),r(t,Whe(e))}var Ghe=Khe;const F2=We(Ghe);var Yhe=["x","y"];function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}function AO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AO(Object(n),!0).forEach(function(r){Xhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xhe(t,e,n){return e=Qhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qhe(t){var e=Jhe(t,"string");return Ud(e)=="symbol"?e:e+""}function Jhe(t,e){if(Ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zhe(t,e){if(t==null)return{};var n=epe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function epe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tpe(t,e){var n=t.x,r=t.y,i=Zhe(t,Yhe),o="".concat(n),a=parseInt(o,10),s="".concat(r),c=parseInt(s,10),l="".concat(e.height||i.height),u=parseInt(l,10),d="".concat(e.width||i.width),f=parseInt(d,10);return ru(ru(ru(ru(ru({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function RO(t){return I.createElement($fe,Lw({shapeType:"rectangle",propTransformer:tpe,activeClassName:"recharts-active-bar"},t))}var npe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=ee(r)||mK(r);return o?e(r,i):(o||ls(),n)}},rpe=["value","background"],U2;function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function ipe(t,e){if(t==null)return{};var n=ope(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ope(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sm.apply(this,arguments)}function MO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(n),!0).forEach(function(r){Io(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ape(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z2(r.key),r)}}function spe(t,e,n){return e&&IO(t.prototype,e),n&&IO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cpe(t,e,n){return e=xm(e),lpe(t,B2()?Reflect.construct(e,n||[],xm(t).constructor):e.apply(t,n))}function lpe(t,e){if(e&&(Yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return upe(t)}function upe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B2=function(){return!!t})()}function xm(t){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xm(t)}function dpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$w(t,e)}function $w(t,e){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$w(t,e)}function Io(t,e,n){return e=z2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z2(t){var e=fpe(t,"string");return Yc(e)=="symbol"?e:e+""}function fpe(t,e){if(Yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yf=function(t){function e(){var n;ape(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=cpe(this,e,[].concat(i)),Io(n,"state",{isAnimationFinished:!1}),Io(n,"id",df("recharts-bar-")),Io(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Io(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return dpe(e,t),spe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,c=o.activeIndex,l=o.activeBar,u=Ce(this.props,!1);return r&&r.map(function(d,f){var h=f===c,m=h?l:a,p=wt(wt(wt({},u),d),{},{isActive:h,option:m,index:f,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return I.createElement(vt,Sm({className:"recharts-bar-rectangle"},Ip(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),I.createElement(RO,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,c=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevData;return I.createElement(Qi,{begin:c,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,p=o.map(function(g,v){var y=f&&f[v];if(y){var w=Nr(y.x,g.x),S=Nr(y.y,g.y),b=Nr(y.width,g.width),x=Nr(y.height,g.height);return wt(wt({},g),{},{x:w(m),y:S(m),width:b(m),height:x(m)})}if(a==="horizontal"){var T=Nr(0,g.height),C=T(m);return wt(wt({},g),{},{y:g.y+g.height-C,height:C})}var _=Nr(0,g.width),E=_(m);return wt(wt({},g),{},{width:E})});return I.createElement(vt,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!qg(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,c=Ce(this.props.background,!1);return o.map(function(l,u){l.value;var d=l.background,f=ipe(l,rpe);if(!d)return null;var h=wt(wt(wt(wt(wt({},f),{},{fill:"#eee"},d),c),Ip(r.props,l,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return I.createElement(RO,Sm({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,c=o.yAxis,l=o.layout,u=o.children,d=pr(u,vf);if(!d)return null;var f=l==="vertical"?a[0].height/2:a[0].width/2,h=function(g,v){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:Gn(g,v)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return I.createElement(vt,m,d.map(function(p){return I.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:a,xAxis:s,yAxis:c,layout:l,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,c=r.yAxis,l=r.left,u=r.top,d=r.width,f=r.height,h=r.isAnimationActive,m=r.background,p=r.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,v=_e("recharts-bar",a),y=s&&s.allowDataOverflow,w=c&&c.allowDataOverflow,S=y||w,b=Se(p)?this.id:p;return I.createElement(vt,{className:v},y||w?I.createElement("defs",null,I.createElement("clipPath",{id:"clipPath-".concat(b)},I.createElement("rect",{x:y?l:l-d/2,y:w?u:u-f/2,width:y?d:d*2,height:w?f:f*2}))):null,I.createElement(vt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,b),(!h||g)&&Xo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(M.PureComponent);U2=yf;Io(yf,"displayName","Bar");Io(yf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Tl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Io(yf,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,c=t.yAxisTicks,l=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=$ce(r,n);if(!h)return null;var m=e.layout,p=n.type.defaultProps,g=p!==void 0?wt(wt({},p),n.props):n.props,v=g.dataKey,y=g.children,w=g.minPointSize,S=m==="horizontal"?a:o,b=l?S.scale.domain():null,x=Hce({numericAxis:S}),T=pr(y,mL),C=d.map(function(_,E){var A,P,L,j,$,F;l?A=Fce(l[u+E],b):(A=Gn(_,v),Array.isArray(A)||(A=[x,A]));var q=npe(w,U2.defaultProps.minPointSize)(A[1],E);if(m==="horizontal"){var N,B=[a.scale(A[0]),a.scale(A[1])],W=B[0],X=B[1];P=DP({axis:o,ticks:s,bandSize:i,offset:h.offset,entry:_,index:E}),L=(N=X??W)!==null&&N!==void 0?N:void 0,j=h.size;var G=W-X;if($=Number.isNaN(G)?0:G,F={x:P,y:a.y,width:j,height:a.height},Math.abs(q)>0&&Math.abs($)<Math.abs(q)){var ae=Br($||q)*(Math.abs(q)-Math.abs($));L-=ae,$+=ae}}else{var pe=[o.scale(A[0]),o.scale(A[1])],Me=pe[0],Ke=pe[1];if(P=Me,L=DP({axis:a,ticks:c,bandSize:i,offset:h.offset,entry:_,index:E}),j=Ke-Me,$=h.size,F={x:o.x,y:L,width:o.width,height:$},Math.abs(q)>0&&Math.abs(j)<Math.abs(q)){var Qn=Br(j||q)*(Math.abs(q)-Math.abs(j));j+=Qn}}return wt(wt(wt({},_),{},{x:P,y:L,width:j,height:$,value:l?A:A[1],payload:_,background:F},T&&T[E]&&T[E].props),{},{tooltipPayload:[w2(n,_)],tooltipPosition:{x:P+j/2,y:L+$/2}})});return wt({data:C,layout:m},f)});function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}function hpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q2(r.key),r)}}function ppe(t,e,n){return e&&NO(t.prototype,e),n&&NO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DO(Object(n),!0).forEach(function(r){Gg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gg(t,e,n){return e=q2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q2(t){var e=mpe(t,"string");return Bd(e)=="symbol"?e:e+""}function mpe(t,e){if(Bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gpe=function(e,n,r,i,o){var a=e.width,s=e.height,c=e.layout,l=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},f=!!$n(l,yf);return u.reduce(function(h,m){var p=n[m],g=p.orientation,v=p.domain,y=p.padding,w=y===void 0?{}:y,S=p.mirror,b=p.reversed,x="".concat(g).concat(S?"Mirror":""),T,C,_,E,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var P=v[1]-v[0],L=1/0,j=p.categoricalDomain.sort(yK);if(j.forEach(function(pe,Me){Me>0&&(L=Math.min((pe||0)-(j[Me-1]||0),L))}),Number.isFinite(L)){var $=L/P,F=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(T=$*F/2),p.padding==="no-gap"){var q=ss(e.barCategoryGap,$*F),N=$*F/2;T=N-q-(N-q)/F*q}}}i==="xAxis"?C=[r.left+(w.left||0)+(T||0),r.left+r.width-(w.right||0)-(T||0)]:i==="yAxis"?C=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(T||0),r.top+r.height-(w.bottom||0)-(T||0)]:C=p.range,b&&(C=[C[1],C[0]]);var B=jce(p,o,f),W=B.scale,X=B.realScaleType;W.domain(v).range(C),Lce(W);var G=Vce(W,Rr(Rr({},p),{},{realScaleType:X}));i==="xAxis"?(A=g==="top"&&!S||g==="bottom"&&S,_=r.left,E=d[x]-A*p.height):i==="yAxis"&&(A=g==="left"&&!S||g==="right"&&S,_=d[x]-A*p.width,E=r.top);var ae=Rr(Rr(Rr({},p),G),{},{realScaleType:X,x:_,y:E,scale:W,width:i==="xAxis"?r.width:p.width,height:i==="yAxis"?r.height:p.height});return ae.bandSize=cm(ae,G),!p.hide&&i==="xAxis"?d[x]+=(A?-1:1)*ae.height:p.hide||(d[x]+=(A?-1:1)*ae.width),Rr(Rr({},h),{},Gg({},m,ae))},{})},W2=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},vpe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return W2({x:n,y:r},{x:i,y:o})},V2=function(){function t(e){hpe(this,t),this.scale=e}return ppe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Gg(V2,"EPS",1e-4);var Hk=function(e){var n=Object.keys(e).reduce(function(r,i){return Rr(Rr({},r),{},Gg({},i,V2.create(e[i])))},{});return Rr(Rr({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return jhe(i,function(c,l){return n[l].apply(c,{bandAware:a,position:s})})},isInRange:function(i){return F2(i,function(o,a){return n[a].isInRange(o)})}})};function ype(t){return(t%180+180)%180}var bpe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=ype(i),a=o*Math.PI/180,s=Math.atan(r/n),c=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},wpe=ca,Spe=ff,xpe=Mg;function kpe(t){return function(e,n,r){var i=Object(e);if(!Spe(e)){var o=wpe(n);e=xpe(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var Tpe=kpe,Cpe=D2;function _pe(t){var e=Cpe(t),n=e%1;return e===e?n?e-n:e:0}var Epe=_pe,Ppe=Zj,Ope=ca,Ape=Epe,Rpe=Math.max;function Mpe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Ape(n);return i<0&&(i=Rpe(r+i,0)),Ppe(t,Ope(e),i)}var Ipe=Mpe,Npe=Tpe,Dpe=Ipe,jpe=Npe(Dpe),Lpe=jpe;const $pe=We(Lpe);var Fpe=SH(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Kk=M.createContext(void 0),Gk=M.createContext(void 0),H2=M.createContext(void 0),K2=M.createContext({}),G2=M.createContext(void 0),Y2=M.createContext(0),X2=M.createContext(0),jO=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,c=e.width,l=e.height,u=Fpe(o);return I.createElement(Kk.Provider,{value:r},I.createElement(Gk.Provider,{value:i},I.createElement(K2.Provider,{value:o},I.createElement(H2.Provider,{value:u},I.createElement(G2.Provider,{value:a},I.createElement(Y2.Provider,{value:l},I.createElement(X2.Provider,{value:c},s)))))))},Upe=function(){return M.useContext(G2)},Q2=function(e){var n=M.useContext(Kk);n==null&&ls();var r=n[e];return r==null&&ls(),r},Bpe=function(){var e=M.useContext(Kk);return bo(e)},zpe=function(){var e=M.useContext(Gk),n=$pe(e,function(r){return F2(r.domain,Number.isFinite)});return n||bo(e)},J2=function(e){var n=M.useContext(Gk);n==null&&ls();var r=n[e];return r==null&&ls(),r},qpe=function(){var e=M.useContext(H2);return e},Wpe=function(){return M.useContext(K2)},Yk=function(){return M.useContext(X2)},Xk=function(){return M.useContext(Y2)};function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function Vpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e$(r.key),r)}}function Kpe(t,e,n){return e&&Hpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gpe(t,e,n){return e=km(e),Ype(t,Z2()?Reflect.construct(e,n||[],km(t).constructor):e.apply(t,n))}function Ype(t,e){if(e&&(Xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xpe(t)}function Xpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z2=function(){return!!t})()}function km(t){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},km(t)}function Qpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fw(t,e)}function Fw(t,e){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Fw(t,e)}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){Qk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qk(t,e,n){return e=e$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e$(t){var e=Jpe(t,"string");return Xc(e)=="symbol"?e:e+""}function Jpe(t,e){if(Xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Zpe(t,e){return rme(t)||nme(t,e)||tme(t,e)||eme()}function eme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tme(t,e){if(t){if(typeof t=="string")return FO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FO(t,e)}}function FO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function rme(t){if(Array.isArray(t))return t}function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uw.apply(this,arguments)}var ime=function(e,n){var r;return I.isValidElement(e)?r=I.cloneElement(e,n):ve(e)?r=e(n):r=I.createElement("line",Uw({},n,{className:"recharts-reference-line-line"})),r},ome=function(e,n,r,i,o,a,s,c,l){var u=o.x,d=o.y,f=o.width,h=o.height;if(r){var m=l.y,p=e.y.apply(m,{position:a});if(li(l,"discard")&&!e.y.isInRange(p))return null;var g=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?g.reverse():g}if(n){var v=l.x,y=e.x.apply(v,{position:a});if(li(l,"discard")&&!e.x.isInRange(y))return null;var w=[{x:y,y:d+h},{x:y,y:d}];return s==="top"?w.reverse():w}if(i){var S=l.segment,b=S.map(function(x){return e.apply(x,{position:a})});return li(l,"discard")&&Phe(b,function(x){return!e.isInRange(x)})?null:b}return null};function ame(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,c=t.alwaysShow,l=Upe(),u=Q2(i),d=J2(o),f=qpe();if(!l||!f)return null;Ui(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Hk({x:u.scale,y:d.scale}),m=It(e),p=It(n),g=r&&r.length===2,v=ome(h,m,p,g,f,t.position,u.orientation,d.orientation,t);if(!v)return null;var y=Zpe(v,2),w=y[0],S=w.x,b=w.y,x=y[1],T=x.x,C=x.y,_=li(t,"hidden")?"url(#".concat(l,")"):void 0,E=$O($O({clipPath:_},Ce(t,!0)),{},{x1:S,y1:b,x2:T,y2:C});return I.createElement(vt,{className:_e("recharts-reference-line",s)},ime(a,E),nn.renderCallByParent(t,vpe({x1:S,y1:b,x2:T,y2:C})))}var Jk=function(t){function e(){return Vpe(this,e),Gpe(this,e,arguments)}return Qpe(e,t),Kpe(e,[{key:"render",value:function(){return I.createElement(ame,this.props)}}])}(I.Component);Qk(Jk,"displayName","ReferenceLine");Qk(Jk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Bw(){return Bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bw.apply(this,arguments)}function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){Yg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n$(r.key),r)}}function lme(t,e,n){return e&&cme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ume(t,e,n){return e=Tm(e),dme(t,t$()?Reflect.construct(e,n||[],Tm(t).constructor):e.apply(t,n))}function dme(t,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fme(t)}function fme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t$=function(){return!!t})()}function Tm(t){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tm(t)}function hme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zw(t,e)}function zw(t,e){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zw(t,e)}function Yg(t,e,n){return e=n$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n$(t){var e=pme(t,"string");return Qc(e)=="symbol"?e:e+""}function pme(t,e){if(Qc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mme=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=Hk({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return li(e,"discard")&&!a.isInRange(s)?null:s},Xg=function(t){function e(){return sme(this,e),ume(this,e,arguments)}return hme(e,t),lme(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,c=r.clipPathId,l=It(i),u=It(o);if(Ui(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!u)return null;var d=mme(this.props);if(!d)return null;var f=d.x,h=d.y,m=this.props,p=m.shape,g=m.className,v=li(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=BO(BO({clipPath:v},Ce(this.props,!0)),{},{cx:f,cy:h});return I.createElement(vt,{className:_e("recharts-reference-dot",g)},e.renderDot(p,y),nn.renderCallByParent(this.props,{x:f-a,y:h-a,width:2*a,height:2*a}))}}])}(I.Component);Yg(Xg,"displayName","ReferenceDot");Yg(Xg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Yg(Xg,"renderDot",function(t,e){var n;return I.isValidElement(t)?n=I.cloneElement(t,e):ve(t)?n=t(e):n=I.createElement(Vk,Bw({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(this,arguments)}function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function zO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zO(Object(n),!0).forEach(function(r){Qg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i$(r.key),r)}}function yme(t,e,n){return e&&vme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bme(t,e,n){return e=Cm(e),wme(t,r$()?Reflect.construct(e,n||[],Cm(t).constructor):e.apply(t,n))}function wme(t,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sme(t)}function Sme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r$=function(){return!!t})()}function Cm(t){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cm(t)}function xme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ww(t,e)}function Ww(t,e){return Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ww(t,e)}function Qg(t,e,n){return e=i$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i$(t){var e=kme(t,"string");return Jc(e)=="symbol"?e:e+""}function kme(t,e){if(Jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tme=function(e,n,r,i,o){var a=o.x1,s=o.x2,c=o.y1,l=o.y2,u=o.xAxis,d=o.yAxis;if(!u||!d)return null;var f=Hk({x:u.scale,y:d.scale}),h={x:e?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},m={x:n?f.x.apply(s,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(l,{position:"end"}):f.y.rangeMax};return li(o,"discard")&&(!f.isInRange(h)||!f.isInRange(m))?null:W2(h,m)},Jg=function(t){function e(){return gme(this,e),bme(this,e,arguments)}return xme(e,t),yme(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,c=r.className,l=r.alwaysShow,u=r.clipPathId;Ui(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=It(i),f=It(o),h=It(a),m=It(s),p=this.props.shape;if(!d&&!f&&!h&&!m&&!p)return null;var g=Tme(d,f,h,m,this.props);if(!g&&!p)return null;var v=li(this.props,"hidden")?"url(#".concat(u,")"):void 0;return I.createElement(vt,{className:_e("recharts-reference-area",c)},e.renderRect(p,qO(qO({clipPath:v},Ce(this.props,!0)),g)),nn.renderCallByParent(this.props,g))}}])}(I.Component);Qg(Jg,"displayName","ReferenceArea");Qg(Jg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Qg(Jg,"renderRect",function(t,e){var n;return I.isValidElement(t)?n=I.cloneElement(t,e):ve(t)?n=t(e):n=I.createElement(Wk,qw({},e,{className:"recharts-reference-area-rect"})),n});function o$(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Cme(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return bpe(r,n)}function _me(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function _m(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Eme(t,e){return o$(t,e+1)}function Pme(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,c=0,l=1,u=a,d=function(){var m=r==null?void 0:r[c];if(m===void 0)return{v:o$(r,l)};var p=c,g,v=function(){return g===void 0&&(g=n(m,p)),g},y=m.coordinate,w=c===0||_m(t,y,v,u,s);w||(c=0,u=a,l+=1),w&&(u=y+t*(v()/2+i),c+=l)},f;l<=o.length;)if(f=d(),f)return f.v;return[]}function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){Ome(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ome(t,e,n){return e=Ame(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ame(t){var e=Rme(t,"string");return zd(e)=="symbol"?e:e+""}function Rme(t,e){if(zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mme(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,c=e.end,l=function(f){var h=o[f],m,p=function(){return m===void 0&&(m=n(h,f)),m};if(f===a-1){var g=t*(h.coordinate+t*p()/2-c);o[f]=h=en(en({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else o[f]=h=en(en({},h),{},{tickCoord:h.coordinate});var v=_m(t,h.tickCoord,p,s,c);v&&(c=h.tickCoord-t*(p()/2+i),o[f]=en(en({},h),{},{isShow:!0}))},u=a-1;u>=0;u--)l(u);return o}function Ime(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,c=e.start,l=e.end;if(o){var u=r[s-1],d=n(u,s-1),f=t*(u.coordinate+t*d/2-l);a[s-1]=u=en(en({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var h=_m(t,u.tickCoord,function(){return d},c,l);h&&(l=u.tickCoord-t*(d/2+i),a[s-1]=en(en({},u),{},{isShow:!0}))}for(var m=o?s-1:s,p=function(y){var w=a[y],S,b=function(){return S===void 0&&(S=n(w,y)),S};if(y===0){var x=t*(w.coordinate-t*b()/2-c);a[y]=w=en(en({},w),{},{tickCoord:x<0?w.coordinate-x*t:w.coordinate})}else a[y]=w=en(en({},w),{},{tickCoord:w.coordinate});var T=_m(t,w.tickCoord,b,c,l);T&&(c=w.tickCoord+t*(b()/2+i),a[y]=en(en({},w),{},{isShow:!0}))},g=0;g<m;g++)p(g);return a}function Zk(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,c=t.interval,l=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(ee(c)||Tl.isSsr)return Eme(i,typeof c=="number"&&ee(c)?c:0);var f=[],h=s==="top"||s==="bottom"?"width":"height",m=u&&h==="width"?Ru(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(w,S){var b=ve(l)?l(w.value,S):w.value;return h==="width"?Cme(Ru(b,{fontSize:e,letterSpacing:n}),m,d):Ru(b,{fontSize:e,letterSpacing:n})[h]},g=i.length>=2?Br(i[1].coordinate-i[0].coordinate):1,v=_me(o,g,h);return c==="equidistantPreserveStart"?Pme(g,v,p,i,a):(c==="preserveStart"||c==="preserveStartEnd"?f=Ime(g,v,p,i,a,c==="preserveStartEnd"):f=Mme(g,v,p,i,a),f.filter(function(y){return y.isShow}))}var Nme=["viewBox"],Dme=["viewBox"],jme=["ticks"];function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function Vs(){return Vs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vs.apply(this,arguments)}function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VO(Object(n),!0).forEach(function(r){eT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oy(t,e){if(t==null)return{};var n=Lme(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s$(r.key),r)}}function Fme(t,e,n){return e&&HO(t.prototype,e),n&&HO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ume(t,e,n){return e=Em(e),Bme(t,a$()?Reflect.construct(e,n||[],Em(t).constructor):e.apply(t,n))}function Bme(t,e){if(e&&(Zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zme(t)}function zme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a$=function(){return!!t})()}function Em(t){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Em(t)}function qme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vw(t,e)}function Vw(t,e){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vw(t,e)}function eT(t,e,n){return e=s$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s$(t){var e=Wme(t,"string");return Zc(e)=="symbol"?e:e+""}function Wme(t,e){if(Zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pl=function(t){function e(n){var r;return $me(this,e),r=Ume(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return qme(e,t),Fme(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Oy(r,Nme),s=this.props,c=s.viewBox,l=Oy(s,Dme);return!lc(o,c)||!lc(a,l)||!lc(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,c=i.height,l=i.orientation,u=i.tickSize,d=i.mirror,f=i.tickMargin,h,m,p,g,v,y,w=d?-1:1,S=r.tickSize||u,b=ee(r.tickCoord)?r.tickCoord:r.coordinate;switch(l){case"top":h=m=r.coordinate,g=a+ +!d*c,p=g-w*S,y=p-w*f,v=b;break;case"left":p=g=r.coordinate,m=o+ +!d*s,h=m-w*S,v=h-w*f,y=b;break;case"right":p=g=r.coordinate,m=o+ +d*s,h=m+w*S,v=h+w*f,y=b;break;default:h=m=r.coordinate,g=a+ +d*c,p=g+w*S,y=p+w*f,v=b;break}return{line:{x1:h,y1:p,x2:m,y2:g},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,c=r.orientation,l=r.mirror,u=r.axisLine,d=Et(Et(Et({},Ce(this.props,!1)),Ce(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!l||c==="bottom"&&l);d=Et(Et({},d),{},{x1:i,y1:o+f*s,x2:i+a,y2:o+f*s})}else{var h=+(c==="left"&&!l||c==="right"&&l);d=Et(Et({},d),{},{x1:i+h*a,y1:o,x2:i+h*a,y2:o+s})}return I.createElement("line",Vs({},d,{className:_e("recharts-cartesian-axis-line",hr(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,c=s.tickLine,l=s.stroke,u=s.tick,d=s.tickFormatter,f=s.unit,h=Zk(Et(Et({},this.props),{},{ticks:r}),i,o),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Ce(this.props,!1),v=Ce(u,!1),y=Et(Et({},g),{},{fill:"none"},Ce(c,!1)),w=h.map(function(S,b){var x=a.getTickLineCoord(S),T=x.line,C=x.tick,_=Et(Et(Et(Et({textAnchor:m,verticalAnchor:p},g),{},{stroke:"none",fill:l},v),C),{},{index:b,payload:S,visibleTicksCount:h.length,tickFormatter:d});return I.createElement(vt,Vs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ip(a.props,S,b)),c&&I.createElement("line",Vs({},y,T,{className:_e("recharts-cartesian-axis-tick-line",hr(c,"className"))})),u&&e.renderTickItem(u,_,"".concat(ve(d)?d(S.value,b):S.value).concat(f||"")))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,c=i.ticksGenerator,l=i.className,u=i.hide;if(u)return null;var d=this.props,f=d.ticks,h=Oy(d,jme),m=f;return ve(c)&&(m=f&&f.length>0?c(this.props):c(h)),a<=0||s<=0||!m||!m.length?null:I.createElement(vt,{className:_e("recharts-cartesian-axis",l),ref:function(g){r.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),nn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=_e(i.className,"recharts-cartesian-axis-tick-value");return I.isValidElement(r)?a=I.cloneElement(r,Et(Et({},i),{},{className:s})):ve(r)?a=r(Et(Et({},i),{},{className:s})):a=I.createElement(Kp,Vs({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(M.Component);eT(Pl,"displayName","CartesianAxis");eT(Pl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Vme=["x1","y1","x2","y2","key"],Hme=["offset"];function us(t){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(t)}function KO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(n),!0).forEach(function(r){Kme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kme(t,e,n){return e=Gme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gme(t){var e=Yme(t,"string");return us(e)=="symbol"?e:e+""}function Yme(t,e){if(us(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(us(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ia.apply(this,arguments)}function GO(t,e){if(t==null)return{};var n=Xme(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Qme=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,c=e.ry;return I.createElement("rect",{x:i,y:o,ry:c,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function c$(t,e){var n;if(I.isValidElement(t))n=I.cloneElement(t,e);else if(ve(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,c=GO(e,Vme),l=Ce(c,!1);l.offset;var u=GO(l,Hme);n=I.createElement("line",Ia({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function Jme(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,c){var l=rn(rn({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(c),index:c});return c$(i,l)});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Zme(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,c){var l=rn(rn({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(c),index:c});return c$(i,l)});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function ege(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,c=t.horizontal,l=c===void 0?!0:c;if(!l||!e||!e.length)return null;var u=s.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var m=!u[h+1],p=m?i+a-f:u[h+1]-f;if(p<=0)return null;var g=h%e.length;return I.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:p,width:o,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function tge(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,c=t.height,l=t.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var m=!u[h+1],p=m?o+s-f:u[h+1]-f;if(p<=0)return null;var g=h%r.length;return I.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:c,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var nge=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return y2(Zk(rn(rn(rn({},Pl.defaultProps),r),{},{ticks:Li(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},rge=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return y2(Zk(rn(rn(rn({},Pl.defaultProps),r),{},{ticks:Li(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},Cs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function tT(t){var e,n,r,i,o,a,s=Yk(),c=Xk(),l=Wpe(),u=rn(rn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Cs.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Cs.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Cs.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Cs.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Cs.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Cs.verticalFill,x:ee(t.x)?t.x:l.left,y:ee(t.y)?t.y:l.top,width:ee(t.width)?t.width:l.width,height:ee(t.height)?t.height:l.height}),d=u.x,f=u.y,h=u.width,m=u.height,p=u.syncWithTicks,g=u.horizontalValues,v=u.verticalValues,y=Bpe(),w=zpe();if(!ee(h)||h<=0||!ee(m)||m<=0||!ee(d)||d!==+d||!ee(f)||f!==+f)return null;var S=u.verticalCoordinatesGenerator||nge,b=u.horizontalCoordinatesGenerator||rge,x=u.horizontalPoints,T=u.verticalPoints;if((!x||!x.length)&&ve(b)){var C=g&&g.length,_=b({yAxis:w?rn(rn({},w),{},{ticks:C?g:w.ticks}):void 0,width:s,height:c,offset:l},C?!0:p);Ui(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(us(_),"]")),Array.isArray(_)&&(x=_)}if((!T||!T.length)&&ve(S)){var E=v&&v.length,A=S({xAxis:y?rn(rn({},y),{},{ticks:E?v:y.ticks}):void 0,width:s,height:c,offset:l},E?!0:p);Ui(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(us(A),"]")),Array.isArray(A)&&(T=A)}return I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(Qme,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),I.createElement(Jme,Ia({},u,{offset:l,horizontalPoints:x,xAxis:y,yAxis:w})),I.createElement(Zme,Ia({},u,{offset:l,verticalPoints:T,xAxis:y,yAxis:w})),I.createElement(ege,Ia({},u,{horizontalPoints:x})),I.createElement(tge,Ia({},u,{verticalPoints:T})))}tT.displayName="CartesianGrid";var ige=["type","layout","connectNulls","ref"],oge=["key"];function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function YO(t,e){if(t==null)return{};var n=age(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function age(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){Mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _s(t){return uge(t)||lge(t)||cge(t)||sge()}function sge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(t,e){if(t){if(typeof t=="string")return Hw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hw(t,e)}}function lge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uge(t){if(Array.isArray(t))return Hw(t)}function Hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u$(r.key),r)}}function fge(t,e,n){return e&&QO(t.prototype,e),n&&QO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hge(t,e,n){return e=Pm(e),pge(t,l$()?Reflect.construct(e,n||[],Pm(t).constructor):e.apply(t,n))}function pge(t,e){if(e&&(el(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mge(t)}function mge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l$=function(){return!!t})()}function Pm(t){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pm(t)}function gge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kw(t,e)}function Kw(t,e){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kw(t,e)}function Mr(t,e,n){return e=u$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u$(t){var e=vge(t,"string");return el(e)=="symbol"?e:e+""}function vge(t,e){if(el(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(el(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ol=function(t){function e(){var n;dge(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=hge(this,e,[].concat(i)),Mr(n,"state",{isAnimationFinished:!0,totalLength:0}),Mr(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Mr(n,"getStrokeDasharray",function(a,s,c){var l=c.reduce(function(v,y){return v+y});if(!l)return n.generateSimpleStrokeDasharray(s,a);for(var u=Math.floor(a/l),d=a%l,f=s-a,h=[],m=0,p=0;m<c.length;p+=c[m],++m)if(p+c[m]>d){h=[].concat(_s(c.slice(0,m)),[d-p]);break}var g=h.length%2===0?[0,f]:[f];return[].concat(_s(e.repeat(c,u)),_s(h),g).map(function(v){return"".concat(v,"px")}).join(", ")}),Mr(n,"id",df("recharts-line-")),Mr(n,"pathRef",function(a){n.mainCurve=a}),Mr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Mr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return gge(e,t),fge(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,c=o.yAxis,l=o.layout,u=o.children,d=pr(u,vf);if(!d)return null;var f=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:Gn(p.payload,g)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return I.createElement(vt,h,d.map(function(m){return I.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:a,xAxis:s,yAxis:c,layout:l,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.dot,l=s.points,u=s.dataKey,d=Ce(this.props,!1),f=Ce(c,!0),h=l.map(function(p,g){var v=Dn(Dn(Dn({key:"dot-".concat(g),r:3},d),f),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:l});return e.renderDotItem(c,v)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return I.createElement(vt,Du({className:"recharts-line-dots",key:"dots"},m),h)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,c=s.type,l=s.layout,u=s.connectNulls;s.ref;var d=YO(s,ige),f=Dn(Dn(Dn({},Ce(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:c,layout:l,connectNulls:u});return I.createElement(Tw,Du({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,c=a.strokeDasharray,l=a.isAnimationActive,u=a.animationBegin,d=a.animationDuration,f=a.animationEasing,h=a.animationId,m=a.animateNewValues,p=a.width,g=a.height,v=this.state,y=v.prevPoints,w=v.totalLength;return I.createElement(Qi,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var b=S.t;if(y){var x=y.length/s.length,T=s.map(function(P,L){var j=Math.floor(L*x);if(y[j]){var $=y[j],F=Nr($.x,P.x),q=Nr($.y,P.y);return Dn(Dn({},P),{},{x:F(b),y:q(b)})}if(m){var N=Nr(p*2,P.x),B=Nr(g/2,P.y);return Dn(Dn({},P),{},{x:N(b),y:B(b)})}return Dn(Dn({},P),{},{x:P.x,y:P.y})});return o.renderCurveStatically(T,r,i)}var C=Nr(0,w),_=C(b),E;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});E=o.getStrokeDasharray(_,w,A)}else E=o.generateSimpleStrokeDasharray(w,_);return o.renderCurveStatically(s,r,i,{strokeDasharray:E})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,c=this.state,l=c.prevPoints,u=c.totalLength;return s&&a&&a.length&&(!l&&u>0||!qg(l,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,c=i.className,l=i.xAxis,u=i.yAxis,d=i.top,f=i.left,h=i.width,m=i.height,p=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,w=_e("recharts-line",c),S=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,x=S||b,T=Se(g)?this.id:g,C=(r=Ce(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=C.r,E=_===void 0?3:_,A=C.strokeWidth,P=A===void 0?2:A,L=EK(a)?a:{},j=L.clipDot,$=j===void 0?!0:j,F=E*2+P;return I.createElement(vt,{className:w},S||b?I.createElement("defs",null,I.createElement("clipPath",{id:"clipPath-".concat(T)},I.createElement("rect",{x:S?f:f-h/2,y:b?d:d-m/2,width:S?h:h*2,height:b?m:m*2})),!$&&I.createElement("clipPath",{id:"clipPath-dots-".concat(T)},I.createElement("rect",{x:f-F/2,y:d-F/2,width:h+F,height:m+F}))):null,!y&&this.renderCurve(x,T),this.renderErrorBar(x,T),(y||a)&&this.renderDots(x,$,T),(!p||v)&&Xo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(_s(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(_s(a),_s(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(I.isValidElement(r))o=I.cloneElement(r,i);else if(ve(r))o=r(i);else{var a=i.key,s=YO(i,oge),c=_e("recharts-line-dot",typeof r!="boolean"?r.className:"");o=I.createElement(Vk,Du({key:a},s,{className:c}))}return o}}])}(M.PureComponent);Mr(Ol,"displayName","Line");Mr(Ol,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Tl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Mr(Ol,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,c=t.displayedData,l=t.offset,u=e.layout,d=c.map(function(f,h){var m=Gn(f,a);return u==="horizontal"?{x:NP({axis:n,ticks:i,bandSize:s,entry:f,index:h}),y:Se(m)?null:r.scale(m),value:m,payload:f}:{x:Se(m)?null:n.scale(m),y:NP({axis:r,ticks:o,bandSize:s,entry:f,index:h}),value:m,payload:f}});return Dn({points:d,layout:u},l)});function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(t)}function yge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h$(r.key),r)}}function wge(t,e,n){return e&&bge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sge(t,e,n){return e=Om(e),xge(t,d$()?Reflect.construct(e,n||[],Om(t).constructor):e.apply(t,n))}function xge(t,e){if(e&&(tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kge(t)}function kge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d$=function(){return!!t})()}function Om(t){return Om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Om(t)}function Tge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gw(t,e)}function Gw(t,e){return Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Gw(t,e)}function f$(t,e,n){return e=h$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h$(t){var e=Cge(t,"string");return tl(e)=="symbol"?e:e+""}function Cge(t,e){if(tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yw.apply(this,arguments)}function _ge(t){var e=t.xAxisId,n=Yk(),r=Xk(),i=Q2(e);return i==null?null:M.createElement(Pl,Yw({},i,{className:_e("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Li(a,!0)}}))}var bf=function(t){function e(){return yge(this,e),Sge(this,e,arguments)}return Tge(e,t),wge(e,[{key:"render",value:function(){return M.createElement(_ge,this.props)}}])}(M.Component);f$(bf,"displayName","XAxis");f$(bf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function nl(t){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(t)}function Ege(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g$(r.key),r)}}function Oge(t,e,n){return e&&Pge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Age(t,e,n){return e=Am(e),Rge(t,p$()?Reflect.construct(e,n||[],Am(t).constructor):e.apply(t,n))}function Rge(t,e){if(e&&(nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mge(t)}function Mge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p$=function(){return!!t})()}function Am(t){return Am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Am(t)}function Ige(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xw(t,e)}function Xw(t,e){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xw(t,e)}function m$(t,e,n){return e=g$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g$(t){var e=Nge(t,"string");return nl(e)=="symbol"?e:e+""}function Nge(t,e){if(nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(this,arguments)}var Dge=function(e){var n=e.yAxisId,r=Yk(),i=Xk(),o=J2(n);return o==null?null:M.createElement(Pl,Qw({},o,{className:_e("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return Li(s,!0)}}))},wf=function(t){function e(){return Ege(this,e),Age(this,e,arguments)}return Ige(e,t),Oge(e,[{key:"render",value:function(){return M.createElement(Dge,this.props)}}])}(M.Component);m$(wf,"displayName","YAxis");m$(wf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JO(t){return Fge(t)||$ge(t)||Lge(t)||jge()}function jge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lge(t,e){if(t){if(typeof t=="string")return Jw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(t,e)}}function $ge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fge(t){if(Array.isArray(t))return Jw(t)}function Jw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zw=function(e,n,r,i,o){var a=pr(e,Jk),s=pr(e,Xg),c=[].concat(JO(a),JO(s)),l=pr(e,Jg),u="".concat(i,"Id"),d=i[0],f=n;if(c.length&&(f=c.reduce(function(p,g){if(g.props[u]===r&&li(g.props,"extendDomain")&&ee(g.props[d])){var v=g.props[d];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},f)),l.length){var h="".concat(d,"1"),m="".concat(d,"2");f=l.reduce(function(p,g){if(g.props[u]===r&&li(g.props,"extendDomain")&&ee(g.props[h])&&ee(g.props[m])){var v=g.props[h],y=g.props[m];return[Math.min(p[0],v,y),Math.max(p[1],v,y)]}return p},f)}return o&&o.length&&(f=o.reduce(function(p,g){return ee(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},f)),f},v$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function o(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||c,f),m=n?n+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},s.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,m=new Array(h);f<h;f++)m[f]=d[f].fn;return m},s.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(l,u,d,f,h,m){var p=n?n+l:l;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,y,w;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,h),!0;case 6:return g.fn.call(g.context,u,d,f,h,m),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];g.fn.apply(g.context,y)}else{var S=g.length,b;for(w=0;w<S;w++)switch(g[w].once&&this.removeListener(l,g[w].fn,void 0,!0),v){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,d);break;case 4:g[w].fn.call(g[w].context,u,d,f);break;default:if(!y)for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];g[w].fn.apply(g[w].context,y)}}return!0},s.prototype.on=function(l,u,d){return o(this,l,u,d,!1)},s.prototype.once=function(l,u,d){return o(this,l,u,d,!0)},s.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&a(this,h);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==u||f&&!m[p].once||d&&m[p].context!==d)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:a(this,h)}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(v$);var Uge=v$.exports;const Bge=We(Uge);var Ay=new Bge,Ry="recharts.syncMouseEvents";function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function zge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y$(r.key),r)}}function Wge(t,e,n){return e&&qge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function My(t,e,n){return e=y$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y$(t){var e=Vge(t,"string");return qd(e)=="symbol"?e:e+""}function Vge(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hge=function(){function t(){zge(this,t),My(this,"activeIndex",0),My(this,"coordinateList",[]),My(this,"layout","horizontal")}return Wge(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,c=n.layout,l=c===void 0?null:c,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=l??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,c=this.coordinateList[this.activeIndex].coordinate,l=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+c+l,f=a+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function Kge(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ee(r)&&ee(i))return!0}return!1}function Gge(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function b$(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Kt(e,n,r,i),s=Kt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function Yge(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,c=e.cy,l=e.innerRadius,u=e.outerRadius,d=e.angle,f=Kt(s,c,l,d),h=Kt(s,c,u,d);r=f.x,i=f.y,o=h.x,a=h.y}else return b$(e);return[{x:r,y:i},{x:o,y:a}]}function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){Xge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xge(t,e,n){return e=Qge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qge(t){var e=Jge(t,"string");return Wd(e)=="symbol"?e:e+""}function Jge(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zge(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,c=t.offset,l=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!o||!a||f!=="ScatterChart"&&i!=="axis")return null;var m,p=Tw;if(f==="ScatterChart")m=a,p=Jde;else if(f==="BarChart")m=Gge(d,a,c,u),p=Wk;else if(d==="radial"){var g=b$(a),v=g.cx,y=g.cy,w=g.radius,S=g.startAngle,b=g.endAngle;m={cx:v,cy:y,startAngle:S,endAngle:b,innerRadius:w,outerRadius:w},p=k2}else m={points:Yge(d,a,c)},p=Tw;var x=sh(sh(sh(sh({stroke:"#ccc",pointerEvents:"none"},c),m),Ce(h,!1)),{},{payload:s,payloadIndex:l,className:_e("recharts-tooltip-cursor",h.className)});return M.isValidElement(h)?M.cloneElement(h,x):M.createElement(p,x)}var eve=["item"],tve=["children","className","width","height","style","compact","title","desc"];function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(t)}function Hs(){return Hs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hs.apply(this,arguments)}function eA(t,e){return ive(t)||rve(t,e)||S$(t,e)||nve()}function nve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function ive(t){if(Array.isArray(t))return t}function tA(t,e){if(t==null)return{};var n=ove(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ove(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ave(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x$(r.key),r)}}function cve(t,e,n){return e&&sve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lve(t,e,n){return e=Rm(e),uve(t,w$()?Reflect.construct(e,n||[],Rm(t).constructor):e.apply(t,n))}function uve(t,e){if(e&&(rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dve(t)}function dve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w$=function(){return!!t})()}function Rm(t){return Rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rm(t)}function fve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eS(t,e)}function eS(t,e){return eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eS(t,e)}function il(t){return mve(t)||pve(t)||S$(t)||hve()}function hve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(t,e){if(t){if(typeof t=="string")return tS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tS(t,e)}}function pve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mve(t){if(Array.isArray(t))return tS(t)}function tS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(n),!0).forEach(function(r){le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function le(t,e,n){return e=x$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x$(t){var e=gve(t,"string");return rl(e)=="symbol"?e:e+""}function gve(t,e){if(rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vve={xAxis:["bottom","top"],yAxis:["left","right"]},yve={width:"100%",height:"100%"},k$={x:0,y:0};function ch(t){return t}var bve=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},wve=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return z(z(z({},i),Kt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var c=o.coordinate,l=i.angle;return z(z(z({},i),Kt(i.cx,i.cy,c,l)),{},{angle:l,radius:c})}return k$},Zg=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,c){var l=c.props.data;return l&&l.length?[].concat(il(s),il(l)):s},[]);return a.length>0?a:e&&e.length&&ee(i)&&ee(o)?e.slice(i,o+1):[]};function T$(t){return t==="number"?[0,"auto"]:void 0}var nS=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Zg(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(c,l){var u,d=(u=l.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var h=d===void 0?s:d;f=Rp(h,a.dataKey,i)}else f=d&&d[r]||s[r];return f?[].concat(il(c),[w2(l,f)]):c},[])},rA=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=bve(o,r),s=e.orderedTooltipTicks,c=e.tooltipAxis,l=e.tooltipTicks,u=Ace(a,s,l,c);if(u>=0&&l){var d=l[u]&&l[u].value,f=nS(e,n,u,d),h=wve(r,s,u,o);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},Sve=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,h=v2(u,o);return r.reduce(function(m,p){var g,v=p.type.defaultProps!==void 0?z(z({},p.type.defaultProps),p.props):p.props,y=v.type,w=v.dataKey,S=v.allowDataOverflow,b=v.allowDuplicatedCategory,x=v.scale,T=v.ticks,C=v.includeHidden,_=v[a];if(m[_])return m;var E=Zg(e.data,{graphicalItems:i.filter(function(G){var ae,pe=a in G.props?G.props[a]:(ae=G.type.defaultProps)===null||ae===void 0?void 0:ae[a];return pe===_}),dataStartIndex:c,dataEndIndex:l}),A=E.length,P,L,j;Kge(v.domain,S,y)&&(P=bw(v.domain,null,S),h&&(y==="number"||x!=="auto")&&(j=Iu(E,w,"category")));var $=T$(y);if(!P||P.length===0){var F,q=(F=v.domain)!==null&&F!==void 0?F:$;if(w){if(P=Iu(E,w,y),y==="category"&&h){var N=vK(P);b&&N?(L=P,P=ym(0,A)):b||(P=$P(q,P,p).reduce(function(G,ae){return G.indexOf(ae)>=0?G:[].concat(il(G),[ae])},[]))}else if(y==="category")b?P=P.filter(function(G){return G!==""&&!Se(G)}):P=$P(q,P,p).reduce(function(G,ae){return G.indexOf(ae)>=0||ae===""||Se(ae)?G:[].concat(il(G),[ae])},[]);else if(y==="number"){var B=Dce(E,i.filter(function(G){var ae,pe,Me=a in G.props?G.props[a]:(ae=G.type.defaultProps)===null||ae===void 0?void 0:ae[a],Ke="hide"in G.props?G.props.hide:(pe=G.type.defaultProps)===null||pe===void 0?void 0:pe.hide;return Me===_&&(C||!Ke)}),w,o,u);B&&(P=B)}h&&(y==="number"||x!=="auto")&&(j=Iu(E,w,"category"))}else h?P=ym(0,A):s&&s[_]&&s[_].hasStack&&y==="number"?P=f==="expand"?[0,1]:b2(s[_].stackGroups,c,l):P=g2(E,i.filter(function(G){var ae=a in G.props?G.props[a]:G.type.defaultProps[a],pe="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return ae===_&&(C||!pe)}),y,u,!0);if(y==="number")P=Zw(d,P,_,o,T),q&&(P=bw(q,P,S));else if(y==="category"&&q){var W=q,X=P.every(function(G){return W.indexOf(G)>=0});X&&(P=W)}}return z(z({},m),{},le({},_,z(z({},v),{},{axisType:o,domain:P,categoricalDomain:j,duplicateDomain:L,originalDomain:(g=v.domain)!==null&&g!==void 0?g:$,isCategorical:h,layout:u})))},{})},xve=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,u=e.layout,d=e.children,f=Zg(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:l}),h=f.length,m=v2(u,o),p=-1;return r.reduce(function(g,v){var y=v.type.defaultProps!==void 0?z(z({},v.type.defaultProps),v.props):v.props,w=y[a],S=T$("number");if(!g[w]){p++;var b;return m?b=ym(0,h):s&&s[w]&&s[w].hasStack?(b=b2(s[w].stackGroups,c,l),b=Zw(d,b,w,o)):(b=bw(S,g2(f,r.filter(function(x){var T,C,_=a in x.props?x.props[a]:(T=x.type.defaultProps)===null||T===void 0?void 0:T[a],E="hide"in x.props?x.props.hide:(C=x.type.defaultProps)===null||C===void 0?void 0:C.hide;return _===w&&!E}),"number",u),i.defaultProps.allowDataOverflow),b=Zw(d,b,w,o)),z(z({},g),{},le({},w,z(z({axisType:o},i.defaultProps),{},{hide:!0,orientation:hr(vve,"".concat(o,".").concat(p%2),null),domain:b,originalDomain:S,isCategorical:m,layout:u})))}return g},{})},kve=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,u=e.children,d="".concat(i,"Id"),f=pr(u,o),h={};return f&&f.length?h=Sve(e,{axes:f,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:l}):a&&a.length&&(h=xve(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:l})),h},Tve=function(e){var n=bo(e),r=Li(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:vk(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:cm(n,r)}},iA=function(e){var n=e.children,r=e.defaultShowTooltip,i=$n(n,Gc),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},Cve=function(e){return!e||!e.length?!1:e.some(function(n){var r=Fi(n&&n.type);return r&&r.indexOf("Bar")>=0})},oA=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_ve=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,c=s===void 0?{}:s,l=r.width,u=r.height,d=r.children,f=r.margin||{},h=$n(d,Gc),m=$n(d,uc),p=Object.keys(c).reduce(function(b,x){var T=c[x],C=T.orientation;return!T.mirror&&!T.hide?z(z({},b),{},le({},C,b[C]+T.width)):b},{left:f.left||0,right:f.right||0}),g=Object.keys(a).reduce(function(b,x){var T=a[x],C=T.orientation;return!T.mirror&&!T.hide?z(z({},b),{},le({},C,hr(b,"".concat(C))+T.height)):b},{top:f.top||0,bottom:f.bottom||0}),v=z(z({},g),p),y=v.bottom;h&&(v.bottom+=h.props.height||Gc.defaultProps.height),m&&n&&(v=Ice(v,i,r,n));var w=l-v.left-v.right,S=u-v.top-v.bottom;return z(z({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(S,0)})},Eve=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Pve=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,c=e.axisComponents,l=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,f=function(v,y){var w=y.graphicalItems,S=y.stackGroups,b=y.offset,x=y.updateId,T=y.dataStartIndex,C=y.dataEndIndex,_=v.barSize,E=v.layout,A=v.barGap,P=v.barCategoryGap,L=v.maxBarSize,j=oA(E),$=j.numericAxisName,F=j.cateAxisName,q=Cve(w),N=[];return w.forEach(function(B,W){var X=Zg(v.data,{graphicalItems:[B],dataStartIndex:T,dataEndIndex:C}),G=B.type.defaultProps!==void 0?z(z({},B.type.defaultProps),B.props):B.props,ae=G.dataKey,pe=G.maxBarSize,Me=G["".concat($,"Id")],Ke=G["".concat(F,"Id")],Qn={},yn=c.reduce(function(fa,ha){var tv=y["".concat(ha.axisType,"Map")],nT=G["".concat(ha.axisType,"Id")];tv&&tv[nT]||ha.axisType==="zAxis"||ls();var rT=tv[nT];return z(z({},fa),{},le(le({},ha.axisType,rT),"".concat(ha.axisType,"Ticks"),Li(rT)))},Qn),re=yn[F],de=yn["".concat(F,"Ticks")],ge=S&&S[Me]&&S[Me].hasStack&&Kce(B,S[Me].stackGroups),Y=Fi(B.type).indexOf("Bar")>=0,ot=cm(re,de),Ee=[],Ct=q&&Rce({barSize:_,stackGroups:S,totalSize:Eve(yn,F)});if(Y){var _t,bn,ro=Se(pe)?L:pe,bs=(_t=(bn=cm(re,de,!0))!==null&&bn!==void 0?bn:ro)!==null&&_t!==void 0?_t:0;Ee=Mce({barGap:A,barCategoryGap:P,bandSize:bs!==ot?bs:ot,sizeList:Ct[Ke],maxBarSize:ro}),bs!==ot&&(Ee=Ee.map(function(fa){return z(z({},fa),{},{position:z(z({},fa.position),{},{offset:fa.position.offset-bs/2})})}))}var Sf=B&&B.type&&B.type.getComposedData;Sf&&N.push({props:z(z({},Sf(z(z({},yn),{},{displayedData:X,props:v,dataKey:ae,item:B,bandSize:ot,barPosition:Ee,offset:b,stackedData:ge,layout:E,dataStartIndex:T,dataEndIndex:C}))),{},le(le(le({key:B.key||"item-".concat(W)},$,yn[$]),F,yn[F]),"animationId",x)),childIndex:AK(B,v.children),item:B})}),N},h=function(v,y){var w=v.props,S=v.dataStartIndex,b=v.dataEndIndex,x=v.updateId;if(!R_({props:w}))return null;var T=w.children,C=w.layout,_=w.stackOffset,E=w.data,A=w.reverseStackOrder,P=oA(C),L=P.numericAxisName,j=P.cateAxisName,$=pr(T,r),F=Wce(E,$,"".concat(L,"Id"),"".concat(j,"Id"),_,A),q=c.reduce(function(G,ae){var pe="".concat(ae.axisType,"Map");return z(z({},G),{},le({},pe,kve(w,z(z({},ae),{},{graphicalItems:$,stackGroups:ae.axisType===L&&F,dataStartIndex:S,dataEndIndex:b}))))},{}),N=_ve(z(z({},q),{},{props:w,graphicalItems:$}),y==null?void 0:y.legendBBox);Object.keys(q).forEach(function(G){q[G]=u(w,q[G],N,G.replace("Map",""),n)});var B=q["".concat(j,"Map")],W=Tve(B),X=f(w,z(z({},q),{},{dataStartIndex:S,dataEndIndex:b,updateId:x,graphicalItems:$,stackGroups:F,offset:N}));return z(z({formattedGraphicalItems:X,graphicalItems:$,offset:N,stackGroups:F},W),q)},m=function(g){function v(y){var w,S,b;return ave(this,v),b=lve(this,v,[y]),le(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),le(b,"accessibilityManager",new Hge),le(b,"handleLegendBBoxUpdate",function(x){if(x){var T=b.state,C=T.dataStartIndex,_=T.dataEndIndex,E=T.updateId;b.setState(z({legendBBox:x},h({props:b.props,dataStartIndex:C,dataEndIndex:_,updateId:E},z(z({},b.state),{},{legendBBox:x}))))}}),le(b,"handleReceiveSyncEvent",function(x,T,C){if(b.props.syncId===x){if(C===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(T)}}),le(b,"handleBrushChange",function(x){var T=x.startIndex,C=x.endIndex;if(T!==b.state.dataStartIndex||C!==b.state.dataEndIndex){var _=b.state.updateId;b.setState(function(){return z({dataStartIndex:T,dataEndIndex:C},h({props:b.props,dataStartIndex:T,dataEndIndex:C,updateId:_},b.state))}),b.triggerSyncEvent({dataStartIndex:T,dataEndIndex:C})}}),le(b,"handleMouseEnter",function(x){var T=b.getMouseInfo(x);if(T){var C=z(z({},T),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var _=b.props.onMouseEnter;ve(_)&&_(C,x)}}),le(b,"triggeredAfterMouseMove",function(x){var T=b.getMouseInfo(x),C=T?z(z({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var _=b.props.onMouseMove;ve(_)&&_(C,x)}),le(b,"handleItemMouseEnter",function(x){b.setState(function(){return{isTooltipActive:!0,activeItem:x,activePayload:x.tooltipPayload,activeCoordinate:x.tooltipPosition||{x:x.cx,y:x.cy}}})}),le(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),le(b,"handleMouseMove",function(x){x.persist(),b.throttleTriggeredAfterMouseMove(x)}),le(b,"handleMouseLeave",function(x){b.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};b.setState(T),b.triggerSyncEvent(T);var C=b.props.onMouseLeave;ve(C)&&C(T,x)}),le(b,"handleOuterEvent",function(x){var T=OK(x),C=hr(b.props,"".concat(T));if(T&&ve(C)){var _,E;/.*touch.*/i.test(T)?E=b.getMouseInfo(x.changedTouches[0]):E=b.getMouseInfo(x),C((_=E)!==null&&_!==void 0?_:{},x)}}),le(b,"handleClick",function(x){var T=b.getMouseInfo(x);if(T){var C=z(z({},T),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var _=b.props.onClick;ve(_)&&_(C,x)}}),le(b,"handleMouseDown",function(x){var T=b.props.onMouseDown;if(ve(T)){var C=b.getMouseInfo(x);T(C,x)}}),le(b,"handleMouseUp",function(x){var T=b.props.onMouseUp;if(ve(T)){var C=b.getMouseInfo(x);T(C,x)}}),le(b,"handleTouchMove",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(x.changedTouches[0])}),le(b,"handleTouchStart",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&b.handleMouseDown(x.changedTouches[0])}),le(b,"handleTouchEnd",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&b.handleMouseUp(x.changedTouches[0])}),le(b,"handleDoubleClick",function(x){var T=b.props.onDoubleClick;if(ve(T)){var C=b.getMouseInfo(x);T(C,x)}}),le(b,"handleContextMenu",function(x){var T=b.props.onContextMenu;if(ve(T)){var C=b.getMouseInfo(x);T(C,x)}}),le(b,"triggerSyncEvent",function(x){b.props.syncId!==void 0&&Ay.emit(Ry,b.props.syncId,x,b.eventEmitterSymbol)}),le(b,"applySyncEvent",function(x){var T=b.props,C=T.layout,_=T.syncMethod,E=b.state.updateId,A=x.dataStartIndex,P=x.dataEndIndex;if(x.dataStartIndex!==void 0||x.dataEndIndex!==void 0)b.setState(z({dataStartIndex:A,dataEndIndex:P},h({props:b.props,dataStartIndex:A,dataEndIndex:P,updateId:E},b.state)));else if(x.activeTooltipIndex!==void 0){var L=x.chartX,j=x.chartY,$=x.activeTooltipIndex,F=b.state,q=F.offset,N=F.tooltipTicks;if(!q)return;if(typeof _=="function")$=_(N,x);else if(_==="value"){$=-1;for(var B=0;B<N.length;B++)if(N[B].value===x.activeLabel){$=B;break}}var W=z(z({},q),{},{x:q.left,y:q.top}),X=Math.min(L,W.x+W.width),G=Math.min(j,W.y+W.height),ae=N[$]&&N[$].value,pe=nS(b.state,b.props.data,$),Me=N[$]?{x:C==="horizontal"?N[$].coordinate:X,y:C==="horizontal"?G:N[$].coordinate}:k$;b.setState(z(z({},x),{},{activeLabel:ae,activeCoordinate:Me,activePayload:pe,activeTooltipIndex:$}))}else b.setState(x)}),le(b,"renderCursor",function(x){var T,C=b.state,_=C.isTooltipActive,E=C.activeCoordinate,A=C.activePayload,P=C.offset,L=C.activeTooltipIndex,j=C.tooltipAxisBandSize,$=b.getTooltipEventType(),F=(T=x.props.active)!==null&&T!==void 0?T:_,q=b.props.layout,N=x.key||"_recharts-cursor";return I.createElement(Zge,{key:N,activeCoordinate:E,activePayload:A,activeTooltipIndex:L,chartName:n,element:x,isActive:F,layout:q,offset:P,tooltipAxisBandSize:j,tooltipEventType:$})}),le(b,"renderPolarAxis",function(x,T,C){var _=hr(x,"type.axisType"),E=hr(b.state,"".concat(_,"Map")),A=x.type.defaultProps,P=A!==void 0?z(z({},A),x.props):x.props,L=E&&E[P["".concat(_,"Id")]];return M.cloneElement(x,z(z({},L),{},{className:_e(_,L.className),key:x.key||"".concat(T,"-").concat(C),ticks:Li(L,!0)}))}),le(b,"renderPolarGrid",function(x){var T=x.props,C=T.radialLines,_=T.polarAngles,E=T.polarRadius,A=b.state,P=A.radiusAxisMap,L=A.angleAxisMap,j=bo(P),$=bo(L),F=$.cx,q=$.cy,N=$.innerRadius,B=$.outerRadius;return M.cloneElement(x,{polarAngles:Array.isArray(_)?_:Li($,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(E)?E:Li(j,!0).map(function(W){return W.coordinate}),cx:F,cy:q,innerRadius:N,outerRadius:B,key:x.key||"polar-grid",radialLines:C})}),le(b,"renderLegend",function(){var x=b.state.formattedGraphicalItems,T=b.props,C=T.children,_=T.width,E=T.height,A=b.props.margin||{},P=_-(A.left||0)-(A.right||0),L=p2({children:C,formattedGraphicalItems:x,legendWidth:P,legendContent:l});if(!L)return null;var j=L.item,$=tA(L,eve);return M.cloneElement(j,z(z({},$),{},{chartWidth:_,chartHeight:E,margin:A,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),le(b,"renderTooltip",function(){var x,T=b.props,C=T.children,_=T.accessibilityLayer,E=$n(C,Ar);if(!E)return null;var A=b.state,P=A.isTooltipActive,L=A.activeCoordinate,j=A.activePayload,$=A.activeLabel,F=A.offset,q=(x=E.props.active)!==null&&x!==void 0?x:P;return M.cloneElement(E,{viewBox:z(z({},F),{},{x:F.left,y:F.top}),active:q,label:$,payload:q?j:[],coordinate:L,accessibilityLayer:_})}),le(b,"renderBrush",function(x){var T=b.props,C=T.margin,_=T.data,E=b.state,A=E.offset,P=E.dataStartIndex,L=E.dataEndIndex,j=E.updateId;return M.cloneElement(x,{key:x.key||"_recharts-brush",onChange:rh(b.handleBrushChange,x.props.onChange),data:_,x:ee(x.props.x)?x.props.x:A.left,y:ee(x.props.y)?x.props.y:A.top+A.height+A.brushBottom-(C.bottom||0),width:ee(x.props.width)?x.props.width:A.width,startIndex:P,endIndex:L,updateId:"brush-".concat(j)})}),le(b,"renderReferenceElement",function(x,T,C){if(!x)return null;var _=b,E=_.clipPathId,A=b.state,P=A.xAxisMap,L=A.yAxisMap,j=A.offset,$=x.type.defaultProps||{},F=x.props,q=F.xAxisId,N=q===void 0?$.xAxisId:q,B=F.yAxisId,W=B===void 0?$.yAxisId:B;return M.cloneElement(x,{key:x.key||"".concat(T,"-").concat(C),xAxis:P[N],yAxis:L[W],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:E})}),le(b,"renderActivePoints",function(x){var T=x.item,C=x.activePoint,_=x.basePoint,E=x.childIndex,A=x.isRange,P=[],L=T.props.key,j=T.item.type.defaultProps!==void 0?z(z({},T.item.type.defaultProps),T.item.props):T.item.props,$=j.activeDot,F=j.dataKey,q=z(z({index:E,dataKey:F,cx:C.x,cy:C.y,r:4,fill:qk(T.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Ce($,!1)),Mp($));return P.push(v.renderActiveDot($,q,"".concat(L,"-activePoint-").concat(E))),_?P.push(v.renderActiveDot($,z(z({},q),{},{cx:_.x,cy:_.y}),"".concat(L,"-basePoint-").concat(E))):A&&P.push(null),P}),le(b,"renderGraphicChild",function(x,T,C){var _=b.filterFormatItem(x,T,C);if(!_)return null;var E=b.getTooltipEventType(),A=b.state,P=A.isTooltipActive,L=A.tooltipAxis,j=A.activeTooltipIndex,$=A.activeLabel,F=b.props.children,q=$n(F,Ar),N=_.props,B=N.points,W=N.isRange,X=N.baseLine,G=_.item.type.defaultProps!==void 0?z(z({},_.item.type.defaultProps),_.item.props):_.item.props,ae=G.activeDot,pe=G.hide,Me=G.activeBar,Ke=G.activeShape,Qn=!!(!pe&&P&&q&&(ae||Me||Ke)),yn={};E!=="axis"&&q&&q.props.trigger==="click"?yn={onClick:rh(b.handleItemMouseEnter,x.props.onClick)}:E!=="axis"&&(yn={onMouseLeave:rh(b.handleItemMouseLeave,x.props.onMouseLeave),onMouseEnter:rh(b.handleItemMouseEnter,x.props.onMouseEnter)});var re=M.cloneElement(x,z(z({},_.props),yn));function de(ha){return typeof L.dataKey=="function"?L.dataKey(ha.payload):null}if(Qn)if(j>=0){var ge,Y;if(L.dataKey&&!L.allowDuplicatedCategory){var ot=typeof L.dataKey=="function"?de:"payload.".concat(L.dataKey.toString());ge=Rp(B,ot,$),Y=W&&X&&Rp(X,ot,$)}else ge=B==null?void 0:B[j],Y=W&&X&&X[j];if(Ke||Me){var Ee=x.props.activeIndex!==void 0?x.props.activeIndex:j;return[M.cloneElement(x,z(z(z({},_.props),yn),{},{activeIndex:Ee})),null,null]}if(!Se(ge))return[re].concat(il(b.renderActivePoints({item:_,activePoint:ge,basePoint:Y,childIndex:j,isRange:W})))}else{var Ct,_t=(Ct=b.getItemByXY(b.state.activeCoordinate))!==null&&Ct!==void 0?Ct:{graphicalItem:re},bn=_t.graphicalItem,ro=bn.item,bs=ro===void 0?x:ro,Sf=bn.childIndex,fa=z(z(z({},_.props),yn),{},{activeIndex:Sf});return[M.cloneElement(bs,fa),null,null]}return W?[re,null,null]:[re,null]}),le(b,"renderCustomized",function(x,T,C){return M.cloneElement(x,z(z({key:"recharts-customized-".concat(C)},b.props),b.state))}),le(b,"renderMap",{CartesianGrid:{handler:ch,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:ch},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:ch},YAxis:{handler:ch},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:df("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=hL(b.triggeredAfterMouseMove,(S=y.throttleDelay)!==null&&S!==void 0?S:1e3/60),b.state={},b}return fve(v,g),cve(v,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,b=w.data,x=w.height,T=w.layout,C=$n(S,Ar);if(C){var _=C.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,A=nS(this.state,b,_,E),P=this.state.tooltipTicks[_].coordinate,L=(this.state.offset.top+x)/2,j=T==="horizontal",$=j?{x:P,y:L}:{y:P,x:L},F=this.state.formattedGraphicalItems.find(function(N){var B=N.item;return B.type.name==="Scatter"});F&&($=z(z({},$),F.props.points[_].tooltipPosition),A=F.props.points[_].tooltipPayload);var q={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:E,activePayload:A,activeCoordinate:$};this.setState(q),this.renderCursor(C),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var b,x;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0}})}return null}},{key:"componentDidUpdate",value:function(w){Nb([$n(w.children,Ar)],[$n(this.props.children,Ar)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=$n(this.props.children,Ar);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return s.indexOf(S)>=0?S:o}return o}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,b=S.getBoundingClientRect(),x=nie(b),T={chartX:Math.round(w.pageX-x.left),chartY:Math.round(w.pageY-x.top)},C=b.width/S.offsetWidth||1,_=this.inRange(T.chartX,T.chartY,C);if(!_)return null;var E=this.state,A=E.xAxisMap,P=E.yAxisMap,L=this.getTooltipEventType(),j=rA(this.state,this.props.data,this.props.layout,_);if(L!=="axis"&&A&&P){var $=bo(A).scale,F=bo(P).scale,q=$&&$.invert?$.invert(T.chartX):null,N=F&&F.invert?F.invert(T.chartY):null;return z(z({},T),{},{xValue:q,yValue:N},j)}return j?z(z({},T),j):null}},{key:"inRange",value:function(w,S){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=this.props.layout,T=w/b,C=S/b;if(x==="horizontal"||x==="vertical"){var _=this.state.offset,E=T>=_.left&&T<=_.left+_.width&&C>=_.top&&C<=_.top+_.height;return E?{x:T,y:C}:null}var A=this.state,P=A.angleAxisMap,L=A.radiusAxisMap;if(P&&L){var j=bo(P);return BP({x:T,y:C},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),b=$n(w,Ar),x={};b&&S==="axis"&&(b.props.trigger==="click"?x={onClick:this.handleClick}:x={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=Mp(this.props,this.handleOuterEvent);return z(z({},T),x)}},{key:"addListener",value:function(){Ay.on(Ry,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Ay.removeListener(Ry,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,b){for(var x=this.state.formattedGraphicalItems,T=0,C=x.length;T<C;T++){var _=x[T];if(_.item===w||_.props.key===w.key||S===Fi(_.item.type)&&b===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,b=S.left,x=S.top,T=S.height,C=S.width;return I.createElement("defs",null,I.createElement("clipPath",{id:w},I.createElement("rect",{x:b,y:x,height:T,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,b){var x=eA(b,2),T=x[0],C=x[1];return z(z({},S),{},le({},T,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,b){var x=eA(b,2),T=x[0],C=x[1];return z(z({},S),{},le({},T,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,b=S.formattedGraphicalItems,x=S.activeItem;if(b&&b.length)for(var T=0,C=b.length;T<C;T++){var _=b[T],E=_.props,A=_.item,P=A.type.defaultProps!==void 0?z(z({},A.type.defaultProps),A.props):A.props,L=Fi(A.type);if(L==="Bar"){var j=(E.data||[]).find(function(N){return zde(w,N)});if(j)return{graphicalItem:_,payload:j}}else if(L==="RadialBar"){var $=(E.data||[]).find(function(N){return BP(w,N)});if($)return{graphicalItem:_,payload:$}}else if(Hg(_,x)||Kg(_,x)||$d(_,x)){var F=Vfe({graphicalItem:_,activeTooltipItem:x,itemData:P.data}),q=P.activeIndex===void 0?F:P.activeIndex;return{graphicalItem:z(z({},_),{},{childIndex:q}),payload:$d(_,x)?P.data[F]:_.props.data[F]}}}return null}},{key:"render",value:function(){var w=this;if(!R_(this))return null;var S=this.props,b=S.children,x=S.className,T=S.width,C=S.height,_=S.style,E=S.compact,A=S.title,P=S.desc,L=tA(S,tve),j=Ce(L,!1);if(E)return I.createElement(jO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},I.createElement(jb,Hs({},j,{width:T,height:C,title:A,desc:P}),this.renderClipPath(),I_(b,this.renderMap)));if(this.props.accessibilityLayer){var $,F;j.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,j.role=(F=this.props.role)!==null&&F!==void 0?F:"application",j.onKeyDown=function(N){w.accessibilityManager.keyboardEvent(N)},j.onFocus=function(){w.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return I.createElement(jO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},I.createElement("div",Hs({className:_e("recharts-wrapper",x),style:z({position:"relative",cursor:"default",width:T,height:C},_)},q,{ref:function(B){w.container=B}}),I.createElement(jb,Hs({},j,{width:T,height:C,title:A,desc:P,style:yve}),this.renderClipPath(),I_(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(M.Component);le(m,"displayName",n),le(m,"defaultProps",z({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),le(m,"getDerivedStateFromProps",function(g,v){var y=g.dataKey,w=g.data,S=g.children,b=g.width,x=g.height,T=g.layout,C=g.stackOffset,_=g.margin,E=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var P=iA(g);return z(z(z({},P),{},{updateId:0},h(z(z({props:g},P),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:w,prevWidth:b,prevHeight:x,prevLayout:T,prevStackOffset:C,prevMargin:_,prevChildren:S})}if(y!==v.prevDataKey||w!==v.prevData||b!==v.prevWidth||x!==v.prevHeight||T!==v.prevLayout||C!==v.prevStackOffset||!lc(_,v.prevMargin)){var L=iA(g),j={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},$=z(z({},rA(v,w,T)),{},{updateId:v.updateId+1}),F=z(z(z({},L),j),$);return z(z(z({},F),h(z({props:g},F),v)),{},{prevDataKey:y,prevData:w,prevWidth:b,prevHeight:x,prevLayout:T,prevStackOffset:C,prevMargin:_,prevChildren:S})}if(!Nb(S,v.prevChildren)){var q,N,B,W,X=$n(S,Gc),G=X&&(q=(N=X.props)===null||N===void 0?void 0:N.startIndex)!==null&&q!==void 0?q:E,ae=X&&(B=(W=X.props)===null||W===void 0?void 0:W.endIndex)!==null&&B!==void 0?B:A,pe=G!==E||ae!==A,Me=!Se(w),Ke=Me&&!pe?v.updateId:v.updateId+1;return z(z({updateId:Ke},h(z(z({props:g},v),{},{updateId:Ke,dataStartIndex:G,dataEndIndex:ae}),v)),{},{prevChildren:S,dataStartIndex:G,dataEndIndex:ae})}return null}),le(m,"renderActiveDot",function(g,v,y){var w;return M.isValidElement(g)?w=M.cloneElement(g,v):ve(g)?w=g(v):w=I.createElement(Vk,v),I.createElement(vt,{className:"recharts-active-dot",key:y},w)});var p=M.forwardRef(function(v,y){return I.createElement(m,Hs({},v,{ref:y}))});return p.displayName=m.displayName,p},C$=Pve({chartName:"LineChart",GraphicalChild:Ol,axisComponents:[{axisType:"xAxis",AxisComp:bf},{axisType:"yAxis",AxisComp:wf}],formatAxisMap:gpe});function wr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ds(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const _$=6048e5,Ove=864e5,E$=6e4,P$=36e5;let Ave={};function ev(){return Ave}function Vd(t,e){var s,c,l,u;const n=ev(),r=(e==null?void 0:e.weekStartsOn)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=wr(t),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Mm(t){return Vd(t,{weekStartsOn:1})}function O$(t){const e=wr(t),n=e.getFullYear(),r=ds(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Mm(r),o=ds(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Mm(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function aA(t){const e=wr(t);return e.setHours(0,0,0,0),e}function sA(t){const e=wr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Rve(t,e){const n=aA(t),r=aA(e),i=+n-sA(n),o=+r-sA(r);return Math.round((i-o)/Ove)}function Mve(t){const e=O$(t),n=ds(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Mm(n)}function Ive(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Nve(t){if(!Ive(t)&&typeof t!="number")return!1;const e=wr(t);return!isNaN(Number(e))}function Dve(t){const e=wr(t),n=ds(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const jve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lve=(t,e,n)=>{let r;const i=jve[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Iy(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $ve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Uve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bve={date:Iy({formats:$ve,defaultWidth:"full"}),time:Iy({formats:Fve,defaultWidth:"full"}),dateTime:Iy({formats:Uve,defaultWidth:"full"})},zve={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qve=(t,e,n,r)=>zve[t];function iu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const Wve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vve={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kve={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xve=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Qve={ordinalNumber:Xve,era:iu({values:Wve,defaultWidth:"wide"}),quarter:iu({values:Vve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:iu({values:Hve,defaultWidth:"wide"}),day:iu({values:Kve,defaultWidth:"wide"}),dayPeriod:iu({values:Gve,defaultWidth:"wide",formattingValues:Yve,defaultFormattingWidth:"wide"})};function ou(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(s)?Zve(s,d=>d.test(a)):Jve(s,d=>d.test(a));let l;l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(a.length);return{value:l,rest:u}}}function Jve(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Zve(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function eye(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const tye=/^(\d+)(th|st|nd|rd)?/i,nye=/\d+/i,rye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iye={any:[/^b/i,/^(a|c)/i]},oye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aye={any:[/1/i,/2/i,/3/i,/4/i]},sye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hye={ordinalNumber:eye({matchPattern:tye,parsePattern:nye,valueCallback:t=>parseInt(t,10)}),era:ou({matchPatterns:rye,defaultMatchWidth:"wide",parsePatterns:iye,defaultParseWidth:"any"}),quarter:ou({matchPatterns:oye,defaultMatchWidth:"wide",parsePatterns:aye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ou({matchPatterns:sye,defaultMatchWidth:"wide",parsePatterns:cye,defaultParseWidth:"any"}),day:ou({matchPatterns:lye,defaultMatchWidth:"wide",parsePatterns:uye,defaultParseWidth:"any"}),dayPeriod:ou({matchPatterns:dye,defaultMatchWidth:"any",parsePatterns:fye,defaultParseWidth:"any"})},pye={code:"en-US",formatDistance:Lve,formatLong:Bve,formatRelative:qve,localize:Qve,match:hye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mye(t){const e=wr(t);return Rve(e,Dve(e))+1}function gye(t){const e=wr(t),n=+Mm(e)-+Mve(e);return Math.round(n/_$)+1}function A$(t,e){var u,d,f,h;const n=wr(t),r=n.getFullYear(),i=ev(),o=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(f=i.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,a=ds(t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const s=Vd(a,e),c=ds(t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const l=Vd(c,e);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function vye(t,e){var s,c,l,u;const n=ev(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??1,i=A$(t,e),o=ds(t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Vd(o,e)}function yye(t,e){const n=wr(t),r=+Vd(n,e)-+vye(n,e);return Math.round(r/_$)+1}function De(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const lo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return De(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):De(n+1,2)},d(t,e){return De(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return De(t.getHours()%12||12,e.length)},H(t,e){return De(t.getHours(),e.length)},m(t,e){return De(t.getMinutes(),e.length)},s(t,e){return De(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return De(i,e.length)}},Es={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cA={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return lo.y(t,e)},Y:function(t,e,n,r){const i=A$(t,r),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return De(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):De(o,e.length)},R:function(t,e){const n=O$(t);return De(n,e.length)},u:function(t,e){const n=t.getFullYear();return De(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return De(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return De(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return lo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return De(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=yye(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):De(i,e.length)},I:function(t,e,n){const r=gye(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):De(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):lo.d(t,e)},D:function(t,e,n){const r=mye(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):De(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return De(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return De(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return De(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Es.noon:r===0?i=Es.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Es.evening:r>=12?i=Es.afternoon:r>=4?i=Es.morning:i=Es.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return lo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):lo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):De(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):De(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):lo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):lo.s(t,e)},S:function(t,e){return lo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return uA(r);case"XXXX":case"XX":return Ta(r);case"XXXXX":case"XXX":default:return Ta(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return uA(r);case"xxxx":case"xx":return Ta(r);case"xxxxx":case"xxx":default:return Ta(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lA(r,":");case"OOOO":default:return"GMT"+Ta(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lA(r,":");case"zzzz":default:return"GMT"+Ta(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return De(r,e.length)},T:function(t,e,n){const r=t.getTime();return De(r,e.length)}};function lA(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+De(o,2)}function uA(t,e){return t%60===0?(t>0?"-":"+")+De(Math.abs(t)/60,2):Ta(t,e)}function Ta(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=De(Math.trunc(r/60),2),o=De(r%60,2);return n+i+e+o}const dA=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},R$=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bye=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return dA(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",dA(r,e)).replace("{{time}}",R$(i,e))},wye={p:R$,P:bye},Sye=/^D+$/,xye=/^Y+$/,kye=["D","DD","YY","YYYY"];function Tye(t){return Sye.test(t)}function Cye(t){return xye.test(t)}function _ye(t,e,n){const r=Eye(t,e,n);if(console.warn(r),kye.includes(t))throw new RangeError(r)}function Eye(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Pye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aye=/^'([^]*?)'?$/,Rye=/''/g,Mye=/[a-zA-Z]/;function cr(t,e,n){var u,d,f,h;const r=ev(),i=r.locale??pye,o=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=r.weekStartsOn??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,s=wr(t);if(!Nve(s))throw new RangeError("Invalid time value");let c=e.match(Oye).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=wye[p];return g(m,i.formatLong)}return m}).join("").match(Pye).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Iye(m)};if(cA[p])return{isToken:!0,value:m};if(p.match(Mye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(c=i.localize.preprocessor(s,c));const l={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(Cye(p)||Tye(p))&&_ye(p,e,String(t));const g=cA[p[0]];return g(s,p,i.localize,l)}).join("")}function Iye(t){const e=t.match(Aye);return e?e[1].replace(Rye,"'"):t}function Nye(t){return+wr(t)<Date.now()}function qn(t,e){const r=$ye(t);let i;if(r.date){const c=Fye(r.date,2);i=Uye(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const o=i.getTime();let a=0,s;if(r.time&&(a=Bye(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(s=zye(r.timezone),isNaN(s))return new Date(NaN)}else{const c=new Date(o+a),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(o+a+s)}const lh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Dye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Lye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $ye(t){const e={},n=t.split(lh.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],lh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(lh.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=lh.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Fye(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function Uye(t,e){if(e===null)return new Date(NaN);const n=t.match(Dye);if(!n)return new Date(NaN);const r=!!n[4],i=au(n[1]),o=au(n[2])-1,a=au(n[3]),s=au(n[4]),c=au(n[5])-1;if(r)return Kye(e,s,c)?qye(e,s,c):new Date(NaN);{const l=new Date(0);return!Vye(e,o,a)||!Hye(e,i)?new Date(NaN):(l.setUTCFullYear(e,o,Math.max(i,a)),l)}}function au(t){return t?parseInt(t):1}function Bye(t){const e=t.match(jye);if(!e)return NaN;const n=Ny(e[1]),r=Ny(e[2]),i=Ny(e[3]);return Gye(n,r,i)?n*P$+r*E$+i*1e3:NaN}function Ny(t){return t&&parseFloat(t.replace(",","."))||0}function zye(t){if(t==="Z")return 0;const e=t.match(Lye);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Yye(r,i)?n*(r*P$+i*E$):NaN}function qye(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const Wye=[31,null,31,30,31,30,31,31,30,31,30,31];function M$(t){return t%400===0||t%4===0&&t%100!==0}function Vye(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Wye[e]||(M$(t)?29:28))}function Hye(t,e){return e>=1&&e<=(M$(t)?366:365)}function Kye(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Gye(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Yye(t,e){return e>=0&&e<=59}function Xye(){var m;const t=ll(),{data:e,isLoading:n,error:r,refetch:i}=Fn({queryKey:["dashboard","overview"],queryFn:()=>Gf.getOverview()}),{data:o,isLoading:a,error:s}=Fn({queryKey:["dashboard","critical-stores"],queryFn:()=>Gf.getCriticalStores(null,10)}),{data:c,isLoading:l}=Fn({queryKey:["dashboard","kpi-trends"],queryFn:()=>Gf.getKpiTrends(7)}),{data:u,isLoading:d}=Fn({queryKey:["dashboard","top-issues"],queryFn:()=>Gf.getTopIssues(null,5)}),f=M.useCallback(()=>{t.invalidateQueries({queryKey:["dashboard"]})},[t]);if(mx(f),SI(f),n)return k.jsx(ld,{message:"Loading dashboard..."});if(r)return k.jsx(fg,{error:r,retry:i});const h=(e==null?void 0:e.data)||{};return k.jsxs("div",{className:"space-y-6",children:[k.jsx("div",{className:"flex items-start justify-between",children:k.jsxs("div",{children:[k.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),k.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[k.jsx("p",{className:"text-muted-foreground",children:"Real-time store health monitoring and alerts"}),k.jsx(LV,{redStores:h.red_stores||0,yellowStores:h.yellow_stores||0,greenStores:h.green_stores||0,totalStores:h.total_stores||0})]})]})}),k.jsx(jV,{dashboardData:h}),k.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[k.jsxs(mt,{children:[k.jsxs(Un,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[k.jsx(Bn,{className:"text-sm font-medium",children:"Total Stores"}),k.jsx(aI,{className:"h-4 w-4 text-muted-foreground"})]}),k.jsxs(gt,{children:[k.jsx("div",{className:"text-2xl font-bold",children:h.total_stores||0}),k.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active locations"})]})]}),k.jsxs(mt,{children:[k.jsxs(Un,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[k.jsx(Bn,{className:"text-sm font-medium",children:"Green Stores"}),k.jsx("div",{className:"h-3 w-3 rounded-full bg-success"})]}),k.jsxs(gt,{children:[k.jsx("div",{className:"text-2xl font-bold text-success",children:h.green_stores||0}),k.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Performing well"})]})]}),k.jsxs(mt,{children:[k.jsxs(Un,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[k.jsx(Bn,{className:"text-sm font-medium",children:"Yellow/Red Stores"}),k.jsx(Mc,{className:"h-4 w-4 text-warning"})]}),k.jsxs(gt,{children:[k.jsx("div",{className:"text-2xl font-bold text-danger",children:(h.yellow_stores||0)+(h.red_stores||0)}),k.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.yellow_stores||0," yellow, ",h.red_stores||0," red"]})]})]}),k.jsxs(mt,{children:[k.jsxs(Un,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[k.jsx(Bn,{className:"text-sm font-medium",children:"Avg Health Score"}),k.jsx(nI,{className:"h-4 w-4 text-muted-foreground"})]}),k.jsxs(gt,{children:[k.jsx("div",{className:"text-2xl font-bold",children:((m=h.average_health_score)==null?void 0:m.toFixed(1))||"0.0"}),k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:k.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${h.average_health_score||0}%`}})})]})]})]}),(o==null?void 0:o.data)&&o.data.length>0&&k.jsxs("div",{children:[k.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Critical Stores"}),k.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.data.map(p=>k.jsx(DV,{store:p.store,snapshot:p},p.id))})]}),k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsx(Bn,{children:"KPI Trends (Last 7 Days)"})}),k.jsx(gt,{children:l?k.jsx(ld,{message:"Loading trends..."}):c!=null&&c.data&&c.data.length>0?k.jsx(pL,{width:"100%",height:300,children:k.jsxs(C$,{data:c.data,children:[k.jsx(tT,{strokeDasharray:"3 3"}),k.jsx(bf,{dataKey:"metric_date",tickFormatter:p=>cr(qn(p),"MM/dd")}),k.jsx(wf,{}),k.jsx(Ar,{labelFormatter:p=>cr(qn(p),"MMM dd, yyyy")}),k.jsx(Ol,{type:"monotone",dataKey:"avg_variance",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Avg Variance %"})]})}):k.jsx("p",{className:"text-center text-muted-foreground py-12",children:"No trend data available"})})]}),h.stores_requiring_action>0&&k.jsxs(mt,{className:"border-warning",children:[k.jsx(Un,{children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Mc,{className:"w-5 h-5 text-warning"}),k.jsx(Bn,{children:"Action Required"})]})}),k.jsx(gt,{children:k.jsxs("p",{className:"text-sm",children:[k.jsx("strong",{children:h.stores_requiring_action})," store",h.stores_requiring_action!==1?"s":""," require immediate attention. Review critical stores above and take necessary actions."]})})]})]})}function Qye(){var p,g;const{id:t}=bB(),e=ll(),{data:n,isLoading:r,error:i}=Fn({queryKey:["stores",t],queryFn:()=>pa.getById(t)}),{data:o}=Fn({queryKey:["stores",t,"health"],queryFn:()=>pa.getHealth(t)}),{data:a}=Fn({queryKey:["stores",t,"health-history"],queryFn:()=>pa.getHealthHistory(t,30)}),{data:s}=Fn({queryKey:["stores",t,"kpis"],queryFn:()=>pa.getKpis(t)}),{data:c}=Fn({queryKey:["stores",t,"alerts"],queryFn:()=>pa.getAlerts(t,{status:"active",limit:10})}),{data:l}=Fn({queryKey:["stores",t,"tasks"],queryFn:()=>pa.getTasks(t,{status:"pending",limit:10})}),{data:u}=Fn({queryKey:["stores",t,"calls"],queryFn:()=>pa.getAiCalls(t)}),d=M.useCallback(()=>{e.invalidateQueries({queryKey:["stores",t]})},[e,t]);if(mx(d),SI(d),r)return k.jsx(ld,{message:"Loading store details..."});if(i)return k.jsx(fg,{error:i});const f=n==null?void 0:n.data,h=(p=o==null?void 0:o.data)==null?void 0:p.snapshot,m=((g=o==null?void 0:o.data)==null?void 0:g.metrics)||[];return k.jsxs("div",{className:"space-y-6",children:[k.jsxs(nf,{to:"/",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[k.jsx(XB,{className:"w-4 h-4"}),"Back to Dashboard"]}),k.jsxs("div",{className:"flex items-start justify-between",children:[k.jsxs("div",{children:[k.jsxs("h1",{className:"text-3xl font-bold",children:[f==null?void 0:f.store_code," - ",f==null?void 0:f.name]}),k.jsxs("p",{className:"text-muted-foreground mt-1",children:[f==null?void 0:f.address,", ",f==null?void 0:f.city,", ",f==null?void 0:f.state," ",f==null?void 0:f.zip_code]}),k.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Manager: ",f==null?void 0:f.manager_name," (",f==null?void 0:f.manager_phone,")"]})]}),h&&k.jsx(Ha,{status:h.overall_status,children:h.overall_status.toUpperCase()})]}),h&&k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsx(Bn,{children:"Health Score"})}),k.jsxs(gt,{children:[k.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-4xl font-bold mb-2",children:h.health_score.toFixed(1)}),k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:k.jsx("div",{className:`h-3 rounded-full transition-all ${h.health_score>=80?"bg-success":h.health_score>=60?"bg-warning":"bg-danger"}`,style:{width:`${h.health_score}%`}})})]}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"KPI Status"}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-4 h-4 rounded-full bg-success"}),k.jsx("span",{className:"font-semibold",children:h.green_kpi_count})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-4 h-4 rounded-full bg-warning"}),k.jsx("span",{className:"font-semibold",children:h.yellow_kpi_count})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-4 h-4 rounded-full bg-danger"}),k.jsx("span",{className:"font-semibold",children:h.red_kpi_count})]})]})]}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Escalation Level"}),k.jsx(Go,{variant:h.escalation_level>=3?"danger":"warning",children:_5(h.escalation_level)})]})]}),h.action_required&&k.jsx("div",{className:"mt-4 p-4 bg-danger/10 rounded-md",children:k.jsx("p",{className:"text-sm font-medium text-danger",children:h.summary})})]})]}),k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsx(Bn,{children:"Current KPIs"})}),k.jsx(gt,{children:m.length>0?k.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:m.map(v=>k.jsxs("div",{className:"p-4 border rounded-lg",children:[k.jsxs("div",{className:"flex items-start justify-between mb-2",children:[k.jsxs("div",{children:[k.jsx("p",{className:"font-semibold",children:v.kpi_name}),k.jsx("p",{className:"text-sm text-muted-foreground",children:v.category})]}),k.jsx(Ha,{status:v.status})]}),k.jsxs("div",{className:"flex items-center gap-2 text-2xl font-bold",children:[v.value,v.variance_pct!==0&&k.jsxs("span",{className:`flex items-center text-sm ${v.variance_pct>=0?"text-success":"text-danger"}`,children:[v.variance_pct>=0?k.jsx(H0,{className:"w-4 h-4 mr-1"}):k.jsx(V0,{className:"w-4 h-4 mr-1"}),C5(v.variance_pct)]})]})]},v.kpi_code))}):k.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No KPI data available"})})]}),(a==null?void 0:a.data)&&a.data.length>0&&k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsx(Bn,{children:"Health Score History (30 Days)"})}),k.jsx(gt,{children:k.jsx(pL,{width:"100%",height:300,children:k.jsxs(C$,{data:a.data,children:[k.jsx(tT,{strokeDasharray:"3 3"}),k.jsx(bf,{dataKey:"snapshot_date",tickFormatter:v=>cr(qn(v),"MM/dd")}),k.jsx(wf,{domain:[0,100]}),k.jsx(Ar,{labelFormatter:v=>cr(qn(v),"MMM dd, yyyy")}),k.jsx(Ol,{type:"monotone",dataKey:"health_score",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Health Score"})]})})})]}),k.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx(Bn,{children:"Active Alerts"}),k.jsx(Mc,{className:"w-5 h-5 text-warning"})]})}),k.jsx(gt,{children:c!=null&&c.data&&c.data.length>0?k.jsx("div",{className:"space-y-3",children:c.data.map(v=>k.jsxs("div",{className:"p-3 border rounded-lg",children:[k.jsxs("div",{className:"flex items-start justify-between mb-1",children:[k.jsx(Ha,{status:v.severity}),k.jsx("span",{className:"text-xs text-muted-foreground",children:cr(qn(v.alert_date),"MMM dd, HH:mm")})]}),k.jsx("p",{className:"text-sm font-medium mt-2",children:v.title})]},v.id))}):k.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No active alerts"})})]}),k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx(Bn,{children:"Pending Tasks"}),k.jsx(cx,{className:"w-5 h-5 text-primary"})]})}),k.jsx(gt,{children:l!=null&&l.data&&l.data.length>0?k.jsx("div",{className:"space-y-3",children:l.data.map(v=>k.jsxs("div",{className:"p-3 border rounded-lg",children:[k.jsxs("div",{className:"flex items-start justify-between mb-1",children:[k.jsxs(Go,{variant:"warning",children:["Priority ",v.priority]}),k.jsxs("span",{className:"text-xs text-muted-foreground",children:["Due: ",cr(qn(v.due_date),"MMM dd")]})]}),k.jsx("p",{className:"text-sm font-medium mt-2",children:v.title})]},v.id))}):k.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No pending tasks"})})]})]}),(u==null?void 0:u.data)&&u.data.length>0&&k.jsxs(mt,{children:[k.jsx(Un,{children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(oI,{className:"w-5 h-5"}),k.jsx(Bn,{children:"AI Call History"})]})}),k.jsx(gt,{children:k.jsx("div",{className:"space-y-3",children:u.data.map(v=>k.jsxs("div",{className:"p-4 border rounded-lg",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx(Go,{variant:v.outcome==="acknowledged"?"success":v.outcome==="callback_requested"?"warning":"default",children:v.outcome||v.call_status}),k.jsx("span",{className:"text-sm text-muted-foreground",children:cr(qn(v.scheduled_at),"MMM dd, yyyy HH:mm")})]}),v.call_duration&&k.jsxs("p",{className:"text-sm text-muted-foreground",children:["Duration: ",v.call_duration,"s"]})]},v.id))})})]})]})}function Jye(){const t=ll(),[e,n]=M.useState("active"),[r,i]=M.useState("all"),{data:o,isLoading:a,error:s,refetch:c}=Fn({queryKey:["alerts",e,r],queryFn:()=>ny.getAll({status:e!=="all"?e:void 0,severity:r!=="all"?r:void 0,limit:50})}),l=mp({mutationFn:({id:p,acknowledged_by:g})=>ny.acknowledge(p,g),onSuccess:()=>{t.invalidateQueries({queryKey:["alerts"]})}}),u=mp({mutationFn:p=>ny.resolve(p),onSuccess:()=>{t.invalidateQueries({queryKey:["alerts"]})}}),d=M.useCallback(()=>{t.invalidateQueries({queryKey:["alerts"]})},[t]);mx(d);const f=p=>{l.mutate({id:p,acknowledged_by:"Dashboard User"})},h=p=>{u.mutate(p)};if(a)return k.jsx(ld,{message:"Loading alerts..."});if(s)return k.jsx(fg,{error:s,retry:c});const m=(o==null?void 0:o.data)||[];return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-3xl font-bold",children:"Alert Management"}),k.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor and manage store alerts"})]}),k.jsx(mt,{children:k.jsx(gt,{className:"p-4",children:k.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(iI,{className:"w-4 h-4 text-muted-foreground"}),k.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),k.jsx("div",{className:"flex gap-2",children:["all","active","acknowledged","resolved"].map(p=>k.jsx(Ni,{size:"sm",variant:e===p?"default":"outline",onClick:()=>n(p),children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-sm text-muted-foreground",children:"Severity:"}),k.jsx("div",{className:"flex gap-2",children:["all","yellow","red","critical"].map(p=>k.jsx(Ni,{size:"sm",variant:r===p?"default":"outline",onClick:()=>i(p),children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]})]})})}),k.jsx("div",{className:"space-y-4",children:m.length>0?m.map(p=>k.jsx(mt,{className:p.severity==="red"||p.severity==="critical"?"border-l-4 border-l-danger":"",children:k.jsx(gt,{className:"p-6",children:k.jsxs("div",{className:"flex items-start justify-between gap-4",children:[k.jsxs("div",{className:"flex-1",children:[k.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[k.jsx(Ha,{status:p.severity}),k.jsx(Ha,{status:p.status,children:p.status}),p.escalation_level>0&&k.jsxs(Go,{variant:"warning",children:["Level ",p.escalation_level]})]}),k.jsx("h3",{className:"text-lg font-semibold mb-2",children:p.title}),k.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:p.message}),p.store&&k.jsxs(nf,{to:`/stores/${p.store.id}`,className:"inline-flex items-center text-sm text-primary hover:underline mb-4",children:[p.store.store_code," - ",p.store.name]}),k.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[k.jsxs("span",{children:["Created: ",cr(qn(p.alert_date),"MMM dd, yyyy HH:mm")]}),p.acknowledged_at&&k.jsxs("span",{children:["Acknowledged: ",cr(qn(p.acknowledged_at),"MMM dd, HH:mm"),p.acknowledged_by&&` by ${p.acknowledged_by}`]}),p.expires_at&&k.jsxs("span",{children:["Expires: ",cr(qn(p.expires_at),"MMM dd, HH:mm")]})]})]}),p.status==="active"&&k.jsxs("div",{className:"flex flex-col gap-2",children:[p.requires_acknowledgment&&k.jsxs(Ni,{size:"sm",onClick:()=>f(p.id),disabled:l.isPending,children:[k.jsx(rI,{className:"w-4 h-4 mr-2"}),"Acknowledge"]}),k.jsxs(Ni,{size:"sm",variant:"outline",onClick:()=>h(p.id),disabled:u.isPending,children:[k.jsx(sI,{className:"w-4 h-4 mr-2"}),"Resolve"]})]})]})})},p.id)):k.jsx(mt,{children:k.jsxs(gt,{className:"p-12 text-center",children:[k.jsx(Mc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),k.jsx("p",{className:"text-muted-foreground",children:"No alerts found matching the selected filters"})]})})})]})}function Zye(){const t=ll(),[e,n]=M.useState("pending"),[r,i]=M.useState("all"),{data:o,isLoading:a,error:s,refetch:c}=Fn({queryKey:["tasks",e,r],queryFn:()=>ry.getAll({status:e!=="all"?e:void 0,priority:r!=="all"?r:void 0,limit:50})}),l=mp({mutationFn:({id:m,completed_by:p,outcome:g})=>ry.complete(m,p,g),onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]})}}),u=mp({mutationFn:({id:m,status:p})=>ry.updateStatus(m,p),onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]})}}),d=m=>{const p=prompt("Enter completion notes (optional):");l.mutate({id:m,completed_by:"Dashboard User",outcome:p||"Task completed via dashboard"})},f=(m,p)=>{u.mutate({id:m,status:p})};if(a)return k.jsx(ld,{message:"Loading tasks..."});if(s)return k.jsx(fg,{error:s,retry:c});const h=(o==null?void 0:o.data)||[];return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-3xl font-bold",children:"Task Management"}),k.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and manage store tasks"})]}),k.jsx(mt,{children:k.jsx(gt,{className:"p-4",children:k.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(iI,{className:"w-4 h-4 text-muted-foreground"}),k.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),k.jsx("div",{className:"flex gap-2",children:["all","pending","in_progress","completed"].map(m=>k.jsx(Ni,{size:"sm",variant:e===m?"default":"outline",onClick:()=>n(m),children:m.split("_").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ")},m))})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-sm text-muted-foreground",children:"Priority:"}),k.jsx("div",{className:"flex gap-2",children:["all","1","2","3","4","5"].map(m=>k.jsx(Ni,{size:"sm",variant:r===m?"default":"outline",onClick:()=>i(m),children:m==="all"?"All":`P${m}`},m))})]})]})})}),k.jsx("div",{className:"space-y-4",children:h.length>0?h.map(m=>{const p=m.due_date&&Nye(qn(m.due_date))&&m.status!=="completed";return k.jsx(mt,{className:`${p?"border-l-4 border-l-danger":m.priority<=2?"border-l-4 border-l-warning":""}`,children:k.jsx(gt,{className:"p-6",children:k.jsxs("div",{className:"flex items-start justify-between gap-4",children:[k.jsxs("div",{className:"flex-1",children:[k.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[k.jsxs(Go,{variant:m.priority===1?"danger":m.priority<=3?"warning":"default",children:["Priority ",m.priority]}),k.jsx(Ha,{status:m.status,children:m.status.replace("_"," ")}),p&&k.jsx(Go,{variant:"danger",children:"Overdue"})]}),k.jsx("h3",{className:"text-lg font-semibold mb-2",children:m.title}),k.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:m.description}),m.store&&k.jsxs(nf,{to:`/stores/${m.store.id}`,className:"inline-flex items-center text-sm text-primary hover:underline mb-4",children:[m.store.store_code," - ",m.store.name]}),k.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[k.jsxs("span",{children:["Assigned to: ",m.assigned_to_role||"Unassigned"]}),m.due_date&&k.jsxs("span",{className:p?"text-danger font-semibold":"",children:["Due: ",cr(qn(m.due_date),"MMM dd, yyyy")]}),m.completed_at&&k.jsxs("span",{children:["Completed: ",cr(qn(m.completed_at),"MMM dd, HH:mm"),m.completed_by&&` by ${m.completed_by}`]})]})]}),m.status!=="completed"&&k.jsxs("div",{className:"flex flex-col gap-2",children:[m.status==="pending"&&k.jsx(Ni,{size:"sm",variant:"outline",onClick:()=>f(m.id,"in_progress"),disabled:u.isPending,children:"Start"}),k.jsxs(Ni,{size:"sm",onClick:()=>d(m.id),disabled:l.isPending,children:[k.jsx(rI,{className:"w-4 h-4 mr-2"}),"Complete"]})]})]})})},m.id)}):k.jsx(mt,{children:k.jsxs(gt,{className:"p-12 text-center",children:[k.jsx(cx,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),k.jsx("p",{className:"text-muted-foreground",children:"No tasks found matching the selected filters"})]})})})]})}function e0e(){return k.jsx(qB,{children:k.jsx(iW,{children:k.jsxs(jB,{children:[k.jsx(Ps,{path:"/",element:k.jsx(Xye,{})}),k.jsx(Ps,{path:"/stores/:id",element:k.jsx(Qye,{})}),k.jsx(Ps,{path:"/alerts",element:k.jsx(Jye,{})}),k.jsx(Ps,{path:"/tasks",element:k.jsx(Zye,{})}),k.jsx(Ps,{path:"*",element:k.jsx(NB,{to:"/",replace:!0})})]})})})}const t0e=new A3({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});Dy.createRoot(document.getElementById("root")).render(k.jsx(I.StrictMode,{children:k.jsx(R3,{client:t0e,children:k.jsx(e0e,{})})}));
